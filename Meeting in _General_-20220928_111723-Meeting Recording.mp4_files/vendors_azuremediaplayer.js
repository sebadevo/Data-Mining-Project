(window.webpackJsonp_name_=window.webpackJsonp_name_||[]).push([[645],{2101:function(e,t,n){(function(e,t,n,a){var r;function o(e){var t;for(t=[],i=0,len=e.length;i<len;i+=1)t.push(e[i].isRoot?"root":e[i].name);var n=function(e,t){var n;if(null!==e&&null!==t)for(n in e)e.hasOwnProperty(n)&&(t.hasOwnProperty(n)||(t[n]=e[n]))},a=function(e,t,a){var i,r,o,s,c;if(null!==e&&0!==e.length)for(i=0,r=e.length;r>i;i+=1)o=e[i],t.hasOwnProperty(o.name)&&(a.hasOwnProperty(o.name)?o.merge&&(s=t[o.name],c=a[o.name],"object"==typeof s&&"object"==typeof c?n(s,c):a[o.name]=null!=o.mergeFunction?o.mergeFunction(s,c):s+c):a[o.name]=t[o.name])},r=function(e,t){var n,i,o,s,c,d,l,u=e;if(null!==u.children&&0!==u.children.length)for(n=0,i=u.children.length;i>n;n+=1)if(d=u.children[n],t.hasOwnProperty(d.name))if(d.isArray)for(o=0,s=(c=t[d.name+"_asArray"]).length;s>o;o+=1)l=c[o],a(u.properties,t,l),r(d,l);else l=t[d.name],a(u.properties,t,l),r(d,l)},o=function(n){var a,i,s,c,d,l,u;if(null===n)return n;if("object"!=typeof n)return n;for(a=0,i=t.length;i>a;a+=1)"root"===t[a]&&(d=e[a],r(d,l=n));for(c in n)if(n.hasOwnProperty(c)){if(-1!==(s=t.indexOf(c)))if((d=e[s]).isArray)for(a=0,i=(u=n[c+"_asArray"]).length;i>a;a+=1)l=u[a],r(d,l);else l=n[c],r(d,l);o(n[c])}return n};return{run:o}}function s(e,t,n){function a(e){var t=e.localName;return null==t&&(t=e.baseName),(null==t||""==t)&&(t=e.nodeName),t}function i(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;"):e}function r(i){if(i.nodeType==_.DOCUMENT_NODE){var o,s,c=i.firstChild;for(o=0,s=i.childNodes.length;s>o;o+=1)if(i.childNodes[o].nodeType!==_.COMMENT_NODE){c=i.childNodes[o];break}return n?d=r(c):(d={})[f=a(c)]=r(c),d}if(i.nodeType==_.ELEMENT_NODE){var d;(d=new Object).__cnt=0;for(var l=i.childNodes,u=0;u<l.length;u++){var f=a(c=l.item(u));if(d.__cnt++,null==d[f])d[f]=r(c),d[f+"_asArray"]=new Array(1),d[f+"_asArray"][0]=d[f];else{if(null!=d[f]&&!(d[f]instanceof Array)){var p=d[f];d[f]=new Array,d[f][0]=p,d[f+"_asArray"]=d[f]}for(var h=0;null!=d[f][h];)h++;d[f][h]=r(c)}}for(var b=0;b<i.attributes.length;b++){var g=i.attributes.item(b);d.__cnt++;for(var v=g.value,y=0,S=e.length;S>y;y++){var D=e[y];D.test.call(this,g.value)&&(v=D.converter.call(this,g.value),d[t+g.name+D.suffix()]=v,v=null)}v&&(d[t+g.name]=v)}var I=function(e){return e.prefix}(i);return null!=I&&""!=I&&(d.__cnt++,d.__prefix=I),1==d.__cnt&&null!=d["#text"]&&(d=d["#text"]),null!=d["#text"]&&(d.__text=d["#text"],m&&(d.__text=function(e){return e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/")}(d.__text)),delete d["#text"],delete d["#text_asArray"]),null!=d["#cdata-section"]&&(d.__cdata=d["#cdata-section"],delete d["#cdata-section"],delete d["#cdata-section_asArray"]),(null!=d.__text||null!=d.__cdata)&&(d.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),d}return i.nodeType==_.TEXT_NODE||i.nodeType==_.CDATA_SECTION_NODE?i.nodeValue:i.nodeType==_.COMMENT_NODE?null:void 0}function o(e,t,n,a){var i="<"+(null!=e&&null!=e.__prefix?e.__prefix+":":"")+t;if(null!=n)for(var r=0;r<n.length;r++){var o=n[r],s=e[o];i+=" "+o.substr(1)+"='"+s+"'"}return i+(a?"/>":">")}function s(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function c(e,t){return!!(function(e,t){return-1!==e.indexOf(t,e.length-t.length)}(t.toString(),"_asArray")||0==t.toString().indexOf("_")||e[t]instanceof Function)}function d(e){var t=0;if(e instanceof Object)for(var n in e)c(e,n)||t++;return t}function l(e){var t=[];if(e instanceof Object)for(var n in e)-1==n.toString().indexOf("__")&&0==n.toString().indexOf("_")&&t.push(n);return t}function u(e){var t="";return e instanceof Object?t+=function(e){var t="";return null!=e.__cdata&&(t+="<![CDATA["+e.__cdata+"]]>"),null!=e.__text&&(t+=m?i(e.__text):e.__text),t}(e):null!=e&&(t+=m?i(e):e),t}function f(e,t,n){var a="";if(0==e.length)a+=o(e,t,n,!0);else for(var i=0;i<e.length;i++)a+=o(e[i],t,l(e[i]),!1),a+=p(e[i]),a+=s(e[i],t);return a}function p(e){var t="";if(d(e)>0)for(var n in e)if(!c(e,n)){var a=e[n],i=l(a);null==a||null==a?t+=o(a,n,i,!0):a instanceof Object?a instanceof Array?t+=f(a,n,i):d(a)>0||null!=a.__text||null!=a.__cdata?(t+=o(a,n,i,!1),t+=p(a),t+=s(a,n)):t+=o(a,n,i,!0):(t+=o(a,n,i,!1),t+=u(a),t+=s(a,n))}return t+u(e)}null==t&&(t="_"),null==n&&(n=!1);var m=!1,_={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};this.parseXmlString=function(e){var t;return window.DOMParser?t=(new window.DOMParser).parseFromString(e,"text/xml"):(0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),(t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e)),t},this.xml2json=function(e){return r(e)},this.xml_str2json=function(e){var t=this.parseXmlString(e);return this.xml2json(t)},this.json2xml_str=function(e){return p(e)},this.json2xml=function(e){var t=this.json2xml_str(e);return this.parseXmlString(t)},this.getVersion=function(){return"1.0.11"},this.escapeMode=function(e){m=e}}(function(e){"use strict";function t(e,t,o){if(d&&i>=t)d(l,t,a[e]+": "+o);else{var u=o.scrubUserInfo&&o.scrubUserInfo()||o,f=new Date(Date.now());if(i>=t&&r[e]){var p="["+f.getHours()+":"+f.getMinutes()+":"+(f.getSeconds()+f.getMilliseconds()/1e3).toFixed(3)+"] "+n[t]+": "+a[e]+": "+u;s&&(c+="\n"+p)}}}!function(e){e[e.none=0]="none",e[e.error=1]="error",e[e.warning=2]="warning",e[e.verbose=3]="verbose"}(e.Level||(e.Level={}));var n=e.Level;!function(e){e[e.workflowSequencer=0]="workflowSequencer",e[e.workflowCoordinator=1]="workflowCoordinator",e[e.htmlAdapter=2]="htmlAdapter",e[e.videoElementAdapter=3]="videoElementAdapter",e[e.manifestParser=4]="manifestParser",e[e.httpDataRetriever=5]="httpDataRetriever",e[e.dashUrlFormatter=6]="dashUrlFormatter",e[e.azureHTML5=7]="azureHTML5",e[e.heuristics=8]="heuristics",e[e.segmentLocator=9]="segmentLocator",e[e.mediaParser=10]="mediaParser",e[e.mp4Parser=11]="mp4Parser",e[e.encrypted=12]="encrypted",e[e.common=13]="common",e[e.functionalTest=14]="functionalTest",e[e.ad=15]="ad",e[e.ttml=16]="ttml",e[e.context=17]="context",e[e.moduleGroup=18]="moduleGroup",e[e.bandwidthTracker=19]="bandwidthTracker",e[e.max=20]="max"}(e.Area||(e.Area={}));var a=e.Area;e.verbose=function(e,n){t(e,3,n)},e.warning=function(e,n){t(e,2,n)},e.error=function(e,n){t(e,1,n)},e.setConsoleOutputByLevel=function(e){i=e},e.enableConsoleOutputByArea=function(e){null==e?r.forEach(function(e,t,n){n[t]=!0}):r[e]=!0},e.disableConsoleOutputByArea=function(e){null==e?r.forEach(function(e,t,n){n[t]=!1}):r[e]=!1},e.enableMemoryLog=function(e){void 0===e&&(e=!0),s=e},e.getMemoryLog=function(e){void 0===e&&(e=!0);var t=c;return e&&(c=""),t},e.setLoggerFunction=function(e,t){d=e,l=t};for(var i=0,r=[],o=0;20>o;o++)r.push(!1);var s=!1,c="",d=void 0,l=null;e.enableConsoleOutputByArea(),e.setConsoleOutputByLevel(1)})((r=f||(f={})).Log||(r.Log={})),r.Log,Dash=function(){"use strict";return{modules:{},dependencies:{},vo:{},di:{}}}(),Dash.dependencies.DashParser=function(){"use strict";var e=/^P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,t=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})([0-9]{2}))?/,n=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,a=[{type:"duration",test:function(t){return e.test(t)},converter:function(t){var n=e.exec(t),a=31536e3*parseFloat(n[2]||0)+2592e3*parseFloat(n[4]||0)+86400*parseFloat(n[6]||0)+3600*parseFloat(n[8]||0)+60*parseFloat(n[10]||0)+parseFloat(n[12]||0);return parseFloat(a.toFixed(9))},suffix:function(){return""}},{type:"datetime",test:function(e){return t.test(e)},converter:function(e){var n,a=t.exec(e);if(n=Date.UTC(parseInt(a[1],10),parseInt(a[2],10)-1,parseInt(a[3],10),parseInt(a[4],10),parseInt(a[5],10),a[6]&&parseInt(a[6],10)||0,a[7]&&1e3*parseFloat(a[7])||0),a[9]&&a[10]){var i=60*parseInt(a[9],10)+parseInt(a[10],10);n+=("+"===a[8]?-1:1)*i*60*1e3}return new Date(n)},suffix:function(){return""}},{type:"numeric",test:function(e){return n.test(e)},converter:function(e){return parseFloat(e)},suffix:function(){return""}},{type:"numeric",test:function(e){return n.test(e)},converter:function(e){return e},suffix:function(){return"_str"}}];return{debug:void 0,errHandler:void 0,parse:function(e,t){var n,i=new s(a,"",!0),r=new o(function(){var e=[];return e.push(function(){var e,t,n,a;return a=[{name:"profiles",merge:!1},{name:"width",merge:!1},{name:"height",merge:!1},{name:"sar",merge:!1},{name:"frameRate",merge:!1},{name:"audioSamplingRate",merge:!1},{name:"mimeType",merge:!1},{name:"segmentProfiles",merge:!1},{name:"codecs",merge:!1},{name:"maximumSAPPeriod",merge:!1},{name:"startsWithSap",merge:!1},{name:"maxPlayoutRate",merge:!1},{name:"codingDependency",merge:!1},{name:"scanType",merge:!1},{name:"FramePacking",merge:!0},{name:"AudioChannelConfiguration",merge:!0},{name:"ContentProtection",merge:!0}],(e={}).name="AdaptationSet",e.isRoot=!1,e.isArray=!0,e.parent=null,e.children=[],e.properties=a,(t={}).name="Representation",t.isRoot=!1,t.isArray=!0,t.parent=e,t.children=[],t.properties=a,e.children.push(t),(n={}).name="SubRepresentation",n.isRoot=!1,n.isArray=!0,n.parent=t,n.children=[],n.properties=a,t.children.push(n),e}()),e.push(function(){var e,t,n,a;return a=[{name:"SegmentBase",merge:!0},{name:"SegmentTemplate",merge:!0},{name:"SegmentList",merge:!0}],(e={}).name="Period",e.isRoot=!1,e.isArray=!0,e.parent=null,e.children=[],e.properties=a,(t={}).name="AdaptationSet",t.isRoot=!1,t.isArray=!0,t.parent=e,t.children=[],t.properties=a,e.children.push(t),(n={}).name="Representation",n.isRoot=!1,n.isArray=!0,n.parent=t,n.children=[],n.properties=a,t.children.push(n),e}()),e.push(function(){var e,t,n,a,i;return i=[{name:"BaseURL",merge:!0,mergeFunction:function(e,t){return 0===t.indexOf("http://")?t:e+t}}],(e={}).name="mpd",e.isRoot=!0,e.isArray=!0,e.parent=null,e.children=[],e.properties=i,(t={}).name="Period",t.isRoot=!1,t.isArray=!0,t.parent=null,t.children=[],t.properties=i,e.children.push(t),(n={}).name="AdaptationSet",n.isRoot=!1,n.isArray=!0,n.parent=t,n.children=[],n.properties=i,t.children.push(n),(a={}).name="Representation",a.isRoot=!1,a.isArray=!0,a.parent=n,a.children=[],a.properties=i,n.children.push(a),e}()),e}()),c=new Date,d=null,l=null;try{n=i.xml_str2json(e),d=new Date,n.hasOwnProperty("BaseURL")?(n.BaseURL=n.BaseURL_asArray[0],0!==n.BaseURL.toString().indexOf("http")&&(n.BaseURL=t+n.BaseURL)):n.BaseURL=t,r.run(n),l=new Date,this.debug.log("Parsing complete: ( xml2json: "+(d.getTime()-c.getTime())+"ms, objectiron: "+(l.getTime()-d.getTime())+"ms, total: "+(l.getTime()-c.getTime())/1e3+"s)")}catch(t){return this.errHandler.manifestError("parsing the manifest failed","parse",e),null}return n}}},Dash.dependencies.DashParser.prototype={constructor:Dash.dependencies.DashParser},function(){var n,a,i,r,o;r={},o={},n=function(e,t,n){r[e]={deps:t,callback:n}},i=a=function(e){function t(t){if("."!==t.charAt(0))return t;for(var n=t.split("/"),a=e.split("/").slice(0,-1),i=0,r=n.length;r>i;i++){var o=n[i];if(".."===o)a.pop();else{if("."===o)continue;a.push(o)}}return a.join("/")}if(i._eak_seen=r,o[e])return o[e];if(o[e]={},!r[e])throw new Error("Could not find module "+e);for(var n,s=r[e],c=s.deps,d=s.callback,l=[],u=0,f=c.length;f>u;u++)l.push("exports"===c[u]?n={}:a(t(c[u])));var p=d.apply(this,l);return o[e]=n||p},n("promise/all",["./utils","exports"],function(e,t){"use strict";var n=e.isArray,a=e.isFunction;t.all=function(e){if(!n(e))throw new TypeError("You must pass an array to all.");return new this(function(t,n){function i(e){return function(t){r(e,t)}}function r(e,n){s[e]=n,0==--c&&t(s)}var o,s=[],c=e.length;0===c&&t([]);for(var d=0;d<e.length;d++)(o=e[d])&&a(o.then)?o.then(i(d),n):r(d,o)})}}),n("promise/asap",["exports"],function(n){"use strict";function a(){for(var e=0;e<c.length;e++){var t=c[e];(0,t[0])(t[1])}c=[]}var i,r="undefined"!=typeof window?window:{},o=r.MutationObserver||r.WebKitMutationObserver,s=void 0!==t?t:void 0===this?window:this,c=[];i=void 0!==e&&"[object process]"==={}.toString.call(e)?function(){e.nextTick(a)}:o?function(){var e=0,t=new o(a),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}():function(){s.setTimeout(a,1)},n.asap=function(e,t){1===c.push([e,t])&&i()}}),n("promise/config",["exports"],function(e){"use strict";var t={instrument:!1};e.config=t,e.configure=function(e,n){return 2!==arguments.length?t[e]:void(t[e]=n)}}),n("promise/polyfill",["./promise","./utils","exports"],function(e,n,a){"use strict";var i=e.Promise,r=n.isFunction;a.polyfill=function(){var e;"Promise"in(e=void 0!==t?t:"undefined"!=typeof window&&window.document?window:self)&&"resolve"in e.Promise&&"reject"in e.Promise&&"all"in e.Promise&&"race"in e.Promise&&function(){var t;return new e.Promise(function(e){t=e}),r(t)}()||(e.Promise=i)}}),n("promise/promise",["./config","./utils","./all","./race","./resolve","./reject","./asap","exports"],function(e,t,n,a,i,r,o,s){"use strict";function c(e){if(!y(e))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof c))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._subscribers=[],function(e,t){function n(e){_(t,e)}try{e(function(e){p(t,e)},n)}catch(e){n(e)}}(e,this)}function d(e,t,n,a){var i,r,o,s,c=y(n);if(c)try{i=n(a),o=!0}catch(e){s=!0,r=e}else i=a,o=!0;f(t,i)||(c&&o?p(t,i):s?_(t,r):e===E?p(t,i):e===A&&_(t,i))}function l(e,t,n,a){var i=e._subscribers,r=i.length;i[r]=t,i[r+E]=n,i[r+A]=a}function u(e,t){for(var n=e._subscribers,a=e._detail,i=0;i<n.length;i+=3)d(t,n[i],n[i+t],a);e._subscribers=null}function f(e,t){var n,a=null;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(v(t)&&(a=t.then,y(a)))return a.call(t,function(a){return!!n||(n=!0,void(t!==a?p(e,a):m(e,a)))},function(t){return!!n||(n=!0,void _(e,t))}),!0}catch(t){return n||_(e,t),!0}return!1}function p(e,t){e===t?m(e,t):f(e,t)||m(e,t)}function m(e,t){e._state===O&&(e._state=w,e._detail=t,g.async(h,e))}function _(e,t){e._state===O&&(e._state=w,e._detail=t,g.async(b,e))}function h(e){u(e,e._state=E)}function b(e){u(e,e._state=A)}var g=e.config,v=(e.configure,t.objectOrFunction),y=t.isFunction,S=(t.now,n.all),D=a.race,I=i.resolve,x=r.reject,C=o.asap;g.async=C;var O=void 0,w=0,E=1,A=2;c.prototype={constructor:c,_state:void 0,_detail:void 0,_subscribers:void 0,then:function(e,t){var n=this,a=new this.constructor(function(){});if(this._state){var i=arguments;g.async(function(){d(n._state,a,i[n._state-1],n._detail)})}else l(this,a,e,t);return a},catch:function(e){return this.then(null,e)}},c.all=S,c.race=D,c.resolve=I,c.reject=x,s.Promise=c}),n("promise/race",["./utils","exports"],function(e,t){"use strict";var n=e.isArray;t.race=function(e){if(!n(e))throw new TypeError("You must pass an array to race.");return new this(function(t,n){for(var a,i=0;i<e.length;i++)(a=e[i])&&"function"==typeof a.then?a.then(t,n):t(a)})}}),n("promise/reject",["exports"],function(e){"use strict";e.reject=function(e){return new this(function(t,n){n(e)})}}),n("promise/resolve",["exports"],function(e){"use strict";e.resolve=function(e){return e&&"object"==typeof e&&e.constructor===this?e:new this(function(t){t(e)})}}),n("promise/utils",["exports"],function(e){"use strict";function t(e){return"function"==typeof e}var n=Date.now||function(){return(new Date).getTime()};e.objectOrFunction=function(e){return t(e)||"object"==typeof e&&null!==e},e.isFunction=t,e.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},e.now=n}),a("promise/polyfill").polyfill()}();var c={subarray:function(e,t){return this.slice(e,t)},set_:function(e,t){arguments.length<2&&(t=0);for(var n=0,a=e.length;a>n;++n,++t)this[t]=255&e[n]},TypedArray:function(e){var t;if("number"==typeof e){t=new Array(e);for(var n=0;e>n;++n)t[n]=0}else t=e.slice(0);return t.subarray=c.subarray,t.buffer=t,t.byteLength=t.length,t.set=c.set_,"object"==typeof e&&e.buffer&&(t.buffer=e.buffer),t}};void 0===window.Uint8Array&&(window.Uint8Array=c.TypedArray),function(e){"use strict";e.CreateAzureHtml5=function(e,t,a){return new n(e,t,a)},function(e){e[e.internalErrStart=0]="internalErrStart",e[e.internalErrDisposed=0]="internalErrDisposed",e[e.internalErrSegmentNotFound=1]="internalErrSegmentNotFound",e[e.internalErrWorkflowAborted=16]="internalErrWorkflowAborted",e[e.internalErrWorkflowOutOfSync=256]="internalErrWorkflowOutOfSync",e[e.internalErrEnd=1048575]="internalErrEnd"}(e.ErrorCode||(e.ErrorCode={}));var t=(e.ErrorCode,function(){function e(){}return e.exception="exception",e.flushvideo="flushvideo",e.audiocodecchanged="audiocodecchanged",e.internalError="internalError",e}());e.InternalEventName=t;var n=function(){function n(t,n,a){this._sessionContext=new e.Context.Session(this,t,n,a),this._playerType=null,this._autoplay=!0,this._type="",this._error=null,this._dispose=!1,this._retryAttempt=!1,this._oldPlaybackRateBeforePlay=null,this._passThroughEventNames=[e.EventName.volumechange,e.EventName.ended,e.EventName.timeupdate,e.EventName.pause,e.EventName.play,e.EventName.playing,e.EventName.seeking,e.EventName.seeked,e.EventName.suspend,e.EventName.loadstart,e.EventName.loadeddata,e.EventName.ratechange,e.EventName.autoplayfailed],this._conditionalEventNames=[e.EventName.waiting,e.EventName.canplaythrough,e.EventName.error],this._registerInternalEvents(!0)}return n.prototype.setStaleDataTimeLimit=function(e){this._sessionContext.maxBufferBehindCurrentTimeInSec=e},n.prototype.dispose=function(){this._dispose=!0,this._workflowCoordinator&&(this._workflowCoordinator.dispose(),this._workflowCoordinator=null),this._sessionContext&&(this._registerVideoTagEvents(!1),this._registerInternalEvents(!1),this._sessionContext.dispose(),this._sessionContext=null),this._error=null},Object.defineProperty(n.prototype,"currentVideoStreamList",{get:function(){return this._workflowCoordinator?this._workflowCoordinator.videoStreamList:null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentAudioStreamList",{get:function(){return this._workflowCoordinator?this._workflowCoordinator.audioStreamList:null},enumerable:!0,configurable:!0}),n.prototype.setJavascriptLoader=function(e){this._sessionContext.setJavascriptLoader(e)},Object.defineProperty(n.prototype,"src",{get:function(){return this._workflowCoordinator?this._workflowCoordinator.src:this._sessionContext.videoTag.src},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentTime",{get:function(){return this._workflowCoordinator?this._workflowCoordinator.currentTime:this._sessionContext.videoTag.currentTime},set:function(t){e.Log.verbose(7,"currentTime: "+t+" sec"),this._workflowCoordinator?this._workflowCoordinator.currentTime=t:this._sessionContext.videoTag.currentTime=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentAbsoluteTime",{get:function(){return this._sessionContext.videoTag.currentTime},set:function(t){e.Log.verbose(7,"currentAbsoluteTime: "+t+" sec"),this._workflowCoordinator?this._workflowCoordinator.currentPresentationTime=t:this._sessionContext.videoTag.currentTime=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentMediaTime",{get:function(){return this._workflowCoordinator?this._workflowCoordinator.currentMediaTime:null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"presentationTimeOffsetInSec",{get:function(){return this._workflowCoordinator?this._workflowCoordinator.presentationTimeOffsetInSec:null},enumerable:!0,configurable:!0}),n.prototype.presentationTimeFromPercentageOfDvrWindow=function(e){return this._workflowCoordinator?this._workflowCoordinator.presentationTimeFromPercentageOfDvrWindow(e):null},Object.defineProperty(n.prototype,"currentDownloadBitrate",{get:function(){return this._workflowCoordinator?this._workflowCoordinator.downloadBitrate:null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentPlaybackBitrate",{get:function(){return this._workflowCoordinator?this._workflowCoordinator.playbackBitrate:null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"videoBufferData",{get:function(){return this._workflowCoordinator?this._workflowCoordinator.videoBufferData:null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"audioBufferData",{get:function(){return this._workflowCoordinator?this._workflowCoordinator.audioBufferData:null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"volume",{get:function(){return this._sessionContext.videoTag.volume},set:function(t){e.Log.verbose(7,"volume: "+t.toString());var n=t;if(NaN!==t&&null!=t){0>t?n=0:t>1&&(n=1);try{this._sessionContext.videoTag.volume=n}catch(t){e.Log.warning(7,"set volume() error: "+t)}}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"autoplay",{get:function(){return this._autoplay},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"paused",{get:function(){return this._sessionContext.videoTag.paused},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"seeking",{get:function(){return this._sessionContext.videoTag.seeking},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"ended",{get:function(){return this._sessionContext.videoTag.ended},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this._sessionContext.videoTag.height},set:function(e){this._sessionContext.videoTag.height=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"width",{get:function(){return this._sessionContext.videoTag.width},set:function(e){this._sessionContext.videoTag.width=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"videoHeight",{get:function(){return this._sessionContext.videoTag.videoHeight},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"videoWidth",{get:function(){return this._sessionContext.videoTag.videoWidth},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isFullScreen",{get:function(){return(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)===this._sessionContext.videoTag&&(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isLive",{get:function(){return!!this._sessionContext.commonPresentation&&this._sessionContext.commonPresentation.isLive},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"duration",{get:function(){return this._workflowCoordinator?this._workflowCoordinator.duration:this._sessionContext.videoTag.duration},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"buffered",{get:function(){if(this._workflowCoordinator)return this._workflowCoordinator.buffered;try{return this._sessionContext.videoTag.buffered}catch(t){return e.Log.warning(7,"buffered() error: "+t),new e.Common.TimeRangeSet}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"manifestPlayableWindowLength",{get:function(){return this._sessionContext&&this._sessionContext.commonPresentation&&this._sessionContext.commonPresentation.isLive?this._sessionContext.commonPresentation.timeShiftBufferDepth:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentPlayableWindow",{get:function(){return this._sessionContext&&this._sessionContext.commonPresentation&&this._sessionContext.commonPresentation.isLive?new e.Common.TimeRange(this._sessionContext.commonPresentation.playableWindow.startInSec,this._sessionContext.commonPresentation.playableWindow.endInSec):void 0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"playableWindowEndInSec",{get:function(){return this._sessionContext&&this._sessionContext.commonPresentation&&this._sessionContext.commonPresentation.playableWindow?this._sessionContext.commonPresentation.playableWindow.endInSec:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"segmentBoundaries",{get:function(){return this._sessionContext&&this._sessionContext.commonPresentation?this._sessionContext.commonPresentation.segmentBoundaries:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"error",{get:function(){return this._workflowCoordinator&&this._workflowCoordinator.error?this._workflowCoordinator.error:this._error},enumerable:!0,configurable:!0}),n.prototype.getWallClockTime=function(e,t,n,a,i){e=e||this.currentAbsoluteTime,t=t||!1,n=n||0,i=i||!1,null==a&&(a=!0);var r=null;if(this._sessionContext.commonPresentation){var o=this._sessionContext.commonPresentation.getWallClockTimeAtPresentationTime(e);if(o){var s=null;if(!0===t)s=this.getDetailsFromDateObject(o,"local",a,i);else{if(0!==n){var c=36e5*n;o=new Date(o.getTime()+c)}s=this.getDetailsFromDateObject(o,"utc",a,i)}if(!s||s.length<7)return null;var d=s[0],l=s[1],u=s[2],f=s[3],p=s[4],m=s[5],_=s[6];r=i?f+":"+p+":"+m+" "+_:!1===t&&0===n?d+"-"+l+"-"+u+"T"+f+":"+p+":"+m+"Z":d+"-"+l+"-"+u+"T"+f+":"+p+":"+m+this.getTimezoneTimeOffset(o,t,n)}}return r},n.prototype.getTimezoneTimeOffset=function(e,t,n){var a=!0===t?-1*e.getTimezoneOffset()/60:n,i=a%1*60;a=Math.floor(a);var r=Math.abs(a)>=10?Math.abs(a).toString():"0"+Math.abs(a).toString(),o=0===i?":00":":"+i.toString();return a>=0?"+"+r+o:"-"+r+o},n.prototype.getDetailsFromDateObject=function(e,t,n,a){if("utc"!==t&&"local"!==t)return null;var i={utc:{year:e.getUTCFullYear,month:e.getUTCMonth,day:e.getUTCDate,hours:e.getUTCHours,minutes:e.getUTCMinutes,seconds:e.getUTCSeconds},local:{year:e.getFullYear,month:e.getMonth,day:e.getDate,hours:e.getHours,minutes:e.getMinutes,seconds:e.getSeconds}},r=i[t].year.call(e).toString(),o=(i[t].month.call(e)+1).toString();o=1==o.length?"0"+o:o;var s=i[t].day.call(e).toString();s=1==s.length?"0"+s:s;var c=i[t].hours.call(e).toString();c=1==c.length?"0"+c:c;var d=i[t].minutes.call(e).toString();d=1==d.length?"0"+d:d;var l=i[t].seconds.call(e).toString();l=1==l.length?"0"+l:l;var u="";if(n&&a){var f=parseInt(c);u=12>f?"AM":"PM",c=((f+11)%12+1).toString()}return[r,o,s,c,d,l,u]},n.prototype.canPlayType=function(t){return e.PlayerType.getByPresentationType(t,this._sessionContext.videoTag)?"maybe":""},n.prototype.setSrc=function(e,t){this.setSrcInternal(e,t,!1)},n.prototype.setSrcInternal=function(t,a,i){this._registerVideoTagEvents(!1),this._playStarted=!1;var r="",o=0;return i?o=n._dtsOffsetToAddForChrome:(this._src=t,this._options=a||null,this._retryAttempt=!1),a&&a.userConfig&&!a.userConfig.allowMixedContent&&"https:"===window.location.protocol.toLowerCase()&&0===t.toLowerCase().indexOf("http:")?(r="The page was loaded over HTTPS, but the source was set to serve over HTTP. The content must be served over HTTPS. Source URL: "+t+", Page URL: "+window.location.href,e.Log.error(7,r),void this._handleError(new e.Failure.External(1048578,r))):(this._sessionContext.reset(),this._reset(a),this._playerType=e.PlayerType.getByPresentationType(this._type,this._sessionContext.videoTag),this._playerType||(e.Log.verbose(7,"Unable to determine player type by presentation type. Trying the url method..."),this._playerType=e.PlayerType.getByUrl(t,this._sessionContext.videoTag)),e.Log.verbose(7,"src: "+t+" autoplay: "+this._autoplay+" type: "+(this._type&&this._type.length>0?this._type:"unknown")+" player: "+(null===this._playerType?"unknown":e.PlayerDetector.Type[this._playerType])),this._workflowCoordinator&&(this._workflowCoordinator.dispose(),this._workflowCoordinator=null),1===this._playerType?(this._sessionContext.videoTag.autoplay=this._autoplay,this._sessionContext.videoTag.src=t):3===this._playerType?(this._workflowCoordinator=e.Workflow.CreateCoordinator(this._sessionContext),this._workflowCoordinator.dtsOffsetToAdd=o,this._sessionContext.videoTag.autoplay=!1,this._workflowCoordinator.autoplay=this._autoplay,this._workflowCoordinator.src=t):(e.Log.error(7,t+" not supported by AzureHtml5 Video Element"),this._handleError(new e.Failure.External(4194307,t))),void this._registerVideoTagEvents(!0))},n.prototype.play=function(){e.Log.verbose(7,"play"),this._oldPlaybackRateBeforePlay=this.playbackRate(),this._workflowCoordinator?this._workflowCoordinator.play():this._sessionContext&&this._sessionContext.videoTag&&e.Common.videoTagPlay(this._sessionContext.videoTag)},n.prototype.pause=function(){e.Log.verbose(7,"pause"),this._workflowCoordinator?this._workflowCoordinator.pause():this._sessionContext&&this._sessionContext.videoTag&&this._sessionContext.videoTag.pause()},n.prototype.requestFullscreen=function(){e.Log.verbose(7,"requestFullscreen");var t=!1;if(!this.isFullScreen){var n=this._sessionContext.videoTag;n.requestFullscreen?(t=!0,n.requestFullscreen()):n.msRequestFullscreen?(t=!0,n.msRequestFullscreen()):n.webkitRequestFullscreen?(t=!0,n.webkitRequestFullscreen()):n.mozRequestFullScreen&&(t=!0,n.mozRequestFullScreen()),t&&this._sessionContext.eventMgr.dispatchEvent(e.EventName.fullscreenchange)}},n.prototype.exitFullscreen=function(){e.Log.verbose(7,"exitFullscreen");var t=!1;this.isFullScreen&&(document.exitFullscreen?(t=!0,document.exitFullscreen()):document.webkitExitFullscreen?(t=!0,document.webkitExitFullscreen()):document.mozCancelFullScreen?(t=!0,document.mozCancelFullScreen()):document.msExitFullscreen&&(t=!0,document.msExitFullscreen()),t&&this._sessionContext.eventMgr.dispatchEvent(e.EventName.fullscreenchange))},n.prototype.playbackRate=function(){return this._sessionContext.videoTag.playbackRate},n.prototype.setPlaybackRate=function(e){this._sessionContext.videoTag.playbackRate=e},n.prototype.addEventListener=function(e,t,n){void 0===n&&(n=null),this._sessionContext.eventMgr.addHandler(e,t,n)},n.prototype.removeEventListener=function(e,t){this._sessionContext.eventMgr.removeHandler(e,t)},n.prototype.setXmlHttpRequestFactory=function(e){this._sessionContext.setXmlHttpRequestFactory(e)},n.prototype.restartCheckMediaWorkflowIfNeeded=function(){this._workflowCoordinator.restartCheckMediaWorkflowIfNeeded()},n.prototype._reset=function(e){this._playerType=null,this._autoplay=!0,this._type="",this._error=null,e&&(this._type=e.type,"autoPlay"in e&&(this._autoplay=e.autoPlay),"authenticationTokens"in e&&(this._sessionContext.authenticationTokens=e.authenticationTokens),e.userConfig&&(this._sessionContext.setUserConfig(e.userConfig),this._sessionContext.isAudioOnlyMode=e.userConfig.isAudioOnlyMode),e.headers&&this._sessionContext.setRequestedDownloadHeaders(e.headers))},n.prototype._registerVideoTagEvents=function(t){function n(t){r._dispose||r._error||r._workflowCoordinator&&r._workflowCoordinator.error||(t.type&&(t.type===e.EventName.play||t.type===e.EventName.playing)&&(r._playStarted=!0,null!==r._oldPlaybackRateBeforePlay&&r._oldPlaybackRateBeforePlay!==r.playbackRate()&&(e.Log.verbose(7,"playback rate changed from: "+r._oldPlaybackRateBeforePlay+" to: "+r.playbackRate()+". Restoring the original playback rate!"),r.setPlaybackRate(r._oldPlaybackRateBeforePlay),r._oldPlaybackRateBeforePlay=null)),t.type===e.EventName.timeupdate&&r._workflowCoordinator&&r._workflowCoordinator.pendingPlay?e.Log.verbose(7,"skip dispatching event: "+t.type+" currentTime: "+r._sessionContext.videoTag.currentTime+" since work flow is in pending play state"):(e.Log.verbose(7,"dispatching event: "+t.type+" currentTime: "+r._sessionContext.videoTag.currentTime),r._sessionContext.eventMgr.dispatchEvent(t.type)))}function a(t){if(!r._dispose&&!(r._error||r._workflowCoordinator&&r._workflowCoordinator.error))if(e.EventName.error===t.type){if(r._workflowCoordinator&&(!r._workflowCoordinator.isMediaSourceInitialized()||r._sessionContext.videoTag.readyState===HTMLMediaElement.HAVE_NOTHING))return void e.Log.warning(7,"Ignoring video element error since state is HAVE_NOTHING "+e.Failure.mediaErrorToString(r._sessionContext.videoTag.error));e.Log.verbose(7,"that._sessionContext.videoTag.readyState = "+r._sessionContext.videoTag.readyState);var n=new e.Failure.External;n.translateMediaError(r._sessionContext.videoTag.error),r._handleError(n)}else e.EventName.waiting===t.type&&r._workflowCoordinator&&r._workflowCoordinator.restartCheckMediaWorkflowIfNeeded(),r._workflowCoordinator||(e.Log.verbose(7,"dispatching event: "+t.type),r._sessionContext.eventMgr.dispatchEvent(t.type))}var i=this,r=this;this._passThroughEventNames.forEach(function(e){t?i._sessionContext.videoTag.addEventListener(e,n):i._sessionContext.videoTag.removeEventListener(e,n)}),this._conditionalEventNames.forEach(function(e){t?i._sessionContext.videoTag.addEventListener(e,a):i._sessionContext.videoTag.removeEventListener(e,a)})},n.prototype.onError=function(t,n,a,i,r){this._handleError(new e.Failure.External(t,n,a,i,r))},n.prototype._registerInternalEvents=function(n){function a(t){if(!r._dispose){var n=t&&t.message;try{n=(n||"")+(t&&JSON.stringify(t))||""}catch(e){}e.Log.error(7,"Dispatching internal error "+n),r._workflowCoordinator&&r._playStarted&&!r.paused&&r._workflowCoordinator.pause(),r._sessionContext.eventMgr.dispatchEvent(e.EventName.error)}}function i(t){r._dispose||t.message&&!r._checkErrorAndRetryPlayback()&&e.Util.setTimeout(function(){var n,a=t;n=a.message&&a.message.message&&a.message.stack?a.message.message+", "+a.message.stack:a.message,e.Log.error(7,"Throwing error "+n),r._handleError(new e.Failure.External(16711680,n))},0)}var r=this;n?(this._sessionContext.eventMgr.addHandler(t.exception,i,this),this._sessionContext.eventMgr.addHandler(t.internalError,a,this)):(this._sessionContext.eventMgr.removeHandler(t.exception,i),this._sessionContext.eventMgr.removeHandler(t.internalError,a))},n.prototype._checkErrorAndRetryPlayback=function(){return!(this._playStarted||!e.Common.isChrome||this._retryAttempt||(e.Log.verbose(7,"Retrying Playback with Adjusted DTS"),this._retryAttempt=!0,this.setSrcInternal(this._src,this._options,!0),0))},n.prototype._handleError=function(t){if(!(this._checkErrorAndRetryPlayback()||this._workflowCoordinator&&this._workflowCoordinator.error)){if(this._error=t,this._workflowCoordinator){var n=new Error;e.Log.verbose(7,"Disposing WorkflowCoordinator b/c "+t.toString()+", "+n.stack),this._workflowCoordinator.dispose(),this._workflowCoordinator=null}e.Log.verbose(7,"dispatching event: "+e.EventName.error),this._sessionContext.eventMgr.dispatchEvent(e.EventName.error)}},n._dtsOffsetToAddForChrome=.1,n}()}(f||(f={}));var d=this.__extends||function(e,t){function n(){this.constructor=e}for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);n.prototype=t.prototype,e.prototype=new n};!function(e){!function(t){"use strict";var n=function(){function n(){this._disposed=!1,this._bandwidthTracker=null,this._buffer=null,this._downloadRequested=null,this._downloadCompleted=null,this._downloadDecrypted=null,this._downloadFailed=null,this._downloadTracker=null,this._eventMgr=new e.Events.Manager(null,!1)}return n.prototype.dispose=function(){this._disposed||(this._disposed=!0,this._bandwidthTracker=null,this._buffer=null,this._downloadRequested=null,this._downloadCompleted=null,this._downloadDecrypted=null,this._downloadFailed=null,this._eventMgr&&(this._eventMgr.dispose(),this._eventMgr=null),this._downloadTracker&&(this._downloadTracker.dispose(),this._downloadTracker=null))},Object.defineProperty(n.prototype,"bufferLevel",{get:function(){return this._disposed||!this._buffer?null:this._buffer.getBufferedAheadOfCurrentTimeInSec()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"perceivedBandwidth",{get:function(){return this._disposed||!this._bandwidthTracker?null:this._bandwidthTracker.perceivedBandwidthBps()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"usedStoredBandwidth",{get:function(){return this._disposed||!this._bandwidthTracker?null:this._bandwidthTracker.usedStoredBandwidth()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"storedBandwidth",{get:function(){return this._disposed||!this._bandwidthTracker?null:this._bandwidthTracker.storedBandwidth()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"firstPerceivedBandwidth",{get:function(){return this._disposed||!this._bandwidthTracker?null:this._bandwidthTracker.firstPerceivedBandwidth()},enumerable:!0,configurable:!0}),n.prototype.updateBuffer=function(e){this._buffer=e},n.prototype.updateBandwidthTracker=function(e){this._bandwidthTracker=e,this._downloadTracker&&this._downloadTracker.dispose(),this._downloadTracker=new t.DownloadTracker},n.prototype.getPlaybackBitrate=function(e){return this._disposed||!this._downloadTracker?-1:this._downloadTracker.findBitrate(e)},Object.defineProperty(n.prototype,"downloadRequested",{get:function(){return this._downloadRequested},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"downloadCompleted",{get:function(){return this._downloadCompleted},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"downloadDecrypted",{get:function(){return this._downloadDecrypted},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"downloadFailed",{get:function(){return this._downloadFailed},enumerable:!0,configurable:!0}),n.prototype.dispatchDownloadRequested=function(t){this._downloadRequested=t,this._eventMgr.dispatchEvent(e.BufferDataEventName.downloadrequested)},n.prototype.dispatchDownloadCompleted=function(t,n,a){if(this._downloadCompleted=new i(t,n,a),this._eventMgr.dispatchEvent(e.BufferDataEventName.downloadcompleted),this._downloadTracker&&null!=t.mediaTime&&(this._downloadTracker.add(t.mediaTime,t.bitrate),this._buffer.buffered&&this._buffer.buffered.length>0)){var r=this._buffer.buffered.start(0);this._downloadTracker.cleanup(r)}},n.prototype.dispatchDownloadDecrypted=function(t){this._downloadDecrypted=t,this._eventMgr.dispatchEvent(e.BufferDataEventName.downloaddecrypted)},n.prototype.dispatchDownloadFailed=function(t,n,a,i){void 0===i&&(i=""),this._downloadFailed=new r(t,n,a,i),this._eventMgr.dispatchEvent(e.BufferDataEventName.downloadfailed)},n.prototype.addEventListener=function(e,t,n){this._eventMgr.addHandler(e,t,n)},n.prototype.removeEventListener=function(e,t){this._eventMgr.removeHandler(e,t)},n}();t.BufferData=n;var a=function(){function e(e,t,n,a,i,r,o){this._url=e,this._bitrate=t,this._mediaTime=n,this._data=a,this._presentationTimeOffsetInSec=i,this._timeScale=r,this._durationInSec=o,this._measuredBandwidth=0}return Object.defineProperty(e.prototype,"url",{get:function(){return this._url},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bitrate",{get:function(){return this._bitrate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mediaTime",{get:function(){return this._mediaTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"presentationTimeOffsetInSec",{get:function(){return this._presentationTimeOffsetInSec},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timeScale",{get:function(){return this._timeScale},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"durationInSec",{get:function(){return this._durationInSec},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"measuredBandwidth",{get:function(){return this._measuredBandwidth},set:function(e){this._measuredBandwidth=e},enumerable:!0,configurable:!0}),e}();t.MediaDownload=a;var i=function(){function e(e,t,n){this._mediaDownload=e,this._measuredBw=t.bandwidthInbps,this._bytes=t.responseLengthInBytes,this._downloadTimeMs=t.totalDownloadTimeMs,this._responseHeaders=n}return Object.defineProperty(e.prototype,"mediaDownload",{get:function(){return this._mediaDownload},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"measuredBandwidth",{get:function(){return this._measuredBw},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalBytes",{get:function(){return this._bytes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalDownloadMs",{get:function(){return this._downloadTimeMs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"responseHeaders",{get:function(){return this._responseHeaders},enumerable:!0,configurable:!0}),e}();t.MediaDownloadCompleted=i;var r=function(){function e(e,t,n,a){this._mediaDownload=e,this._measuredBw=n&&n.isValid&&n.bandwidthInbps||0,this._code=t,this._message=a}return Object.defineProperty(e.prototype,"measuredBandwidth",{get:function(){return this._measuredBw},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"code",{get:function(){return this._code},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){return this._message},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mediaDownload",{get:function(){return this._mediaDownload},enumerable:!0,configurable:!0}),e}();t.MediaDownloadFailed=r;var o=function(e){function t(t,n,a,i,r,o,s,c){e.call(this,t,n,a,i,r,o,s),this._decryptionTimeInMS=c}return d(t,e),Object.defineProperty(t.prototype,"decryptionTimeInMS",{get:function(){return this._decryptionTimeInMS},enumerable:!0,configurable:!0}),t}(a);t.MediaDecrypted=o}(e.Context||(e.Context={})),e.Context}(f||(f={})),function(e){!function(t){"use strict";!function(e){e[e.proceed=0]="proceed",e[e.endOfStream=1]="endOfStream",e[e.retry=2]="retry"}(t.RequestState||(t.RequestState={})),t.RequestState,function(e){e[e.arraybuffer=0]="arraybuffer",e[e.blob=1]="blob",e[e.document=2]="document",e[e.json=3]="json",e[e.text=4]="text"}(t.ResponseType||(t.ResponseType={})),t.ResponseType,function(e){e[e.manifest=0]="manifest",e[e.mediaSegment=1]="mediaSegment",e[e.initSegment=2]="initSegment",e[e.initBandwidth=3]="initBandwidth"}(t.RequestType||(t.RequestType={}));var n=(t.RequestType,function(){function n(n,a,i,r){this.maxBufferBehindCurrentTimeInSec=-1,this._maxAudioBitrateInBps=0,this.wasLatencyHighForLastRequest=!1,this.disableSegmentQueryParamParsing=!1,this.ignoreRequestLatency=!1,this.maxActiveSegmentRequests=1,this.maxWaitTimeForFirstSegmentInMSec=0,this.minWaitTimeToGopRatioForNextSegment=.7,this.defaultGOPForMissingSegmentData=2,this.defaultBandwidthKbps=0,this.enableBandwidthPersistence=!1,this.isRaiseDownloadStartedEventEnabled=!1,this.azureHtml5=n,this.videoTag=a,this.appConfig=r,this.eventMgr=new e.Events.Manager(n,!1),this.ttmlManager=new e.Ttml.Manager(i),this.workflows=null,this.presentationUrl=null,this.presentationQueryStr=null,this.presentationJson=null,this.commonPresentation=null,this._audioStreamList=null,this._videoStreamList=null,this.isLiveToVod=!1,this.videoBufferData=new t.BufferData,this.audioBufferData=new t.BufferData,this.textBufferData=new t.BufferData,this.startPositionInSec=NaN,this.authenticationTokens={},this.heuristicSettings=new e.Settings.Heuristics,this.httpRetryPolicySettings=new e.Settings.HttpRetryPolicy,this.httpDataRetrieverSettings=new e.Settings.HttpDataRetriever,this.decryptionTracker=new e.Heuristics.DecryptionTracker,this._disposed=!1,this._xmlHttpRequestFactory=null,this.canPlayThroughSignalled=!1,this.heuristricsEngineAndStepRuleEnabled=!0}return n.prototype.dispose=function(){this._disposed||(this._disposed=!0,this.videoTag=null,this.appConfig=null,this.workflows&&this.workflows.forEach(function(e){e.dispose()}),this.workflows=null,this.presentationUrl=null,this.presentationQueryStr=null,this.presentationJson=null,this.authenticationTokens=null,this._xmlHttpRequestFactory=null,this.azureHtml5=null,this.eventMgr&&(this.eventMgr.dispose(),this.eventMgr=null),this.ttmlManager&&(this.ttmlManager=null),this.commonPresentation&&(this.commonPresentation.dispose(),this.commonPresentation=null),this.heuristicSettings=null,this.decryptionTracker=null,this.videoBufferData&&(this.videoBufferData.dispose(),this.videoBufferData=null),this.audioBufferData&&(this.audioBufferData.dispose(),this.audioBufferData=null),this.textBufferData&&(this.textBufferData.dispose(),this.textBufferData=null))},n.prototype.setPresentationQueryStr=function(e){this.presentationQueryStr=e},n.prototype.getPresentationQueryStr=function(){return this.disableSegmentQueryParamParsing?void 0:this.presentationQueryStr},Object.defineProperty(n.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),n.prototype.shouldConsiderInProgressRequestForBE=function(){return this.maxActiveSegmentRequests>1},n.prototype.reset=function(){this.presentationUrl=null,this.presentationQueryStr=null,this.presentationJson=null,this.startPositionInSec=NaN,this.authenticationTokens={},this.hybridManager=null,this.prefetchedManifestPromise=null,this.prefetchAudioInitSegmentQuality=null,this.prefetchVideoInitSegmentQuality=null,this.canPlayThroughSignalled=!1,this.commonPresentation&&(this.commonPresentation.dispose(),this.commonPresentation=null),this.heuristicSettings&&this.heuristicSettings.reset(),this.videoBufferData&&(this.videoBufferData.dispose(),this.videoBufferData=new t.BufferData),this.audioBufferData&&(this.audioBufferData.dispose(),this.audioBufferData=new t.BufferData),this.textBufferData&&(this.textBufferData.dispose(),this.textBufferData=new t.BufferData),this.ttmlManager&&this.ttmlManager.reset()},n.prototype.setRequestedDownloadHeaders=function(e){this.headers=e},n.prototype.setJavascriptLoader=function(e){this.javascriptLoader=e},n.prototype.setUserConfig=function(t){void 0!==t.maxBufferInWallClockSec&&(this.heuristicSettings.buffer.maxBufferInWallClockSec=t.maxBufferInWallClockSec),void 0!==t.maxBufferInWallClockSecForCopyCodec&&(this.heuristicSettings.buffer.maxBufferInWallClockSecForCopyCodec=t.maxBufferInWallClockSecForCopyCodec),void 0!==t.prerollPercent&&(this.heuristicSettings.buffer.prerollPercent=t.prerollPercent),void 0!==t.livePlaybackOffsetPercent&&(this.heuristicSettings.buffer.livePlaybackOffsetPercent=t.livePlaybackOffsetPercent),void 0!==t.windowSizeHeuristicsEnabled&&(this.heuristicSettings.windowSizeHeuristicsEnabled=t.windowSizeHeuristicsEnabled),void 0!==t.useBrowserWindowForWindowSizeRule&&(this.heuristicSettings.useBrowserWindowForWindowSizeRule=t.useBrowserWindowForWindowSizeRule),void 0!==t.maxStreamingResolutionLimit&&(this.heuristicSettings.maxStreamingResolutionLimit=t.maxStreamingResolutionLimit),void 0!==t.minFragmentsForBandwidthAverage&&(this.heuristicSettings.bandwidth.minBandwidthHistoryCount=t.minFragmentsForBandwidthAverage),void 0!==t.bandwidthTestWithTimeThresholdDuringLive&&(this.heuristicSettings.bandwidth.bandwidthTestWithTimeThresholdDuringLive=t.bandwidthTestWithTimeThresholdDuringLive),void 0!==t.useVariableFragmentSizeMode&&(this.heuristicSettings.bandwidth.useVariableFragmentSizeMode=t.useVariableFragmentSizeMode),void 0!==t.latencyHeuristicsEnabled&&(this.heuristicSettings.latencyHeuristicsEnabled=t.latencyHeuristicsEnabled),void 0===t.decryptionTimeHeuristicsEnabled||t.decryptionTimeHeuristicsEnabled||(this.decryptionTracker=null),void 0!==t.minBandwidthUsabilityPercent&&(this.heuristicSettings.bandwidth.minBandwidthUsabilityPercent=t.minBandwidthUsabilityPercent),void 0!==t.preFetchDataEnabled&&(this.heuristicSettings.preFetchDataEnabled=t.preFetchDataEnabled),void 0!==t.maxRetryPerSegment&&(this.httpRetryPolicySettings.maxRetryPerSegment=t.maxRetryPerSegment),void 0!==t.maxSkipSegments&&(this.httpRetryPolicySettings.maxSkipSegments=t.maxSkipSegments),void 0!==t.maxTotalRetries&&(this.httpRetryPolicySettings.maxTotalRetries=t.maxTotalRetries),void 0!==t.infiniteSegmentRetryForPreconditionFailed&&(this.httpRetryPolicySettings.infiniteSegmentRetryForPreconditionFailed=t.infiniteSegmentRetryForPreconditionFailed),void 0!==t.maxRetriesForKeyAcquireFailure&&(this.httpRetryPolicySettings.maxRetriesForKeyAcquireFailure=t.maxRetriesForKeyAcquireFailure),void 0!==t.maxWaitTimeBetweenRetriesForKeyAcquireMS&&(this.httpRetryPolicySettings.maxWaitTimeBetweenRetriesForKeyAcquireMS=t.maxWaitTimeBetweenRetriesForKeyAcquireMS),void 0!==t.retryMediaInMSec&&(this.httpRetryPolicySettings.retryMediaInMSec=t.retryMediaInMSec),void 0!==t.retryMediaServerErrorInMSec&&(this.httpRetryPolicySettings.retryMediaServerErrorInMSec=t.retryMediaServerErrorInMSec),void 0!==t.retryPresentationInMSec&&(this.httpRetryPolicySettings.retryPresentationInMSec=t.retryPresentationInMSec),void 0!==t.retryDueToNetworkErrorInMSec&&(this.httpRetryPolicySettings.retryDueToNetworkErrorInMSec=t.retryDueToNetworkErrorInMSec),void 0!==t.waitTimeForRetryOnNoDataTimeouts&&(this.httpRetryPolicySettings.waitTimeForRetryOnNoDataTimeouts=t.waitTimeForRetryOnNoDataTimeouts),void 0!==t.maxRequestTimeoutInMS&&(this.httpDataRetrieverSettings.maxTimeoutInMSecDefault=t.maxRequestTimeoutInMS),void 0!==t.audioTimeoutInMSec&&(this.httpDataRetrieverSettings.audioTimeoutInMSec=t.audioTimeoutInMSec),void 0!==t.textTimeoutInMSec&&(this.httpDataRetrieverSettings.textTimeoutInMSec=t.textTimeoutInMSec),void 0!==t.minQualityTimeoutInMSec&&(this.httpDataRetrieverSettings.minQualityTimeoutInMSec=t.minQualityTimeoutInMSec),void 0!==t.initBandwidthTimeoutInMSec&&(this.httpDataRetrieverSettings.initBandwidthTimeoutInMSec=t.initBandwidthTimeoutInMSec),void 0!==t.noDataTimeoutInMSec&&(this.httpDataRetrieverSettings.noDataTimeoutInMSec=t.noDataTimeoutInMSec),void 0!==t.minTimeoutInMSec&&(this.httpDataRetrieverSettings.minTimeoutInMSec=t.minTimeoutInMSec),void 0!==t.manifestTimeoutInMSec&&(this.httpDataRetrieverSettings.manifestTimeoutInMSec=t.manifestTimeoutInMSec),void 0!==t.getDownloadRequestParametersAsync&&(this.httpDataRetrieverSettings.getDownloadRequestParametersAsync=t.getDownloadRequestParametersAsync),void 0!==t.disableSegmentQueryParamParsing&&(this.disableSegmentQueryParamParsing=t.disableSegmentQueryParamParsing),void 0!==t.defaultGOPForMissingSegmentData&&(this.defaultGOPForMissingSegmentData=t.defaultGOPForMissingSegmentData),void 0!==t.minWaitTimeToGopRatioForNextSegment&&(this.minWaitTimeToGopRatioForNextSegment=t.minWaitTimeToGopRatioForNextSegment),this.ignoreRequestLatency=t.ignoreRequestLatency,void 0!==t.maxActiveSegmentRequests&&(this.maxActiveSegmentRequests=t.maxActiveSegmentRequests),void 0!==t.maxWaitTimeForFirstSegmentInMSec&&(this.maxWaitTimeForFirstSegmentInMSec=t.maxWaitTimeForFirstSegmentInMSec),this.defaultBandwidthKbps=t.defaultBandwidthKbps,this.enableBandwidthPersistence=t.enableBandwidthPersistence,t.enableHybridMode&&(this.hybridManager=new e.HybridPlayback.Manager(this.eventMgr)),t.prefetchedManifestPromise&&(this.prefetchedManifestPromise=t.prefetchedManifestPromise),t.enableFinegrainedBandwidthTelemetry&&(this.isFinegrainedBandwidthTelemetryEnabled=t.enableFinegrainedBandwidthTelemetry),t.isImprovedSourceBufferLogEnabled&&(this.isImprovedSourceBufferLogEnabled=t.isImprovedSourceBufferLogEnabled),t.prefetchAudioInitSegmentQuality&&(this.prefetchAudioInitSegmentQuality=t.prefetchAudioInitSegmentQuality),t.prefetchVideoInitSegmentQuality&&(this.prefetchVideoInitSegmentQuality=t.prefetchVideoInitSegmentQuality),this.heuristricsEngineAndStepRuleEnabled=!this.prefetchAudioInitSegmentQuality||!this.prefetchVideoInitSegmentQuality,t.enableRaiseDownloadStartedEvent&&"boolean"==typeof t.enableRaiseDownloadStartedEvent&&(this.isRaiseDownloadStartedEventEnabled=t.enableRaiseDownloadStartedEvent)},n.prototype.maxBufferInWallClockSec=function(){return this.appConfig&&this.appConfig.maxBufferInWallClockSec&&"0"!=this.appConfig.maxBufferInWallClockSec?parseInt(this.appConfig.maxBufferInWallClockSec):this._videoStreamList&&this._videoStreamList.streams&&this._videoStreamList.streams.length>0&&this._videoStreamList.streams[0].tracks&&1==this._videoStreamList.streams[0].tracks.length?this.heuristicSettings.buffer.maxBufferInWallClockSecForCopyCodec:this.heuristicSettings.buffer.maxBufferInWallClockSec},n.prototype.maxBufferInSec=function(){return this.maxBufferInWallClockSec()*this.playbackRate()},n.prototype.estimateWaitByGOPInMs=function(e){var t=e&&e.currentSegment&&e.currentSegment.segmentInfo&&e.currentSegment.segmentInfo.durationInSec?e.currentSegment.segmentInfo.durationInSec:this.defaultGOPForMissingSegmentData;return Math.floor(1e3*t*this.minWaitTimeToGopRatioForNextSegment)},n.prototype.isLiveEdge=function(){if(this.commonPresentation.isLive)for(var e=0;e<this.commonPresentation.periods[0].streams.length;e++)if(0==this.commonPresentation.periods[0].streams[e].type||1==this.commonPresentation.periods[0].streams[e].type){var t=this.commonPresentation.periods[0].streams[e].streamingInfo.lastRequestedSegment;if(t&&!t.next)return!0}return!1},n.prototype.prerollBufferInSec=function(){return this.maxBufferInSec()*this.heuristicSettings.buffer.prerollPercent},n.prototype.getDynamicPrerollBufferInSec=function(){var e=this.prerollBufferInSec();return(!this.commonPresentation.isLive||!this.isLiveEdge())&&this.commonPresentation.periods[0].streams&&this.videoBufferData&&this.videoBufferData.downloadCompleted&&this.videoBufferData.downloadCompleted.mediaDownload&&this.videoBufferData.perceivedBandwidth>2*this.videoBufferData.downloadCompleted.mediaDownload.bitrate?Math.min(e,Math.floor(this.commonPresentation.maxSegmentDuration*this.playbackRate())):e},n.prototype.lowBufferInSec=function(){return.2},n.prototype.liveStartBufferInSec=function(){return this.maxBufferInSec()*(this.heuristicSettings.buffer.prerollPercent+this.heuristicSettings.buffer.livePlaybackOffsetPercent)},n.prototype.updatePresentation=function(t){if(this.commonPresentation){var n=t.isLive&&null!==t.periods[0].streams.findFirst(function(e){return(0===e.type||1===e.type)&&!e.segments});n?e.Log.verbose(17,"New manifest without segments no presentationUpdate was done."):(this.commonPresentation.isLive&&!t.isLive&&(this.isLiveToVod=!0),this.commonPresentation.transferPresentationState(t),this.presentationJson=t.toJson()),t.dispose()}else this.commonPresentation=t,this.presentationJson=t.toJson()},n.prototype.setXmlHttpRequestFactory=function(e){this._xmlHttpRequestFactory=e},n.prototype.createXmlHttpRequest=function(){return this._xmlHttpRequestFactory?this._xmlHttpRequestFactory():new e.HttpRequest.XMLHttpRequestWrapper},n.prototype.playbackRate=function(){return this.azureHtml5.playbackRate()},n.prototype.getMaxAudioBitrateInBps=function(){if(0===this._maxAudioBitrateInBps&&this.commonPresentation&&this.commonPresentation.periods[0].streams&&this.commonPresentation.periods[0].streams.length>0){var e=this.commonPresentation.periods[0].streams.findFirst(function(e){return 1===e.type});if(e&&e.tracks&&e.tracks.length>0){var t=e.tracks.length>1?e.tracks.reduce(function(e,t){return e.bitrate>t.bitrate?e:t}):e.tracks[0];this._maxAudioBitrateInBps=t.bitrate}}return this._maxAudioBitrateInBps},n.prototype.onError=function(e,t){this.azureHtml5.onError(e,t)},n}());t.Session=n;var a=function(){function e(e,t){this.workflowType=e,this.sessionContext=t,this.state=0,this.retryWaitTimeMSec=0,this.currentModuleId=null,this.requestedStream=null,this.fetchInitSegment=!1,this.urlsToRetrieve=[],this.selectedTrack=null,this.selectedSegment=null,this.heuristicData=null,this.externalFailure=null,this.failTracker=new s,this._disposed=!1,this._isAborted=!1}return e.prototype.dispose=function(){this._disposed||(this._disposed=!0,this.workflowType=null,this.sessionContext=null,this.state=null,this.currentModuleId=null,this.requestedStream=null,this.urlsToRetrieve.forEach(function(e,t,n){n[t].dispose()}),this.urlsToRetrieve=[],this.selectedTrack=null,this.selectedSegment=null,this.heuristicData&&(this.heuristicData.dispose(),this.heuristicData=null),this.externalFailure&&(this.externalFailure.dispose(),this.externalFailure=null),this.failTracker&&(this.failTracker.dispose(),this.failTracker=null),this.lastRequestInfo=null)},e.prototype.reset=function(){this.state=0,this.retryWaitTimeMSec=0,this.currentModuleId=null,this.selectedTrack=null,this.selectedSegment=null,1===this.workflowType&&(this.urlsToRetrieve=[]),this.heuristicData&&this.heuristicData.reset(),this.externalFailure=null},Object.defineProperty(e.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reqStreamAsText",{get:function(){return 1===this.requestedStream.type?e.streamAudio:0===this.requestedStream.type?e.streamVideo:e.streamText},enumerable:!0,configurable:!0}),e.prototype.abortWorkflow=function(){this._isAborted=!0},Object.defineProperty(e.prototype,"isAborted",{get:function(){return this._isAborted},enumerable:!0,configurable:!0}),e.streamAudio="audio",e.streamVideo="video",e.streamText="text",e}();t.Request=a;var i=function(){function e(e,t,n,a,i,r,o,s){void 0===t&&(t=0),void 0===n&&(n=4),void 0===a&&(a=""),void 0===i&&(i=NaN),void 0===r&&(r=NaN),void 0===o&&(o=NaN),void 0===s&&(s=""),this.url=e,this.httpResponseCode=-1,this.httpResposeContentType="",this.mediaData=null,this.presentationData=null,this.streamId=a,this.bitrate=i,this.presTimeInSec=r,this.durationInSec=o,this.responseType=n,this.requestType=t,this.contentLengthFromResponseHeaders=0,this.representationId=s}return e.prototype.dispose=function(){this.url=null,this.httpResponseCode=null,this.httpResposeContentType="",this.mediaData=null,this.presentationData=null,this.streamId="",this.bitrate=NaN,this.presTimeInSec=NaN,this.durationInSec=NaN,this.responseType=null},e.prototype.clone=function(){var t=new e(this.url,this.requestType,this.responseType,this.streamId,this.bitrate,this.presTimeInSec,this.durationInSec,this.representationId);return t.httpResponseCode=this.httpResponseCode,t.httpResposeContentType=this.httpResposeContentType,t.mediaData=this.mediaData.slice(0),t.presentationData=this.presentationData,t.contentLengthFromResponseHeaders=this.contentLengthFromResponseHeaders,t},e}();t.UrlRequest=i;var r=function(){function e(e){var t=[];e.tracks.forEach(function(e){e.streamingInfo.selectable&&t.push(new o(e))}),this.tracksData=t}return e.prototype.dispose=function(){this.tracksData.forEach(function(e,t,n){n[t].dispose()}),this.tracksData=[]},e.prototype.reset=function(){this.tracksData.forEach(function(e,t,n){n[t].reset()})},e}();t.HeuristicData=r;var o=function(){function e(e){this.trackInfo=e,this.selectable=!0,this.dataRetrieverEstimationInWallClockSec=null}return e.prototype.dispose=function(){this.trackInfo=null,this.selectable=null,this.dataRetrieverEstimationInWallClockSec=null},e.prototype.reset=function(){this.selectable=!0,this.dataRetrieverEstimationInWallClockSec=null},e}();t.TrackData=o;var s=function(){function e(){this.reset()}return e.prototype.dispose=function(){this.lastFailure=null,this.lastTrack=null,this.tracksToTry=[],this.forceRetry=!1},e.prototype.reset=function(){this.lastFailure=null,this.lastTrack=null,this.lastStreamType=-1,this.totalRetried=0,this.tracksToTry=[],this.trackToTryIdx=0,this.sameRequestRetried=0,this.segmentsSkipped=0,this.noDataReceivedFailure=!1,this.preconditionFailedRetryCount=0,this.forceRetry=!1},e.prototype.resetForSegment=function(){this.sameRequestRetried=0,this.trackToTryIdx=0},e.prototype.log=function(e,t,n){this.lastFailure=e,this.lastTrack=t,this.lastStreamType=n},e.prototype.isNone=function(){return null===this.lastFailure},e.prototype.isLastNetworkFail=function(){return this.lastFailure.code>=2097752&&this.lastFailure.code<3145727},e.prototype.isLastNetworkDown=function(){return 2097753===this.lastFailure.code||2097755===this.lastFailure.code},e.prototype.isNetworkError=function(){return 2097753===this.lastFailure.code},e.prototype.isLastNotReady=function(){return 2097564===this.lastFailure.code},e.prototype.isLastServerError=function(){return 2097561===this.lastFailure.code||this.lastFailure.code>=2097652&&this.lastFailure.code<=2097751},e.prototype.isLastNotFound=function(){return 2097556===this.lastFailure.code},e.prototype.isLastUnSupportedContent=function(){return 2097567===this.lastFailure.code},e.prototype.isLastRequestError=function(){return this.lastFailure.code>2097564&&this.lastFailure.code<2097652},e.prototype.isSegmentDecryptionError=function(){return 5242885===this.lastFailure.code},e.prototype.isNetworkTimeoutError=function(){return 2097752===this.lastFailure.code},e.prototype.isWorkflowOutOfSync=function(){return 256===this.lastFailure.code},e.prototype.wasLastNoDataTimeout=function(){return!this.isNone()&&this.isNetworkTimeoutError()&&this.noDataReceivedFailure},e.prototype.isLastErrorUnknown=function(){return!this.isNone()&&2097152===this.lastFailure.code},e}();t.FailTracker=s}(e.Context||(e.Context={})),e.Context}(f||(f={})),function(e){!function(t){"use strict";var n=function(){function t(){this._downloads=[]}return t.prototype.dispose=function(){this._downloads=[]},t.prototype.add=function(t,n){if(0!==this._downloads.length){var a=this._downloads[this._downloads.length-1];if(t>a.time)n!=a.bitrate&&this._downloads.push({time:t,bitrate:n});else{var i=e.Common.binarySearchTimeline(t,this._downloads,this._compareTime);(-1===i||t>this._downloads[i].time)&&i++,this._downloads.splice(i,this._downloads.length-i),this._downloads.push({time:t,bitrate:n})}}else this._downloads.push({time:t,bitrate:n})},t.prototype.findBitrate=function(t){var n=e.Common.binarySearchTimeline(t,this._downloads,this._compareTime);return-1===n?-1:this._downloads[n].bitrate},t.prototype.cleanup=function(t){if(!(this._downloads.length>0&&t<=this._downloads[0].time)){var n=e.Common.binarySearchTimeline(t,this._downloads,this._compareTime);n>0&&this._downloads.splice(0,n)}},t.prototype._compareTime=function(e,t,n){var a=0;return n?(e<t.time?a=-1:e>=n.time&&(a=1),a):t.time<=e?0:-1},t}();t.DownloadTracker=n}(e.Context||(e.Context={})),e.Context}(f||(f={})),function(e){!function(e){"use strict";var t=function(){function e(){this.windowSizeHeuristicsEnabled=e._windowSizeHeuristicsEnabledDefault,this.useBrowserWindowForWindowSizeRule=e._useBrowserWindowForWindowSizeRuleDefault,this.preFetchDataEnabled=e._preFetchDataEnabledDefault,this.preFetchDataMiddle=e._preFetchDataMiddleDefault,this.vodStableBufferLevelPercent=e._vodStableBufferLevelPercentDefault,this.vodDowngradeBufferLevelPercent=e._vodDowngradeBufferLevelPercentDefault,this.belowDowngradeBufferLevelDownloadTimeFactor=e._belowDowngradeBufferLevelDownloadTimeFactorDefault,this.latencyHeuristicsEnabled=e._latencyHeuristicsEnabled,this.maxStreamingResolutionLimit=e._maxStreamingResolutionLimit,this.bandwidth=null,this.stepRule=null,this.buffer=null,this.bandwidth=new n,this.stepRule=new a,this.buffer=new i}return e.prototype.reset=function(){this.windowSizeHeuristicsEnabled=e._windowSizeHeuristicsEnabledDefault,this.useBrowserWindowForWindowSizeRule=e._useBrowserWindowForWindowSizeRuleDefault,this.preFetchDataEnabled=e._preFetchDataEnabledDefault,this.preFetchDataMiddle=e._preFetchDataMiddleDefault,this.vodStableBufferLevelPercent=e._vodStableBufferLevelPercentDefault,this.vodDowngradeBufferLevelPercent=e._vodDowngradeBufferLevelPercentDefault,this.belowDowngradeBufferLevelDownloadTimeFactor=e._belowDowngradeBufferLevelDownloadTimeFactorDefault,this.latencyHeuristicsEnabled=e._latencyHeuristicsEnabled,this.maxStreamingResolutionLimit=e._maxStreamingResolutionLimit,this.bandwidth.reset(),this.stepRule.reset(),this.buffer.reset()},e._windowSizeHeuristicsEnabledDefault=!0,e._useBrowserWindowForWindowSizeRuleDefault=!1,e._preFetchDataEnabledDefault=!0,e._preFetchDataMiddleDefault=!0,e._vodStableBufferLevelPercentDefault=.7,e._vodDowngradeBufferLevelPercentDefault=.15,e._belowDowngradeBufferLevelDownloadTimeFactorDefault=.75,e._latencyHeuristicsEnabled=!0,e._maxStreamingResolutionLimit=0,e}();e.Heuristics=t;var n=function(){function e(){this.bandwidthUsabilityPercent=e._bandwidthUsabilityPercentDefault,this.bandwidthDataSizeThresholdInBytes=e._bandwidthDataSizeThresholdInBytesDefault,this.bandwidthEstimationMaxKbps=e._bandwidthEstimationMaxKbpsDefault,this.bandwidthEstimationMinMsec=e._bandwidthEstimationMinMsecDefault,this.maxBandwidthHistoryCount=e._maxBandwidthHistoryCountDefault,this.minBandwidthHistoryCount=e._minBandwidthHistoryCountDefault,this.bandwidthTestWithTimeThresholdDuringLive=e._bandwidthTestWithTimeThresholdDuringLiveDefault,this.useVariableFragmentSizeMode=e._useVariableFragmentSizeModeDefault,this.minMSecBeforeAbortForBandWidthEstimationReq=e._minMSecBeforeAbortForBandWidthEstimationReq,this.minMSecBeforeAbortForVideoSegmentReq=e._minMSecBeforeAbortForVideoSegmentReq,this.initBandwidthMinDataThresholdInBytes=e._initBandwidthMinDataThresholdInBytesDefault,this.reqAbortMinDataThresholdInBytes=e._initBandwidthMinDataThresholdInBytesDefault,this.minBandwidthUsabilityPercent=e._minBandwidthUsabilityPercentDefault}return e.prototype.reset=function(){this.bandwidthUsabilityPercent=e._bandwidthUsabilityPercentDefault,this.bandwidthDataSizeThresholdInBytes=e._bandwidthDataSizeThresholdInBytesDefault,this.bandwidthEstimationMaxKbps=e._bandwidthEstimationMaxKbpsDefault,this.bandwidthEstimationMinMsec=e._bandwidthEstimationMinMsecDefault,this.maxBandwidthHistoryCount=e._maxBandwidthHistoryCountDefault,this.minBandwidthHistoryCount=e._minBandwidthHistoryCountDefault,this.bandwidthTestWithTimeThresholdDuringLive=e._bandwidthTestWithTimeThresholdDuringLiveDefault,this.useVariableFragmentSizeMode=e._useVariableFragmentSizeModeDefault,this.minMSecBeforeAbortForBandWidthEstimationReq=e._minMSecBeforeAbortForBandWidthEstimationReq,this.minMSecBeforeAbortForVideoSegmentReq=e._minMSecBeforeAbortForVideoSegmentReq,this.initBandwidthMinDataThresholdInBytes=e._initBandwidthMinDataThresholdInBytesDefault,this.reqAbortMinDataThresholdInBytes=e._initBandwidthMinDataThresholdInBytesDefault,this.minBandwidthUsabilityPercent=e._minBandwidthUsabilityPercentDefault},e._bandwidthUsabilityPercentDefault=.85,e._minBandwidthUsabilityPercentDefault=.5,e._bandwidthDataSizeThresholdInBytesDefault=2e3,e._bandwidthEstimationMaxKbpsDefault=5e5,e._bandwidthEstimationMinMsecDefault=5,e._maxBandwidthHistoryCountDefault=5,e._minBandwidthHistoryCountDefault=1,e._bandwidthTestWithTimeThresholdDuringLiveDefault=!0,e._useVariableFragmentSizeModeDefault=!0,e._minMSecBeforeAbortForBandWidthEstimationReq=400,e._minMSecBeforeAbortForVideoSegmentReq=2e3,e._initBandwidthMinDataThresholdInBytesDefault=1e4,e}();e.Bandwidth=n;var a=function(){function e(){this.minSegmentsBeforeDowngrade=e._minSegmentsBeforeDowngradeDefault,this.minSegmentsBeforeUpgrade=e._minSegmentsBeforeUpgradeDefault,this.maxStepDownInQuality=e._maxStepDownInQualityDefault,this.maxStepUpInQuality=e._maxStepUpInQualityDefault}return e.prototype.reset=function(){this.minSegmentsBeforeDowngrade=e._minSegmentsBeforeDowngradeDefault,this.minSegmentsBeforeUpgrade=e._minSegmentsBeforeUpgradeDefault,this.maxStepDownInQuality=e._maxStepDownInQualityDefault,this.maxStepUpInQuality=e._maxStepUpInQualityDefault},e._minSegmentsBeforeDowngradeDefault=0,e._minSegmentsBeforeUpgradeDefault=1,e._maxStepDownInQualityDefault=10,e._maxStepUpInQualityDefault=3,e}();e.StepRule=a;var i=function(){function e(){this.maxBufferInWallClockSec=e._maxBufferInSecDefault,this.prerollPercent=e._prerollPercentDefault,this.livePlaybackOffsetPercent=e._livePlaybackOffsetPercentDefault,this.leftEdgeBackoffInSec=e._leftEdgeBackoffInSecDefault,this.lowBufferPercent=e._lowBufferPercentDefault,this.maxBufferInWallClockSecForCopyCodec=e._maxBufferInWallClockSecForCopyCodec}return e.prototype.reset=function(){this.maxBufferInWallClockSec=e._maxBufferInSecDefault,this.prerollPercent=e._prerollPercentDefault,this.lowBufferPercent=e._lowBufferPercentDefault,this.livePlaybackOffsetPercent=e._livePlaybackOffsetPercentDefault,this.leftEdgeBackoffInSec=e._leftEdgeBackoffInSecDefault,this.maxBufferInWallClockSecForCopyCodec=e._maxBufferInWallClockSecForCopyCodec},e._maxBufferInWallClockSecForCopyCodec=50,e._maxBufferInSecDefault=30,e._prerollPercentDefault=.25,e._lowBufferPercentDefault=.25,e._livePlaybackOffsetPercentDefault=.25,e._leftEdgeBackoffInSecDefault=4,e}();e.Buffer=i;var r=function(){function e(){this.maxTotalRetries=e._maxTotalRetriesDefault,this.maxRetryPerSegment=e._maxRetryPerSegmentDefault,this.maxRetryPresentation=e._maxRetryPresentationDefault,this.maxSkipSegments=e._maxSkipSegmentsDefault,this.retryLowerBitrateOnly=!1,this.retryMediaInMSec=e._retryMediaInMSecDefault,this.retryMediaServerErrorInMSec=e._retryMediaServerErrorInMSecDefault,this.retryPresentationInMSec=e._retryPresentationInMSecDefault,this.retryPresentationServerErrorInMSec=e._retryInMSForPresentationServerError,this.retryDueToNetworkErrorInMSec=e._retryDueToNetworkErrorInMSecDefault,this.retryDueToNetworkErrorInMSecMax=e._retryDueToNetworkErrorInMSecMax,this.retryDueTo412InTextTrackInMSecDefault=e._retryDueTo412InTextTrackInMSecDefault,this.infiniteSegmentRetryForPreconditionFailed=!0,this.maxRetriesForKeyAcquireFailure=e._maxRetriesForKeyAcquireFailure,this.maxWaitTimeBetweenRetriesForKeyAcquireMS=e._retryInMSecBetweenKeyAcquireFailures,this.waitTimeForRetryOnNoDataTimeouts=e._retryMediaInMSecDefault}return e._maxTotalRetriesDefault=50,e._maxRetryPerSegmentDefault=10,e._maxRetryPresentationDefault=5,e._maxSkipSegmentsDefault=30,e._retryMediaInMSecDefault=2e3,e._retryMediaServerErrorInMSecDefault=4e3,e._retryPresentationInMSecDefault=500,e._retryDueToNetworkErrorInMSecDefault=2e3,e._retryDueToNetworkErrorInMSecMax=16e3,e._retryDueTo412InTextTrackInMSecDefault=500,e._maxRetriesForKeyAcquireFailure=3,e._retryInMSecBetweenKeyAcquireFailures=1e3,e._retryInMSForPresentationServerError=2e3,e}();e.HttpRetryPolicy=r;var o=function(){function e(){this.initBandwidthTimeoutInMSec=e._initBandwidthTimeout,this.noDataTimeoutInMSec=e._noDataTimeoutDefault,this.minTimeoutInMSec=e._minTimeoutInMSecDefault,this.manifestTimeoutInMSec=e._manifestTimeoutInMSecDefault,this.audioTimeoutInMSec=e._maxTimeoutInMSecDefault,this.textTimeoutInMSec=e._maxTimeoutInMSecDefault,this.minQualityTimeoutInMSec=e._maxTimeoutInMSecDefault,this.initBandwidthTimeout=e._initBandwidthTimeout,this.liveEdgeAdjustmentInSec=e._liveEdgeAdjustmentDefaultInSec,this.getDownloadRequestParametersAsync=void 0,this.maxTimeoutInMSecDefault=e._maxTimeoutInMSecDefault,this.minDefaultRequestLatency=e._minLatencyMSecDefaultForMeta}return e._maxTimeoutInMSecDefault=12e4,e._manifestTimeoutInMSecDefault=1e4,e._minTimeoutInMSecDefault=4e3,e._minLatencyMSecDefaultForMeta=5e3,e._initBandwidthTimeout=1e3,e._noDataTimeoutDefault=1e3,e._liveEdgeAdjustmentDefaultInSec=-1,e}();e.HttpDataRetriever=o}(e.Settings||(e.Settings={})),e.Settings}(f||(f={})),function(e){!function(t){"use strict";t.CreateAdapter=function(){return new i},t.supported=function(){return!(!window.hasOwnProperty("MediaSource")&&!window.hasOwnProperty("WebKitMediaSource"))},t.isTypeSupported=function(e){return MediaSource.isTypeSupported&&MediaSource.isTypeSupported(e)};var n={closed:0,open:1,ended:2},a=function(e,t,n){this.bufferIndex=e,this.startTime=t,this.endTime=n},i=function(){function i(){this._mediaSource=new MediaSource,this._sourceOpenHandler=null,this._adapterSourceBuffers=new r,this._disposed=!1,this._videoTag=null,this._buffered=null}return i.prototype.dispose=function(){if(!this._disposed){if(this._mediaSource){for(var e=this._mediaSource.sourceBuffers.length-1;e>=0;e--)this._mediaSource.removeSourceBuffer(this._mediaSource.sourceBuffers[e]);this._sourceOpenHandler&&(this._mediaSource.removeEventListener("sourceopen",this._sourceOpenHandler),this._sourceOpenHandler=null),this._mediaSource=null}this._adapterSourceBuffers.dispose(),this._adapterSourceBuffers=null,this._videoTag&&(this._videoTag.src&&(URL.revokeObjectURL(this._videoTag.src),this._videoTag.src=null),this._videoTag=null),this._disposed=!0}},Object.defineProperty(i.prototype,"readyState",{get:function(){return this._disposed?0:n[this._mediaSource.readyState]},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"durationInSec",{get:function(){return this._disposed?NaN:this._mediaSource.duration},set:function(e){this._disposed||(this._mediaSource.duration=e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"adapterBuffers",{get:function(){return this._disposed?null:this._adapterSourceBuffers.adapterBuffers},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"buffered",{get:function(){return this._buffered},enumerable:!0,configurable:!0}),i.prototype.setVideoElementSrcAsync=function(e){var t=this;return this._videoTag=e,new Promise(function(n,a){return t._disposed?void a("VideoElementAdapter already disposed"):(t._sourceOpenHandler=function(){return t._disposed?void a("VideoElementAdapter already disposed"):(t._mediaSource.removeEventListener("sourceopen",t._sourceOpenHandler),t._sourceOpenHandler=null,void n())},t._mediaSource.addEventListener("sourceopen",t._sourceOpenHandler),void(e.src=URL.createObjectURL(t._mediaSource)))})},i.prototype.setStartTime=function(t){var n=this;!function a(){!n._disposed&&n._videoTag&&0===n._videoTag.currentTime&&(n._videoTag.readyState!==HTMLMediaElement.HAVE_NOTHING?(n._videoTag.currentTime=t,e.Log.verbose(3,"StartTime set: "+t)):(e.Log.verbose(3,"Video tag not ready, will retry to set StartTime to "+t),e.Util.setTimeout(a,i._setCurrentTimeTimeoutInMSec)))}()},i.prototype.addAdapterBuffer=function(n,a,i,r,o,s){if(this._disposed)return null;var c,d=this,l=null;try{c=this._mediaSource.addSourceBuffer(n),l=new t.VideoElementAdapterBuffer(o,s,a,c,function(){d._updateBuffered(),r&&r(d)},function(e){i.call(d,e)},n),this._adapterSourceBuffers.add(l,c),e.Log.verbose(3,"Adapter buffer added: "+n+" Adapter buffer total: "+this._adapterSourceBuffers.length)}catch(t){e.Log.error(3,"Failed to add SourceBuffer to MediaSource: "+t)}if(null!==l&&null!==c&&"audio"===l.mediaType)try{c.changeType(n),l.hasAudioTypeChangeSupport=!0}catch(t){e.Log.verbose(3,"Adapter buffer added: "+n+" does not support type change: "+t)}return l},i.prototype.removeAdapterBuffer=function(t){var n;this._disposed||(-1!==(n=this._adapterSourceBuffers.find(t))?(this._mediaSource.removeSourceBuffer(this._adapterSourceBuffers.sourceBuffers[n]),this._adapterSourceBuffers.remove(n),e.Log.verbose(3,"Adapter buffer removed, remaining: "+this._adapterSourceBuffers.length)):e.Log.error(3,"Failed to remove adapter buffer: instance not found"))},i.prototype.changeAdapterBufferType=function(t,n){if(this._disposed)return!1;var a,i=!1;if(-1!==(a=this._adapterSourceBuffers.find(t)))try{this._adapterSourceBuffers.sourceBuffers[a].updating&&this._adapterSourceBuffers.sourceBuffers[a].abort(),this._adapterSourceBuffers.sourceBuffers[a].changeType(n),e.Log.verbose(3,"Adapter buffer media type succesfully changed to "+n),i=!0}catch(t){e.Log.error(3,"Failed to change source buffer media type")}else e.Log.error(3,"Failed to find the source buffer to change its media type");return i},i.prototype.endOfStream=function(t){var n=this,a=t,r=0;!function t(){if(!n._disposed&&2!==n.readyState){if(function(e){var t=e.sourceBuffers;if(t&&t.length>0)for(var n=0;n<t.length;n++)if(t[n].updating)return!0;return!1}(n._mediaSource))return void e.Util.setTimeout(t,i._retryTimeoutInMSec);try{a?n._mediaSource.endOfStream(a):n._mediaSource.endOfStream(),e.Log.verbose(3,"End of stream signaled")}catch(n){if(!(n.code===DOMException.INVALID_STATE_ERR&&r++<10))throw e.Log.error(3,"Failed to set end-of-stream: "+n),n;e.Log.warning(3,"MediaSource not ready, will retry: "+n),e.Util.setTimeout(t,i._retryTimeoutInMSec)}}}()},i.prototype._updateBuffered=function(){if(!this._disposed){for(var t=this._adapterSourceBuffers.adapterBuffers,n=new e.Common.TimeRangeSet,a=this._findUniqueStartTimes(),i=0;i<a.length;i++){for(var r=a[i].startTime,o=a[i].endTime,s=!0,c=0;c<t.length;c++){var d=t[c].buffered;if(c!==a[i].bufferIndex){for(var l=!1,u=0;u<d.length;u++)if(d.start(u)<=r&&r<=d.end(u)){l=!0,d.end(u)<o&&(o=d.end(u));break}if(!l){s=!1;break}}}s&&(e.Log.verbose(3,"Intersecting buffer found ("+a[i].startTime+", "+o+")"),n.addRange(new e.Common.TimeRange(a[i].startTime,o)))}this._buffered=n}},i.prototype._findUniqueStartTimes=function(){for(var e=[],t=this._adapterSourceBuffers.adapterBuffers,n=0;n<t.length;n++)for(var i=t[n].buffered,r=0;r<i.length;r++)-1===e.findIndexOf(function(e){return e.startTime===i.start(r)})&&e.push(new a(n,i.start(r),i.end(r)));return e.sort(function(e,t){return e.startTime-t.startTime}),e},i._setCurrentTimeTimeoutInMSec=500,i._retryTimeoutInMSec=100,i}(),r=function(){function e(){this.adapterBuffers=[],this.sourceBuffers=[]}return e.prototype.dispose=function(){for(var e=this.adapterBuffers.length-1;e>=0;e--)this.adapterBuffers[e].dispose(),this.adapterBuffers[e]=null;for(e=this.sourceBuffers.length-1;e>=0;e--)this.sourceBuffers[e]=null},Object.defineProperty(e.prototype,"length",{get:function(){if(this.sourceBuffers.length!==this.adapterBuffers.length)throw new Error("AdapterSourceBuffers in invalid state");return this.sourceBuffers.length},enumerable:!0,configurable:!0}),e.prototype.find=function(e){return this.adapterBuffers.indexOf(e)},e.prototype.add=function(e,t){this.adapterBuffers.push(e),this.sourceBuffers.push(t)},e.prototype.remove=function(e){e>=0&&e<this.sourceBuffers.length&&(this.sourceBuffers.splice(e,1),this.adapterBuffers.splice(e,1))},e}()}(e.VideoElementAdapter||(e.VideoElementAdapter={})),e.VideoElementAdapter}(f||(f={})),function(e){!function(t){"use strict";var n=function(){function t(t,n,a,i,r,o,s){function c(){d._notifyBufferUpdated(),d._tryInternalRemove(),d._waitingToAppendBuffer||d.flushBufferBehindCurrentTime(),d._waitingToAppendBuffer=d._tryInternalAppend()}var d=this;this._disposed=!1,this._pendingBufferRanges=new e.Common.TimeRangeSet,this._sourceBuffer=i,this._maxAdapterBufferAheadInWallClockSec=t,this._maxAdapterBufferBehindCurrentTimeInSec=n,this._playbackPosFn=a,this._notifyBufferUpdated=r,this._pendingBuffer=[],this._pendingRemove=[],this._submittedRemove=null,this._appendErrorHandler=o,this._waitingToAppendBuffer=!1,this._mediaType=s.split("/")[0],this._hasAudioTypeChangeSupport=!1,this._sourceBufferUpdated=function(){e.Log.verbose(3,d._decorateLogMessage("SourceBuffer 'update' event completed.")),c()},this._sourceBufferError=function(){e.Log.error(3,d._decorateLogMessage("SourceBuffer append failed with 'error' event.")),c()},this._sourceBuffer.addEventListener("update",this._sourceBufferUpdated),this._sourceBuffer.addEventListener("error",this._sourceBufferError)}return Object.defineProperty(t.prototype,"mediaType",{get:function(){return this._mediaType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasAudioTypeChangeSupport",{get:function(){return this._hasAudioTypeChangeSupport},set:function(e){this._hasAudioTypeChangeSupport=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"buffered",{get:function(){var t,n,a=new e.Common.TimeRangeSet;try{a.addRanges(this._sourceBuffer.buffered),n=a.length>0?a.end(a.length-1):NaN;for(var i=0;i<this._pendingBufferRanges.length;i++){var r=this._pendingBufferRanges.start(i),o=this._pendingBufferRanges.end(i);0===e.Common.diffTimes(r,n)?a.extendLast(o):(t=new e.Common.TimeRange(r,o),a.addRange(t)),n=o}for(i=0;i<this._pendingRemove.length;i++){var s=this._pendingRemove[i].startInSec,c=this._pendingRemove[i].endInSec;a.removeRange(s,c)}this._submittedRemove&&(s=this._submittedRemove.startInSec,c=this._submittedRemove.endInSec,a.removeRange(s,c))}catch(t){e.Log.error(3,this._decorateLogMessage("buffered() threw exception "+t))}return a},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"presentationTimeOffsetInSec",{get:function(){return this._sourceBuffer.timestampOffset},set:function(e){this._sourceBuffer.timestampOffset=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"audioTracks",{get:function(){return this._sourceBuffer.audioTracks},enumerable:!0,configurable:!0}),t.prototype.getBufferedAheadOfCurrentTimeInSec=function(){if(this._disposed)return 0;var e=this.buffered,t=this._playbackPosFn(),n=0;if(0===e.length)return 0;for(var a=0;a<e.length;a++)e.start(a)<=t&&t<e.end(a)?n+=e.end(a)-t:t<e.start(a)&&(n+=e.end(a)-e.start(a));return n},t.prototype.bufferFull=function(e){return this.getBufferedAheadOfCurrentTimeInSec()>this._maxAdapterBufferAheadInWallClockSec*e},t.prototype.contains=function(e){for(var t=this.buffered,n=0;n<t.length;n++)if(t.start(n)<=e&&e<t.end(n))return!0;return!1},t.prototype.dispose=function(){if(!this._disposed){this._disposed=!0,this._sourceBuffer.removeEventListener("update",this._sourceBufferUpdated),this._sourceBuffer.removeEventListener("error",this._sourceBufferError),this._notifyBufferUpdated=null,this._playbackPosFn=null,this._appendErrorHandler=null,this._sourceBufferUpdated=null,this._sourceBufferError=null;for(var e=this._pendingBuffer.length-1;e>=0;e--)this._pendingBuffer[e]=null;for(this._sourceBuffer=null,e=this._pendingRemove.length-1;e>=0;e--)this._pendingRemove[e]=null;this._submittedRemove&&(this._submittedRemove=null),this._pendingBufferRanges&&(this._pendingBufferRanges.dispose(),this._pendingBufferRanges=null)}},t.prototype.flushBufferBehindCurrentTime=function(){if(this._maxAdapterBufferBehindCurrentTimeInSec>0)try{var t=this._playbackPosFn()-this._maxAdapterBufferBehindCurrentTimeInSec,n=this.getStartTimeOfCurrentBuffered();NaN!=n&&n>=0&&t>n&&this.flushUntil(t)}catch(t){e.Log.warning(3,this._decorateLogMessage("Ignoring Exception in flushBufferBehindCurrentTim"))}},t.prototype.append=function(t,n,a){var i,r,o,s;for(s=0;s<this._pendingBuffer.length&&!(n<this._pendingBuffer[s].presTimeInSec);s++);if(a){if(s>0&&(r=this._pendingBuffer[s-1],e.Common.diffTimes(n,r.presTimeInSec+r.durationInSec)>0))throw new Error(this._decorateLogMessage("append ("+n+","+a+") failed, overlaps with ("+r.presTimeInSec+","+r.durationInSec+")"));if(s<this._pendingBuffer.length&&(o=this._pendingBuffer[s],e.Common.diffTimes(o.presTimeInSec,n+a)>0))throw new Error(this._decorateLogMessage("append ("+n+","+a+") failed, overlaps with ("+o.presTimeInSec+","+o.durationInSec+")"))}i=new e.Common.SegmentData(t,n,a),this._pendingBuffer.splice(s,0,i),this._updatePendingRanges(),e.Log.verbose(3,this._decorateLogMessage("Appending segment: "+n+" sec "+t.byteLength+" bytes")),this._tryInternalAppend(),this._notifyBufferUpdated()},t.prototype.remove=function(t,n){var a;t=Math.max(t,0),a=new e.Common.TimeRange(t,n),this._pendingRemove.push(a),e.Log.verbose(3,this._decorateLogMessage("Added to remove pending list ["+t+","+n+")")),this._tryInternalRemove()},t.prototype.flushFrom=function(e){var t=this._sourceBuffer.buffered,n=0,a=0;if(t.length>0&&(n=t.start(0)),this._pendingBuffer.length>0&&(n=Math.min(n,this._pendingBuffer[0].presTimeInSec)),this._pendingBuffer.length>0){var i=this._pendingBuffer[this._pendingBuffer.length-1];a=i.presTimeInSec+i.durationInSec}if(t.length>0&&(a=Math.max(a,t.end(t.length-1))),void 0!==e&&(n=e),a>n)this.remove(n,a);else if(!isNaN(a)&&(0!==n||0!==a))throw new Error(this._decorateLogMessage("flush failed, endTime ("+a+") not greater than startime ("+n+")"))},t.prototype.getStartTimeOfCurrentBuffered=function(){var e=this._sourceBuffer.buffered,t=NaN;return e.length>0&&(t=e.start(0)),this._pendingBuffer.length>0&&(t=Math.min(t,this._pendingBuffer[0].presTimeInSec)),t},t.prototype.flushUntil=function(e){var t=this._sourceBuffer.buffered,n=0,a=0;if(t.length>0&&(n=t.start(0)),this._pendingBuffer.length>0&&(n=Math.min(n,this._pendingBuffer[0].presTimeInSec)),this._pendingBuffer.length>0){var i=this._pendingBuffer[this._pendingBuffer.length-1];a=i.presTimeInSec+i.durationInSec}if(t.length>0&&(a=Math.max(a,t.end(t.length-1))),(a=Math.min(a,e))>n)this.remove(n,a);else if(0!==n||0!==a)throw new Error(this._decorateLogMessage("flush failed, endTime ("+a+") not greater than startime ("+n+")"))},t.prototype._tryInternalAppend=function(){if(this._pendingBuffer&&this._sourceBuffer&&0!==this._pendingBuffer.length&&!this._sourceBuffer.updating)try{return this._sourceBuffer.appendBuffer(this._pendingBuffer[0].data),e.Log.verbose(3,this._decorateLogMessage("Appended segment to SourceBuffer: "+this._pendingBuffer[0].presTimeInSec+" sec "+this._pendingBuffer[0].data.byteLength+" bytes")),this._pendingBuffer.splice(0,1),this._updatePendingRanges(),!0}catch(t){switch(t.code){case DOMException.INVALID_STATE_ERR:case DOMException.QUOTA_EXCEEDED_ERR:e.Log.error(3,this._decorateLogMessage("Failed to append segment to SourceBuffer, will retry: "+t)),this._appendErrorHandler&&this._appendErrorHandler(this._sourceBuffer);break;default:throw e.Log.error(3,this._decorateLogMessage("Failed to append segment to SourceBuffer: "+t)),t}}return!1},t.prototype._tryInternalRemove=function(){if(this._sourceBuffer&&(this._sourceBuffer.updating||(this._submittedRemove=null),this._pendingBuffer&&this._pendingRemove))for(;0!==this._pendingRemove.length&&!this._sourceBuffer.updating;){var t;t=this._pendingRemove[0];for(var n=this._pendingBuffer.length-1;n>=0;n--){var a,i,r;i=(a=this._pendingBuffer[n]).presTimeInSec,r=a.durationInSec,i>=t.startInSec&&i<t.endInSec&&(i+r<=t.endInSec?(this._pendingBuffer.splice(n,1),this._updatePendingRanges(),this._notifyBufferUpdated(),e.Log.verbose(3,this._decorateLogMessage("Segment removed: "+t.startInSec))):e.Log.verbose(3,this._decorateLogMessage("Failed to remove range ("+t.startInSec+", "+t.endInSec+") from \r\n                            segment ("+i+", "+(i+r)+") - range ends mid - segment")))}try{this._sourceBuffer.remove(t.startInSec,t.endInSec),this._submittedRemove=this._pendingRemove.splice(0,1)[0],e.Log.verbose(3,this._decorateLogMessage("Removing range from SourceBuffer: ["+t.startInSec+","+t.endInSec+")"))}catch(t){switch(t.code){case DOMException.INVALID_ACCESS_ERR:case DOMException.INVALID_STATE_ERR:e.Log.error(3,this._decorateLogMessage("Failed to remove segment from SourceBuffer, will retry: "+t));break;default:throw e.Log.error(3,this._decorateLogMessage("Failed to remove segment from SourceBuffer: "+t)),t}}}},t.prototype._updatePendingRanges=function(){var t,n=this,a=NaN;this._pendingBufferRanges&&(this._pendingBufferRanges.dispose(),this._pendingBufferRanges=null),this._pendingBufferRanges=new e.Common.TimeRangeSet,this._pendingBuffer.forEach(function(i){0===e.Common.diffTimes(i.presTimeInSec,a)?n._pendingBufferRanges.extendLast(i.endTimestampInSec):(t=new e.Common.TimeRange(i.presTimeInSec,i.endTimestampInSec),n._pendingBufferRanges.addRange(t)),a=i.endTimestampInSec})},t.prototype._decorateLogMessage=function(e){return this._mediaType+": "+e},t}();t.VideoElementAdapterBuffer=n}(e.VideoElementAdapter||(e.VideoElementAdapter={})),e.VideoElementAdapter}(f||(f={})),function(e){!function(t){"use strict";t.CreateCoordinator=function(e){return new n(e)};var n=function(){function n(a){var i=this;this._sessionContext=a,this._workflowSeq=t.CreateSequencer(this._sessionContext),this._mediaSource=null,this._lastPresentation=new Date(0),this._pendingPresentation=new Date,this._disposed=!1,this._pendingPlay=!0,this._pendingTryMediaRequestCount=0,this._prerollMet=!1,this._error=null,this._playbackPosInSec=null,this._pendingPlaybackPosInSec=null,this._seekingForward=!0,this._lastDuration=0,this._audioStreamList=null,this._videoStreamList=null,this._healthCheckLastTime=0,this._healthCheckPeriodInMSec=n._healthCheckPeriodMinInMSec,this._healthCheckId=e.Util.setTimeout(this._periodicHealthCheck,this._healthCheckPeriodInMSec,this),this._healthCheckRetries=0,this._dtOffsetToAdd=0,this._lastPlaybackBitrate=null,this._lastDownloadBitrate=null,this._manifestRefreshed=!1,this._registerInternalEvents(!0),this.timeBeforeSettingVideoElementSrcInMs=0,this._seekStartTime=0,this._timeAtFirstPlayRequest=0,this._pendingDataForMediaSource=[],this._nextWorkflowScheduleTimer=NaN,this._enhancedTrackReadyDispatched=!1,this._canPlayThroughEvent=function(){i._disposed||i._pendingPlay&&i._buffersAbovePreroll()&&i._startPlayback()},this._durationChangeEvent=function(){if(!i._disposed){var t=i._sessionContext;t.eventMgr.dispatchEvent(e.EventName.durationchange),t.commonPresentation&&t.commonPresentation.isLive&&e.Util.setTimeout(r,n._durationChangeMinIntervalInMSec)}};var r=function(){if(!i._disposed){var t=i._sessionContext;t.commonPresentation&&t.commonPresentation.isLive&&(i._lastDuration!==i.duration?(i._lastDuration=i.duration,t.eventMgr.dispatchEvent(e.EventName.durationchange),e.Util.setTimeout(r,n._durationChangeMinIntervalInMSec)):0===i._lastDuration&&e.Util.setTimeout(r,n._durationChangeMinIntervalInMSec))}};this._resetHealthCheckTimeHandler=function(){i._resetHealthCheckTime()},this._handlePlayingEvent=function(){i._timeAtFirstPlayRequest=0,i._resetHealthCheckTime()},this._resetSeekStartTimeHandler=function(){i._seekStartTime=0},this._setSeekStartTimeHandler=function(){i._seekStartTime=Date.now()},this._checkPlaybackBitrate=function(){if(!i._disposed){var t=i._sessionContext.videoBufferData.getPlaybackBitrate(i.currentMediaTime);t!=i._lastPlaybackBitrate&&(i._lastPlaybackBitrate=t,i._sessionContext.eventMgr.dispatchEvent(e.EventName.playbackbitratechanged))}},this._audioStreamSwitchedHandler=function(){i._enhancedTrackReadyDispatched=!1},void 0!==a.maxWaitTimeForFirstSegmentInMSec&&a.maxWaitTimeForFirstSegmentInMSec>0&&(this._firstSegmentDelayCheck=new e.SegmentUtils.FirstSegmentDelayCheck(a.maxWaitTimeForFirstSegmentInMSec))}return n.prototype.dispose=function(){this._disposed||(this._registerInternalEvents(!1),this._registerVideoTagEvents(!1),this._registerStreamListEvents(!1),this._disposed=!0,this._sessionContext._mediaSource=null,this._sessionContext=null,this._lastPresentation=null,this._pendingPresentation=null,this._canPlayThroughEvent=null,this._durationChangeEvent=null,this._resetHealthCheckTimeHandler=null,this._handlePlayingEvent=null,this._checkPlaybackBitrate=null,this._audioStreamSwitchedHandler=null,this._manifestRefreshed=!1,this._mediaSource&&(this._mediaSource.dispose(),this._mediaSource=null),this._workflowSeq&&(this._workflowSeq.dispose(),this._workflowSeq=null),this._audioStreamList&&(this._audioStreamList.dispose(),this._audioStreamList=null),this._videoStreamList&&(this._videoStreamList.dispose(),this._videoStreamList=null),this.timeBeforeSettingVideoElementSrcInMs=0,e.Util.clearTimeout(this._healthCheckId),this._pendingDataForMediaSource&&this._pendingDataForMediaSource.length>0&&this._pendingDataForMediaSource.forEach(function(e){e.dispose()}),this._pendingDataForMediaSource=[],this._firstSegmentDelayCheck=null)},Object.defineProperty(n.prototype,"videoStreamList",{get:function(){return this._videoStreamList},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"audioStreamList",{get:function(){return this._audioStreamList},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"videoBufferData",{get:function(){return this._sessionContext.videoBufferData},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"audioBufferData",{get:function(){return this._sessionContext.audioBufferData},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"src",{get:function(){return this._sessionContext.presentationUrl},set:function(t){e.Log.verbose(1,"src("+t+")"),this._sessionContext.hybridManager&&(t=this._sessionContext.hybridManager.getHybridPresentationUrl(t));var n,a=this;this._sessionContext.presentationUrl=t,this._timeAtFirstPlayRequest=0,-1!==(n=t.indexOf("?"))&&this._sessionContext.setPresentationQueryStr(t.slice(n)),this._presentationWorkflowAsync(function(t){function n(){return null!==a._playbackPosInSec&&a._sessionContext.videoTag.seeking?a._playbackPosInSec:a._sessionContext.videoTag.currentTime}function i(t){if(this._mediaSource){for(var n=this._mediaSource.sourceBuffers,i=!1,r=0;r<n.length;r++)if(n[r]===t){i=!0;break}i||a._sessionContext.eventMgr.dispatchEvent(e.InternalEventName.exception,"SourceBuffer has been removed from MediaSource")}}function r(){a._pendingPlay&&a._prerollMet&&a._checkMediaWorkflow()}if(!a._disposed){var o=null;if(e.Log.verbose(1,"presentationWorkflowResolved"),null===t.sessionContext.commonPresentation)throw new Error("presentationWorkflowResolved: unexpected null values");o=t.sessionContext.commonPresentation,t.sessionContext.hybridManager&&t.sessionContext.hybridManager.onPresentationParsed(o),a._videoStreamList=a._sessionContext._videoStreamList,a._audioStreamList=a._sessionContext._audioStreamList,a._registerStreamListEvents(!0),a._audioStreamList&&a._audioStreamList.streams&&a._audioStreamList.streams.length>0&&a._audioStreamList.enabledIndices.length>0&&(e.assert(1==a._audioStreamList.enabledIndices.length,"Current implementation only allows one enabled stream at a time"),a._audioStreamList.streams[a._audioStreamList.enabledIndices[0]].codec),a._videoStreamList&&a._videoStreamList.streams&&a._videoStreamList.streams.length>0&&-1!==a._videoStreamList.selectedIndex&&a._videoStreamList.streams[a._videoStreamList.selectedIndex].codec,a._mediaSource=t.sessionContext._mediaSource,function(){if(e.Log.verbose(1,"_setVideoElementSrcResolved"),!a._disposed){var s=!1;o.periods[0].streams.forEach(function(o){if(!s&&o.streamingInfo.selected&&2!==o.type){if(o.streamingInfo.sourceBuffer=a._mediaSource.addAdapterBuffer(o.codec,n,i,r,t.sessionContext.maxBufferInWallClockSec(),t.sessionContext.maxBufferBehindCurrentTimeInSec),!o.streamingInfo.sourceBuffer){var c="presentationWorkflowResolved: Failed to create source buffer for stream "+e.Presentation.StreamType[o.type]+", codec "+o.codec;this._sessionContext.isImprovedSourceBufferLogEnabled||(a._error=new e.Failure.External(4194307,c),t.sessionContext.eventMgr.dispatchEvent(e.InternalEventName.internalError)),s=!0;var d=o.tracks;return d&&d.length>0&&d.forEach(function(t){var n='video/mp4;codecs="'+t._codecs+'"',a="MediaSource.isTypeSupported() for "+n+"= "+e.VideoElementAdapter.isTypeSupported(n);c+=a,e.Log.verbose(1,a)}),void(this._sessionContext.isImprovedSourceBufferLogEnabled&&(a._error=new e.Failure.External(4194307,c),t.sessionContext.eventMgr.dispatchEvent(e.InternalEventName.internalError)))}0===o.type?a._sessionContext.videoBufferData.updateBuffer(o.streamingInfo.sourceBuffer):1===o.type&&a._sessionContext.audioBufferData.updateBuffer(o.streamingInfo.sourceBuffer),o.streamingInfo.sourceBuffer.presentationTimeOffsetInSec=o.presentationTimeOffsetInSec+a._dtOffsetToAdd}}),s||(a._updateDuration(),a._updateStartPosition(),a._registerVideoDownloadedEvents(),a._registerVideoTagEvents(!0),a._checkMediaWorkflow(),a._tryTimeUpdateEvent()),t.dispose()}}(),a._sessionContext.eventMgr.dispatchEvent(e.EventName.loadedmetadata)}},function(t){a._disposed||(e.Log.error(1,"presentationWorkflowRejected:  module: "+t.currentModuleId),t.externalFailure&&e.Failure.isExternalError(t.externalFailure.code)&&(a._error=new e.Failure.External(t.externalFailure.code,t.externalFailure.message,t.externalFailure.serviceErrorCode,t.externalFailure.correlationId,t.externalFailure.isErrorExpected),e.Log.error(1,"Dispatching error: "+a.error.toString()),t.sessionContext.eventMgr.dispatchEvent(e.InternalEventName.internalError)),t.dispose())})},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"dtsOffsetToAdd",{get:function(){return this._dtOffsetToAdd},set:function(e){this._dtOffsetToAdd=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"pendingPlay",{get:function(){return this._pendingPlay},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentPresentationTime",{set:function(t){e.Log.verbose(1,"currentPresentationTime("+t.toFixed(3)+")"),this.setCurrentTimeInternal(t,!0)},enumerable:!0,configurable:!0}),n.prototype.setCurrentTimeInternal=function(t,n){if(this._sessionContext.commonPresentation){e.Util.clearTimeout(this._nextWorkflowScheduleTimer);var a=this._sessionContext,i=a.commonPresentation.periods[0].streams,r=!1,o=0,s=0,c=this.duration;if(a.commonPresentation.isLive){var d=a.commonPresentation.timeShiftBufferDepth||1/0,l=a.heuristicSettings.buffer.leftEdgeBackoffInSec,u=d-l;o=a.liveStartBufferInSec(),s=u>c?0:l}if(n){var f=this._fromPresentationTime(t),p=Math.max(f,s);f!==(p=Math.min(p,c-o))&&(t=this._toPresentationTime(p))}else e.Log.verbose(1,"timeInSec: "+t+", leftEdgeBackoff: "+s),t=Math.max(t,s),e.Log.verbose(1,"timeInSec: "+t+", duration: "+c+", rightEdgeBackoff: "+o),s>(t=Math.min(t,c-o))&&(e.Log.warning(1,"timeInSec: "+t+"is less than leftEdgeBackoff. Seeking to leftEdgeBackoff"),t=s),e.Log.verbose(1,"timeInSec: "+t),t=this._toPresentationTime(t);e.Log.verbose(1,"seeking from presentation time "+a.videoTag.currentTime.toFixed(3)+" to "+t.toFixed(3));for(var m=t,_=0;_<i.length;_++)if(i[_].streamingInfo.selected){var h=i[_].segments.getByInSegmentTimestamp(t);if(h)continue;(h=i[_].segments.getByInDiscontinuityTimestamp(t))&&(m=Math.max(m,h.segmentInfo.presTimeInSec))}for(m!==t&&(e.Log.verbose(1,"skipping discontinuity from presentation time "+t+" to "+m),t=m),this._seekingForward=t>a.videoTag.currentTime,this._playbackPosInSec=t,a.videoTag.currentTime=t,this._pendingPlaybackPosInSec=null,e.Common.diffTimes(a.videoTag.currentTime,t)&&(e.Log.verbose(1,"set currentTime failed to update videoTag: requested="+t+", actual="+a.videoTag.currentTime),this._pendingPlaybackPosInSec=t),_=0;_<i.length;_++)i[_].streamingInfo.selected&&(i[_].streamingInfo.sourceBuffer?!1===i[_].streamingInfo.sourceBuffer.contains(t)?(i[_].streamingInfo.pendingSeekPositionInSec=t,i[_].streamingInfo.abortCurrentRequest=!0,i[_].streamingInfo.sourceBuffer.flushFrom(),i[_].streamingInfo.abortAllActiveRequests(),i[_].streamingInfo.workflowState=0,r=!0,this._seekStartTime=Date.now(),this._pendingDataForMediaSource=[],e.Log.verbose(1,"Seeked position not in current buffers: "+t)):e.Log.verbose(1,"Found seeked position in current buffers"):2===i[_].type&&(i[_].streamingInfo.pendingSeekPositionInSec=t,i[_].streamingInfo.abortCurrentRequest=!0,2===i[_].streamingInfo.workflowState&&(i[_].streamingInfo.workflowState=0)));this._checkMediaWorkflow(),r||this._buffersAbovePreroll()||this._endOfSelectedStreams()||(r=!0),r&&(a.videoTag.paused||(this._pendingPlay=!0,a.eventMgr.dispatchEvent(e.EventName.waiting),a.videoTag.pause()))}},n.prototype.presentationTimeFromPercentageOfDvrWindow=function(t){if(!this._sessionContext.commonPresentation)return null;var n=this._sessionContext,a=n.commonPresentation.periods[0].streams,i=0,r=0,o=this.duration;if(n.commonPresentation.isLive){var s=n.commonPresentation.timeShiftBufferDepth||1/0,c=n.heuristicSettings.buffer.leftEdgeBackoffInSec,d=s-c;i=n.liveStartBufferInSec(),r=d>o?0:c}var l=t*o;l=Math.max(l,r),r>(l=Math.min(l,o-i))&&(l=r);for(var u=this._toPresentationTime(l),f=u,p=0;p<a.length;p++)if(a[p].streamingInfo.selected){var m=a[p].segments.getByInSegmentTimestamp(u);if(m)continue;(m=a[p].segments.getByInDiscontinuityTimestamp(u))&&(f=Math.max(f,m.segmentInfo.presTimeInSec))}return f!==u&&(u=f),e.Log.verbose(1,"From percentage of window time "+Math.round(100*t)+"% return presentation time "+u.toFixed(3)+" seconds"),u},Object.defineProperty(n.prototype,"currentTime",{get:function(){var e=this._sessionContext.videoTag,t=0;return this._sessionContext.commonPresentation&&(t=null!==this._pendingPlaybackPosInSec?this._manifestRefreshed?e.currentTime:this._pendingPlaybackPosInSec:e.currentTime,t=Math.max(this._fromPresentationTime(t),0)),t},set:function(t){e.Log.verbose(1,"currentTime("+t.toFixed(3)+")"),this.setCurrentTimeInternal(t,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"presentationTimeOffsetInSec",{get:function(){var e=0;if(this._sessionContext.commonPresentation){var t=this._sessionContext.commonPresentation.periods[0].streams;t&&t[0]&&(e=t[0].presentationTimeOffsetInSec)}return e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentMediaTime",{get:function(){var e=this._sessionContext.videoTag,t=0;return this._sessionContext.commonPresentation&&(t=null!==this._pendingPlaybackPosInSec?this._pendingPlaybackPosInSec:e.currentTime,t-=this.presentationTimeOffsetInSec),t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"downloadBitrate",{get:function(){return this._lastDownloadBitrate},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"playbackBitrate",{get:function(){return this._lastPlaybackBitrate},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"autoplay",{set:function(t){e.Log.verbose(1,"autoplay("+t+")"),this._pendingPlay=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"duration",{get:function(){var e=this._sessionContext,t=e.commonPresentation,n=1/0;if(t){var a=t.playableWindow;n=a.endInSec-a.startInSec}return Math.min(e.videoTag.duration||0,n)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"buffered",{get:function(){var t=null;if(this._mediaSource){var n=this._sessionContext.commonPresentation.playableWindow;(t=new e.Common.TimeRangeSet).addRanges(this._mediaSource.buffered),t.rebase(n.startInSec)}return t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"error",{get:function(){return this._error},enumerable:!0,configurable:!0}),n.prototype.play=function(){e.Log.verbose(1,"play()");var t,n=this._sessionContext,a=n.heuristicSettings.buffer.leftEdgeBackoffInSec,i=n.videoTag;this._mediaSource?(0===this._mediaSource.readyState&&i.load(),n.commonPresentation&&n.commonPresentation.isLive&&i.paused&&!i.seeking&&(t=this._fromPresentationTime(i.currentTime))<a&&(e.Log.verbose(1,"play: skipping from "+i.currentTime+"(playable window time: "+t+") to left edge: "+a+", playable window start: "+n.commonPresentation.playableWindow.startInSec),this.currentTime=0),i.paused&&e.Common.diffTimes(i.currentTime,i.duration)<=0&&(this.currentTime=0),this._buffersAbovePreroll()||this._endOfSelectedStreams()?this._startPlayback():(this._pendingPlay=!0,n.eventMgr.dispatchEvent(e.EventName.waiting),this._checkMediaWorkflow()),this._resetHealthCheckTime()):this._pendingPlay=!0},n.prototype.pause=function(){var t=this._sessionContext;e.Log.verbose(1,"pause()"),this._pendingPlay&&(this._pendingPlay=!1),t.videoTag.pause(),this._tryTimeUpdateEvent()},n.prototype.isMediaSourceInitialized=function(){return!!this._mediaSource},n.prototype._presentationWorkflowAsync=function(t,a){function i(){s._disposed||(!s._sessionContext.commonPresentation||s._sessionContext.commonPresentation.isLive)&&s._workflowSeq.presentationRequestAsync().then(r,o).catch(function(t){s._sessionContext.eventMgr.dispatchEvent(e.InternalEventName.exception,t)})}function r(r){if(s._disposed)a&&a(r);else{e.Log.verbose(1,"presentationRequestResolved");var o=r.sessionContext.commonPresentation;if(null===o)throw new Error("presentationRequestResolved: unexpected null values");s._updateDuration();var c=new Date;if(o.isLive&&o.minimumUpdatePeriodInSec>0&&s._pendingPresentation<=c){var d=Math.max(n._minPresentationUpdatePeriodInMSec,1e3*o.minimumUpdatePeriodInSec);s._pendingPresentation.setTime(c.getTime()+d),e.Util.setTimeout(i,d)}s._lastPresentation=c,s._manifestRefreshed=!0,t&&(t(r),t=null)}}function o(t){s._disposed||e.Log.error(1,"presentationRequestRejected:  module: "+t.currentModuleId),a&&a(t)}var s=this,c=0,d=Date.now()-s._lastPresentation.getTime();d<n._minPresentationUpdatePeriodInMSec&&(c=n._minPresentationUpdatePeriodInMSec-d),e.Util.setTimeout(i,c)},n.prototype.restartCheckMediaWorkflowIfNeeded=function(){0===this._pendingTryMediaRequestCount?(e.Log.verbose(1,"restartCheckMediaWorkflowIfNeeded: restart needed"),this._checkMediaWorkflow()):e.Log.verbose(1,"restartCheckMediaWorkflowIfNeeded: restart not needed")},n.prototype._multipleMediaWorkflowCanbeActiveForStream=function(e){return!this._sessionContext.commonPresentation.isLive&&this._sessionContext.maxActiveSegmentRequests>1&&e.streamingInfo.currentActiveWorkflowCount<this._sessionContext.maxActiveSegmentRequests},n.prototype._shouldWaitForNextWorkflow=function(e,t){return!(e.streamingInfo.isSegmentChosenForLastWorkflow()||Date.now()-e.streamingInfo.timeAtLastWorkflowStart>t)},n.prototype._checkMediaWorkflow=function(){function t(e){if(!r._disposed&&!e.isAborted)if(e.currentSegment){r._pendingDataForMediaSource.push(e),r._pendingDataForMediaSource.sort(function(e,t){return e.currentSegment.segmentInfo.mediaTimestamp-t.currentSegment.segmentInfo.mediaTimestamp});for(var t=e.requestedStream&&e.requestedStream.streamingInfo.getActiveWorkflowList()||[];0<r._pendingDataForMediaSource.length;){var n=r._pendingDataForMediaSource[0],i=!t.some(function(e){return!!(n.currentSegment&&n.currentSegment.segmentInfo&&e.currentSegment&&e.currentSegment.segmentInfo)&&e.currentSegment.segmentInfo.mediaTimestamp<n.currentSegment.segmentInfo.mediaTimestamp});if(!i)break;a(n),r._pendingDataForMediaSource.shift()}}else a(e)}function a(t){if(!r._disposed&&!t.isAborted){r._manifestRefreshed=!1;var n=t.requestedStream;n.streamingInfo.workflowState=0,1===t.state&&null===n.streamingInfo.pendingSeekPositionInSec&&(e.Log.verbose(1,"mediaRequestResolved: "+e.Presentation.StreamType[n.type]+" end of stream"),0===n.streamingInfo.currentActiveWorkflowCount?n.streamingInfo.workflowState=2:e.Log.verbose(1,"Waiting on "+e.Presentation.StreamType[n.type]+" to signal end of stream It currently has ="+n.streamingInfo.currentActiveWorkflowCount+" active workflows"),r._endOfSelectedStreams()&&1===r._mediaSource.readyState&&(e.Log.verbose(1,"End of selected streams"),r._mediaSource.endOfStream(),r._dispatchCanPlayThroughEvent(),r._pendingPlay&&r._startPlayback()));for(var a=!0,i=0;i<t.urlsToRetrieve.length;i++){if(null===t.urlsToRetrieve[i].mediaData){if(2===n.streamingInfo.workflowState)continue;throw new Error("mediaRequestResolved: data is null url: "+t.urlsToRetrieve[i].url)}if(n.streamingInfo){if(!n.streamingInfo.selected||null!==n.streamingInfo.pendingSeekPositionInSec){e.Log.verbose(1,"mediaRequestResolved discarding,"+(n.streamingInfo.selected?"seek in progress":"stream no longer selected ")+"url: "+t.urlsToRetrieve[i].url+"("+t.urlsToRetrieve[i].httpResposeContentType+", "+t.urlsToRetrieve[i].mediaData.byteLength+")");break}var s=t.urlsToRetrieve[i].presTimeInSec+t.urlsToRetrieve[i].durationInSec;if(e.Log.verbose(1,"mediaRequestResolved appending url: "+t.urlsToRetrieve[i].url+"("+t.urlsToRetrieve[i].httpResposeContentType+", "+t.urlsToRetrieve[i].mediaData.byteLength+" bytes, end time="+s+")"),2!==n.type)if(2===t.urlsToRetrieve[i].requestType)n.streamingInfo.addToInitSegmentCache(t.selectedTrack.bitrate,t.urlsToRetrieve[i].mediaData),n.streamingInfo.sourceBuffer.append(t.urlsToRetrieve[i].mediaData,t.urlsToRetrieve[i].presTimeInSec,NaN),a=!1;else{if(a){var c=n.streamingInfo.getInitSegmentForBitrate(t.selectedTrack.bitrate);c?n.streamingInfo.sourceBuffer.append(c,t.urlsToRetrieve[i].presTimeInSec,NaN):e.Log.error(1,"Error Need init segment but its not ready")}try{n.streamingInfo.sourceBuffer.append(t.urlsToRetrieve[i].mediaData,t.urlsToRetrieve[i].presTimeInSec,t.urlsToRetrieve[i].durationInSec),t.requestedStream.streamingInfo.lastAppendedTrack=t.selectedTrack}catch(t){if(!t.message||-1===t.message.indexOf("overlaps")||!r._multipleMediaWorkflowCanbeActiveForStream(n))throw t;e.Log.error(1,"Ignoring buffer overlap Exception in sourceBuffer.append [ "+t.message+"]")}}else 2===t.urlsToRetrieve[i].requestType?t.sessionContext.ttmlManager.parseInitSegment(t.urlsToRetrieve[i].mediaData)&&(t.sessionContext.ttmlManager.normalizedPresentationTimeInSeconds=n.presentationTimeOffsetInSec):t.sessionContext.ttmlManager.processTtml(n.id,t.urlsToRetrieve[i].mediaData)}}if(null!==r._pendingPlaybackPosInSec){var d=o.videoTag.buffered,l=!1;for(i=0;i<d.length;i++)if(d.start(i)<=r._pendingPlaybackPosInSec&&r._pendingPlaybackPosInSec<d.end(i)){l=!0;break}l&&(o.videoTag.currentTime=r._pendingPlaybackPosInSec,e.Common.diffTimes(o.videoTag.currentTime,r._pendingPlaybackPosInSec)&&(r._pendingPlaybackPosInSec>o.videoTag.currentTime&&r._seekingForward||r._pendingPlaybackPosInSec<o.videoTag.currentTime&&!r._seekingForward)?e.Log.verbose(1,"mediaRequestResolved failed to update videoTag currentTime: pending="+r._pendingPlaybackPosInSec+", actual="+o.videoTag.currentTime+", _seekingForward="+r._seekingForward):r._pendingPlaybackPosInSec=null)}r._checkMediaWorkflow(),t.dispose()}}function i(t){if(!r._disposed){if(t.externalFailure&&16==t.externalFailure.code)return t.requestedStream.streamingInfo.workflowState=0,void r._checkMediaWorkflow();r._manifestRefreshed=!1;var n=t.requestedStream;if(e.Log.error(1,"mediaRequestRejected: "+e.Presentation.StreamType[t.requestedStream.type]+" module: "+t.currentModuleId),t.externalFailure){if((2097556===t.externalFailure.code||1===t.externalFailure.code||5242885===t.externalFailure.code)&&t.sessionContext.commonPresentation.isLive&&0===t.sessionContext.commonPresentation.minimumUpdatePeriodInSec&&t.failTracker.isNone())return void r._presentationWorkflowAsync(function(t){if(!r._disposed){if(e.Log.verbose(1,"refreshPresentationWorkflowResolved"),null===t.sessionContext.commonPresentation)throw new Error("refreshPresentationWorkflowResolved: unexpected null values");n.streamingInfo.workflowState=0,r._checkMediaWorkflow(),t.dispose()}},function(t){r._disposed||(e.Log.error(1,"refreshPresentationWorkflowRejected:  module: "+t.currentModuleId),t.externalFailure&&e.Failure.isExternalError(t.externalFailure.code)&&(r._error=new e.Failure.External(t.externalFailure.code,t.externalFailure.message,t.externalFailure.serviceErrorCode,t.externalFailure.correlationId,t.externalFailure.isErrorExpected),e.Log.error(1,"Dispatching error: "+r.error.toString()),t.sessionContext.eventMgr.dispatchEvent(e.InternalEventName.internalError)),t.dispose())});if(e.Failure.isExternalError(t.externalFailure.code)){var a=t.sessionContext.commonPresentation&&t.sessionContext.commonPresentation.didAudioVideoIdsSwitchedAfterManifestRefresh;t.externalFailure.message=a?t.externalFailure.message+", Audio Video Ids Switched":t.externalFailure.message,r._error=new e.Failure.External(t.externalFailure.code,t.externalFailure.message,t.externalFailure.serviceErrorCode,t.externalFailure.correlationId,t.externalFailure.isErrorExpected),e.Log.error(1,"Dispatching error: "+r.error.toString()),o.eventMgr.dispatchEvent(e.InternalEventName.internalError)}}t.dispose()}}var r=this,o=r._sessionContext;this._pendingTryMediaRequestCount++,e.Util.setTimeout(function a(){if(!r._disposed&&!r._error){e.Log.verbose(1,"_doCheckMediaWorkflow"),r._pendingTryMediaRequestCount--,r._enhancedStreamReady()&&r._dispatchEnhancedTrackReady(),o.videoTag.paused||r._endOfSelectedStreams()||!r._buffersNearEmpty()?r._buffersAbovePreroll()&&(r._dispatchCanPlayThroughEvent(),r._pendingPlay&&(e.Log.verbose(1,"_doCheckMediaWorkflow: we have a pending play. Starting the playback."),r._startPlayback())):(e.Log.verbose(1,"_doCheckMediaWorkflow: pausing play because the buffer is close to empty"),r._pendingPlay=!0,o.videoTag.pause(),o.eventMgr.dispatchEvent(e.EventName.waiting));for(var s=!1,c=0;c<o.commonPresentation.periods[0].streams.length;c++){var d,l=o.commonPresentation.periods[0].streams[c],u=l.streamingInfo.getLastActiveReq(),f=1e3;d=u&&u.reqContext&&u.reqContext.waitForJITInMs?u.reqContext.waitForJITInMs:u&&u.reqContext?o.estimateWaitByGOPInMs(u.reqContext):0;var p=!1;if(r._multipleMediaWorkflowCanbeActiveForStream(l)){if(r._shouldWaitForNextWorkflow(l,Math.max(f,d))){e.Util.clearTimeout(this._nextWorkflowScheduleTimer),r._nextWorkflowScheduleTimer=e.Util.setTimeout(function(){r._checkMediaWorkflow()},Math.max(f,d));break}p=!0}if(l.streamingInfo.selected&&2!==l.streamingInfo.workflowState&&(0===l.streamingInfo.workflowState||p)){var m=l.streamingInfo.sourceBuffer,_=r._isBufferAheadOtherStreams(l),h=m&&l.streamingInfo.sourceBuffer.bufferFull(r._sessionContext.playbackRate()),b=r._buffersAtLiveEdge(l);m&&!_&&!h&&!b||2===l.type&&!_&&!r._textStreamTooFarAheadOfCurrentTimeDuringLive(l)||l.streamingInfo.pendingSeekPositionInSec?(l.streamingInfo.workflowState=1,l.streamingInfo.timeAtLastWorkflowStart=Date.now(),e.Log.verbose(1,"Starting media workflow for stream="+e.Presentation.StreamType[l.type]+" with totalActiveWorkflowCount="+l.streamingInfo.currentActiveWorkflowCount),r._workflowSeq.mediaRequestAsync(l).then(t,i).catch(function(t){o.eventMgr.dispatchEvent(e.InternalEventName.exception,t)}),o.maxActiveSegmentRequests>1&&!o.commonPresentation.isLive&&(r._nextWorkflowScheduleTimer=e.Util.setTimeout(function(){r._checkMediaWorkflow()},Math.max(f,d)))):(e.Log.verbose(1,"_doCheckMediaWorkflow: need to retry. Stream type: "+e.Presentation.StreamType[l.type]+", sourcebuffer:"+m+", buffer is ahead of other streams: "+_+", buffer is full: "+h+", buffer is at live edge: "+b),s=!0)}else e.Log.verbose(1,"_doCheckMediaWorkflow: Stream skipped. Stream type: "+e.Presentation.StreamType[l.type]+", selected: "+l.streamingInfo.selected+", workflowState: "+l.streamingInfo.workflowState)}s&&0===r._pendingTryMediaRequestCount&&(r._pendingTryMediaRequestCount++,e.Log.verbose(1,"_doCheckMediaWorkflow: schedule try again. Pending try count = "+r._pendingTryMediaRequestCount),e.Util.setTimeout(a,n._mediaSegmentTimeoutInMSec))}},0)},n.prototype._updateStartPosition=function(){var e=this._sessionContext,t=e.commonPresentation,n=e.liveStartBufferInSec(),a=1/0;if(t&&isNaN(e.startPositionInSec)){if(a=t.isLive?Math.max(t.playableWindow.startInSec,t.playableWindow.endInSec-n):t.playableWindow.startInSec,e.commonPresentation&&e.commonPresentation.periods&&e.commonPresentation.periods.length>0){for(var i=this._sessionContext.commonPresentation.periods[0].streams,r=0,o=0,s=0;s<i.length;s++)if(i[s].streamingInfo.selected){o++;var c=(d=i[s].segments).getByInSegmentTimestamp(a);if(c){r++;continue}(c=d.getByInDiscontinuityTimestamp(a))&&(r++,a=Math.max(a,c.segmentInfo.presTimeInSec))}if(r!==o)for(s=0;s<i.length;s++)if(i[s].streamingInfo.selected){var d;a=a<=(d=i[s].segments).last.segmentInfo.presTimeInSec?a:d.last.segmentInfo.presTimeInSec}}0!==a&&(this._mediaSource.setStartTime(a),e.startPositionInSec=a),t.isLive&&this._sessionContext.commonPresentation.getTimeSinceTimeShiftTrackerStartSec()>n&&(this.currentTime=this.duration)}},n.prototype._updateDuration=function(){var t,n=this._sessionContext.commonPresentation;if(n&&this._mediaSource){if(n.isLive)t=1/0;else if(this._sessionContext.isLiveToVod){if(t=n.playableWindow.endInSec,e.Common.isChrome){var a=Math.floor(1e6*t)/1e6;t=parseFloat(a.toFixed(6)),e.Log.verbose(1,"newDuration: "+t)}}else t=n.durationInSec;if(this._mediaSource.durationInSec!==t)try{this._mediaSource.durationInSec=t}catch(t){e.Log.warning(1,"ignoring set durationInSec error: "+t)}}},n.prototype._toPresentationTime=function(e){return e+this._sessionContext.commonPresentation.playableWindow.startInSec},n.prototype._fromPresentationTime=function(e){return e-this._sessionContext.commonPresentation.playableWindow.startInSec},n.prototype._endOfSelectedStreams=function(){if(!this._sessionContext.commonPresentation)return!1;for(var e=this._sessionContext.commonPresentation.periods[0].streams,t=0;t<e.length;t++)if(e[t].streamingInfo.selected&&2!==e[t].streamingInfo.workflowState)return!1;return!0},n.prototype._buffersAbovePreroll=function(){var e=!0,t=this._sessionContext.videoTag;if(!this._sessionContext.commonPresentation)return!1;var n=this._sessionContext.commonPresentation.periods[0].streams;if(t.readyState<t.HAVE_METADATA)e=!1;else for(var a=0;a<n.length;a++)if(n[a].streamingInfo.selected&&2!==n[a].type&&n[a].streamingInfo.sourceBuffer.getBufferedAheadOfCurrentTimeInSec()<this._sessionContext.getDynamicPrerollBufferInSec()){e=!1;break}return e},n.prototype._enhancedStreamReady=function(){if(null==this._sessionContext||null==this._sessionContext.commonPresentation||null==this._sessionContext.commonPresentation.periods||null==this._sessionContext.commonPresentation.periods[0]||null==this._sessionContext.commonPresentation.periods[0].streams)throw new Error("enhancedStreamReady: unexpected null values");return this._sessionContext.commonPresentation.periods[0].streams.some(function(e){return e&&e.streamingInfo&&e.streamingInfo.selected&&e.label&&"EnhancedAudio"===e.label})&&this._buffersAbovePreroll()},n.prototype._dispatchEnhancedTrackReady=function(){if(null==this._sessionContext||null==this._sessionContext.eventMgr)throw new Error("dispatchEnhancedTrackReady: unexpected null values");this._enhancedTrackReadyDispatched||(this._sessionContext.eventMgr.dispatchEvent(e.EventName.enhancedTrackReady),this._enhancedTrackReadyDispatched=!0)},n.prototype._buffersNearEmpty=function(){for(var e=this._sessionContext.commonPresentation.periods[0].streams,t=0;t<e.length;t++)if(e[t].streamingInfo.selected&&2!==e[t].type&&e[t].streamingInfo.sourceBuffer.getBufferedAheadOfCurrentTimeInSec()<this._sessionContext.lowBufferInSec())return!0;return!1},n.prototype._isBufferAheadOtherStreams=function(e){for(var t=0,a=1/0,i=null,r=0,o=this._sessionContext.commonPresentation.periods[0].streams,s=0;s<o.length;s++)o[s].streamingInfo.selected&&2!==o[s].type&&2!==o[s].streamingInfo.workflowState&&(t++,(c=o[s].streamingInfo.sourceBuffer.buffered).length>0&&c.end(c.length-1)<a&&(a=c.end(c.length-1),i=o[s],r=o[s].streamingInfo.sourceBuffer.getBufferedAheadOfCurrentTimeInSec()));if(2===e.type)return!(!e.streamingInfo||!e.streamingInfo.lastRequestedSegment)&&(e.streamingInfo.pendingSeekPositionInSec?e.streamingInfo.pendingSeekPositionInSec:e.streamingInfo.lastRequestedSegment.segmentInfo.presTimeInSec)-a>n._bufferTooFarAheadInSec;var c=e.streamingInfo.sourceBuffer.buffered;return!(1===t||i===e&&!function(e){for(var t=0;t<o.length;t++)if(e!==o[t]&&o[t].streamingInfo.selected&&2!==o[t].type&&1===o[t].streamingInfo.workflowState)return!0;return!1}(e)||0===c.length)&&e.streamingInfo.sourceBuffer.getBufferedAheadOfCurrentTimeInSec()>r&&c.end(c.length-1)-a>n._bufferTooFarAheadInSec},n.prototype._buffersAtLiveEdge=function(e){var t,n,a,i=this._sessionContext.commonPresentation;return!!e.streamingInfo.lastRequestedSegment&&!!(t=e.streamingInfo.lastRequestedSegment.segmentInfo)&&(n=t.presTimeInSec+t.durationInSec,a=i.playableWindow.endInSec,i.isLive&&0===i.minimumUpdatePeriodInSec&&n>=a)},n.prototype._textStreamTooFarAheadOfCurrentTimeDuringLive=function(e){return!!(this._sessionContext.commonPresentation&&this._sessionContext.commonPresentation.isLive&&2===e.type&&e.streamingInfo.lastRequestedSegment&&e.streamingInfo.lastRequestedSegment.segmentInfo)&&(e.streamingInfo.pendingSeekPositionInSec?e.streamingInfo.pendingSeekPositionInSec:e.streamingInfo.lastRequestedSegment.segmentInfo.presTimeInSec+e.maxSegmentDuration)-this._sessionContext.videoTag.currentTime>n._textStreamTooFarAheadOfCurrentTimeThresholdInSec},n.prototype._startPlayback=function(){var t=this,a=this._sessionContext.videoTag,i=this._dtOffsetToAdd;if(a.buffered&&a.buffered.length>0&&a.currentTime<a.buffered.start(0)){if(this._firstSegmentDelayCheck&&this._firstSegmentDelayCheck.shouldWaitForFirstSegment())return;e.Common.isSafari&&e.Common.isOSXElCapitanOrEarlier()&&(i+=n._startTimeThresholdInSecForSafari),a.currentTime=a.buffered.start(0)+i,e.Log.verbose(1,"_startPlayback: skipping over missing data at the beginning. currentTime: "+a.currentTime+", buffer start: "+a.buffered.start(0))}a.buffered&&a.buffered.length>0?(this._dispatchCanPlayThroughEvent(),this._pendingPlay=!1,e.Common.videoTagPlay(this._sessionContext.videoTag,function(){0===t._timeAtFirstPlayRequest&&(t._timeAtFirstPlayRequest=Date.now())},function(){return t._dispatchAutoplayFailedEvent()})):e.Log.verbose(1,"_startPlayback: Could not start playback as data has not reached videoTag yet. Will be re-attempting on VideoAdapterBuffer::update callback")},n.prototype._dispatchCanPlayThroughEvent=function(){this._prerollMet||(e.Log.verbose(7,"dispatching event: canplaythrough"),this._prerollMet=!0,this._sessionContext.eventMgr.dispatchEvent(e.EventName.canplaythrough),this._sessionContext.canPlayThroughSignalled=!0)},n.prototype._dispatchAutoplayFailedEvent=function(){e.Log.verbose(7,"dispatching event: autoplayfailed"),this._sessionContext.eventMgr.dispatchEvent(e.EventName.autoplayfailed)},n.prototype._registerVideoDownloadedEvents=function(){var t=this,n=this._sessionContext.videoBufferData;n.addEventListener(e.BufferDataEventName.downloadcompleted,function(){if(!t._disposed){var a=n.downloadCompleted.mediaDownload.bitrate;a!=this._lastDownloadBitrate&&(this._lastDownloadBitrate=a,this._sessionContext.eventMgr.dispatchEvent(e.EventName.downloadbitratechanged))}},this)},n.prototype._registerVideoTagEvents=function(t){var n=this._sessionContext.videoTag;t?(n.addEventListener(e.EventName.canplaythrough,this._canPlayThroughEvent),n.addEventListener(e.EventName.durationchange,this._durationChangeEvent),n.addEventListener(e.EventName.playing,this._handlePlayingEvent),n.addEventListener(e.EventName.seeked,this._resetHealthCheckTimeHandler),n.addEventListener(e.EventName.seeked,this._resetSeekStartTimeHandler),n.addEventListener(e.EventName.seeking,this._setSeekStartTimeHandler),n.addEventListener(e.EventName.timeupdate,this._checkPlaybackBitrate)):(n.removeEventListener(e.EventName.canplaythrough,this._canPlayThroughEvent),n.removeEventListener(e.EventName.durationchange,this._durationChangeEvent),n.removeEventListener(e.EventName.playing,this._handlePlayingEvent),n.removeEventListener(e.EventName.seeked,this._resetHealthCheckTimeHandler),n.removeEventListener(e.EventName.seeked,this._resetSeekStartTimeHandler),n.removeEventListener(e.EventName.seeking,this._setSeekStartTimeHandler),n.removeEventListener(e.EventName.timeupdate,this._checkPlaybackBitrate))},n.prototype._registerStreamListEvents=function(t){this._audioStreamList&&(t?this._audioStreamList.addEventListener(e.StreamListEventName.streamselected,this._audioStreamSwitchedHandler):this._audioStreamList.removeEventListener(e.StreamListEventName.streamselected,this._audioStreamSwitchedHandler))},n.prototype._registerInternalEvents=function(t){t?(this._sessionContext.eventMgr.addHandler(e.InternalEventName.flushvideo,this._flushVideoToPreroll,this),this._sessionContext.eventMgr.addHandler(e.InternalEventName.audiocodecchanged,this._handleAudioCodecChanged,this)):(this._sessionContext.eventMgr.removeHandler(e.InternalEventName.flushvideo,this._flushVideoToPreroll),this._sessionContext.eventMgr.removeHandler(e.InternalEventName.audiocodecchanged,this._handleAudioCodecChanged))},n.prototype._isPlaybackStalledAtStart=function(){return 0!==this._timeAtFirstPlayRequest&&Date.now()-this._timeAtFirstPlayRequest>n._waitTimeForFirstPlayMS},n.prototype._periodicHealthCheck=function(t){if(t._sessionContext&&t._sessionContext.videoTag){var a=t._sessionContext.videoTag;if(t._healthCheckLastTime||t._isPlaybackStalledAtStart())if(a.paused||a.seeking||a.ended||t._healthCheckLastTime!==a.currentTime)t._healthCheckRetries=0,t._healthCheckPeriodInMSec=n._healthCheckPeriodMinInMSec;else{e.Log.verbose(1,"Health Check: currentTime stopped"),t._sessionContext.eventMgr.dispatchEvent(e.EventName.playbackstalled);var i,r=a.currentTime,o=-1,s=new e.Common.TimeRangeSet;if(s.addRanges(a.buffered),(i=s.getIndexByInRangeTimestamp(r))>=0&&(s.beforeDiscontinuity(r,i)?(o=s.start(i+1),e.Log.verbose(1,"Health Check: skipping over discontinuity")):s.atOrAfterDiscontinuity(r,i)&&(o=s.start(i),e.Log.verbose(1,"Health Check: resetting on discontinuity"))),0>o){if((o=r+n._healthCheckSkipInSec)>t.duration&&!t._sessionContext.commonPresentation.isLive)return void t._mediaSource.endOfStream();e.Log.verbose(1,"Health Check: skipping "+n._healthCheckSkipInSec+" seconds ahead"),t._healthCheckPeriodInMSec+=n._healthCheckPeriodIncrementInMSec,t._healthCheckPeriodInMSec=Math.min(t._healthCheckPeriodInMSec,n._healthCheckPeriodMaxInMSec)}if(e.Log.verbose(1,"Health Check: seeking from "+r+" to "+o),a.currentTime=o,-2===i){t._healthCheckRetries++;var c=t._sessionContext.commonPresentation.isLive;(!c||c&&t._healthCheckRetries>=n._healthCheckMaxRetries)&&t.pause()}}if(t._healthCheckLastTime=a.currentTime,t._seekStartTime){var d=Date.now()-t._seekStartTime;if(d>n._timeSpentSeekingThresholdInMs&&(t._buffersAbovePreroll()||t._endOfSelectedStreams())){if(e.Log.warning(1,"Spent too much time in a seek: "+d+"ms.  Trying to get the player to resume playing."),(o=a.currentTime+n._healthCheckSkipInSec)>t.duration&&!t._sessionContext.commonPresentation.isLive)return void t._mediaSource.endOfStream();a.currentTime=o,t._seekStartTime=Date.now(),a.play()}}}t._healthCheckId=e.Util.setTimeout(t._periodicHealthCheck,t._healthCheckPeriodInMSec,t)},n.prototype._resetHealthCheckTime=function(){this._disposed||(this._healthCheckLastTime=0)},n.prototype._flushVideoToPreroll=function(){function t(t,a){var i=a.prerollBufferInSec(),r=a.videoTag.currentTime+Math.max(n._minBufferToKeepDuringFlushToPrerollSeconds,i,1.5*t.maxSegmentDuration),s=null;o.flushStream=!1;var c=t.segments.getByInSegmentTimestamp(r);(c||(c=t.segments.getByInDiscontinuityTimestamp(r)))&&(s=c.segmentInfo.presTimeInSec),null!=s&&o.sourceBuffer&&o.sourceBuffer.contains(s)&&(e.Log.verbose(7,"flushing at "+s+" from track selection"),e.Common.isChromeVersionAtLeast(75)||o.sourceBuffer.flushFrom(s),o.pendingSeekPositionInSec=s,2===t.streamingInfo.workflowState&&(t.streamingInfo.workflowState=0))}var a=this._sessionContext.commonPresentation.periods[0].streams,i=a.filter(function(e){return!0===e.streamingInfo.flushStream});0===i.length&&(i=a);for(var r=0;r<i.length;r++){var o=i[r].streamingInfo;0===i[r].type&&o.selected&&t(i[r],this._sessionContext)}this._checkMediaWorkflow()},n.prototype._handleAudioCodecChanged=function(){if(e.Log.verbose(1,"_handleAudioCodecChanged"),this._disposed)return!1;for(var t=(this._sessionContext.commonPresentation,this._sessionContext.commonPresentation.periods[0].streams),n=0;n<t.length;n++)if(t[n].streamingInfo.selected&&t[n].streamingInfo.audioTrackSwitched)return this._mediaSource.changeAdapterBufferType(t[n].streamingInfo.sourceBuffer,t[n].codec);return!1},n.prototype._tryTimeUpdateEvent=function(){if(!this._disposed){var t=this._sessionContext;!function a(){t.disposed||t.videoTag.paused&&t.commonPresentation&&t.commonPresentation.isLive&&(t.eventMgr.dispatchEvent(e.EventName.timeupdate),e.Util.setTimeout(a,n._timeupdateLivePausedIntervalInMSec))}()}},n._mediaSegmentTimeoutInMSec=2e3,n._minPresentationUpdatePeriodInMSec=1e3,n._bufferTooFarAheadInSec=15,n._textStreamTooFarAheadOfCurrentTimeThresholdInSec=2,n._timeupdateLivePausedIntervalInMSec=1e3,n._durationChangeMinIntervalInMSec=1e3,n._healthCheckPeriodMinInMSec=1e3,n._healthCheckPeriodMaxInMSec=5e3,n._healthCheckPeriodIncrementInMSec=2e3,n._healthCheckSkipInSec=.5,n._healthCheckMaxRetries=2,n._startTimeThresholdInSecForSafari=.2,n._timeSpentSettingVideoElementSrcThresholdInMs=100,n._timeSpentSeekingThresholdInMs=4e3,n._waitTimeForFirstPlayMS=2e3,n._minBufferToKeepDuringFlushToPrerollSeconds=5,n}()}(e.Workflow||(e.Workflow={})),e.Workflow}(f||(f={})),d=this.__extends||function(e,t){function n(){this.constructor=e}for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);n.prototype=t.prototype,e.prototype=new n},function(e){!function(t){"use strict";t.CreatePresentation=function(){return new a},t.CreateMedia=function(){return new i};var n=function(){function t(t){this._eventManager=new e.Events.Manager,this._eventsOrdered=t,this._stepList=[]}return t.prototype.dispose=function(){this._eventManager.dispose(),this._eventManager=null,this._eventsOrdered=null,this._stepList=null},t.prototype.addHandler=function(e,t,n){this._eventManager.addHandler(e,t,n)},t.prototype.createSteps=function(){var e=this,t=0;for(var n in this._eventsOrdered)this._eventManager.getHandlers(this._eventsOrdered[n]).forEach(function(n){e._stepList[t++]=n})},Object.defineProperty(t.prototype,"stepList",{get:function(){return this._stepList},enumerable:!0,configurable:!0}),t}(),a=function(e){function t(){var t=[this.stepEvents.requestBegin,this.stepEvents.requestSend,this.stepEvents.dataRetrieved,this.stepEvents.requestEnd];e.call(this,t)}return d(t,e),Object.defineProperty(t.prototype,"stepEvents",{get:function(){return{requestBegin:"requestBegin",requestSend:"requestSend",dataRetrieved:"dataRetrieved",requestEnd:"requestEnd"}},enumerable:!0,configurable:!0}),t}(n),i=function(e){function t(){var t=[this.stepEvents.requestBegin,this.stepEvents.requestSend,this.stepEvents.dataRetrieved,this.stepEvents.requestEnd];e.call(this,t)}return d(t,e),Object.defineProperty(t.prototype,"stepEvents",{get:function(){return{requestBegin:"requestBegin",requestSend:"requestSend",dataRetrieved:"dataRetrieved",requestEnd:"requestEnd"}},enumerable:!0,configurable:!0}),t}(n)}(e.Workflow||(e.Workflow={})),e.Workflow}(f||(f={})),function(e){!function(t){"use strict";t.CreateSequencer=function(e){return new n(e)};var n=function(){function n(t){this._disposed=!1,this._sessionContext=t;var n=new e.DataRetriever.HttpDataRetriever(t),a=new e.ContentProtection.AesHandler;this._orderedModules=[new e.DataRetriever.HttpRetryPolicy,new e.SegmentLocator.Dash,new e.Heuristics.InitialBandwidthDataUrlFormatter,new e.Heuristics.WindowSizeRule,new e.Heuristics.MaxStreamingResolutionRule,new e.Heuristics.StepRule,new e.Heuristics.Engine,new e.UrlBuilder.DashUrlFormatter,n,new e.ModuleGroup.PresentationModuleGroup(a,n),new e.DashPresentation.Parser,a,new e.DashMediaSegment.Parser,new e.Presentation.InitialStreamSelector],t.heuristricsEngineAndStepRuleEnabled||this._orderedModules.splice(5,0,new e.Heuristics.PrefetchRule),this._createWorkflows(t)}return n.prototype.dispose=function(){this._disposed||(this._disposed=!0,this._orderedModules.forEach(function(e){e.dispose()}),this._orderedModules=null,this._sessionContext=null)},n.prototype.presentationRequestAsync=function(){var t=this,n=this;return new Promise(function(a,i){var r=new e.Context.Request(0,n._sessionContext);r.urlsToRetrieve.push(new e.Context.UrlRequest(n._sessionContext.presentationUrl)),t._processSteps(r,a,i)})},n.prototype.mediaRequestAsync=function(t){var n=this;return new Promise(function(a,i){var r=new e.Context.Request(1,n._sessionContext);r.requestedStream=t,r.heuristicData=new e.Context.HeuristicData(t);var o=t.streamingInfo;o&&o.onWorkflowStarted(r),n._processSteps(r,function(){o&&o.onWorkflowCompleted(r),a(r)},function(){o&&o.onWorkflowCompleted(r),i(r)})})},n.prototype._processSteps=function(t,n,a){function i(){if(s._disposed||t.disposed||t.sessionContext.disposed)a();else{if(c===t.sessionContext.workflows[t.workflowType].stepList.length)return 1===t.workflowType?e.Log.verbose(0,"Finished process steps for "+e.Presentation.StreamType[t.requestedStream.type]+" media workflow"):e.Log.verbose(0,"Finished process steps for presentation workflow"),void n(t);var i=t.sessionContext.workflows[t.workflowType].stepList[c],d=i.functionHandler.call(i.callerInstance,t);c++,d.then(r,o)}}function r(){switch(t.state){case 0:e.Util.setTimeout(i,0);break;case 2:c=0,e.Util.setTimeout(i,t.retryWaitTimeMSec),t.reset();break;case 1:n(t);break;default:throw new Error("processSteps unexpected state"+t.state)}}function o(i){if(1===t.state)e.Log.error(0,"End of stream workflow resolved"),n(t);else if(t.isAborted)e.Log.error(0,"workflow was aborted"),n(t);else{if(null===t.externalFailure)return void t.sessionContext.eventMgr.dispatchEvent(e.InternalEventName.exception,i);var r="stepRejected: "+t.externalFailure.toString();i&&(r+="err: "+i),e.Log.error(0,r),a(t)}}var s=this;1===t.workflowType?e.Log.verbose(0,"Starting process steps for "+e.Presentation.StreamType[t.requestedStream.type]+" media workflow"):e.Log.verbose(0,"Starting process steps for presentation workflow");var c=0;e.Util.setTimeout(i,0)},n.prototype._createWorkflows=function(e){e.workflows=[t.CreatePresentation(),t.CreateMedia()],this._orderedModules.forEach(function(t){t.init(e)}),this._sessionContext.workflows.forEach(function(e){e.createSteps()})},n}()}(e.Workflow||(e.Workflow={})),e.Workflow}(f||(f={})),function(e){"use strict";var t=function(){function e(){}return e.volumechange="volumechange",e.ended="ended",e.timeupdate="timeupdate",e.durationchange="durationchange",e.pause="pause",e.play="play",e.playing="playing",e.seeking="seeking",e.seeked="seeked",e.suspend="suspend",e.loadstart="loadstart",e.loadedmetadata="loadedmetadata",e.loadeddata="loadeddata",e.fullscreenchange="fullscreenchange",e.waiting="waiting",e.canplaythrough="canplaythrough",e.error="error",e.playbackstalled="playbackstalled",e.downloadbitratechanged="downloadbitratechanged",e.playbackbitratechanged="playbackbitratechanged",e.ratechange="ratechange",e.emsgAvailable="emsgAvailable",e.decryptorInitialized="decryptorInitialized",e.aesKeyFetchCompleted="aesKeyFetchCompleted",e.decryptionFailed="decryptionFailed",e.manifestFetchCompleted="manifestFetchCompleted",e.manifestParsingCompleted="manifestParsingCompleted",e.initialBandwidthEstimationCompleted="initialBandwidthEstimationCompleted",e.mediaSourceSrcSetRequested="mediaSourceSrcSetRequested",e.mediaSourceSrcSetResolved="mediaSourceSrcSetResolved",e.unsupportedTracksRemoved="unsupportedTracksRemoved",e.onDownloadRequestStarted="onDownloadRequestStarted",e.onDownloadRequestEnded="onDownloadRequestEnded",e.enhancedTrackReady="enhancedTrackReady",e.hybridPlaybackEnabled="hybridPlaybackEnabled",e.prefetchedManifestPromiseResolved="prefetchedManifestPromiseResolved",e.autoplayfailed="autoplayfailed",e}();e.EventName=t;var n=function(){function e(){}return e.trackselected="trackselected",e}();e.StreamEventName=n;var a=function(){function e(){}return e.streamselected="streamselected",e.streamindexinvalid="streamindexinvalid",e.streamselectnotsupported="streamselectnotsupported",e}();e.StreamListEventName=a;var i=function(){function e(){}return e.downloadrequested="downloadrequested",e.downloadcompleted="downloadcompleted",e.downloaddecrypted="downloaddecrypted",e.downloadfailed="downloadfailed",e}();e.BufferDataEventName=i,function(e){e[e.abortedErrStart=1048576]="abortedErrStart",e[e.abortedErrUnknown=1048576]="abortedErrUnknown",e[e.abortedErrNotImplemented=1048577]="abortedErrNotImplemented",e[e.abortedErrHttpMixedContentBlocked=1048578]="abortedErrHttpMixedContentBlocked",e[e.abortedErrEnd=2097151]="abortedErrEnd",e[e.networkErrStart=2097152]="networkErrStart",e[e.networkErrUnknown=2097152]="networkErrUnknown",e[e.networkErrHttpResponseBegin=2097552]="networkErrHttpResponseBegin",e[e.networkErrHttpBadUrlFormat=2097552]="networkErrHttpBadUrlFormat",e[e.networkErrHttpUserAuthRequired=2097553]="networkErrHttpUserAuthRequired",e[e.networkErrHttpUserForbidden=2097555]="networkErrHttpUserForbidden",e[e.networkErrHttpUrlNotFound=2097556]="networkErrHttpUrlNotFound",e[e.networkErrHttpNotAllowed=2097557]="networkErrHttpNotAllowed",e[e.networkErrHttpGone=2097562]="networkErrHttpGone",e[e.networkErrMimeTypeNotSupported=2097567]="networkErrMimeTypeNotSupported",e[e.networkErrResourceConflict=2097561]="networkErrResourceConflict",e[e.networkErrHttpPreconditionFailed=2097564]="networkErrHttpPreconditionFailed",e[e.networkErrHttpInternalServerFailure=2097652]="networkErrHttpInternalServerFailure",e[e.networkErrHttpBadGateway=2097654]="networkErrHttpBadGateway",e[e.networkErrHttpServiceUnavailable=2097655]="networkErrHttpServiceUnavailable",e[e.networkErrHttpGatewayTimeout=2097656]="networkErrHttpGatewayTimeout",e[e.networkErrHttpResponseEnd=2097751]="networkErrHttpResponseEnd",e[e.networkErrTimeout=2097752]="networkErrTimeout",e[e.networkErrError=2097753]="networkErrError",e[e.networkErrAbort=2097754]="networkErrAbort",e[e.networkErrNoInternet=2097755]="networkErrNoInternet",e[e.networkErrBadRequestUpdate=2097756]="networkErrBadRequestUpdate",e[e.networkErrEnd=3145727]="networkErrEnd",e[e.decodeErrStart=3145728]="decodeErrStart",e[e.decodeErrUnknown=3145728]="decodeErrUnknown",e[e.decodeErrEnd=4194303]="decodeErrEnd",e[e.srcErrStart=4194304]="srcErrStart",e[e.srcErrUnknown=4194304]="srcErrUnknown",e[e.srcErrParsePresentation=4194305]="srcErrParsePresentation",e[e.srcErrParseSegment=4194306]="srcErrParseSegment",e[e.srcErrUnsupportedPresentation=4194307]="srcErrUnsupportedPresentation",e[e.srcErrInvalidSegment=4194308]="srcErrInvalidSegment",e[e.srcErrLiveNoChunks=4194309]="srcErrLiveNoChunks",e[e.srcErrEnd=5242879]="srcErrEnd",e[e.encryptErrStart=5242880]="encryptErrStart",e[e.encryptErrUnknown=5242880]="encryptErrUnknown",e[e.encryptErrDecrypterNotFound=5242881]="encryptErrDecrypterNotFound",e[e.encryptErrDecrypterInit=5242882]="encryptErrDecrypterInit",e[e.encryptErrDecrypterNotSupported=5242883]="encryptErrDecrypterNotSupported",e[e.encryptErrKeyAcquire=5242884]="encryptErrKeyAcquire",e[e.encryptErrDecryption=5242885]="encryptErrDecryption",e[e.encryptErrLicenseAcquire=5242886]="encryptErrLicenseAcquire",e[e.encryptErrCertAcquire=5242887]="encryptErrCertAcquire",e[e.encryptErrEnd=6291455]="encryptErrEnd",e[e.errUnknown=16711680]="errUnknown"}(e.ErrorCode||(e.ErrorCode={})),e.ErrorCode}(f||(f={})),function(e){!function(e){"use strict";!function(e){e[e.video=0]="video",e[e.audio=1]="audio",e[e.text=2]="text"}(e.StreamType||(e.StreamType={})),e.StreamType,function(e){e[e.seaEncryptionSystemId=0]="seaEncryptionSystemId",e[e.seaKeyUri=1]="seaKeyUri",e[e.seaIV=2]="seaIV"}(e.ContentProtectionDataType||(e.ContentProtectionDataType={})),e.ContentProtectionDataType}(e.Presentation||(e.Presentation={})),e.Presentation}(f||(f={})),function(e){!function(e){"use strict";!function(e){e[e.closed=0]="closed",e[e.open=1]="open",e[e.ended=2]="ended"}(e.ReadyState||(e.ReadyState={})),e.ReadyState}(e.VideoElementAdapter||(e.VideoElementAdapter={})),e.VideoElementAdapter}(f||(f={})),function(e){!function(e){"use strict";!function(e){e[e.presentation=0]="presentation",e[e.media=1]="media",e[e.max=2]="max"}(e.Type||(e.Type={})),e.Type}(e.Workflow||(e.Workflow={})),e.Workflow}(f||(f={})),function(e){!function(t){"use strict";var n;!function(e){e[e.None=0]="None",e[e.FetchingKey=1]="FetchingKey",e[e.InitializingCrypto=2]="InitializingCrypto",e[e.Completed=3]="Completed",e[e.Errored=4]="Errored"}(n||(n={}));var a=function(){function t(){this._moduleId="AesHandler",this._disposed=!1,this._decryptor=new e.WebCryptoUtil.Decryptor,this._cryptoInitErrorMessage="",this._cryptoState=0}return t.prototype.dispose=function(){this._disposed||(this._disposed=!0,this._decryptor&&(this._decryptor.dispose(),this._decryptor=null))},t.prototype.init=function(e){var t=e.workflows[1];t.addHandler(t.stepEvents.dataRetrieved,this.onDecrypt,this)},t.prototype.onDownloadKey=function(e){var t=this;e.currentModuleId=this._moduleId;var n=e.sessionContext;return new Promise(function(e){t._fetchAesKey(n),e()})},t.prototype._fetchAesKey=function(n){var a=this,i=n.commonPresentation.periods[0].streams,r=0;!function o(){r<i.length&&function(r){function s(t,i){e.HttpUtil.httpRequestWithRetryConfig(t,"POST","arraybuffer",_,i).then(function(t){n.eventMgr.dispatchEvent(e.EventName.aesKeyFetchCompleted,"keyFetched",{totalDownloadTimeMs:Date.now()-h}),a._cryptoState=2,a._decryptor.initialize(n,r.streamingInfo.aes,t,e.Common.hexStringToUint8Array(u)).then(function(){e.Log.verbose(12,"AES key acquisition in "+(Date.now()-h)+" ms"),n.eventMgr.dispatchEvent(e.EventName.decryptorInitialized,a._decryptor.type),o(),a._cryptoState=3},function(t){e.Log.error(12,"Failed to initialize decryptor: "),a._cryptoInitErrorCode=5242882,a._cryptoInitErrorMessage="AES: "+t,a._cryptoState=4,n.onError(a._cryptoInitErrorCode,a._cryptoInitErrorMessage)})},function(i){e.Log.error(12,"Failed to download AES key url: "+t+", "+e.Common.toHexString(i.code));var r=i&&i.code&&2097755===i.code?i.code:5242884;a._cryptoInitErrorCode=r,a._cryptoInitErrorMessage="Http: "+e.Common.toHexString(i.code),a._cryptoState=4,n.onError(r,a._cryptoInitErrorMessage)})}if(a._disposed)return a._cryptoInitErrorCode=0,a._cryptoState=4,void n.onError(a._cryptoInitErrorCode,"Internal Error Disposed");if(a._decryptor.isInitialized(r.streamingInfo.aes))o();else{var c=t._getAesContentProtectionIndex(r);if(isNaN(c))o();else{var d=r.contentProtections[c],l=d.data(1),u=d.data(2);if(!l||!u)return a._cryptoInitErrorCode=5242883,a._cryptoInitErrorMessage="Missing IV or keyUrl",a._cryptoState=4,void n.onError(a._cryptoInitErrorCode,a._cryptoInitErrorMessage);var f=a._findExistingAesInfo(i,r,l,u);if(f)return r.streamingInfo.aes=f,void o();var p=n.authenticationTokens[t._tokenId];if(!e.AesUtil.verifyKeyUrlWithToken(l,p))return a._cryptoInitErrorCode=5242883,a._cryptoInitErrorMessage="verify AMS hostname failed",a._cryptoState=4,void n.onError(a._cryptoInitErrorCode,a._cryptoInitErrorMessage);var m=[];p&&p.length>0&&(m[0]={name:e.HttpUtil.authorizationHeader,value:p});var _={maxRetries:n.httpRetryPolicySettings.maxRetriesForKeyAcquireFailure,maxWaitTimeBetweenRetriesMS:n.httpRetryPolicySettings.maxWaitTimeBetweenRetriesForKeyAcquireMS,retriableErrors:[2097564]},h=Date.now();e.Log.verbose(12,"Starting AES key acquisition"),a._cryptoState=1;var b=n.httpDataRetrieverSettings.getDownloadRequestParametersAsync;b&&"function"==typeof b?b(l).then(function(t){t.headers&&(e.Log.verbose(12,"Adding additional headers from META to key request"),Object.keys(t.headers).forEach(function(e){var n=t.headers[e];m.push({name:e,value:n})})),s(t.url,m)},function(t){e.Log.error(12,"Failed to update request: "+JSON.stringify(t)),a._cryptoInitErrorCode=2097756,a._cryptoInitErrorMessage="getDownloadRequestParametersAsync failed to update key request",a._cryptoState=4,n.onError(a._cryptoInitErrorCode,a._cryptoInitErrorMessage)}):s(l,m)}}}(i[r++])}()},t.prototype.onDecrypt=function(t){var n=this;return t.currentModuleId=this._moduleId,new Promise(function(a,i){function r(){if(s._disposed)return e.Failure.attachFailureToRequest(t,t.currentModuleId,0),void i();if(4===s._cryptoState)return e.Failure.attachFailureToRequest(t,t.currentModuleId,s._cryptoInitErrorCode,s._cryptoInitErrorMessage),void i();var n=t.sessionContext.hybridManager,d=c<t.urlsToRetrieve.length?t.urlsToRetrieve[c]:void 0;d?n&&!n.isEncryptionEnabled(d.url)?(c++,e.Util.setTimeout(function(){r()},0)):3===s._cryptoState?(c++,e.Util.setTimeout(o,0,d)):e.Util.setTimeout(function(){r()},50):a()}function o(n){if(s._disposed)return e.Failure.attachFailureToRequest(t,t.currentModuleId,0),void i();if(n.mediaData){try{var o=new DataView(n.mediaData);e.Mp4Util.GetBoxByType(o,"moof")&&e.Log.error(12,"Found moof box in supposedly encrypted fragment: "+n.url)}catch(t){e.Log.error(12,"Media data was not an ArrayBuffer. Media data type was: "+typeof n.mediaData)}var c=Date.now();s._decryptor.decrypt(t.requestedStream.streamingInfo.aes,n.mediaData).then(function(a){var i=Date.now()-c;e.Log.verbose(12,"AES decrypt data in "+i+" ms, bytes: "+n.mediaData.byteLength+" url: "+n.url),n.mediaData=a,e.StreamUtil.getBufferData(t).dispatchDownloadDecrypted(s._createMediaDecrypted(t,n,i)),t.sessionContext.decryptionTracker&&t.sessionContext.decryptionTracker.updateDecryptionSpeedInfo(n.mediaData.byteLength,i/1e3),r()},function(i){var r="Failed to AES decrypt url: "+n.url+" contentLength= "+n.contentLengthFromResponseHeaders+" ,downloadedDataSize = "+(n.mediaData&&n.mediaData.byteLength)+" ,errorDetails = "+JSON.stringify(i);t.sessionContext.eventMgr.dispatchEvent(e.EventName.decryptionFailed,r,{streamType:t.reqStreamAsText}),e.Log.error(12,r),t.state=2,t.failTracker.log(new e.Failure.Record(t.currentModuleId,5242885,r),t.selectedTrack),t.failTracker.noDataReceivedFailure=!1,t.retryWaitTimeMSec=0,a()})}else r()}var s=n,c=0,d=t.requestedStream.streamingInfo.aes;return s._decryptor.isInitialized(d)||0!==s._cryptoState?void r():void a()})},t._getAesContentProtectionIndex=function(e){for(var n=e.contentProtections,a=0;a<n.length;a++)if(n[a].data(0)===t._aesCbc128SystemId)return a;return NaN},t.prototype._findExistingAesInfo=function(e,t,n,a){for(var i=0;i<e.length;i++)if(e[i]!==t)for(var r=e[i].contentProtections,o=0;o<r.length;o++){var s=r[o].data(1),c=r[o].data(2);if(s===n&&c===a&&this._decryptor.isInitialized(e[i].streamingInfo.aes))return e[i].streamingInfo.aes}return null},t.prototype._createMediaDecrypted=function(t,n,a){var i=t.requestedStream.presentationTimeOffsetInSec,r=t.currentSegment.segmentInfo,o=2===n.requestType?null:r.mediaTimestamp/r.timescale;return new e.Context.MediaDecrypted(n.url,t.selectedTrack.bitrate,o,n.mediaData,i,r.timescale,r.durationInSec,a)},t._aesCbc128SystemId="urn:mpeg:dash:sea:aes128-cbc:2013",t._tokenId="AES",t}();t.AesHandler=a}(e.ContentProtection||(e.ContentProtection={})),e.ContentProtection}(f||(f={})),function(e){!function(t){"use strict";t.BANDWIDTH_KEY="BandwidthKbps",t.CACHE_VALIDITY_DAYS=7;var n=function(){function n(n,a,i,r,o){this._bandwidthSettings=n,this._decryptionTracker=a,this._averageCalc=new e.Util.AverageCalculator(this._bandwidthSettings.minBandwidthHistoryCount,this._bandwidthSettings.maxBandwidthHistoryCount),this._latencyCalc=new e.Util.AverageCalculator(this._bandwidthSettings.minBandwidthHistoryCount,this._bandwidthSettings.maxBandwidthHistoryCount),this._isFinegrainedBandwidthTelemetryEnabled=o||!1;var s=!i||0>=i?void 0:String(i);if(this._storedFirstBandwidth=!1,r){this._storage=new e.Util.Storage(!1,t.CACHE_VALIDITY_DAYS);var c=this._storage.getItem(t.BANDWIDTH_KEY,s);s=c.value,this._isFinegrainedBandwidthTelemetryEnabled&&(this._usedStoredBandwidth=c.changed,this._usedStoredBandwidth&&(this._storedBandwidth=s))}if(s){var d=parseInt(s);!isNaN(d)&&d>0&&this._averageCalc.addValue(d)}}return Object.defineProperty(n.prototype,"averageBandwidthInKbps",{get:function(){return Math.min(this._averageCalc.weightedAverage,this._averageCalc.average)},enumerable:!0,configurable:!0}),n.prototype.getAverageBandwidthInKbpsIncludingInProgressRequest=function(e){return Math.min(this._averageCalc.getWeightedAverageIncludingInProgressRequest(e),this._averageCalc.getAverageIncludingInProgressRequest(e))},Object.defineProperty(n.prototype,"latestInKbps",{get:function(){return this._averageCalc.latest},enumerable:!0,configurable:!0}),n.prototype.averageLatencyInMs=function(){return Math.max(this._latencyCalc.weightedAverage,this._latencyCalc.average)},n.prototype.latestLatencyInMs=function(){return this._latencyCalc.latest},n.prototype.perceivedBandwidthKbps=function(){return this.averageBandwidthInKbps*this._bandwidthSettings.bandwidthUsabilityPercent},n.prototype.perceivedBandwidthBps=function(){return 1e3*this.perceivedBandwidthKbps()},n.prototype.usedStoredBandwidth=function(){return this._usedStoredBandwidth},n.prototype.storedBandwidth=function(){return parseInt(this._storedBandwidth)},n.prototype.firstPerceivedBandwidth=function(){return parseInt(this._firstPerceivedBandwidth)},n.prototype.measuredBandwidth=function(){return 1e3*this.averageBandwidthInKbps},n.prototype.getAdjustedBandwidthUsabilityFactor=function(e){return(e.videoBufferData&&e.videoBufferData.bufferLevel)<e.prerollBufferInSec()&&!e.isLiveEdge()?this._bandwidthSettings.minBandwidthUsabilityPercent:this._bandwidthSettings.bandwidthUsabilityPercent},n.prototype.measuredBandwidthIncludingInProgressRequest=function(e){return 1e3*this.getAverageBandwidthInKbpsIncludingInProgressRequest(e/1e3)},n.prototype.updateBandwidthInfo=function(t,n,a,i){if(this.isBandwithDataValid(t)){if(t.responseLengthInBytes<this._bandwidthSettings.bandwidthDataSizeThresholdInBytes)return void e.Log.verbose(5,"Ignoring bandwidth data, retrieved size "+t.responseLengthInBytes+" is less than the limit "+this._bandwidthSettings.bandwidthDataSizeThresholdInBytes+" bytes");var r=t.bandwidth;if(r>this._bandwidthSettings.bandwidthEstimationMaxKbps)return e.Log.verbose(5,"Ignoring bandwidth estimation "+Math.floor(r)+" Kbps, greater than configured max "+this._bandwidthSettings.bandwidthEstimationMaxKbps+" Kbps"),void this._averageCalc.dropOldestKeepAtLeastOne();var o=i.currentSegment?e.StreamUtil.getSegmentDuration(i):a.durationInSec,s=a.bitrate;if(isNaN(s)||0>=s||isNaN(o)||0>=o||t.responseLengthInBytes<=0)return void e.Log.verbose(5,"Ignoring bandwidth estimation, supplied bitrate: "+s+", supplied chunk duration: "+o+", downloaded fragment size: "+t.responseLengthInBytes);var c=8*t.responseLengthInBytes,d=o*s,l=t.totalDownloadTimeMs-t.downloadTimeMs;!i.sessionContext.ignoreRequestLatency&&this._bandwidthSettings.useVariableFragmentSizeMode&&d!=c&&i.failTracker&&i.failTracker.isNone()&&(r=d/(l+d/c*t.downloadTimeMs),e.Log.verbose(5,"updateBandWidthInfo - vfsMode On, vfs bandwidth="+r+"kbps and reported bandwidth="+t.latencyAdjustedBandwidth+"kbps and bandwidthInfo.responseLengthInBytes="+t.responseLengthInBytes)),i.sessionContext.wasLatencyHighForLastRequest=l/t.totalDownloadTimeMs>.5;var u=t.totalDownloadTimeMs;i.sessionContext.ignoreRequestLatency&&r<this.perceivedBandwidthKbps()/2&&(e.Log.verbose(5,"Resetting Avg Calculator due to BW drop"),this._averageCalc.reset()),this._averageCalc.addValue(r),this._latencyCalc.addValue(l),this.setStoredBandwidth(String(Math.round(this.perceivedBandwidthKbps()))),!this._storedFirstBandwidth&&this._isFinegrainedBandwidthTelemetryEnabled&&(this._firstPerceivedBandwidth=this.getStoredBandwidth(),this._storedFirstBandwidth=!0),e.Log.verbose(5,"updateBandWidthInfo -  currentBw: "+Math.floor(this._averageCalc.latest)+" Kbps averageBw: "+Math.floor(this._averageCalc.average)+" Kbps size: "+t.responseLengthInBytes+" bytes time-taken: "+u+" ms")}},n.prototype.setStoredBandwidth=function(e){this._storage&&this._storage.setItem(t.BANDWIDTH_KEY,e)},n.prototype.getStoredBandwidth=function(){return this._storage&&this._storage.getItem(t.BANDWIDTH_KEY).value},n.prototype.getInProgressRequestBandwidth=function(e){if(e.videoBufferData){if(e.videoBufferData.downloadCompleted&&e.videoBufferData.downloadCompleted.mediaDownload&&e.videoBufferData.downloadRequested&&e.videoBufferData.downloadRequested.mediaTime!==e.videoBufferData.downloadCompleted.mediaDownload.mediaTime)return e.videoBufferData.downloadRequested.measuredBandwidth;if(!e.videoBufferData.downloadCompleted&&e.videoBufferData.downloadRequested)return e.videoBufferData.downloadRequested.measuredBandwidth}return 0},n.prototype.isBandwithDataValid=function(t){try{e.Log.verbose(5,"updateBandWidthInfo - analyzing bandwidth data: received size="+t.responseLengthInBytes+" bytes, download time="+t.downloadTimeMs+" ms, TOTAL download time="+t.bandwidth+" ms, TOTAL download time="+t.latencyAdjustedBandwidth+" ms, latencyAdjustedBandwidth time="+t.totalDownloadTimeMs+" ms, "+(this._bandwidthSettings.useVariableFragmentSizeMode?"(default mode) ":"")+"bandwidth = "+t.perceivedBandwidth+" kbps")}catch(e){return!1}return!0},n.prototype.reportHeuristicsData=function(t,n,a){var i=0;if(t.shouldConsiderInProgressRequestForBE()&&this.getInProgressRequestBandwidth(t)>0){var r=this.getInProgressRequestBandwidth(t);i=this.measuredBandwidthIncludingInProgressRequest(r),e.Log.verbose(5,"InProgress request bandwidthBPS = "+r)}else i=this.measuredBandwidth();var o=i*this.getAdjustedBandwidthUsabilityFactor(t),s=this._decryptionTracker?this._decryptionTracker.averageDecryptionSpeed:1/0;if(e.Log.verbose(5," averageBW reporting: "+Math.round(i/1e3)+" Kbps adjusted averageBW reporting: "+Math.round(o/1e3)+" Kbps decryptionBW: "+Math.round(s/1e3)+" Kbps, chunk duration: "+a),!a)throw new Error("reportHeuristicsData failed, invalid chunkDuration");for(var c=0;c<n.tracksData.length;c++)if(n.tracksData[c].selectable){var d=n.tracksData[c].trackInfo.bitrate*a;if(o){var l=d/o,u=s?d/s:0;n.tracksData[c].dataRetrieverEstimationInWallClockSec=l+u;var f,p=Math.floor(1e3*n.tracksData[c].dataRetrieverEstimationInWallClockSec);f=t.ignoreRequestLatency?p:p-this.averageLatencyInMs(),n.tracksData[c].waitTimeForJitInMs=f&&f>=0?f:0,e.Log.verbose(5,"Estimated time to download "+d+" bits = "+n.tracksData[c].dataRetrieverEstimationInWallClockSec+" s")}else n.tracksData[c].dataRetrieverEstimationInWallClockSec=1/0}},n}();t.BandwidthTracker=n;var a=function(){function t(e){void 0===e&&(e=!1),this.requestStartTimeInMS=(new Date).getTime(),this.responseStartTimeInMS=null,this.responseEndTimeInMS=null,this.responseLengthInBytes=0,this.ignoreRequestLatency=e}return Object.defineProperty(t.prototype,"totalDownloadTimeMs",{get:function(){return this.responseEndTimeInMS<=this.requestStartTimeInMS?(e.Log.warning(19,"BandwidthInfo.totalDownloadTimeMs: unexpected values:"+this.responseEndTimeInMS+" should not be < "+this.requestStartTimeInMS),1):this.responseEndTimeInMS-this.requestStartTimeInMS},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"latencyTimeMs",{get:function(){return this.responseEndTimeInMS<=this.requestStartTimeInMS?(e.Log.warning(19,"BandwidthInfo.latencyTimeMs: unexpected values:"+this.responseStartTimeInMS+" should not be < "+this.requestStartTimeInMS),1):this.responseStartTimeInMS-this.requestStartTimeInMS},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"downloadTimeMs",{get:function(){return this.responseEndTimeInMS<=this.requestStartTimeInMS?(e.Log.warning(19,"BandwidthInfo.downloadTimeMs: unexpected values:"+this.responseEndTimeInMS+" should not be < "+this.responseStartTimeInMS),1):this.responseEndTimeInMS-this.responseStartTimeInMS},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"latencyAdjustedBandwidth",{get:function(){return e.assert(this.totalDownloadTimeMs>0,"BandwidthInfo.bandwidth: unexpected value:"+this.totalDownloadTimeMs+" should be > 0"),8*this.responseLengthInBytes/this.downloadTimeMs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"perceivedBandwidth",{get:function(){return e.assert(this.downloadTimeMs>0,"BandwidthInfo.downloadTimeMs: unexpected value:"+this.downloadTimeMs+" should be > 0"),8*this.responseLengthInBytes/this.totalDownloadTimeMs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bandwidth",{get:function(){return e.assert(this.downloadTimeMs>0,"BandwidthInfo.downloadTimeMs: unexpected value:"+this.downloadTimeMs+" should be > 0"),this.ignoreRequestLatency?this.latencyAdjustedBandwidth:this.perceivedBandwidth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bandwidthInbps",{get:function(){try{return 1e3*this.bandwidth}catch(e){return 0}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isValid",{get:function(){return this.responseEndTimeInMS>0&&this.responseStartTimeInMS>0&&this.responseLengthInBytes>0},enumerable:!0,configurable:!0}),t}();t.BandwidthInfo=a}(e.Heuristics||(e.Heuristics={})),e.Heuristics}(f||(f={})),function(e){!function(t){"use strict";var n=function(){function t(){this._moduleId="DashMediaSegmentParser"}return t.prototype.dispose=function(){},t.prototype.init=function(e){var t=e.workflows[1];t.addHandler(t.stepEvents.dataRetrieved,this.onGetData,this)},t.prototype.onGetData=function(t){function n(){var n,i,r,o,s,c,d,l;l=t.currentSegment;var u=t.urlsToRetrieve.findFirst(function(e){return 1===e.requestType});if(!u||!u.mediaData)throw new Error(u.url+": no media segment data found");if(n=new DataView(u.mediaData),!(i=e.Mp4Util.GetBoxByType(n,"moof")))return new a(4194306,"moof not found");if(!(r=e.Mp4Util.GetBoxByType(i.data,"traf")))return new a(4194306,"traf not found");if(!(o=e.Mp4Util.GetTfhdBox(r.data)))return new a(4194306,"tfhd not found");if(!(s=e.Mp4Util.GetTrunBox(r.data)))return new a(4194306,"trun not found");if(!(c=e.Mp4Util.GetTfdtBox(r.data)))return new a(4194306,"tfdt not found");if(e.Common.diffTimes(c.baseMediaDecodeTime,l.segmentInfo.mediaTimestamp))throw new Error("Segment mismatch, requested: "+l.segmentInfo.mediaTimestamp+" got: "+c.baseMediaDecodeTime);return d=function(t,n){var a=0;return n.flags&e.Mp4Util.TrunBox.flags_sampleDurationPresent?n.sampleInfoArray.forEach(function(e){a+=e.sampleDuration}):t.defaultSampleDuration?a=t.defaultSampleDuration*n.sampleCount:e.Log.warning(10,"Cannot calculate segment duration from 'tfhd' and 'trun'"),a}(o,s),0===d?new a(4194308,"failed to derive segment duration"):(e.Log.verbose(10,"Segment duration: "+d),t.requestedStream.segments.updateSegmentDuration(l.segmentInfo.presTimeInSec,d)?(l.segmentInfo.mediaDuration=d,u.durationInSec=l.segmentInfo.durationInSec,null):new a(4194308,"failed to update segment duration in container"))}return t.currentModuleId=this._moduleId,new Promise(function(a,i){var r;if(function(t){var n=t.urlsToRetrieve.findFirst(function(e){return 1===e.requestType});if(n&&n.mediaData){var a=new DataView(n.mediaData),i=e.Mp4Util.GetEmsgBoxes(a);i&&i.length>0&&t.sessionContext.eventMgr.dispatchEvent(e.EventName.emsgAvailable,null,i)}}(t),r=t.currentSegment,!t.sessionContext.commonPresentation.isLive||t.sessionContext.commonPresentation.minimumUpdatePeriodInSec||r.next)a();else{if(!r.segmentInfo.mediaDuration){var o=n();if(o)return e.Failure.attachFailureToRequest(t,t.currentModuleId,o.errorCode,o.message),void i()}(function(){var n=t.requestedStream,a=t.currentSegment.segmentInfo,i=n.segments;a.mediaDuration&&i.addMediaSegmentInfo(a.index+1,e.Timestamp.add(a.mediaTimestampStr,a.mediaDuration),NaN,a.presentationOffset,a.timescale)})(),a()}})},t}();t.Parser=n;var a=function(e,t){this.errorCode=e,this.message=t}}(e.DashMediaSegment||(e.DashMediaSegment={})),e.DashMediaSegment}(f||(f={})),d=this.__extends||function(e,t){function n(){this.constructor=e}for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);n.prototype=t.prototype,e.prototype=new n},function(e){!function(t){"use strict";function n(e){if(!("schemeIdUri"in e))throw new Error("ContentProtection missing @schemeIdUri");return e.schemeIdUri.toLowerCase()===u.schemeIdUri?new u(e):new f(e)}var a=function(){function t(){this._moduleId="DashPresentationParser"}return t.prototype.dispose=function(){},t.prototype.init=function(e){var t=e.workflows[0];t.addHandler(t.stepEvents.dataRetrieved,this.onParse,this)},t.prototype.onParse=function(n){return n.currentModuleId=this._moduleId,new Promise(function(a,r){var o,s,c;if(!n.urlsToRetrieve[0].presentationData)throw new Error(n.urlsToRetrieve[0].url+": no presentation data found");o=n.sessionContext;var d=t._getPublishTime(n.urlsToRetrieve[0].presentationData);if(d&&o.commonPresentation&&o.commonPresentation.publishTime&&o.commonPresentation.publishTime.getTime()>=Date.parse(d))return e.Log.verbose(4,"skipping MPD parse, not newer than last parsed: "+n.urlsToRetrieve[0].url),void a();if(s=t._getBaseURL(o.presentationUrl),!(c=new i(n.urlsToRetrieve[0].presentationData,s))||!c.periods)return e.Failure.attachFailureToRequest(n,n.currentModuleId,4194305,n.urlsToRetrieve[0].url+": failed to generate DASH presentation"),void r("failed to generate DASH presentation");if(!t._validPresentation(c))return e.Failure.attachFailureToRequest(n,n.currentModuleId,4194307,n.urlsToRetrieve[0].url+": unsupported presentation"),void r("unsupported presentation");for(var l=c.periods[0].streams,u=0;u<c.periods[0].streams.length;u++)2!==l[u].type||l[u].segments||(l.splice(u,1),e.Log.warning(4,"Text stream "+u+" has empty segments.  Ignoring the text stream."));var f=function(t){var n=[];return t.forEach(function(t){if(2!==t.type){var a=t.tracks,i=t.codec.substr(0,t.codec.indexOf("=")+1);if(a&&a.length>1){var r=[],o=a.filter(function(t){var n=t.codecs();if(n){var a=i+'"'+n+'"',o=e.VideoElementAdapter.isTypeSupported(a);return e.Log.verbose(1,"MediaSource.isTypeSupported() for "+a+"= "+o),o||r.push(t),o}return!0});o.length>=1&&o.length!=a.length&&(t.tracks=o,t._adaptationSet.codecs=t.tracks[t.tracks.length-1].codecs(),n=n.concat(r))}}}),n}(l),p=c.isLive,m=p&&null!==c.periods[0].streams.findFirst(function(e){return(0===e.type||1===e.type)&&!e.segments});if(o.updatePresentation(c),e.Log.verbose(4,"MPD updated. Streaming type: "+(p?"Live":"VOD")),m)return e.Failure.attachFailureToRequest(n,n.currentModuleId,4194309,n.urlsToRetrieve[0].url+": no chunks in the live manifest"),void r("no chunks in this presentation");if(n.sessionContext.eventMgr.dispatchEvent(e.EventName.manifestParsingCompleted),f&&f.length>0){var _=f.map(function(e){return e.codecs()});n.sessionContext.eventMgr.dispatchEvent(e.EventName.unsupportedTracksRemoved,"unsupported qualities removed from presentation",_)}a()})},t._removeAudioOrVideoTracks=function(e,t){var n;do{-1!==(n=e.periods[0].streams.findIndexOf(function(e){return e.type===t}))&&e.periods[0].streams.splice(n,1)}while(-1!==n);return e},t._validPresentation=function(t){if(0===t.periods.length||t.periods.length>1)return e.Log.error(4,"invalid period count: "+(t.periods?t.periods.length.toString():"undefined")),!1;if(!t.periods[0].streams)return e.Log.error(4,"no streams found"),!1;for(var n=0;n<t.periods[0].streams.length;n++)e.Log.verbose(4,"Stream: "+t.periods[0].streams[n].codec);return!0},t._getPublishTime=function(e){var t,n,a="";return e&&(t=e.match(/<MPD[^>]*>/i))&&t.length>0&&(n=t[0].match(/publishTime="[^"]*/i))&&n.length>0&&(a=n[0].slice(13)),a},t._getBaseURL=function(e){var t,n=e;if(-1!==(t=n.indexOf("?"))&&(n=n.slice(0,t)),-1===(t=n.lastIndexOf("/")))throw new Error(e+": could not derive base URL");return n.slice(0,t+1)},t}();t.Parser=a;var i=function(){function t(e,t){var n,a=this,i=[];if(this._lastRetrievalTime=new Date,(n=Dash.dependencies.DashParser()).debug=new m,n.errHandler=new _,this._manifest=n.parse(e,t),this._manifest){if("Period_asArray"in this._manifest&&this._manifest.Period_asArray.length>0&&this._manifest.Period_asArray.forEach(function(e){i.push(new r(e,a.publishTime,a.isLive))}),this._periods=i,i.length>1)throw new Error("Error parsing MPD: multiple periods not supported");"dynamic"===this._manifest.type&&0===this._manifest.minimumUpdatePeriod&&(this._timeShiftTracker=new p(i,this._manifest.timeShiftBufferDepth))}}return Object.defineProperty(t.prototype,"segmentBoundaries",{get:function(){var e=[];if(this.periods&&this.periods.length>0&&this.periods[0].streams&&this.periods[0].streams.length>0)for(var t=0;t<this.periods[0].streams.length;t++)if(0===this.periods[0].streams[t].type&&this.periods[0].streams[t].segments){for(var n=this.periods[0].streams[t].segments.first;n;)e.push(n.segmentInfo.presTimeInSec),n=n.next;break}return e},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._periods&&(this._periods.forEach(function(e){e.dispose()}),this._periods=[]),this._manifest=null,this._lastRetrievalTime=null},Object.defineProperty(t.prototype,"startTime",{get:function(){var e=null;return"availabilityStartTime"in this._manifest&&(e=new Date(this._manifest.availabilityStartTime)),e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"publishTime",{get:function(){return"publishTime"in this._manifest?new Date(this._manifest.publishTime):this._lastRetrievalTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLive",{get:function(){return"dynamic"===this._manifest.type},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minimumUpdatePeriodInSec",{get:function(){return this._manifest.minimumUpdatePeriod},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"didAudioVideoIdsSwitchedAfterManifestRefresh",{get:function(){return!!this.periods&&this.periods.length>0&&this.periods[0].didAudioVideoIdsSwitched},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"durationInSec",{get:function(){var e=0;return"mediaPresentationDuration"in this._manifest&&(e=this._manifest.mediaPresentationDuration),e},enumerable:!0,configurable:!0}),t.prototype.getWallClockTimeAtPresentationTime=function(e){var t=null;if(this._periods&&this._periods.length>0&&this._periods[0].streams&&this._periods[0].streams.length>0&&this._periods[0].streams[0].segments&&this._periods[0].streams[0].segments.first&&this._periods[0].streams[0].producerReferenceTime){var n=this._periods[0].streams[0],a=n.segments.first.segmentInfo.timescale,i=0;if(this.isLive){var r=n.producerReferenceTime.presentationTime/a;i=e+n.rawPresentationTimeOffset/a-r}else i=e-n.segments.first.segmentInfo.presTimeInSec;var o=n.producerReferenceTime.wallClockTime;t=new Date(o.getTime()+1e3*i)}return t},Object.defineProperty(t.prototype,"timeShiftBufferDepth",{get:function(){return this._manifest.timeShiftBufferDepth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"playableWindow",{get:function(){return new e.Common.TimeRange(this._playWindowLeftEdge(),this._playWindowLiveEdge())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxSegmentDuration",{get:function(){var e=0;return this._periods.forEach(function(t){e=Math.max(e,t.maxSegmentDuration)}),e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"periods",{get:function(){return this._periods},enumerable:!0,configurable:!0}),t.prototype.toJson=function(){return this._manifest},t.prototype.transferPresentationState=function(t){var n=t,a=[],i=[];this._manifest=n._manifest,this._lastRetrievalTime=n._lastRetrievalTime,this._timeShiftTracker=n._timeShiftTracker,this.periods.forEach(function(e){a.push(e)}),n.periods.forEach(function(e){i.push(e)});for(var r=0;r<i.length;r++)for(var o=0;o<a.length;o++)if(a[o]&&i[r].startInSec===a[o].startInSec){a[o].transferPeriodState(i[r]),i[r]=null,a[o]=null;break}a=a.filter(function(e){return!!e}),i=i.filter(function(e){return!!e}),a.length>0&&e.Log.verbose(4,"Periods removed from MPD: "+a.length),i.length>0&&e.Log.verbose(4,"Periods added to MPD: "+i.length)},t.prototype.adjustPlayableWindow=function(e){this._timeShiftTracker&&this._timeShiftTracker.adjust(e)},t.prototype.adjustPlayableWindowForChromeSourceDelay=function(e){this._timeShiftTracker&&this._timeShiftTracker.adjustForChromeSourceDelay(e)},t.prototype._playWindowLeftEdge=function(){var e,t=0;return this._timeShiftTracker?this._timeShiftTracker.leftEdge:this._periods&&this._periods.length&&(e=this._periods[0].streams)&&e.length?(e.forEach(function(e){2!==e.type&&e.segments&&e.segments.first&&(t=Math.max(t,e.segments.first.segmentInfo.presTimeInSec))}),t):0},t.prototype._playWindowLiveEdge=function(){var e,t=1/0;return this._timeShiftTracker?this._timeShiftTracker.liveEdge:this._periods&&this._periods.length&&(e=this._periods[0].streams)&&e.length?(e.forEach(function(e){if(2!==e.type&&e.segments&&e.segments.last){var n=e.segments.last.segmentInfo;t=Math.min(t,n.presTimeInSec+(n.durationInSec||0))}}),t):0},t.prototype.getTimeSinceTimeShiftTrackerStartSec=function(){return this._timeShiftTracker&&this._timeShiftTracker.timeSinceTimeShiftTrackerStartSec||0},t}();t.Mpd=i;var r=function(){function t(e,t,n){var a=this;this._didAudioVideoIdsSwitched=!1;var i=[];this.startInSec="start"in e?e.start:0,"AdaptationSet_asArray"in e&&e.AdaptationSet_asArray.length>0&&e.AdaptationSet_asArray.forEach(function(e){i.push(new o(e,t,n,a.startInSec))}),this._streams=i}return Object.defineProperty(t.prototype,"streams",{get:function(){return this._streams},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxSegmentDuration",{get:function(){var e=0;return this._streams.forEach(function(t){e=Math.max(e,t.maxSegmentDuration)}),e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"didAudioVideoIdsSwitched",{get:function(){return this._didAudioVideoIdsSwitched},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._streams&&(this._streams.forEach(function(e){e.dispose()}),this._streams=[])},t.prototype.didIdsSwitchedForAudioAndVideo=function(e,t){for(var n=0;n<t.length;n++)for(var a=0;a<e.length;a++)if(t[n].id===e[a].id&&t[n].type!==e[a].type)return!0;return!1},t.prototype.transferPeriodState=function(t){var n=[],a=[];this.streams.forEach(function(e){n.push(e)}),t.streams.forEach(function(e){a.push(e)});for(var i=0;i<a.length;i++)for(var r=0;r<n.length;r++)if(n[r]&&a[i].id===n[r].id){n[r].transferStreamState(a[i]),a[i]=null,n[r]=null;break}n=n.filter(function(e){return!!e}),a=a.filter(function(e){return!!e}),n.length>0&&e.Log.verbose(4,"Adaptation Sets removed from period: "+n.length),a.length>0&&e.Log.verbose(4,"Adaptation Sets added to period: "+a.length),this._didAudioVideoIdsSwitched=this.didIdsSwitchedForAudioAndVideo(n,a)},t}();t.Period=r;var o=function(){function t(t,a,i,r){var o,d,l,u,f=[],p=[];if(this._adaptationSet=t,this.streamingInfo=new e.Presentation.MediaStreamStreamingInfo,"SegmentTemplate"in t&&(this._segmentTemplate=t.SegmentTemplate,"SegmentTimeline"in this._segmentTemplate)&&(o=this._segmentTemplate.SegmentTimeline,l=r*(d=this._segmentTemplate.timescale?this._segmentTemplate.timescale:1),this._rawPresentationTimeOffset=this._segmentTemplate.presentationTimeOffset?this._segmentTemplate.presentationTimeOffset:0,l-=this._rawPresentationTimeOffset,this._normalizedPtoInSec=l/d,u=new e.Presentation.MediaSegmentInfoContainer(d,l,a,i),"S_asArray"in o)){var m,_="0";m=this._segmentTemplate.startNumber?this._segmentTemplate.startNumber:0;for(var h=0;h<o.S_asArray.length;h++){var b,g,v,y;g="t"in(b=o.S_asArray[h])?b.t_str:_,v="r"in b?b.r:0,y=new e.Presentation.SegmentRunEntry(m,g,b.d,l,d,v);var S=u.addMediaSegmentRun(y);m+=S,_=e.Timestamp.add(g,b.d*S)}this.segments=u}"Representation"in t&&t.Representation_asArray.forEach(function(e){f.push(new s(e))}),this._tracks=f.sort(function(e,t){return e.bitrate-t.bitrate}),"ContentProtection"in t&&t.ContentProtection_asArray.forEach(function(e){p.push(n(e))}),this._contentProtections=p,"ProducerReferenceTime"in t&&(this._producerReferenceTime=new c(t.ProducerReferenceTime))}return t.prototype.dispose=function(){this._tracks&&(this._tracks.forEach(function(e){e.dispose()}),this._tracks=[]),this._contentProtections&&(this._contentProtections.forEach(function(e){e.dispose()}),this._contentProtections=[]),this.segments&&(this.segments.dispose(),this.segments=null),this.streamingInfo&&(this.streamingInfo.dispose(),this.streamingInfo=null),this._adaptationSet=null,this._segmentTemplate=null},Object.defineProperty(t.prototype,"codec",{get:function(){var e=this._adaptationSet;return e.mimeType+';codecs="'+function(){var t=e.codecs;if(!t)for(var n=0;n<e.Representation_asArray.length;n++)if(e.Representation_asArray[n].codecs){t=e.Representation_asArray[n].codecs;break}return t}()+'"'},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){var t;switch(this._adaptationSet.contentType){case"video":t=0;break;case"audio":t=1;break;case"text":t=2;break;default:e.Log.error(4,"Stream type not supported: "+this._adaptationSet.contentType)}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){var e=null;return"id"in this._adaptationSet?e=this._adaptationSet.id.toString():(e=this._adaptationSet.codecs,"lang"in this._adaptationSet&&(e+=this._adaptationSet.lang)),e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"label",{get:function(){var e=null;return"Label"in this._adaptationSet&&(e=this._adaptationSet.Label),e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"language",{get:function(){var e=null;return"lang"in this._adaptationSet&&(e=this._adaptationSet.lang),e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"initUrlTemplate",{get:function(){var e=null;return"initialization"in this._segmentTemplate&&(e=this._adaptationSet.BaseURL+this._segmentTemplate.initialization),e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mediaUrlTemplate",{get:function(){var e=null;return"media"in this._segmentTemplate&&(e=this._adaptationSet.BaseURL+this._segmentTemplate.media),e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"presentationTimeOffsetInSec",{get:function(){return this._normalizedPtoInSec},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rawPresentationTimeOffset",{get:function(){return this._rawPresentationTimeOffset},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tracks",{get:function(){return this._tracks},set:function(e){this._tracks=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contentProtections",{get:function(){return this._contentProtections},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"producerReferenceTime",{get:function(){return this._producerReferenceTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxSegmentDuration",{get:function(){return this.segments.maxSegmentDuration},enumerable:!0,configurable:!0}),t.prototype.transferStreamState=function(t){var n=[],a=[];this.tracks.forEach(function(e){n.push(e)}),t.tracks.forEach(function(e){a.push(e)});for(var i=0;i<a.length;i++)for(var r=0;r<n.length;r++)if(n[r]&&a[i].id===n[r].id){a[i]=null,n[r]=null;break}n=n.filter(function(e){return!!e}),a=a.filter(function(e){return!!e}),n.length>0&&e.Log.verbose(4,"Representations removed from MPD: "+n.length),a.length>0&&e.Log.verbose(4,"Representations added to MPD: "+a.length),this.segments.update(t.segments)},t}();t.AdaptationSet=o;var s=function(){function t(t){if(!("id"in t))throw new Error("Representation missing @id");if(this._id=t.id,!("bandwidth"in t))throw new Error("Representation missing @bandwidth");this._bitrate=t.bandwidth,this._height=t.height,this._width=t.width,this._codecs=t.codecs,this.streamingInfo=new e.Presentation.MediaTrackStreamingInfo}return Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bitrate",{get:function(){return this._bitrate},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),t.prototype.codecs=function(){return this._codecs},Object.defineProperty(t.prototype,"selectable",{get:function(){return this.streamingInfo.selectable},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){},t}();t.Representation=s;var c=function(){function e(e){if(!("id"in e))throw new Error("ProducerReferenceTime missing @id");if(this._id=e.id,!("presentationTime"in e))throw new Error("ProducerReferenceTime missing @presentationTime");if(this._presentationTime=e.presentationTime,!("type"in e))throw new Error("ProducerReferenceTime missing @type");if(this._type=e.type,!("wallClockTime"in e))throw new Error("ProducerReferenceTime missing @wallClockTime");this._wallClockTime=e.wallClockTime}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"presentationTime",{get:function(){return this._presentationTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wallClockTime",{get:function(){return this._wallClockTime},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){},e}();t.ProducerReferenceTime=c;var l=function(){function e(e){if(!("schemeIdUri"in e))throw new Error("ContentProtection missing @schemeIdUri");this.schemeIdUri=e.schemeIdUri,"value_str"in e?this._value=e.value_str:"value"in e&&(this._value=e.value),"id"in e&&(this._id=e.id)}return Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){},e}();t.BaseContentProtection=l;var u=function(e){function t(t){if(e.call(this,t),"SegmentEncryption"in t&&(this._seaEncryptionSystemId=t.SegmentEncryption.schemeIdUri,"CryptoPeriod"in t)){var n=t.CryptoPeriod;"keyUriTemplate"in n&&(this._keyUri=n.keyUriTemplate),"IV"in n&&(this._iv=n.IV)}}return d(t,e),t.prototype.data=function(e){switch(e){case 0:return this._seaEncryptionSystemId;case 1:return this._keyUri;case 2:return this._iv;default:return null}},t.prototype.dispose=function(){},t.schemeIdUri="urn:mpeg:dash:sea:2012",t}(l);t.SegmentEncryptionContentProtection=u;var f=function(e){function t(t){e.call(this,t)}return d(t,e),t.prototype.data=function(){return null},t.prototype.dispose=function(){},t}(l);t.GenericContentProtection=f;var p=function(){function t(t,n){var a,i=0,r=1/0;t.length&&(a=t[0].streams)&&a.length&&(a.forEach(function(e){2!==e.type&&e.segments&&e.segments.first&&e.segments.last&&(i=Math.max(i,e.segments.first.segmentInfo.presTimeInSec),r=Math.min(r,e.segments.last.segmentInfo.presTimeInSec+e.segments.last.segmentInfo.durationInSec))}),e.Log.verbose(4,"TimeShiftBufferTracker: leftEdge: "+i+" liveEdge: "+r+" duration: "+(r-i)),this._dvrWindowLenInSec=n||1/0,this._leftEdgeReferenceInPresentation=i,this._liveEdgeReferenceInPresentation=r,this._liveEdgeReferenceLocalTime=Date.now())}return Object.defineProperty(t.prototype,"liveEdge",{get:function(){var e=(Date.now()-this._liveEdgeReferenceLocalTime)/1e3;return this._liveEdgeReferenceInPresentation+e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftEdge",{get:function(){var e=(Date.now()-this._liveEdgeReferenceLocalTime)/1e3,t=this._liveEdgeReferenceInPresentation+e;return t-this._leftEdgeReferenceInPresentation<this._dvrWindowLenInSec?this._leftEdgeReferenceInPresentation:t-this._dvrWindowLenInSec},enumerable:!0,configurable:!0}),t.prototype.adjust=function(t){var n=this._liveEdgeReferenceInPresentation+t;return 0>=n?void e.Log.warning(4,"TimeShiftBufferTracker error, ignoring invalid adjustment: "+t):(e.Log.verbose(4,"Adjusting TimeShiftBufferTracker: "+t),void(this._liveEdgeReferenceInPresentation=n))},t.prototype.adjustForChromeSourceDelay=function(t){this._liveEdgeReferenceLocalTime=t,e.Log.verbose(4,"Adjusting TimeShiftBufferTracker: _liveEdgeReferenceLocalTime to "+t)},Object.defineProperty(t.prototype,"timeSinceTimeShiftTrackerStartSec",{get:function(){return(Date.now()-this._liveEdgeReferenceLocalTime)/1e3},enumerable:!0,configurable:!0}),t}(),m=function(){this.log=function(t){e.Log.verbose(4,t)}},_=function(){this.manifestError=function(t){e.Log.error(4,t)}}}(e.DashPresentation||(e.DashPresentation={})),e.DashPresentation}(f||(f={})),function(e){!function(t){"use strict";var n=function(){function t(){this._moduleId="DashUrlFormatter"}return t.prototype.init=function(e){var t=e.workflows[1];t.addHandler(t.stepEvents.requestSend,this.onUrlFormat,this)},t.prototype.dispose=function(){},t.prototype.onUrlFormat=function(t){t.currentModuleId=this._moduleId;var n=t.sessionContext.getPresentationQueryStr();return new Promise(function(a){if(!t.selectedTrack)throw new Error("Selected Track not set");var i=t.requestedStream.id;if(!i)throw new Error("stream id not set");var r=t.selectedTrack.bitrate;if(null==r)throw new Error("incorrect bitrate");var o=t.currentSegment;if(!o)throw new Error("current segment not selected.");var s=o.segmentInfo.presTimeInSec,c=t.selectedTrack&&t.selectedTrack.id?t.selectedTrack.id:void 0,d=o.segmentInfo.index;if(t.fetchInitSegment){var l=t.requestedStream.initUrlTemplate;if(!l)throw new Error("initialization url template is not set for the stream");var u=e.Util.UrlFormatter.FormatDashInitUrl(l,r.toString(),n,c);t.sessionContext.hybridManager&&(u=t.sessionContext.hybridManager.convertInitSegmentUrl(u));var f=new e.Context.UrlRequest(u,2,0,i,r,s);t.requestedStream.streamingInfo.getInitSegmentForBitrate(r)||t.urlsToRetrieve.push(f)}var p=t.requestedStream.mediaUrlTemplate;if(!p)throw new Error("media url template is not set for the stream");var m=o.segmentInfo.mediaTimestampStr,_=e.Util.UrlFormatter.FormatDashMediaUrl(p,r.toString(),m,d,n,c);t.sessionContext.hybridManager&&(_=t.sessionContext.hybridManager.convertMediaSegmentUrl(_)),t.urlsToRetrieve.push(new e.Context.UrlRequest(_,1,0,i,r,s,o.segmentInfo.durationInSec)),a()})},t}();t.DashUrlFormatter=n}(e.UrlBuilder||(e.UrlBuilder={})),e.UrlBuilder}(f||(f={})),function(e){!function(t){"use strict";var n=function(){function t(){this._averageCalc=new e.Util.AverageCalculator(0,t._maxHistoryCount)}return Object.defineProperty(t.prototype,"averageDecryptionSpeed",{get:function(){return this._averageCalc.average},enumerable:!0,configurable:!0}),t.prototype.updateDecryptionSpeedInfo=function(e,t){var n=8*e/t;this._averageCalc.addValue(n)},t._maxHistoryCount=3,t}();t.DecryptionTracker=n}(e.Heuristics||(e.Heuristics={})),e.Heuristics}(f||(f={})),function(e){!function(t){"use strict";var n=function(){function t(){this._moduleId="heuristics.Engine",this._disposed=!1}return t.prototype.dispose=function(){this._disposed=!0},t.prototype.init=function(e){var t=e.workflows[1];t.addHandler(t.stepEvents.requestSend,this.onGetIndex,this)},t.prototype.onGetIndex=function(t){var n=this;return e.Log.verbose(8,"OnGetIndex"),t.currentModuleId=this._moduleId,new Promise(function(a,i){function r(){t.requestedStream.streamingInfo.getInitSegmentForBitrate(t.selectedTrack.bitrate)||(t.fetchInitSegment=!0),a()}if(n._disposed)return e.Failure.attachFailureToRequest(t,t.currentModuleId,0),void i("object is already disposed.");if(t.sessionContext.heuristricsEngineAndStepRuleEnabled&&!t.selectedTrack){if(0!==t.requestedStream.type)return t.selectedTrack=t.requestedStream.tracks[0],void r();var o=t.heuristicData.tracksData.findFirst(function(e){return!0===e.selectable});if(!o)return t.selectedTrack=t.heuristicData.tracksData[0].trackInfo,void r();t.selectedTrack=o.trackInfo;var s=t.requestedStream.streamingInfo.sourceBuffer.getBufferedAheadOfCurrentTimeInSec();if(t.currentSegment){var c=e.StreamUtil.getSegmentDuration(t),d=c,l=t.sessionContext.maxBufferInSec()*t.sessionContext.heuristicSettings.vodStableBufferLevelPercent,u=t.sessionContext.maxBufferInSec()*t.sessionContext.heuristicSettings.vodDowngradeBufferLevelPercent;!t.sessionContext.commonPresentation.isLive&&u>s&&!t.sessionContext.videoTag.paused&&(d*=t.sessionContext.heuristicSettings.belowDowngradeBufferLevelDownloadTimeFactor);var f=function(n){var a=t.heuristicData.tracksData;if(!n)throw new Error("findHighestTrack failed, invalid timeEstimationThresholdInSec");e.Log.verbose(8,"Time we have for fragment download: "+n+"s");for(var i=a.length-1;i>=0;i--)if(a[i].selectable&&a[i].dataRetrieverEstimationInWallClockSec*t.sessionContext.playbackRate()<n)return a[i].trackInfo;return null}(d),p=t.sessionContext.heuristicSettings.latencyHeuristicsEnabled&&t.requestedStream.streamingInfo.lastDownloadedTrack&&f&&f.bitrate==t.requestedStream.streamingInfo.lastDownloadedTrack.bitrate&&t.sessionContext.wasLatencyHighForLastRequest&&s/t.sessionContext.playbackRate()>2*c;(!f&&function(){for(var e=t.heuristicData.tracksData,n=1/0,a=e.length-1;a>=0;a--){var i=e[a];i.selectable&&(n=Math.min(n,i.dataRetrieverEstimationInWallClockSec))}return n}()===1/0&&t.requestedStream.streamingInfo.lastDownloadedTrack||p)&&(f=function(e){for(var n=t.heuristicData.tracksData,a=null,i=n.length-1;i>=0;i--){var r=n[i];r.selectable&&r.trackInfo.bitrate>e&&(!a||r.trackInfo.bitrate<a.bitrate)&&(a=r.trackInfo)}return a}(t.requestedStream.streamingInfo.lastDownloadedTrack.bitrate)||t.requestedStream.streamingInfo.lastDownloadedTrack),t.requestedStream.streamingInfo.lastDownloadedTrack&&(!f||f&&f.bitrate<t.requestedStream.streamingInfo.lastDownloadedTrack.bitrate)&&s>l&&(!t.failTracker||t.failTracker.isNone()||!t.failTracker.isNetworkTimeoutError())&&t.heuristicData.tracksData.findFirst(function(e){return e.trackInfo===t.requestedStream.streamingInfo.lastDownloadedTrack&&e.selectable})&&(f=t.requestedStream.streamingInfo.lastDownloadedTrack),f||(f=function(){for(var e=t.heuristicData.tracksData,n=0;n<e.length;n++)if(e[n].selectable)return e[n].trackInfo;return null}()),f&&(e.Log.verbose(8,"Selected bitrate: "+f.bitrate),t.selectedTrack=f),r()}else r()}else r()})},t}();t.Engine=n}(e.Heuristics||(e.Heuristics={})),e.Heuristics}(f||(f={})),function(e){!function(t){"use strict";var n=function(){function t(){this._moduleId="heuristics.prefetchRule",this._disposed=!1}return t.prototype.dispose=function(){this._disposed=!0},t.prototype.init=function(e){var t=e.workflows[1];t.addHandler(t.stepEvents.requestBegin,this.onGetIndex,this)},t.prototype.onGetIndex=function(t){var n=this;return e.Log.verbose(8,"OnGetIndex"),t.currentModuleId=this._moduleId,new Promise(function(a,i){function r(){t.sessionContext.heuristricsEngineAndStepRuleEnabled=!0,a()}function o(){a()}if(n._disposed)return e.Failure.attachFailureToRequest(t,t.currentModuleId,0),void i("object is already disposed.");if(t.sessionContext.heuristricsEngineAndStepRuleEnabled)o();else{if(!t.sessionContext.canPlayThroughSignalled){var s=t.requestedStream.type,c=0==s?t.sessionContext.prefetchVideoInitSegmentQuality:t.sessionContext.prefetchAudioInitSegmentQuality;return t.selectedTrack||!c||2==s?void r():(c.then(function(n){var a=t.heuristicData.tracksData.findFirst(function(e){return e.trackInfo._id==n});return a?(t.selectedTrack=a.trackInfo,void e.Log.verbose(8,"Using prefetched init segment quality "+n+"  "+s+" segment with index: "+t.currentSegment.segmentInfo.index)):(t.sessionContext.heuristricsEngineAndStepRuleEnabled=!0,e.Log.verbose(8,"There are no tracks with prefetched quality: "+n),void r())}).catch(function(t){r(),e.Log.verbose(8,"Prefetch init segment quality promise for"+s+"filed with error: "+t)}),void o())}r()}})},t}();t.PrefetchRule=n}(e.Heuristics||(e.Heuristics={})),e.Heuristics}(f||(f={})),function(e){!function(t){"use strict";var n=function(){function t(){this._moduleId="stepRule",this._disposed=!1,this._currentTrackSegmentCount=0,this._previousTrackSelected=null,this._currentSelectedVideoStream=null}return t.prototype.dispose=function(){this._disposed=!0,this._previousTrackSelected=null,this._currentSelectedVideoStream=null},t.prototype.init=function(e){var t=e.workflows[1];t.addHandler(t.stepEvents.requestBegin,this.onRunStepRule,this)},t.prototype.onRunStepRule=function(t){var n=this;e.Log.verbose(8,"onRunStepRule"),t.currentModuleId=this._moduleId;var a=this;return new Promise(function(i,r){if(a._disposed)return e.Failure.attachFailureToRequest(t,t.currentModuleId,0),void r("object is already disposed.");if(t.sessionContext.heuristricsEngineAndStepRuleEnabled&&!t.selectedTrack&&null!==t.requestedStream.streamingInfo.lastDownloadedTrack&&0===t.requestedStream.type){t.requestedStream!==n._currentSelectedVideoStream&&(a._currentSelectedVideoStream=t.requestedStream,a._previousTrackSelected=null),t.requestedStream.streamingInfo.lastDownloadedTrack===a._previousTrackSelected?a._currentTrackSegmentCount++:(a._previousTrackSelected=t.requestedStream.streamingInfo.lastDownloadedTrack,a._currentTrackSegmentCount=1);var o=a._currentTrackSegmentCount>=t.sessionContext.heuristicSettings.stepRule.minSegmentsBeforeDowngrade,s=a._currentTrackSegmentCount>=t.sessionContext.heuristicSettings.stepRule.minSegmentsBeforeUpgrade,c=t.requestedStream.tracks.indexOf(a._previousTrackSelected),d=c,l=c;o&&t.sessionContext.heuristicSettings.stepRule.maxStepDownInQuality>0&&(d=Math.max(0,c-t.sessionContext.heuristicSettings.stepRule.maxStepDownInQuality)),s&&t.sessionContext.heuristicSettings.stepRule.maxStepUpInQuality>0&&(l=Math.min(t.heuristicData.tracksData.length-1,c+t.sessionContext.heuristicSettings.stepRule.maxStepUpInQuality));for(var u=0;u<t.heuristicData.tracksData.length;u++)(u>l||d>u)&&(t.heuristicData.tracksData[u].selectable=!1);i()}else i()})},t}();t.StepRule=n}(e.Heuristics||(e.Heuristics={})),e.Heuristics}(f||(f={})),function(e){!function(t){"use strict";var n=function(){function t(){this._moduleId="windowSizeRule",this._disposed=!1,this._windowHeight=0,this._windowWidth=0,this._highestTrackIndexAllowed=0,this._currentSelectedVideoStream=null}return t.prototype.dispose=function(){this._disposed=!0,this._currentSelectedVideoStream=null},t.prototype.init=function(e){var t=e.workflows[1];t.addHandler(t.stepEvents.requestBegin,this.onRunWindowSizeRule,this)},t.prototype.onRunWindowSizeRule=function(t){e.Log.verbose(8,"onRunWindowSizeRule"),t.currentModuleId=this._moduleId;var n=!1,a=this;return new Promise(function(i,r){if(a._disposed)return e.Failure.attachFailureToRequest(t,t.currentModuleId,0),void r("object is already disposed.");if(!t.selectedTrack&&t.sessionContext.heuristicSettings.windowSizeHeuristicsEnabled&&0===t.requestedStream.type){var o,s;if(t.requestedStream!==a._currentSelectedVideoStream&&(a._currentSelectedVideoStream=t.requestedStream,a._highestTrackIndexAllowed=0),t.sessionContext.heuristicSettings.useBrowserWindowForWindowSizeRule?(o=window.innerWidth,s=window.innerHeight):(o=Math.max(t.sessionContext.videoTag.scrollWidth,t.sessionContext.videoTag.width),s=Math.max(t.sessionContext.videoTag.scrollHeight,t.sessionContext.videoTag.height)),0===s||0===o)return e.Log.warning(8,"Ignoring window size heuristic rule, as one of the window dimensions is 0."),void i();(a._windowWidth!==o||a._windowHeight!==s)&&((a._windowWidth<o||a._windowHeight<s)&&(n=!0),a._windowWidth=o,a._windowHeight=s),a._highestTrackIndexAllowed=0;for(var c=t.heuristicData.tracksData,d=!1,l=!1,u=0,f=0,p=a._highestTrackIndexAllowed;p<c.length;p++)c[p].selectable&&c[p].trackInfo.width>o&&c[p].trackInfo.height>s&&(d?c[p].trackInfo.width>u&&c[p].trackInfo.height>f&&!l?(a._highestTrackIndexAllowed=p,l=!0):c[p].selectable=!1:(d=!0,a._highestTrackIndexAllowed=p,u=c[p].trackInfo.width,f=c[p].trackInfo.height));d||(a._highestTrackIndexAllowed=c.length-1),n&&t.requestedStream.streamingInfo.lastDownloadedTrack&&c[a._highestTrackIndexAllowed].trackInfo.bitrate>t.requestedStream.streamingInfo.lastDownloadedTrack.bitrate&&(t.sessionContext.eventMgr.dispatchEvent(e.InternalEventName.flushvideo),t.state=2,t.retryWaitTimeMSec=100),i()}else i()})},t}();t.WindowSizeRule=n}(e.Heuristics||(e.Heuristics={})),e.Heuristics}(f||(f={})),function(e){!function(t){"use strict";var n=function(){function t(){this._moduleId="maxStreamingResolutionRule",this._disposed=!1}return t.prototype.dispose=function(){this._disposed=!0},t.prototype.init=function(e){var t=e.workflows[1];t.addHandler(t.stepEvents.requestBegin,this.onRunMaxStreamingResolutionRule,this)},t.prototype.onRunMaxStreamingResolutionRule=function(t){e.Log.verbose(8,"onRunMaxStreamingResolutionRule"),t.currentModuleId=this._moduleId;var n=this;return new Promise(function(a,i){if(n._disposed)return e.Failure.attachFailureToRequest(t,t.currentModuleId,0),void i("object is already disposed.");if(!t.selectedTrack&&t.sessionContext.heuristicSettings.maxStreamingResolutionLimit&&0===t.requestedStream.type){for(var r=t.sessionContext.heuristicSettings.maxStreamingResolutionLimit,o=t.heuristicData.tracksData,s=1;s<o.length;s++)o[s].selectable&&o[s].trackInfo.height>r&&(o[s].selectable=!1);a()}else a()})},t}();t.MaxStreamingResolutionRule=n}(e.Heuristics||(e.Heuristics={})),e.Heuristics}(f||(f={})),function(e){!function(t){"use strict";var n;!function(e){e[e.success=200]="success",e[e.partialContent=206]="partialContent",e[e.notFound=404]="notFound",e[e.badGateway=502]="badGateway"}(n||(n={}));var a=function(){function n(t){this._moduleId="httpDataRetriever",this._requestList=[],this._disposed=!1,this._bandwidthRequest=null,this._bandwidthData=new e.Heuristics.BandwidthTracker(t.heuristicSettings.bandwidth,t.decryptionTracker,t.defaultBandwidthKbps,t.enableBandwidthPersistence,t.isFinegrainedBandwidthTelemetryEnabled),t.videoBufferData.updateBandwidthTracker(this._bandwidthData)}return n.prototype.dispose=function(){for(this._disposed=!0;this._requestList.length>0;){var t=this._requestList.pop();try{t.request.abort(),t.request=null,t.requestTimer&&t.requestTimer.dispose(),t=null}catch(t){e.Log.error(5,"exception disposing httpDataretriever "+t)}}this._bandwidthRequest=null},n.prototype.init=function(e){var t=e.workflows[0],n=e.workflows[1];t.addHandler(t.stepEvents.requestBegin,this.onGetData,this),n.addHandler(n.stepEvents.requestBegin,this.onReportHeuristicData,this),n.addHandler(n.stepEvents.requestSend,this.onGetData,this)},n.prototype.onReportHeuristicData=function(t){e.Log.verbose(5,"onReportHeuristicData"),t.currentModuleId=this._moduleId;var n=this;return new Promise(function(a,i){return n._disposed?(e.Failure.attachFailureToRequest(t,t.currentModuleId,0),void i("object is already disposed.")):(0!==t.requestedStream.type||n._bandwidthData.reportHeuristicsData(t.sessionContext,t.heuristicData,e.StreamUtil.getSegmentDuration(t)),void a())})},n.prototype.getResponseHeaders=function(e,t){for(var n=t.sessionContext.headers||[],a={},i=0;i<n.length;i++)a[n[i]]=e.getResponseHeader(n[i]);return a},n.prototype.onGetData=function(n){e.Log.verbose(5,"onGetData"),n.currentModuleId=this._moduleId;var a=this;return new Promise(function(o,s){function c(){var t=0;I++;for(var i=0;i<n.urlsToRetrieve.length;i++)(3===n.urlsToRetrieve[i].requestType&&0!==a._bandwidthData.perceivedBandwidthKbps()||0===n.urlsToRetrieve[i].responseType&&null!=n.urlsToRetrieve[i].mediaData||4===n.urlsToRetrieve[i].responseType&&null!=n.urlsToRetrieve[i].presentationData)&&t++;t===n.urlsToRetrieve.length?(e.Log.verbose(5,"All request completed, resolving the module"),v(null)):I<n.urlsToRetrieve.length?(e.Log.verbose(5,"Starting next request"),d()):e.Log.verbose(5,"Request is already active, waiting for completion ....")}function d(){function i(i){var o;1===n.workflowType&&(o=g(I),e.StreamUtil.getBufferData(n).dispatchDownloadRequested(o));var s=n.urlsToRetrieve[I].url;i&&i.url&&(s=i.url,e.Log.verbose(5,"Request Updated before sending in getDownloadRequestParametersAsync"),e.Log.verbose(5,"new download url: "+s));var d=n&&n.selectedTrack&&n.selectedTrack.bitrate?n.selectedTrack.bitrate:null;if(d)var m=n.heuristicData.tracksData.findFirst(function(e){return e.trackInfo.bitrate===d});n.waitForJITInMs=m&&m.waitTimeForJitInMs?m.waitTimeForJitInMs:null;var b=n.sessionContext.createXmlHttpRequest();b.open("GET",s),b.onreadystatechange=l,b.onprogress=u,b.onload=f,b.onerror=p,b.ontimeout=_,b.onabort=p,0===n.urlsToRetrieve[I].responseType&&(b.responseType=e.Context.ResponseType[0]),b.msCaching&&(b.msCaching="disabled");var v=e.SegmentUtils.calculateRequestTimeout(n,n.urlsToRetrieve[I].requestType);3!==n.urlsToRetrieve[I].requestType&&n.sessionContext.ignoreRequestLatency&&(v+=Math.max(n.sessionContext.httpDataRetrieverSettings.minDefaultRequestLatency,a._bandwidthData.averageLatencyInMs()));var y=e.SegmentUtils.isVideoSegment(n,n.urlsToRetrieve[I])&&!(e.SegmentUtils.userHasSelectedBitrate(n)||e.SegmentUtils.videoIsLowestBitrate(n));i&&i.headers&&(e.Log.verbose(5,"Adding additional headers from META"),Object.keys(i.headers).forEach(function(e){var t=i.headers[e];b.setRequestHeader(e,t)}));var S=new r(n,n.urlsToRetrieve[I],b,o);n.failTracker&&n.failTracker.wasLastNoDataTimeout()&&n.failTracker.totalRetried>5||(y?(v=2*v*(n.failTracker&&n.failTracker.wasLastNoDataTimeout()?2:1),b.timeout=v,b.onabort=h,S.requestTimer=new t.RequestTimer(S,v,n.sessionContext.ignoreRequestLatency)):b.timeout=v),n.lastRequestInfo=S,n.requestedStream&&0==n.requestedStream.type&&n.selectedTrack?e.Log.verbose(5,"HeuristicInfo: SuggestedBr: "+n.selectedTrack.bitrate+" CurrentBw: "+Math.floor(1e3*a._bandwidthData.latestInKbps)+" AverageBw: "+Math.floor(1e3*a._bandwidthData.averageBandwidthInKbps)+" BufferSize: "+n.requestedStream.streamingInfo.sourceBuffer.getBufferedAheadOfCurrentTimeInSec()+" StreamType: "+e.Presentation.StreamType[n.requestedStream.type]+" StreamName: "+n.requestedStream.language+" Index: "+n.currentSegment.segmentInfo.index+" TimeInMS: "+n.currentSegment.segmentInfo.presTimeInSec+" MediaTimeStamp: "+n.currentSegment.segmentInfo.mediaTimestamp+" Index: "+n.currentSegment.segmentInfo.index+" Duration: "+(n.currentSegment.segmentInfo.durationInSec||0)+" Url: "+s+" TimeoutInMS: "+v):0===n.workflowType&&e.Log.verbose(5,"Getting "+s),1===n.workflowType&&1===n.urlsToRetrieve[I].requestType&&n.requestedStream.streamingInfo.addToActiveRequestList(S),a._requestList.push(S),b.send(),c()}if(e.assert(null!=n.urlsToRetrieve[I],"Failed to start the download as urlToRetrieve at index "+I+" is null"),e.assert(null!=n.urlsToRetrieve[I].url&&n.urlsToRetrieve[I].url.length>0,"Failed to start the download as urlToRetrieve at index "+I+" is empty"),a._bandwidthRequest&&a._bandwidthRequest.req.streamId===n.urlsToRetrieve[I].streamId&&a._bandwidthRequest.req.presTimeInSec===n.urlsToRetrieve[I].presTimeInSec){var o=n.heuristicData.tracksData.findFirst(function(e){return e.trackInfo.bitrate===a._bandwidthRequest.req.bitrate});if(o&&a._bandwidthRequest.req.bitrate>=n.urlsToRetrieve[I].bitrate)if(2===n.urlsToRetrieve[I].requestType){if(a._bandwidthRequest.req.bitrate!==n.urlsToRetrieve[I].bitrate){var s=n.selectedTrack&&n.selectedTrack.id?n.selectedTrack.id:void 0;e.Log.verbose(5,"Switching init segment request "+n.urlsToRetrieve[I].url+" to "+a._bandwidthRequest.req.bitrate),n.urlsToRetrieve[I].bitrate=a._bandwidthRequest.req.bitrate,n.urlsToRetrieve[I].url=e.Util.UrlFormatter.FormatDashInitUrl(n.requestedStream.initUrlTemplate,a._bandwidthRequest.req.bitrate.toString(),n.sessionContext.getPresentationQueryStr(),a._bandwidthRequest.req.representationId||s),n.selectedTrack=o.trackInfo}}else e.Log.verbose(5,"Reusing bandwidth request "+a._bandwidthRequest.req.url),n.urlsToRetrieve[I].dispose(),n.urlsToRetrieve[I]=a._bandwidthRequest.req,1===n.workflowType&&e.StreamUtil.getBufferData(n).dispatchDownloadCompleted(g(I),a._bandwidthRequest.info,a._bandwidthRequest.headers),a._bandwidthRequest=null;else a._bandwidthRequest.req.dispose(),a._bandwidthRequest=null}if(3===n.urlsToRetrieve[I].requestType&&0!==a._bandwidthData.perceivedBandwidthKbps()||0===n.urlsToRetrieve[I].responseType&&null!=n.urlsToRetrieve[I].mediaData||4===n.urlsToRetrieve[I].responseType&&null!=n.urlsToRetrieve[I].presentationData)I<n.urlsToRetrieve.length&&c();else{var d=n.sessionContext.httpDataRetrieverSettings.getDownloadRequestParametersAsync;d&&"function"==typeof d?d(n.urlsToRetrieve[I].url).then(function(e){i(e)},function(t){e.Log.error(5,"Failed to update request: "+JSON.stringify(t));var a=new e.Failure.Record(n.currentModuleId,2097756,"getDownloadRequestParametersAsync failed to update workflow");n.externalFailure=a,S(null)}):i()}}function l(){var t=this;if(!a._disposed){var i=a._requestList.findFirst(function(e){return e.request===t});if(e.assert(null!=i,"cannot find the request in the request queue"),i.request.readyState>=XMLHttpRequest.HEADERS_RECEIVED&&!i.bandwidthInfo.responseStartTimeInMS&&(i.bandwidthInfo.responseStartTimeInMS=Date.now(),i.request.onreadystatechange=null),n.sessionContext.isRaiseDownloadStartedEventEnabled&&i.request.readyState===XMLHttpRequest.HEADERS_RECEIVED){i=a._requestList.findFirst(function(e){return e.request===t});var r=n.urlsToRetrieve.indexOf(i.urlRequest);if(-1===r)return;var o={url:i.urlRequest.url,headers:i.request.getAllResponseHeaders(),segmentType:e.Context.RequestType[n.urlsToRetrieve[r].requestType],retryCount:n.failTracker.totalRetried,xhr:this};n.sessionContext.eventMgr.dispatchEvent(e.EventName.onDownloadRequestStarted,"started",o)}}}function u(t){function i(e,t){t.bandwidthInfo.responseLengthInBytes=e,t.bandwidthInfo.responseEndTimeInMS=o;var i=n.sessionContext&&n.sessionContext.commonPresentation&&n.sessionContext.commonPresentation.isLive;a._bandwidthData.updateBandwidthInfo(t.bandwidthInfo,i,t.urlRequest,n),t.bandwidthEstimationDone=!0}var r=this;if(!a._disposed){var o=Date.now(),s=a._requestList.findFirst(function(e){return e.request===r});if(e.assert(null!=s,"cannot find the request in the request queue"),s.lastProgressTimestamp=o,s.loaded=t.loaded,s.total=t.total,!(e.Common.isSafari&&e.Common.isOSXElCapitanOrEarlier()&&s.getIsAbortInProgress())){if(s.request.readyState>=XMLHttpRequest.HEADERS_RECEIVED&&!s.bandwidthInfo.responseStartTimeInMS&&(s.bandwidthInfo.responseStartTimeInMS=o),n.requestedStream&&n.requestedStream.streamingInfo.abortCurrentRequest&&s.request.readyState<4)return s.abortRequest(),void e.Log.verbose(5,"Aborting request: "+s.urlRequest.url);if(3===s.urlRequest.requestType){var c=s.bandwidthInfo.responseStartTimeInMS,d=n.sessionContext.httpDataRetrieverSettings.initBandwidthTimeoutInMSec;if(o-c>d)i(t.loaded,s),s.abortRequest(),n.sessionContext.eventMgr.dispatchEvent(e.EventName.initialBandwidthEstimationCompleted),e.Log.verbose(5,"Aborting init bandwidth request due to timeout: "+s.urlRequest.url);else{var l=t.loaded;(u=o-c)>=n.sessionContext.heuristicSettings.bandwidth.minMSecBeforeAbortForBandWidthEstimationReq&&l>=n.sessionContext.heuristicSettings.bandwidth.initBandwidthMinDataThresholdInBytes&&((f=8*l*1e3/u)<s.urlRequest.bitrate?(i(l,s),s.abortRequest(),n.sessionContext.eventMgr.dispatchEvent(e.EventName.initialBandwidthEstimationCompleted),e.Log.verbose(5,"Bandwidth estimation completed, stopped before timeout due to low measured bandwidth ")):s.urlRequest.durationInSec*s.urlRequest.bitrate/f<1||(i(l,s),s.abortRequest(),n.sessionContext.eventMgr.dispatchEvent(e.EventName.initialBandwidthEstimationCompleted),e.Log.verbose(5,"initBandwidth request aborted as it cannot be downloaded in 1 second.")))}}else if(1===s.urlRequest.requestType&&0===n.requestedStream.type){var u,f;l=t.loaded,(u=o-s.bandwidthInfo.responseStartTimeInMS)>=n.sessionContext.heuristicSettings.bandwidth.minMSecBeforeAbortForVideoSegmentReq&&l>=n.sessionContext.heuristicSettings.bandwidth.reqAbortMinDataThresholdInBytes&&l<t.total/2&&(function(t){var i=n.sessionContext.prerollBufferInSec();return t<1e3*a._bandwidthData.averageBandwidthInKbps/2&&!e.SegmentUtils.userHasSelectedBitrate(n)&&!e.SegmentUtils.videoIsLowestBitrate(n)&&n.requestedStream&&n.requestedStream.streamingInfo&&n.requestedStream.streamingInfo.sourceBuffer&&n.requestedStream.streamingInfo.sourceBuffer.getBufferedAheadOfCurrentTimeInSec()<i}(f=8*l*1e3/u)?(i(l,s),s.abortRequest(),e.Log.verbose(5,"Bandwidth experienced is way too low abort current request. totalTimeInMS= "+u+" totalDownloadedDataBytes= "+l+" total Bytes = "+t.total)):s.mediaDownload&&(s.mediaDownload.measuredBandwidth=f))}}}}function f(t){var r=this;if(!a._disposed){var o=a._requestList.findFirst(function(e){return e.request===r});e.assert(null!=o,"cannot find the request in the request queue"),o.bandwidthInfo.responseEndTimeInMS=Date.now();var s=n.urlsToRetrieve.indexOf(o.urlRequest);if(-1!==s){n.urlsToRetrieve[s].httpResposeContentType=this.getResponseHeader("Content-Type"),n.urlsToRetrieve[s].httpResponseCode=this.status;var d=this.getResponseHeader("Content-Length"),l=t&&t.total,u=o.request.readyState,f=e.Context.RequestType[n.urlsToRetrieve[s].requestType],p=n.failTracker.totalRetried;if(n.urlsToRetrieve[s].contentLengthFromResponseHeaders=d,200===this.status||206===this.status){switch(n.sessionContext.isRaiseDownloadStartedEventEnabled?n.sessionContext.eventMgr.dispatchEvent(e.EventName.onDownloadRequestEnded,"onLoaded",{url:o.urlRequest.url,xhr:this,bandwidthInfo:o.bandwidthInfo,retryCount:p,segmentType:f,headers:o.request.getAllResponseHeaders()}):n.sessionContext.eventMgr.dispatchEvent(e.EventName.onDownloadRequestEnded,"onLoaded",{xhr:this,bandwidthInfo:o.bandwidthInfo,retryCount:p,segmentType:f}),a._requestList.removeFirst(function(e){return e.request===r}),o.urlRequest.responseType){case 0:n.urlsToRetrieve[s].mediaData=this.response,o.bandwidthInfo.responseLengthInBytes=n.urlsToRetrieve[s].mediaData.byteLength;var m=a.getResponseHeaders(this,n);1===n.workflowType?e.StreamUtil.getBufferData(n).dispatchDownloadCompleted(g(s),o.bandwidthInfo,m):(a._bandwidthRequest=new i(n.urlsToRetrieve[s].clone(),o.bandwidthInfo,m),a._bandwidthRequest.req.requestType=1,n.sessionContext.eventMgr.dispatchEvent(e.EventName.initialBandwidthEstimationCompleted));break;case 4:n.urlsToRetrieve[s].presentationData=this.response,o.bandwidthInfo.responseLengthInBytes=n.urlsToRetrieve[s].presentationData.length,n.sessionContext.eventMgr.dispatchEvent(e.EventName.manifestFetchCompleted);break;default:e.assert(!1,"Unexpected response Type in the request Context")}if(e.Log.verbose(5,"Download Finished for : "+o.urlRequest.url+" with bytes: "+o.bandwidthInfo.responseLengthInBytes+", Content-Length: "+d+", Total: "+l+", requestReadyState: "+u+", requestedStream="+n.requestedStream),n.requestedStream&&n.requestedStream.streamingInfo&&n.requestedStream.streamingInfo.removeFromActiveRequestList(o),n.requestedStream){var _=n.sessionContext&&n.sessionContext.commonPresentation&&n.sessionContext.commonPresentation.isLive;a._bandwidthData&&1===o.urlRequest.requestType&&0===n.requestedStream.type&&a._bandwidthData.updateBandwidthInfo(o.bandwidthInfo,_,o.urlRequest,n),n.requestedStream.streamingInfo.lastDownloadedTrack=n.selectedTrack}c()}else{var h;if(e.Log.error(5,o.urlRequest.url+" failed, httpStatus: "+this.status),this&&this.response)if("arraybuffer"===this.responseType)try{var v=String.fromCharCode.apply(null,new Uint8Array(this.response)),y=JSON.parse(v);h=y&&y.error&&y.error.message?y.error.message:""}catch(e){h="ERROR parsing JSON from response Array Buffer"}else try{var S=JSON.parse(this.response);h=S&&S.error&&S.error.message?S.error.message:""}catch(e){h="ERROR parsing response JSON"}b.call(this,e.Failure.translateHttpStatusToCode(this.status),h)}}}}function p(t){if(!a._disposed){var n=2097152;"error"===t.type?n=e.Common.clientIsOffline()?2097755:2097753:"abort"===t.type&&(n=2097754),e.Log.error(5,"error details: "+JSON.stringify(t)),b.call(this,n,"http: "+t.type)}}function m(e){var t=this,i=a._requestList.findFirst(function(e){return e.request===t});if(i&&n.requestedStream&&0===n.requestedStream.type&&1===i.urlRequest.requestType&&!i.bandwidthEstimationDone){var r=n.sessionContext&&n.sessionContext.commonPresentation&&n.sessionContext.commonPresentation.isLive;i.bandwidthInfo.responseLengthInBytes=e&&e.loaded?e.loaded:i&&i.loaded?i.loaded:0,i.bandwidthInfo.responseEndTimeInMS=Date.now(),a._bandwidthData.updateBandwidthInfo(i.bandwidthInfo,r,i.urlRequest,n),i.bandwidthEstimationDone=!0}}function _(t){if(!a._disposed){var n=e.Common.clientIsOffline()?2097755:2097752;b.call(this,n,"http timed out"),m.call(this,t)}}function h(){if(!a._disposed){var e=n&&n.requestedStream&&n.requestedStream.streamingInfo&&n.requestedStream.streamingInfo.abortCurrentRequest?2097754:2097752;b.call(this,e,"http timed out in request timer"),m.call(this)}}function b(t,i){var r=this;n.sessionContext.eventMgr.dispatchEvent(e.EventName.onDownloadRequestEnded,e.ErrorCode[t],{xhr:this});var o=a._requestList.removeFirst(function(e){return e.request===r}),s=!1;if(n.requestedStream&&n.requestedStream.streamingInfo.abortCurrentRequest&&(n.requestedStream.streamingInfo.abortCurrentRequest=!1,s=!0),!o){var c=new e.Failure.Record(n.currentModuleId,16,"resolving aborted workflow.");return n.externalFailure=c,S(o),void e.Log.verbose(5,"resolving aborted workflow")}o.requestAbortCompleted=!0,!e.Common.isFirefox&&e.Common.isSafari&&e.Common.isOSXElCapitanOrEarlier()||e.assert(null!=o,"cannot find the request in the request queue");var d=null!=o?o.urlRequest.url:"no details info";i&&(d+=", "+i),u&&(d+=", correlationid="+u),!o||!o.bandwidthInfo||o.bandwidthInfo.responseLengthInBytes||2097754!==t&&2097752!==t||(d+=", no data received");var l=this.getResponseHeader("x-errorcode"),u=this.getResponseHeader("x-correlationid"),f="Expected"===this.getResponseHeader("x-errortype");if(c=new e.Failure.Record(n.currentModuleId,t,d,l,u,f),e.Log.error(5,c.toString()),l&&l.indexOf("EndOfStream")>-1&&null!=o)return o.reqContext.state=1,void S(o);if(null!=o)if(n.requestedStream){-1!==n.urlsToRetrieve.findIndexOf(function(e){return 2===e.requestType})&&(n.fetchInitSegment=!0);var p=n.urlsToRetrieve.indexOf(o.urlRequest);if(1===n.workflowType&&e.StreamUtil.getBufferData(n).dispatchDownloadFailed(g(p),t,o.bandwidthInfo,i),2097556===t&&n.sessionContext.commonPresentation.isLive&&n.requestedStream.streamingInfo&&n.currentSegment&&!n.currentSegment.next){var m=(h=n.currentSegment.segmentInfo)?h.presTimeInSec:null;n.currentSegment=n.currentSegment.prev,n.requestedStream.streamingInfo.lastRequestedSegment=n.currentSegment,n.failTracker.reset(),e.Log.verbose(5,"hit past live edge with 404: "+(i?i+", ":"")+"presTimeInSec: "+m+" "+o.urlRequest.url),n.externalFailure=c,S(o)}else if(2097564===t&&n.sessionContext.commonPresentation.isLive&&n.requestedStream.streamingInfo&&n.currentSegment&&!n.currentSegment.next){if(n.state=2,n.retryWaitTimeMSec=n.sessionContext.httpRetryPolicySettings.retryMediaInMSec,n.failTracker.log(c,n.selectedTrack,n.requestedStream.type),2!==n.requestedStream.type){var _=n.sessionContext.httpDataRetrieverSettings.liveEdgeAdjustmentInSec;n.sessionContext.commonPresentation.adjustPlayableWindow(_)}else n.retryWaitTimeMSec=n.sessionContext.httpRetryPolicySettings.retryDueTo412InTextTrackInMSecDefault;m=(h=n.currentSegment.segmentInfo)?h.presTimeInSec:null,e.Log.verbose(5,"hit past live edge with 412: "+(i?i+", ":"")+"presTimeInSec: "+m+" "+o.urlRequest.url),v(o)}else if(0!==n.workflowType&&2097556===t&&n.sessionContext.isLiveToVod&&(o.wasRequestMadeWithStaleManifestData()||n.failTracker&&!n.failTracker.isNone()&&n.failTracker.isLastNotReady())){var h;m=(h=n.currentSegment.segmentInfo)?h.presTimeInSec:null,n.currentSegment=n.currentSegment.prev,n.requestedStream.streamingInfo.lastRequestedSegment=n.currentSegment.prev,c=new e.Failure.Record(n.currentModuleId,256,"workflow out of sync, need to retry"),n.state=2,n.failTracker.log(c,n.selectedTrack),n.retryWaitTimeMSec=0,e.Log.verbose(5,"resolve and retry 404 for non live when manifest publication time don't match."),v(o)}else 2097553===t?(n.failTracker.log(c,n.selectedTrack),n.failTracker.noDataReceivedFailure=!o.bandwidthInfo.responseLengthInBytes,n.state=2,n.retryWaitTimeMSec=n.sessionContext.httpRetryPolicySettings.retryMediaInMSec,(0,n.sessionContext.httpDataRetrieverSettings.getDownloadRequestParametersAsync)(n.urlsToRetrieve[p].url,!0).then(function(t){t&&t.url?(n.urlsToRetrieve[p].url=t.url,n.failTracker.forceRetry=!0,v(o)):(e.Log.warning(5,"Failed to update request: url returned empty"),S(null))},function(t){e.Log.error(5,"Failed to update request: "+JSON.stringify(t)),n.externalFailure=c,S(null)})):(0!==n.workflowType&&o&&o.urlRequest&&3!==o.urlRequest.requestType&&(n.state=2,n.failTracker.log(c,n.selectedTrack),n.failTracker.noDataReceivedFailure=!o.bandwidthInfo.responseLengthInBytes,n.retryWaitTimeMSec=D()),e.Log.error(5,"failed to download: "+(i?i+", ":"")+o.urlRequest.url),v(o))}else 0!==n.workflowType||2097556!==t&&2097752!==t&&2097753!==t&&2097755!==t&&!e.Failure.errorCodeIsServerError(t)?(n.externalFailure=c,e.Log.error(5,"failed to download, rejecting workflow: "+(i?i+", ":"")+o.urlRequest.url),S(o)):(n.state=2,n.failTracker.log(c),n.retryWaitTimeMSec=D(),e.Log.error(5,"failed to download Mpd, resolving with retry: "+(i?i+", ":"")+o.urlRequest.url),v(o));s&&(e.Log.error(5,"Resetting failTracker."),n.failTracker.reset())}function g(t){var a=n.urlsToRetrieve[t],i=n.requestedStream.presentationTimeOffsetInSec,r=n.currentSegment.segmentInfo,o=2===a.requestType?null:r.mediaTimestamp/r.timescale;return new e.Context.MediaDownload(a.url,n.selectedTrack.bitrate,o,a.mediaData,i,r.timescale,r.durationInSec)}function v(e){y(e),o()}function y(e){n.requestedStream&&n.requestedStream.streamingInfo&&n.requestedStream.streamingInfo.removeFromActiveRequestList(e),e&&e.requestTimer&&e.requestTimer.dispose()}function S(e,t){y(e),t?s(t):s()}function D(){var e=0===n.workflowType;if(e&&n.failTracker.isLastServerError())return n.sessionContext.httpRetryPolicySettings.retryPresentationServerErrorInMSec;if(e&&n.failTracker.isLastNotFound())return n.sessionContext.httpRetryPolicySettings.retryPresentationInMSec;if(n.failTracker.isLastServerError())return n.sessionContext.httpRetryPolicySettings.retryMediaServerErrorInMSec;if(n.failTracker.isNetworkError()){var t=n.sessionContext.httpRetryPolicySettings.retryDueToNetworkErrorInMSec*Math.pow(2,n.failTracker.totalRetried);return Math.min(t,n.sessionContext.httpRetryPolicySettings.retryDueToNetworkErrorInMSecMax)}return n.failTracker.isLastNetworkDown()?n.sessionContext.httpRetryPolicySettings.retryDueToNetworkErrorInMSec:n.failTracker.isLastNotReady()?n.sessionContext.httpRetryPolicySettings.retryDueTo412InTextTrackInMSecDefault:n.failTracker.isNetworkTimeoutError()&&n.failTracker.noDataReceivedFailure?n.sessionContext.httpRetryPolicySettings.waitTimeForRetryOnNoDataTimeouts:n.failTracker.isLastNotFound()||n.failTracker.isLastUnSupportedContent()?0:n.sessionContext.httpRetryPolicySettings.waitTimeForRetryOnNoDataTimeouts}if(a._disposed)return e.Failure.attachFailureToRequest(n,n.currentModuleId,0),void S(null,"object is already disposed.");e.assert(0!==n.urlsToRetrieve.length,"Failed to start the download as urlsToRetrieve is empty."),n.requestedStream&&(n.requestedStream.streamingInfo.abortCurrentRequest=!1);var I=0;if(0==n.workflowType&&n.sessionContext.prefetchedManifestPromise&&null==n.urlsToRetrieve[I].presentationData){var x=Date.now();n.sessionContext.prefetchedManifestPromise.then(function(e){if(e){if(e.status>=200&&e.status<300)return e;throw new Error(e.statusText)}d()}).then(function(t){if(t){n.urlsToRetrieve[I].presentationData=t.text,n.urlsToRetrieve[I].httpResposeContentType=t.headers.get("Content-Type"),n.urlsToRetrieve[I].contentLengthFromResponseHeaders=t.headers.get("Content-Length"),n.urlsToRetrieve[I].httpResponseCode=t.status,I++,e.Log.verbose(5,"Getting data from prefetched manifest call");var a=Date.now()-x;n.sessionContext.eventMgr.dispatchEvent(e.EventName.manifestFetchCompleted),n.sessionContext.eventMgr.dispatchEvent(e.EventName.prefetchedManifestPromiseResolved,"prefetchedManifestPromiseResolved",{timeSpentWaitingPrefetchedManifestMS:a}),v(null)}else d()}).catch(function(t){e.Log.verbose(5,"Prefetch manifest call failed with message: "+t.message+". Try fetch manifest again..."),d()})}else d()})},n._networkRequestCheckPeriodInMSec=2e3,n}();t.HttpDataRetriever=a;var i=function(e,t,n){this.req=e,this.info=t,this.headers=n},r=function(){function t(t,n,a,i){this.bandwidthEstimationDone=!1,this.requestAbortCompleted=!1,this.urlRequest=n,this.request=a,this.bandwidthInfo=new e.Heuristics.BandwidthInfo(t.sessionContext.ignoreRequestLatency),this.abortStarted=!1,this.lastProgressTimestamp=Date.now(),this.loaded=0,this.total=0,this.reqContext=t,this.manifestPublicationTime=t.sessionContext.commonPresentation&&t.sessionContext.commonPresentation.publishTime,this.mediaDownload=i}return t.prototype.wasRequestMadeWithStaleManifestData=function(){return!(!this.manifestPublicationTime||!this.reqContext.sessionContext.commonPresentation.publishTime||this.manifestPublicationTime.getTime()===this.reqContext.sessionContext.commonPresentation.publishTime.getTime())},t.prototype.abortRequest=function(){var t=this;e.Log.warning(5,"Trying to abort request with url="+this.urlRequest.url),!this.abortStarted&&this.request?(this.reqContext.failTracker&&this.reqContext.failTracker.reset(),this.abortStarted=!0,this.requestAbortCompleted=!1,this.request.abort(),e.Util.setTimeout(function(){t.requestAbortCompleted||(e.Log.warning(5,"Request seems to be stalled, explicit onabort callback initiated"),t.request.onabort.call(t.request,{type:"abort"}))},200)):e.Log.warning(5,"Trying to abort a request twice. url="+this.urlRequest.url)},t.prototype.getIsAbortInProgress=function(){return this.abortStarted},t}();t.RequestInfo=r}(e.DataRetriever||(e.DataRetriever={})),e.DataRetriever}(f||(f={})),function(e){!function(t){"use strict";var n;!function(e){e[e.noRetry=0]="noRetry",e[e.nextTrack=1]="nextTrack",e[e.newTrack=2]="newTrack",e[e.nextTrackDown=3]="nextTrackDown",e[e.nextSegment=4]="nextSegment",e[e.same=5]="same"}(n||(n={}));var a=function(){function t(){this._moduleId="httpRetryPolicy",this._disposed=!1}return t.prototype.dispose=function(){this._disposed||(this._disposed=!0)},t.prototype.init=function(e){var t=e.workflows[0],n=e.workflows[1];t.addHandler(n.stepEvents.requestBegin,this.onPresentationRetry,this),n.addHandler(n.stepEvents.requestBegin,this.onMediaRetry,this)},t.prototype.onPresentationRetry=function(t){var a=this;return e.Log.verbose(5,"onPresentationRetry"),t.currentModuleId=this._moduleId,new Promise(function(i,r){if(a._disposed)return e.Failure.attachFailureToRequest(t,t.currentModuleId,0),void r("object is already disposed.");var o=t.failTracker,s=t.sessionContext.httpRetryPolicySettings;if(o.isNone())i();else{var c=a._getAction(0,s,t);switch(c){case 0:return t.externalFailure=o.lastFailure,e.Log.verbose(5,"onPresentationRetry: noRetry, "+t.urlsToRetrieve[0].url),void r();case 5:o.sameRequestRetried++;break;default:throw new Error("unexpected retry action: "+c)}o.totalRetried++,e.Log.verbose(5,"onPresentationRetry: "+n[c]+" URL: "+t.urlsToRetrieve[0].url),i()}})},t.prototype.onMediaRetry=function(t){var a=this;return e.Log.verbose(5,"onMediaRetry"),t.currentModuleId=this._moduleId,new Promise(function(i,r){if(a._disposed)return e.Failure.attachFailureToRequest(t,t.currentModuleId,0),void r("object is already disposed.");if(t.requestedStream){if(t.isAborted)return e.Failure.attachFailureToRequest(t,t.currentModuleId,16),void r("No retry as workflow was aborted.");var o=t.failTracker,s=t.requestedStream.streamingInfo,c=t.sessionContext.httpRetryPolicySettings,d=!1;if(o.isNone()||null!==s.pendingSeekPositionInSec)i();else{0===o.totalRetried&&(o.tracksToTry=a._createTrackToTry(c,t.requestedStream,o.lastTrack)),o&&o.tracksToTry&&o.tracksToTry.length>1?e.Log.verbose(5,"onMediaRetry: noRetry, failInfo.tracksToTry.Length : "+o.tracksToTry.length+", current trackToTryIdx = "+o.trackToTryIdx):e.Log.warning(5,"onMediaRetry: noRetry, Warning, only a single track available");var l=a._getAction(1,c,t);switch(l){case 0:return t.externalFailure=o.lastFailure,e.Log.verbose(5,"onMediaRetry: noRetry,mediaTimestamp: "+t.currentSegment.segmentInfo.mediaTimestamp),void r();case 1:case 2:case 3:var u;o.sameRequestRetried++,t.selectedSegment=t.currentSegment,u=o.trackToTryIdx<o.tracksToTry.length-1?o.trackToTryIdx+1:0,o.tracksToTry[u],o.trackToTryIdx=u,2!==l&&(t.selectedTrack=o.tracksToTry[o.trackToTryIdx]);break;case 4:if(!s.lastRequestedSegment.next)return t.externalFailure=o.lastFailure,t.sessionContext&&t.sessionContext.commonPresentation&&t.sessionContext.commonPresentation.isLive?o.reset():e.Log.verbose(5,"onRetry: noRetry, EOS mediaTimestamp: "+t.currentSegment.segmentInfo.mediaTimestamp),void r();t.currentSegment=s.lastRequestedSegment.next,o.segmentsSkipped++,o.resetForSegment(),t.selectedSegment=t.currentSegment,t.selectedTrack=o.tracksToTry[0],s.lastRequestedSegment=t.selectedSegment;break;case 5:o.sameRequestRetried++,t.selectedSegment=t.currentSegment,t.selectedTrack=o.tracksToTry[0];break;default:throw new Error("unexpected retry action: "+l)}var f=t.selectedTrack?t.selectedTrack.bitrate:-1;t.sessionContext&&t.sessionContext.commonPresentation&&(d=t.sessionContext.commonPresentation.isLive),c.infiniteSegmentRetryForPreconditionFailed&&d&&a._isLiveEdge(t)&&o.isLastNotReady()?(o.totalRetried=0,o.sameRequestRetried=0,o.preconditionFailedRetryCount++,e.Log.verbose(5,"failInfo.preconditionFailedRetryCount = "+o.preconditionFailedRetryCount)):(o.totalRetried++,e.Log.verbose(5,"failInfo.totalRetried = "+o.totalRetried+", failInfo.sameRequestRetried = "+o.sameRequestRetried)),e.Log.verbose(5,"onRetry: "+n[l]+" bitrate: "+f+" mediaTimestamp: "+t.selectedSegment.segmentInfo.mediaTimestamp),i()}}else i()})},t.prototype._getAction=function(e,t,n){var a=0,i=!1,r=n.failTracker;if(n.sessionContext&&n.sessionContext.commonPresentation&&(i=n.sessionContext.commonPresentation.isLive),0===e)a=r.sameRequestRetried>=t.maxRetryPresentation?0:5;else if(r.forceRetry)a=r.sameRequestRetried>=t.maxRetryPerSegment?0:5,r.forceRetry=!1;else if(r.isWorkflowOutOfSync())a=5;else if(r.totalRetried>=t.maxTotalRetries&&2!==r.lastStreamType||r.segmentsSkipped>=t.maxSkipSegments&&(r.trackToTryIdx>=r.tracksToTry.length-1||r.sameRequestRetried>=t.maxRetryPerSegment))a=0;else if(r.isSegmentDecryptionError()||r.isLastNotFound()||r.isLastRequestError()||r.isLastNotReady()&&i&&!this._isLiveEdge(n))a=r.trackToTryIdx<r.tracksToTry.length-1&&r.sameRequestRetried<t.maxRetryPerSegment?1:4;else if(i&&this._isLiveEdge(n)&&r.isLastNotReady())a=5,r.sameRequestRetried>=t.maxRetryPerSegment&&2!==r.lastStreamType&&!t.infiniteSegmentRetryForPreconditionFailed&&(a=0);else if(r.isLastServerError())a=1;else if(r.isLastNetworkFail()){var o=i&&this._isLiveEdge(n)&&r.isLastNetworkDown()?3*t.maxRetryPerSegment:t.maxRetryPerSegment;a=r.sameRequestRetried<o?r.noDataReceivedFailure?5:r.isNetworkTimeoutError()&&n.lastRequestInfo&&n.lastRequestInfo.bandwidthInfo&&n.lastRequestInfo.bandwidthInfo.bandwidthInbps>=n.lastRequestInfo.urlRequest.bitrate||n.lastRequestInfo.bandwidthInfo.responseLengthInBytes<n.sessionContext.heuristicSettings.bandwidth.bandwidthDataSizeThresholdInBytes?3:2:4}else a=r.isLastNotReady()&&n.sessionContext.isLiveToVod||r.isLastErrorUnknown()&&r.sameRequestRetried<t.maxRetryPerSegment?5:0;return a},t.prototype._isLiveEdge=function(e){if(!e.requestedStream||!e.requestedStream.streamingInfo)return!1;var t=e.requestedStream.streamingInfo.lastRequestedSegment;return!(!t||t.next)},t.prototype._createTrackToTry=function(e,t,n){var a=[],i=t.tracks.indexOf(n),r=t.tracks.length;a.push(t.tracks[i]);for(var o=i-1;o>=0;o--)t.tracks[o].streamingInfo.selectable&&a.push(t.tracks[o]);if(!e.retryLowerBitrateOnly)for(o=i+1;r>o;o++)t.tracks[o].streamingInfo.selectable&&a.push(t.tracks[o]);return a},t}();t.HttpRetryPolicy=a}(e.DataRetriever||(e.DataRetriever={})),e.DataRetriever}(f||(f={})),function(e){!function(t){"use strict";var n;!function(e){e[e.success=200]="success",e[e.notFound=404]="notFound",e[e.badGateway=502]="badGateway"}(n||(n={}));var a=function(){function t(){this._moduleId="InitialBandwidthDataUrlFormatter",this._disposed=!1}return t.prototype.dispose=function(){this._disposed=!0},t.prototype.init=function(e){var t=e.workflows[0];t.addHandler(t.stepEvents.requestEnd,this.onPreFetchUrlFormat,this)},t.prototype.onPreFetchUrlFormat=function(t){e.Log.verbose(6,"OnPreFetchUrlFormat");var n=t.sessionContext.getPresentationQueryStr(),a=this;return t.currentModuleId=this._moduleId,new Promise(function(i,r){if(a._disposed)return e.Failure.attachFailureToRequest(t,t.currentModuleId,0),void r("object is already disposed.");if(t.sessionContext.heuristicSettings.preFetchDataEnabled){var o=t.sessionContext.commonPresentation.periods[0].streams.findFirst(function(e){return 0===e.type});if(t.requestedStream=o,t.requestedStream){var s=a.getBitrate(t);if(!s)throw new Error("bitrate of video track not set in presentation");var c=t.requestedStream.mediaUrlTemplate;if(!c)throw new Error("media url template is not set for the video stream");var d,l=o.segments;d=t.sessionContext.commonPresentation.isLive?l.last.segmentInfo:l.first.segmentInfo;var u=a.getRepresentationId(t,s),f=e.Util.UrlFormatter.FormatDashMediaUrl(c,s.toString(),d.mediaTimestampStr,d.index,n,u),p=new e.Context.UrlRequest(f,3,0,o.id,s,d.presTimeInSec,d.durationInSec,u);t.urlsToRetrieve.push(p),t.sessionContext.heuristicSettings.preFetchDataEnabled=!1,i()}else i()}else i()})},t.prototype.getRepresentationId=function(e,t){if(e.selectedTrack&&e.selectedTrack.id)return e.selectedTrack.id;for(var n=e.requestedStream.tracks,a=0;a<n.length;a++)if(n[a].bitrate===t)return n[a].id;return""},t.prototype.getBitrate=function(e){var t=Math.max(e.sessionContext.videoTag.scrollWidth,e.sessionContext.videoTag.width),n=Math.max(e.sessionContext.videoTag.scrollHeight,e.sessionContext.videoTag.height),a=0;if(n>0&&t>0){var i=e.requestedStream.tracks;if(e.sessionContext.heuristicSettings.maxStreamingResolutionLimit){for(var r=0,o=1;o<i.length;o++)e.sessionContext.heuristicSettings.maxStreamingResolutionLimit>=i[o].height&&(r=o);i=i.slice(0,r+1)}for(var s=0,c=0,d=0;d<i.length;d++)if(i[d].selectable&&(!a&&i[d].width>t&&i[d].height>n||a&&s===i[d].width&&c===i[d].height))a=i[d].bitrate,s=i[d].width,c=i[d].height;else if(a)break;if(0==a){for(d=i.length-1;d>=0&&i[d].selectable&&(i[d].width>t||i[d].height>n);d--)a=i[d].bitrate;0==a&&i.length>0&&(a=i[i.length-1].bitrate)}}if(0==a)if(e.sessionContext.heuristicSettings.preFetchDataMiddle){var l;l=Math.round(e.requestedStream.tracks.length/2)-1,a=e.requestedStream.tracks[l].bitrate}else a=e.requestedStream.tracks[0].bitrate;return a},t}();t.InitialBandwidthDataUrlFormatter=a}(e.Heuristics||(e.Heuristics={})),e.Heuristics}(f||(f={})),function(e){!function(t){"use strict";var n=function(){function t(){this._moduleId="streamSelector",this._disposed=!1,this._initial=!0}return t.prototype.dispose=function(){this._disposed=!0},t.prototype.init=function(e){var t=e.workflows[0];t.addHandler(t.stepEvents.requestEnd,this.onSelectStreams,this)},t.prototype.onSelectStreams=function(t){var n=this;return t.currentModuleId=this._moduleId,new Promise(function(a,i){var r=!1,o=!1,s=!1,c=null,d=!1,l=t.sessionContext.commonPresentation;if(n._disposed)return e.Failure.attachFailureToRequest(t,t.currentModuleId,0),void i("Disposed");if(n._initial){if(!l)throw new Error("CommonPresentation is empty");l.periods[0].streams.forEach(function(e){e.streamingInfo.selected=!1});for(var u=l.periods[0].streams.length-1;u>=0;u--)0!==l.periods[0].streams[u].type||r?1===l.periods[0].streams[u].type?(l.periods[0].streams[u].streamingInfo.supported=MediaSource.isTypeSupported&&MediaSource.isTypeSupported(l.periods[0].streams[u].codec)||l.periods[0].streams[u].codec.indexOf("aac")>-1||l.periods[0].streams[u].codec.indexOf("mp4a")>-1,o&&s||!l.periods[0].streams[u].streamingInfo.supported||(o?!s&&l.periods[0].streams[u].codec.indexOf("ec-3")>-1&&(s=!0,null!==c&&(c.streamingInfo.selected=!1),l.periods[0].streams[u].streamingInfo.selected=!0):(o=!0,l.periods[0].streams[u].streamingInfo.selected=!0,c=l.periods[0].streams[u],l.periods[0].streams[u].codec.indexOf("ec-3")>-1&&(s=!0)))):2!==l.periods[0].streams[u].type||d||(d=!0,l.periods[0].streams[u].streamingInfo.selected=!0):(r=!0,l.periods[0].streams[u].streamingInfo.selected=!t.sessionContext.isAudioOnlyMode);return r||o?(n._initial=!1,void a()):(e.Failure.attachFailureToRequest(t,t.currentModuleId,4194307),void i("Neither video nor audio streams are found"))}a()})},t}();t.InitialStreamSelector=n}(e.Presentation||(e.Presentation={})),e.Presentation}(f||(f={})),function(e){!function(t){"use strict";var n=function(){function e(e,t,n,a,i){this.index=e,this._timescale=i,this._presentationOffset=a,this._mediaTimestampStr=t,this._mediaTimestamp=parseInt(t),this._presTimeInSec=(this._mediaTimestamp+a)/i,n&&(this._mediaDuration=n,this._durationInSec=n/i)}return Object.defineProperty(e.prototype,"timescale",{get:function(){return this._timescale},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"presentationOffset",{get:function(){return this._presentationOffset},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mediaTimestampStr",{get:function(){return this._mediaTimestampStr},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mediaTimestamp",{get:function(){return this._mediaTimestamp},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mediaDuration",{get:function(){return this._mediaDuration},set:function(e){this._mediaDuration=e,this._durationInSec=e/this._timescale},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"presTimeInSec",{get:function(){return this._presTimeInSec},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"durationInSec",{get:function(){return this._durationInSec},enumerable:!0,configurable:!0}),e.prototype.update=function(e,t){e&&(this.index+=e),this._presentationOffset!==t&&(this._presentationOffset=t,this._presTimeInSec=(this._mediaTimestamp+t)/this._timescale)},e}();t.MediaSegmentInfo=n;var a=function(e,t,a,i,r,o){this.firstSegment=new n(e,t,a,i,r),this.repeat=o,this.containerIndex=NaN};t.SegmentRunEntry=a;var i=function(){function t(t,a,i){this._container=t,this._pubTime=t.pubTime,this._runEntry=a,this._runEntryRepeatPosition=i;var r=a.firstSegment.mediaTimestampStr;i&&(r=e.Timestamp.add(r,i*a.firstSegment.mediaDuration)),this.segmentInfo=new n(a.firstSegment.index+i,r,a.firstSegment.mediaDuration,t.presentationTimeOffset,t.timescale)}return t.prototype.dispose=function(){this.segmentInfo=null,this._container=null,this._pubTime=null,this._runEntry=null,this._runEntryRepeatPosition=NaN},Object.defineProperty(t.prototype,"next",{get:function(){if(this._updateIterator(),isNaN(this._runEntryRepeatPosition))return null;var n=this._runEntry,a=0;if(this._runEntryRepeatPosition+1>this._runEntry.repeat){var i=this._runEntry.containerIndex+1;if(!(i<this._container.segmentTable.length))return e.Log.verbose(4,"Cannot get next iterator"),null;n=this._container.segmentTable[i]}else a=this._runEntryRepeatPosition+1;return new t(this._container,n,a)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"prev",{get:function(){if(this._updateIterator(),isNaN(this._runEntryRepeatPosition))return null;var n,a=this._runEntry;if(0===this._runEntryRepeatPosition){var i=this._runEntry.containerIndex-1;if(!(i>=0&&i<this._container.segmentTable.length))return e.Log.warning(4,"Cannot get previous iterator"),null;n=(a=this._container.segmentTable[i]).repeat}else n=this._runEntryRepeatPosition-1;return new t(this._container,a,n)},enumerable:!0,configurable:!0}),t.prototype._updateIterator=function(){if(this._container&&this._container.pubTime&&this._container.pubTime.getTime()>this._pubTime.getTime()){this._pubTime=this._container.pubTime;for(var t=this._runEntry.containerIndex,n=this._container.segmentTable[t];!n&&t>0;)t--,n=this._container.segmentTable[t];if(n){if(n.firstSegment.index<=this.segmentInfo.index&&this.segmentInfo.index<=n.firstSegment.index+n.repeat)return this._runEntry=n,this._runEntryRepeatPosition=this.segmentInfo.index-n.firstSegment.index,void this._updateInfo();if(this.segmentInfo.index>n.firstSegment.index+n.repeat&&this._container.segmentTable.length>t+1){var a=this._container.segmentTable[t+1];if(this.segmentInfo.index<=a.firstSegment.index+a.repeat)return this._runEntry=a,this._runEntryRepeatPosition=this.segmentInfo.index-a.firstSegment.index,void this._updateInfo()}}var i=this._container.getByIndex(this.segmentInfo.index);if(!i)return e.Log.warning(4,"Referenced segment not found in presentation, disposing iterator"),void this.dispose();this._runEntry=i._runEntry,this._runEntryRepeatPosition=i._runEntryRepeatPosition,this._updateInfo()}},t.prototype._updateInfo=function(){var e=this._container.getByIndex(this.segmentInfo.index);if(e){var t=e.segmentInfo;(this.segmentInfo.mediaTimestampStr!==t.mediaTimestampStr||this.segmentInfo.mediaDuration!==t.mediaDuration)&&(this.segmentInfo=new n(t.index,t.mediaTimestampStr,t.mediaDuration,t.presentationOffset,t.timescale))}},t}();t.MediaSegmentInfoIterator=i;var r=function(){function n(e,t,n,a){this.maxSegmentDuration=0,this.timescale=e,this.presentationTimeOffset=t,this.pubTime=n,this.segmentTable=[],this._isLive=a}return n.prototype.dispose=function(){this.segmentTable.length=0},Object.defineProperty(n.prototype,"first",{get:function(){var e=null;return this.segmentTable.length>0&&(e=new i(this,this.segmentTable[0],0)),e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"last",{get:function(){var e,t=null;return this.segmentTable.length>0&&(e=this.segmentTable[this.segmentTable.length-1],t=new i(this,e,e.repeat)),t},enumerable:!0,configurable:!0}),n.prototype.addMediaSegmentRun=function(t){var n=null,i=0;if(this.segmentTable.length>0){i=(n=this.segmentTable[this.segmentTable.length-1]).firstSegment.mediaTimestamp+n.firstSegment.mediaDuration*(n.repeat+1);var r=e.Common.timestampDeltaThreshold*this.timescale;if(i-t.firstSegment.mediaTimestamp>r)if(0===t.repeat)e.Log.warning(4,"Discontinuities detected at: "+t.firstSegment.mediaTimestamp);else{var o,s=t.firstSegment;for(o=1;o<=t.repeat;o++){var c=s.mediaTimestamp+s.mediaDuration*o;if(!(i>c)){t=new a(s.index,c.toString(),s.mediaDuration,s.presentationOffset,s.timescale,t.repeat-o);break}}}}return t?(t.containerIndex=this.segmentTable.length,this.segmentTable.push(t),this.maxSegmentDuration=Math.max(this.maxSegmentDuration,t.firstSegment.durationInSec||0),e.Log.verbose(4,"Added segment with idx="+t.firstSegment.index+" mt="+t.firstSegment.mediaTimestamp+" pt="+t.firstSegment.presTimeInSec.toFixed(7)+" r="+t.repeat+(t.firstSegment.durationInSec?" d="+t.firstSegment.durationInSec.toFixed(7):"")),t.repeat+1):0},n.prototype.addMediaSegmentInfo=function(e,n,a,i,r){var o;if(this.segmentTable.length>0&&NaN===this.segmentTable[this.segmentTable.length-1].firstSegment.mediaDuration)throw new Error("Failed to add segment: previous entry doesn't have duration");o=new t.SegmentRunEntry(e,n,a,i,r,0),this.addMediaSegmentRun(o)},n.prototype.updateSegmentDuration=function(t,n){var a,i;if(0===this.segmentTable.length)return!1;if((a=this.segmentTable[this.segmentTable.length-1]).firstSegment.presTimeInSec!==t){if(-1===(i=e.Common.binarySearch(t,this.segmentTable,this._compareTimestampInSec)))return e.Log.verbose(4,"Failed to update segment duration, run entry with presentation time "+t+" not found"),!1;a=this.segmentTable[i]}return a.firstSegment.mediaDuration!==n&&(e.assert(!a.firstSegment.mediaDuration&&0===a.repeat,"Failed to update segment duration, run entry (s:"+a.firstSegment.presTimeInSec+" d:"+a.firstSegment.durationInSec+" r:"+a.repeat+") cannot be overwritten by segment (s:"+t+" d:"+n/this.timescale+")"),a.firstSegment.mediaDuration=n),this.maxSegmentDuration=Math.max(this.maxSegmentDuration,a.firstSegment.durationInSec||0),!0},n.prototype.getByIndex=function(t){var n,a=null;if(0===this.segmentTable.length)return null;if(-1!==(n=e.Common.binarySearch(t,this.segmentTable,this._compareIndex))){var r=this.segmentTable[n],o=t-r.firstSegment.index;a=new i(this,r,o)}return a||e.Log.verbose(4,"Entry with index "+t+" not found"),a},n.prototype.getBySegmentStartTime=function(t,n){var a,r=null;if(0===this.segmentTable.length)return null;if(n||(n=e.Common.timestampDeltaThreshold),Math.abs(t-this.segmentTable[0].firstSegment.presTimeInSec)<n)return this.first;if(-1!==(a=e.Common.binarySearch(t,this.segmentTable,this._compareTimestampInSec))){var o=this.segmentTable[a],s=0;if(e.Common.diffTimes(t,o.firstSegment.presTimeInSec)&&(s=Math.round((t-o.firstSegment.presTimeInSec)/o.firstSegment.durationInSec)||0),s>o.repeat){if(!(a+1<this.segmentTable.length))return e.Log.verbose(4,"Cannot find match for "+t),null;o=this.segmentTable[a+1],s=0}var c=o.firstSegment.presTimeInSec+s*o.firstSegment.durationInSec;if(Math.abs(t-c)>n)return e.Log.verbose(4,"Cannot find match within error range for "+t),null;r=new i(this,o,s)}return r},n.prototype.getByInSegmentTimestamp=function(t){var n,a=null;if(0===this.segmentTable.length)return null;if(-1===(n=e.Common.binarySearch(t,this.segmentTable,this._compareTimestampInSec))&&this._isLive&&t<this.segmentTable[0].firstSegment.presTimeInSec&&(e.Log.verbose(4,"Live presentation requested time "+t+" is ahead of the first segment time "+this.segmentTable[0].firstSegment.presTimeInSec+" seeking to the first segment!"),n=0),-1!==n){var r=this.segmentTable[n],o=0;t>r.firstSegment.presTimeInSec&&(o=Math.floor((t-r.firstSegment.presTimeInSec)/r.firstSegment.durationInSec)),a=new i(this,r,o)}return a||e.Log.verbose(4,"Entry including timestamp "+t+" not found"),a},n.prototype.getByInDiscontinuityTimestamp=function(t){var n,a=null;return 0===this.segmentTable.length?null:(-1!==(n=e.Common.binarySearchInGaps(t,this.segmentTable,this._compareTimestampInSecInGaps))&&(a=new i(this,this.segmentTable[n],0)),a||e.Log.verbose(4,"Discontinuity including timestamp "+t+" not found"),a)},n.prototype.update=function(t){var n=this,a=t,i=null,r=0;if(!(a.pubTime.getTime()<=this.pubTime.getTime())){if(this.pubTime=a.pubTime,(i=this.getBySegmentStartTime(a.first.segmentInfo.presTimeInSec))&&i.segmentInfo.index!==a.first.segmentInfo.index){if(r=i.segmentInfo.index,e.Common.diffTimes(a.first.segmentInfo.presTimeInSec,i.segmentInfo.presTimeInSec))throw new Error("Segment mismatch during container update");e.Log.verbose(4,"Segment index offset="+r)}if(a._isLive){var o=a.last.segmentInfo,s=o.index,c=o.mediaTimestamp+o.mediaDuration;for(i=this.getBySegmentStartTime(o.presTimeInSec);c&&i&&i.next&&!((i=i.next).segmentInfo.mediaTimestamp<c);)c=(o=i.segmentInfo).mediaTimestamp+o.mediaDuration,a.addMediaSegmentInfo(++s,o.mediaTimestampStr,o.mediaDuration,o.presentationOffset,o.timescale)}this._isLive=a._isLive,this.segmentTable.length=0,a.segmentTable.forEach(function(e){e.firstSegment.update(r,n.presentationTimeOffset),n.segmentTable.push(e)}),this.maxSegmentDuration=a.maxSegmentDuration}},n.prototype._compareTimestampInSec=function(t,n){var a=0;return e.Common.diffTimes(t,n.firstSegment.presTimeInSec)>0?a=-1:e.Common.diffTimes(t,n.firstSegment.presTimeInSec)&&e.Common.diffTimes(t,n.firstSegment.presTimeInSec+(n.repeat+1)*(n.firstSegment.durationInSec||0))<=0&&(a=1),a},n.prototype._compareIndex=function(e,t){var n=0;return e<t.firstSegment.index?n=-1:e>=t.firstSegment.index+(t.repeat+1)&&(n=1),n},n.prototype._compareTimestampInSecInGaps=function(e,t,n){var a=0,i=t.firstSegment.presTimeInSec+(t.repeat+1)*(t.firstSegment.durationInSec||0),r=n.firstSegment.presTimeInSec;return i>e?a=-1:e>=r&&(a=1),a},n}();t.MediaSegmentInfoContainer=r,function(e){e[e.needsToBeScheduled=0]="needsToBeScheduled",e[e.inProgress=1]="inProgress",e[e.endOfStream=2]="endOfStream"}(t.WorkflowState||(t.WorkflowState={}));var o=(t.WorkflowState,function(){function e(){this.forge=null,this.webCrypto=null}return e.prototype.dispose=function(){this.forge=null,this.webCrypto=null},e}());t.AesInfo=o;var s=function(){function e(){this.selected=!1,this.supported=!0,this.pendingSeekPositionInSec=null,this.abortCurrentRequest=!1,this.workflowState=0,this.sourceBuffer=null,this.lastDownloadedTrack=null,this.aes=new o,this.flushStream=!1,this.activeSegmentFetchRequestList=[],this.initSegmentCache={},this.activeWorkflows=[]}return e.prototype.dispose=function(){this.sourceBuffer&&(this.sourceBuffer.dispose(),this.sourceBuffer=null),this.lastDownloadedTrack=null,this.aes&&(this.aes.dispose(),this.aes=null),this.initSegmentCache=null,this.abortAllActiveRequests()},e.prototype.addToActiveRequestList=function(e){this.activeSegmentFetchRequestList.push(e)},e.prototype.removeFromActiveRequestList=function(e){this.activeSegmentFetchRequestList=this.activeSegmentFetchRequestList.filter(function(t){return t!==e})},e.prototype.abortAllActiveRequests=function(){this.activeSegmentFetchRequestList.forEach(function(e){return e.abortRequest()}),this.activeSegmentFetchRequestList=[],this.activeWorkflows.forEach(function(e){e.abortWorkflow()}),this.activeWorkflows=[]},e.prototype.getLastActiveReq=function(){var e=this.activeSegmentFetchRequestList.length-1;return e>=0?this.activeSegmentFetchRequestList[e]:null},e.prototype.getInitSegmentForBitrate=function(e){return this.initSegmentCache[e]},e.prototype.addToInitSegmentCache=function(e,t){this.initSegmentCache[e]=t},e.prototype.getActiveWorkflowList=function(){return this.activeWorkflows},Object.defineProperty(e.prototype,"currentActiveWorkflowCount",{get:function(){return this.activeWorkflows.length},enumerable:!0,configurable:!0}),e.prototype.onWorkflowStarted=function(e){this.activeWorkflows.push(e)},e.prototype.onWorkflowCompleted=function(e){this.activeWorkflows=this.activeWorkflows.filter(function(t){return t!==e})},e.prototype.isSegmentChosenForLastWorkflow=function(){return 0===this.activeWorkflows.length||!!this.activeWorkflows[this.activeWorkflows.length-1].currentSegment},e}();t.MediaStreamStreamingInfo=s,t.MediaTrackStreamingInfo=function(){this.selectable=!0};var c=function(){function e(e,t){this._streams=[];for(var n=0;n<t.length;n++)if(0==t[n].type){var a=new d(e,t[n]);this._streams.push(a)}}return e.prototype.dispose=function(){for(var e=0;e<this._streams.length;e++)this._streams[e].dispose();this._streams=[]},Object.defineProperty(e.prototype,"streams",{get:function(){return this._streams},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedIndex",{get:function(){for(var e=-1,t=0;t<this._streams.length;t++)if(this._streams[t].commonStream.streamingInfo.selected){e=t;break}return e},enumerable:!0,configurable:!0}),e}();t.VideoStreamList=c;var d=function(){function t(t,n){this._commonStream=n,this._eventMgr=new e.Events.Manager(t.azureHtml5,!1),this._sessionContext=t}return t.prototype.dispose=function(){this._commonStream=null,this._sessionContext=null,this._eventMgr&&(this._eventMgr.dispose(),this._eventMgr=null)},Object.defineProperty(t.prototype,"codec",{get:function(){return this._commonStream.codec},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._commonStream.id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tracks",{get:function(){return this._commonStream.tracks},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"label",{get:function(){return this._commonStream.label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"commonStream",{get:function(){return this._commonStream},enumerable:!0,configurable:!0}),t.prototype.selectTrackByIndex=function(t){var n=!1;(-1>t||t>=this._commonStream.tracks.length)&&(e.Log.warning(7,"selectTrackByIndex: "+t+" switching back to auto track selection"),t=-1),e.Log.verbose(7,"selectTrackByIndex: "+t);for(var a=0;a<this._commonStream.tracks.length;a++){var i=this._commonStream.tracks[a].streamingInfo.selectable;this._commonStream.tracks[a].streamingInfo.selectable=-1===t||a===t,i!=this._commonStream.tracks[a].streamingInfo.selectable&&(n=!0)}n&&(this.commonStream.streamingInfo.flushStream=!0,this._eventMgr.dispatchEvent(e.StreamEventName.trackselected),this._sessionContext.eventMgr.dispatchEvent(e.InternalEventName.flushvideo))},t.prototype.addEventListener=function(e,t,n){this._eventMgr.addHandler(e,t,n)},t.prototype.removeEventListener=function(e,t){this._eventMgr.removeHandler(e,t)},t}(),l=function(){function t(t,n){this._streams=[];for(var a=0;a<n.length;a++)if(1==n[a].type){var i=new u(t,n[a]);this._streams.push(i)}this._eventMgr=new e.Events.Manager(t.azureHtml5,!1),this._sessionContext=t}return t.prototype.dispose=function(){for(var e=0;e<this._streams.length;e++)this._streams[e].dispose();this._sessionContext=null,this._eventMgr&&(this._eventMgr.dispose(),this._eventMgr=null),this._streams=[]},Object.defineProperty(t.prototype,"streams",{get:function(){return this._streams},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enabledIndices",{get:function(){for(var e=[],t=0;t<this._streams.length;t++)if(this._streams[t].enabled){e.push(t);break}return e},enumerable:!0,configurable:!0}),t.prototype.switchIndex=function(t){if(1!=this.enabledIndices.length)return e.Log.error(7,"switchIndex failed - only single stream supported: "+this.enabledIndices.length+" streams enabled"),this._eventMgr.dispatchEvent(e.StreamListEventName.streamselectnotsupported),!1;if(t>=this.streams.length||0>t)return e.Log.error(7,"switchIndex failed - tried to enable invalid index: "+t),this._eventMgr.dispatchEvent(e.StreamListEventName.streamindexinvalid),!1;var n=this._streams[this.enabledIndices[0]],a=this._streams[t];if(t===this.enabledIndices[0])return e.Log.verbose(7,"switchIndex failed - current stream selected"),this._eventMgr.dispatchEvent(e.StreamListEventName.streamselected),!1;if(a.codec!==n.codec&&!n.hasAudioTypeChangeSupport())return e.Log.verbose(7,"switchIndex failed - switch involves codec change but no changeType support"),this._eventMgr.dispatchEvent(e.StreamListEventName.streamselectnotsupported),!1;this._switchEnabledIndex(t);var i=this._sessionContext.videoTag.currentTime,r=this._sessionContext.prerollBufferInSec();return a.swapBuffersAndCleanUp(n,i,r),a.codec!==n.codec&&(this._sessionContext.eventMgr.dispatchEvent(e.InternalEventName.audiocodecchanged)||e.Log.verbose(7,"switchIndex failed - audiocodecchanged event handler failed")),this._eventMgr.dispatchEvent(e.StreamListEventName.streamselected),!0},t.prototype.addEventListener=function(e,t,n){this._eventMgr.addHandler(e,t,n)},t.prototype.removeEventListener=function(e,t){this._eventMgr.removeHandler(e,t)},t.prototype._switchEnabledIndex=function(t){e.assert(1==this.enabledIndices.length,"Current implementation only allows one enabled stream at a time");var n=this.enabledIndices[0];this._streams[n].enabled=!1,this._streams[t].enabled=!0},t}();t.AudioStreamList=l;var u=function(){function t(e,t){this._commonStream=t}return t.prototype.dispose=function(){this._commonStream=null},Object.defineProperty(t.prototype,"enabled",{get:function(){return this._commonStream.streamingInfo.selected},set:function(e){this._commonStream.streamingInfo.selected=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"supported",{get:function(){return this._commonStream.streamingInfo.supported},set:function(e){this._commonStream.streamingInfo.supported=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){var t=this._commonStream.mediaUrlTemplate.toLowerCase(),n="fragments(",a=t.indexOf(n),i=t.indexOf("=",a);return e.assert(i>a+n.length,"mediaUrlTemplate ("+t+") did not follow expected schema"),this._commonStream.mediaUrlTemplate.substring(a+n.length,i)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"language",{get:function(){return this._commonStream.language},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"codec",{get:function(){return this._commonStream.codec},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"label",{get:function(){return this._commonStream.label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bitrate",{get:function(){return this._commonStream.tracks[0].bitrate},enumerable:!0,configurable:!0}),t.prototype.hasAudioTypeChangeSupport=function(){return null===this._commonStream.streamingInfo.sourceBuffer||!e.Common.isSafari&&this._commonStream.streamingInfo.sourceBuffer.hasAudioTypeChangeSupport},t.prototype.swapBuffersAndCleanUp=function(t,n,a){if(t._commonStream.streamingInfo.sourceBuffer){this._commonStream.streamingInfo.sourceBuffer||(this._commonStream.streamingInfo.sourceBuffer=t._commonStream.streamingInfo.sourceBuffer);var i=this._commonStream.streamingInfo.sourceBuffer;this._commonStream.streamingInfo.workflowState=0,t._commonStream.streamingInfo.workflowState=2,this._commonStream.streamingInfo.pendingSeekPositionInSec=n,this._commonStream.streamingInfo.audioTrackSwitched=!0,i.buffered.length>0&&i.buffered.end(i.buffered.length-1)>n+a&&i.flushFrom(n+a);try{i.flushUntil(n)}catch(t){e.Log.error(7,t)}}},t}()}(e.Presentation||(e.Presentation={})),e.Presentation}(f||(f={})),function(e){!function(t){"use strict";var n=function(){function t(){}return t.prototype.initMediaSource=function(t){return e.Log.verbose(18,"Starting initialization of media source"),new Promise(function(n,a){return t.sessionContext._mediaSource?(e.Log.verbose(18,"Media source already created"),void n()):(t.sessionContext._videoStreamList=new e.Presentation.VideoStreamList(t.sessionContext,t.sessionContext.commonPresentation.periods[0].streams),t.sessionContext._audioStreamList=new e.Presentation.AudioStreamList(t.sessionContext,t.sessionContext.commonPresentation.periods[0].streams),t.sessionContext._mediaSource=e.VideoElementAdapter.CreateAdapter(),t.sessionContext.eventMgr.dispatchEvent(e.EventName.mediaSourceSrcSetRequested),void t.sessionContext._mediaSource.setVideoElementSrcAsync(t.sessionContext.videoTag).then(function(){e.Log.verbose(18,"Media source successfully initialized"),t.sessionContext.eventMgr.dispatchEvent(e.EventName.mediaSourceSrcSetResolved),n()},function(t){throw e.Log.warning(18,"Throwing: Error occured during media source initialization"),new Error(t)}).catch(function(t){e.Log.warning(18,"Catching: Error occured during media source initialization"),a(t)}))})},t}();t.MediaSourceInitHelper=n;var a=function(){function t(e,t){this.isDisposed=!1,this.aesHandler=e,this.dataRetriever=t,this.mediaSourceHelper=new n}return t.prototype.init=function(e){var t=e.workflows[0];t.addHandler(t.stepEvents.requestEnd,this.presentationRequestEnd,this)},t.prototype.dispose=function(){this.isDisposed=!0},t.prototype.presentationRequestEnd=function(n){e.Log.verbose(18,"presentationRequestEnd");var a=this;return new Promise(function(e,i){function r(e){return e&&s.push(e),t.catchedRejectError}var o=[],s=[];o.push(a.aesHandler.onDownloadKey(n).catch(function(e){return r(e)})),o.push(a.dataRetriever.onGetData(n).catch(function(){return 0})),o.push(a.mediaSourceHelper.initMediaSource(n).catch(function(e){return r(e)})),Promise.all(o).then(function(n){if(!a.isDisposed){var r=s.length>0?s[0]:null;n.some(function(e){return e==t.catchedRejectError})?i(r):e()}})})},t.catchedRejectError=-1,t}();t.PresentationModuleGroup=a}(e.ModuleGroup||(e.ModuleGroup={})),e.ModuleGroup}(f||(f={})),function(e){!function(t){"use strict";var n=function(){function t(e,t,n){void 0===n&&(n=!1),this._completeThreshold=.8,this._intervalDuration=500,this._currentIntervalCount=0,this._shouldIgnoreLatency=!1,this._minObservedBandwithThreshold=.8,this._requestInfo=e,this._timeout=t,this._maxIntervals=Math.floor(this._timeout/this._intervalDuration/2),this._shouldIgnoreLatency=n,this.startRequstTimer()}return t.prototype.startRequstTimer=function(){var e=this;this._timeoutId||(this._timeoutId=setTimeout(function(){e.onRequestTimeout()},this._timeout))},t.prototype.onRequestTimeout=function(){var t=this;if(!this._requestInfo||!this._requestInfo.getIsAbortInProgress()&&(!this._requestInfo.reqContext||!this._requestInfo.reqContext.isAborted&&this._requestInfo.reqContext.sessionContext)){var n=this._requestInfo.loaded,a=this._requestInfo.total,i=Date.now(),r=!(0===n||n<this._requestInfo.reqContext.sessionContext.heuristicSettings.bandwidth.bandwidthDataSizeThresholdInBytes||i-this._requestInfo.bandwidthInfo.requestStartTimeInMS<this._requestInfo.reqContext.sessionContext.heuristicSettings.bandwidth.bandwidthEstimationMinMsec);this._requestInfo.request.readyState===XMLHttpRequest.DONE?this.dispose():r?8*n/(i-(this._shouldIgnoreLatency?this._requestInfo.bandwidthInfo.responseStartTimeInMS:this._requestInfo.bandwidthInfo.requestStartTimeInMS))*1e3>=this._requestInfo.urlRequest.bitrate*this._minObservedBandwithThreshold?this.dispose():n&&a&&n/a>this._completeThreshold?(this._intervalId=setInterval(function(){t.trackRequestInterval()},this._intervalDuration),e.Log.verbose(5,"Adding additional time to request as it is above threshold on timeout: "+this._requestInfo.urlRequest.url)):(e.Log.verbose(5,"Aborting request as the bandwidth is too low. Media workflow should be scheduled with lower quality."),this._requestInfo.abortRequest(),this.dispose()):this.dispose()}},t.prototype.trackRequestInterval=function(){this._currentIntervalCount++;var t=this._requestInfo.loaded;return this._requestInfo.request.readyState===XMLHttpRequest.DONE?void this.dispose():this._currentIntervalCount>this._maxIntervals?(e.Log.verbose(5,"Aborting request as it has timedout: "+this._requestInfo.urlRequest.url),this._requestInfo.abortRequest(),void this.dispose()):this._lastLoadedRead===t?(e.Log.verbose(5,"Aborting request as it is stalled after adding additional time: "+this._requestInfo.urlRequest.url),this._requestInfo.abortRequest(),void this.dispose()):void(this._lastLoadedRead=t)},t.prototype.dispose=function(){clearTimeout(this._timeoutId),clearInterval(this._intervalId),this._requestInfo=null},t}();t.RequestTimer=n,t.createNewRequestTimer=function(e,t){return new n(e,t)}}(e.DataRetriever||(e.DataRetriever={})),e.DataRetriever}(f||(f={})),function(e){!function(t){"use strict";var n=function(){function t(){this._moduleId="SegmentLocator.Dash",this._disposed=!1}return t.prototype.init=function(e){var t=e.workflows[1];t.addHandler(t.stepEvents.requestBegin,this.onFindSegment,this)},t.prototype.dispose=function(){this._disposed=!0},t.prototype.onFindSegment=function(n){var a="unknown";n.requestedStream&&(a=0===n.requestedStream.type?"video":1===n.requestedStream.type?"audio":"text"),e.Log.verbose(9,"onFindSegment:"+a),n.currentModuleId=this._moduleId;var i=this;return new Promise(function(r,o){if(i._disposed)return e.Failure.attachFailureToRequest(n,n.currentModuleId,0),void o("object is already disposed.");var s=n.requestedStream,c=s.streamingInfo.lastRequestedSegment,d=s.segments;if(n.selectedSegment)r();else{if(null!==s.streamingInfo.pendingSeekPositionInSec)e.Log.verbose(9,"onFindSegment("+a+"): pendingSeekPositionInSec "+s.streamingInfo.pendingSeekPositionInSec),s.streamingInfo.lastRequestedSegment=d.getByInSegmentTimestamp(s.streamingInfo.pendingSeekPositionInSec),s.streamingInfo.lastRequestedSegment?(e.Log.verbose(9,"found segment "+s.streamingInfo.lastRequestedSegment.segmentInfo.presTimeInSec+" for seek position "+s.streamingInfo.pendingSeekPositionInSec),s.streamingInfo.pendingSeekPositionInSec=null,n.fetchInitSegment=!0):(e.Log.verbose(9,"onFindSegment: didn't find the segment in container. Trying other methods."),n.sessionContext.isLiveToVod&&(s.streamingInfo.pendingSeekPositionInSec=n.sessionContext.commonPresentation.playableWindow.endInSec-.01));else if(c){if(!n.sessionContext.commonPresentation.isLive&&c.segmentInfo&&c.segmentInfo.mediaTimestamp>=d.last.segmentInfo.mediaTimestamp)return n.state=1,e.Log.verbose(9,"Signal End of stream as the current segment is last segment in the container."),void r();s.streamingInfo.lastRequestedSegment=c.next}else{var l=n.sessionContext;isNaN(l.startPositionInSec)?s.streamingInfo.lastRequestedSegment=d.first:(s.streamingInfo.lastRequestedSegment=d.getByInSegmentTimestamp(l.startPositionInSec),s.streamingInfo.lastRequestedSegment||(s.streamingInfo.lastRequestedSegment=l.startPositionInSec<d.first.segmentInfo.presTimeInSec?d.first:d.getByInDiscontinuityTimestamp(l.startPositionInSec)),!s.streamingInfo.lastRequestedSegment&&n.sessionContext.commonPresentation.isLive&&2===s.type&&l.startPositionInSec>d.last.segmentInfo.presTimeInSec&&(s.streamingInfo.lastRequestedSegment=d.last))}if(null===s.streamingInfo.lastRequestedSegment)if(n.sessionContext.commonPresentation.isLive&&c&&c.segmentInfo&&(c.segmentInfo.mediaTimestamp>=d.last.segmentInfo.mediaTimestamp||s.streamingInfo.pendingSeekPositionInSec)){if(e.Log.warning(9,"Unable to find a segment"),s.streamingInfo.lastRequestedSegment=c,!n.sessionContext.commonPresentation.minimumUpdatePeriodInSec)return s.streamingInfo.audioTrackSwitched=!1,e.Failure.attachFailureToRequest(n,n.currentModuleId,1),void o();n.state=2,n.retryWaitTimeMSec=t._retryWaitTimeMSec,e.Log.verbose(9,"Reverting to previous segment")}else{if(n.sessionContext.commonPresentation.isLive&&null!==s.streamingInfo.pendingSeekPositionInSec)return e.Failure.attachFailureToRequest(n,n.currentModuleId,1),void o();if((s.streamingInfo.audioTrackSwitched||c&&!c.segmentInfo)&&n.sessionContext.commonPresentation.isLive)return s.streamingInfo.audioTrackSwitched=!1,e.Failure.attachFailureToRequest(n,n.currentModuleId,1),void o();n.state=1}n.currentSegment=s.streamingInfo.lastRequestedSegment,r()}})},t._retryWaitTimeMSec=2e3,t}();t.Dash=n}(e.SegmentLocator||(e.SegmentLocator={})),e.SegmentLocator}(f||(f={})),function(e){(e.AesUtil||(e.AesUtil={})).verifyKeyUrlWithToken=function(t,n){if(!n||0===n.length)return!0;try{var a=decodeURIComponent(n)}catch(t){return e.Log.error(12,t),!1}var i=a.indexOf("urn:microsoft:azure:mediaservices:keyacquisitionhostname");if(-1===i)return!0;var r=a.indexOf("&",i);-1===r&&(r=a.length);var o=a.substring(i,r),s=o.split("=");if(2!=s.length)return e.Log.error(12,"AMS hostname token is malformed: "+o),!1;var c=document.createElement("a");return c.href=t,s[1].toLowerCase()==c.hostname.toLowerCase()||(e.Log.error(12,"AMS hostname mismatch: "+s[1].toLowerCase()+", "+c.hostname.toLowerCase()),!1)},e.AesUtil}(f||(f={})),Object.defineProperty(Array.prototype,"findFirst",{value:function(e){for(var t=0;t<this.length;t++){var n=this[t];if(e.call(this,n,t,Object(this)))return n}return null},enumerable:!1,configurable:!0}),Object.defineProperty(Array.prototype,"findLast",{value:function(e){for(var t=this.length-1;t>=0;t--){var n=this[t];if(e.call(this,n,t,Object(this)))return n}return null},enumerable:!1,configurable:!0}),Object.defineProperty(Array.prototype,"findIndexOf",{value:function(e){for(var t=0;t<this.length;t++){var n=this[t];if(e.call(this,n,t,Object(this)))return t}return-1},enumerable:!1,configurable:!0}),Object.defineProperty(Array.prototype,"removeFirst",{value:function(e){var t=this.findIndexOf(e),n=null;return-1!==t&&(n=this.splice(t,1)[0]),n},enumerable:!1,configurable:!0}),Object.defineProperty(Uint8Array.prototype,"isEqual",{value:function(e){if(this.length===e.length){for(var t=0;t<this.length;t++)if(this[t]!==e[t])return!1;return!0}return!1},enumerable:!1,configurable:!0}),window.ArrayBuffer&&(ArrayBuffer.prototype.polyfill_slice=function(e,t){t=t||this.byteLength;for(var n=new Uint8Array(this),a=new Uint8Array(t-e),i=e;t>i;i++)a[i-e]=n[i];return a.buffer},ArrayBuffer.prototype.slice=ArrayBuffer.prototype.slice||ArrayBuffer.prototype.polyfill_slice),function(e){"use strict";e.assert=function(e,t){if(!e)throw new Error(t)}}(f||(f={})),function(e){!function(e){"use strict";var t=function(){function e(e,t){if(this._smoothingFactor=.6,this._slidingWindow=[],this._sum=0,this._minWindowLength=e,this._maxWindowLength=t,this._weightedAverage=0,0>e||1>t||e>t)throw new Error("window length for average class should be greater than 0")}return e.prototype.dispose=function(){this._slidingWindow=null},Object.defineProperty(e.prototype,"average",{get:function(){return 0===this._slidingWindow.length||this._slidingWindow.length<this._minWindowLength?0:this._sum/this._slidingWindow.length},enumerable:!0,configurable:!0}),e.prototype.getAverageIncludingInProgressRequest=function(e){return 0===this._slidingWindow.length||this._slidingWindow.length+1<this._minWindowLength?e:(this._sum+e)/(this._slidingWindow.length+1)},e.prototype.getWeightedAverageIncludingInProgressRequest=function(e){return 0==this.weightedAverage?e:this._smoothingFactor*e+(1-this._smoothingFactor)*this.weightedAverage},Object.defineProperty(e.prototype,"weightedAverage",{get:function(){return this._weightedAverage},enumerable:!0,configurable:!0}),e.prototype.updateWeightedAverage=function(){function e(t,n,a){return 0===n?t[n]:t[n]*a+(1-a)*e(t,--n,a)}if(0===this._slidingWindow.length)return 0;if(1===this._slidingWindow.length)return this._slidingWindow[0];var t=function(t,n){return e(t,t.length-1,n)}(this._slidingWindow,this._smoothingFactor);this._weightedAverage=t},Object.defineProperty(e.prototype,"latest",{get:function(){return 0===this._slidingWindow.length?0:this._slidingWindow[this._slidingWindow.length-1]},enumerable:!0,configurable:!0}),e.prototype.addValue=function(e){this._slidingWindow.length>=this._maxWindowLength&&this.dropOldest(),this._slidingWindow.push(e),this._sum+=e,this._weightedAverage=this._slidingWindow.length>=2?this._smoothingFactor*e+(1-this._smoothingFactor)*this._weightedAverage:e},e.prototype.reset=function(){this._sum=0,this._slidingWindow=[],this._weightedAverage=0},e.prototype.dropOldest=function(){if(this._slidingWindow.length>0){var e=this._slidingWindow.splice(0,1);e[0]!=1/0?this._sum-=e[0]:this._sum=this._slidingWindow.reduce(function(e,t){return e+t})}this.updateWeightedAverage()},e.prototype.dropOldestKeepAtLeastOne=function(){this._slidingWindow.length>1&&this.dropOldest()},e}();e.AverageCalculator=t}(e.Util||(e.Util={})),e.Util}(f||(f={})),function(e){!function(t){"use strict";function n(e,n,a){void 0===a&&(a=t.timestampDeltaThreshold);var i=n-e;return Math.abs(i)<a&&(i=0),i}t.timestampDeltaThreshold=5e-4,t.nearDiscontinuityThreshold=2,t.isChrome=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),t.isEdge=/Edge/i.test(navigator.userAgent),t.isChromiumEdge=!t.isEdge&&/Chrome/i.test(navigator.userAgent)&&/Edg/i.test(navigator.userAgent),t.isIEMobile=/IEMobile\/([0-9.]*)/.test(navigator.userAgent),t.isSafari=/Safari/i.test(navigator.userAgent)&&!t.isChrome&&!t.isEdge&&!t.isIEMobile,t.isFirefox=/Firefox/i.test(navigator.userAgent)&&!t.isChrome&&!t.isEdge&&!t.isIEMobile&&!t.isSafari,t.isElectron=/Chrome/.test(navigator.userAgent)&&/electron/.test(navigator.userAgent),t.isMobile=/android|webos|windows phone|iphone|ipad|ipod|blackBerry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase()),t.isChromeBasedEnvironment=t.isElectron||t.isChrome||t.isChromiumEdge,t.isChromeVersionAtLeast=function(e){if(t.isChromeBasedEnvironment){var n=navigator.userAgent.match(/Chrome\/([0-9]+)\./);return!!(n&&n.length>=2)&&parseInt(n[1],10)>e}},t.isOSXElCapitanOrEarlier=function(){var e=/.*Mac OS X (\d+)_(\d+)_*.*\).*/.exec(navigator.userAgent);if(e&&3===e.length){var t=parseInt(e[1],10),n=parseInt(e[2],10);return 10==t&&11>=n||10>t}return!1},t.diffTimes=n;var a=function(e,t){this.startInSec=e,this.endInSec=t};t.TimeRange=a;var i=function(){function e(){this._timeRanges=[]}return e.prototype.dispose=function(){this._timeRanges=null},Object.defineProperty(e.prototype,"length",{get:function(){return this._timeRanges.length},enumerable:!0,configurable:!0}),e.prototype.start=function(e){return this._timeRanges[e].startInSec},e.prototype.end=function(e){return this._timeRanges[e].endInSec},e.prototype.duration=function(e){return this._timeRanges[e].endInSec-this._timeRanges[e].startInSec},e.prototype.extendLast=function(e){this._timeRanges[this._timeRanges.length-1].endInSec=e},e.prototype.addRange=function(e){this._timeRanges.push(e)},e.prototype.addRanges=function(e){if(e)for(var t=0;t<e.length;t++)this.addRange(new a(e.start(t),e.end(t)))},e.prototype.removeRange=function(e,n){if(n>e)for(var i=0;i<this._timeRanges.length;i++){var r=this._timeRanges[i].startInSec,o=this._timeRanges[i].endInSec;t.diffTimes(o,e)>=0||t.diffTimes(n,r)>=0||(t.diffTimes(r,e)>=0&&t.diffTimes(e,o)>=0&&t.diffTimes(o,n)>=0?this._timeRanges[i].endInSec=e:t.diffTimes(r,e)>=0&&t.diffTimes(n,o)>=0?(this._timeRanges[i].endInSec=e,this._timeRanges.splice(i+1,0,new a(n,o))):t.diffTimes(e,r)>=0&&t.diffTimes(o,n)>=0?(this._timeRanges.splice(i,1),--i):t.diffTimes(e,r)>=0&&t.diffTimes(r,n)>=0&&t.diffTimes(n,o)>=0&&(this._timeRanges[i].startInSec=n),t.diffTimes(this._timeRanges[i].endInSec,this._timeRanges[i].startInSec)>=0&&(this._timeRanges.splice(i,1),--i))}},e.prototype.rebase=function(e){this._timeRanges.forEach(function(t){t.startInSec-=e,t.endInSec-=e})},e.prototype.removeGaps=function(e){for(var t=0;t+1<this._timeRanges.length;)this._timeRanges[t+1].startInSec-this._timeRanges[t].endInSec<e?(this._timeRanges[t].endInSec=this._timeRanges[t+1].endInSec,this._timeRanges.splice(t+1,1)):t++},e.prototype.getIndexByInRangeTimestamp=function(e){for(var t=0;t<this._timeRanges.length;t++){var n=this._timeRanges[t];if(e<n.startInSec)return-1;if(n.startInSec<=e&&e<n.endInSec)return t;if(t+1>=this._timeRanges.length)return-2;var a=this._timeRanges[t+1];if(n.endInSec<=e&&e<=a.startInSec)return t+1}return-1},e.prototype.beforeDiscontinuity=function(e,a){return!(0>a||a+1>=this._timeRanges.length||this._timeRanges[a].startInSec>e||e>=this._timeRanges[a].endInSec)&&0!==n(this._timeRanges[a].endInSec,this._timeRanges[a+1].startInSec)&&this._timeRanges[a].endInSec-e<t.nearDiscontinuityThreshold},e.prototype.atOrAfterDiscontinuity=function(e,a){return!(0>=a||a>=this._timeRanges.length||this._timeRanges[a-1].endInSec>e||e>=this._timeRanges[a].endInSec)&&0!==n(this._timeRanges[a-1].endInSec,this._timeRanges[a].startInSec)&&(e<this._timeRanges[a].startInSec||e-this._timeRanges[a].startInSec<t.nearDiscontinuityThreshold)},e}();t.TimeRangeSet=i;var r=function(){function e(e,t,n){this.presTimeInSec=t,this.durationInSec=n,this.data=e}return Object.defineProperty(e.prototype,"endTimestampInSec",{get:function(){return this.presTimeInSec+this.durationInSec},enumerable:!0,configurable:!0}),e}();t.SegmentData=r,t.binarySearch=function(e,t,n){for(var a=0,i=t.length-1,r=0;i>=a;){var o=n(e,t[r=Math.floor((a+i)/2)]);if(0>o)i=r-1;else{if(!(o>0))return r;a=r+1}}return-1},t.binarySearchInGaps=function(e,t,n){var a=0,i=t.length-1,r=0;if(0>=i)return-1;for(;i>=a;){if(0===(r=Math.floor((a+i)/2)))return n(e,t[a],t[i])?-1:1;var o=n(e,t[r-1],t[r]);if(0>o)i=r-1;else{if(!(o>0))return r;a=r+1}}return-1},t.binarySearchTimeline=function(e,t,n){var a=0,i=t.length-1,r=0;if(0>i)return-1;if(0===i)return n(e,t[0]);for(;i>=a;){if(0===(r=Math.floor((a+i)/2)))return n(e,t[a],t[i]);var o=n(e,t[r-1],t[r]);if(0>o)i=r-1;else{if(!(o>0))return r-1;a=r+1}}return t.length-1},t.uint8ArrayToHexString=function(e){for(var t="",n=0;n<e.length;n++){var a=e[n].toString(16);t+=a.length<2?"0"+a:a}return t},t.hexStringToUint8Array=function(e){if(e.length<=2||"0x"!=e.substr(0,2).toLowerCase())throw new Error("Invalid hexString");var t=e.substr(2);e.length%2!=0&&(t="0"+t);for(var n=new Uint8Array(t.length/2),a=0;a<t.length;a+=2){var i=parseInt(t.substr(a,2),16);if(isNaN(i))throw new Error("Invalid hexString");n[a/2]=i}return n},t.toHexString=function(e){return 0>e&&(e=4294967295+e+1),"0x"+("00000000"+e.toString(16).toUpperCase()).substr(-8)},t.uint8ArrayToString=function(e){for(var t="",n=0;n<e.byteLength;n++)t+=String.fromCharCode(e[n]);return t},t.stringToUint8Array=function(e){for(var t=new Uint8Array(e.length),n=0;n<t.byteLength;n++)t[n]=e.charCodeAt(n);return t},t.typedArraysAreEqual=function(e,t){return e.byteLength===t.byteLength&&e.every(function(e,n){return e===t[n]})},t.videoTagPlay=function(n,a,i){if(t.isChrome||t.isSafari){var r=n.play();void 0!==r?r.then(function(){e.Log.verbose(7,"videoTag.play() executed successfullly."),a&&a()}).catch(function(t){e.Log.warning(7,"videoTag.play() failed: "+t),i&&i()}):e.Log.warning(7,"play() promise undefined.")}else n.play(),a&&a()},t.clientIsOffline=function(){return window&&window.navigator&&!window.navigator.onLine}}(e.Common||(e.Common={})),e.Common}(f||(f={})),function(e){!function(e){"use strict";var t=function(){function e(e,t){void 0===t&&(t=0),this.data=e,this.readPos=t}return e.prototype.getUint8=function(){return this.data.getUint8(this.readPos++)},e.prototype.getUint32=function(){var e=this.data.getUint32(this.readPos);return this.readPos+=4,e},e.prototype.getInt32=function(){var e=this.data.getInt32(this.readPos);return this.readPos+=4,e},e.prototype.getBytes=function(e){for(var t=new Uint8Array(e),n=0;e>n;n++)t[n]=this.getUint8();return t},e.prototype.readString=function(e){for(var t="",n=0;e>n;n++)t+=String.fromCharCode(this.getUint8());return t},e.prototype.readStringUntilEnd=function(){for(var e="",t=0;this.readPos<this.data.byteLength;t++)e+=String.fromCharCode(this.getUint8());return e},e.prototype.readUTF8StringUntilEnd=function(){for(var e="",t=[];this.readPos<this.data.byteLength;)t.push(this.getUint8());for(var n=0;n<t.length;){var a=t[n++];128>a||(224>a?(a=(31&a)<<6,a|=63&t[n++]):240>a?(a=(15&a)<<12,a|=(63&t[n++])<<6,a|=63&t[n++]):(a=(7&a)<<18,a|=(63&t[n++])<<12,a|=(63&t[n++])<<6,a|=63&t[n++])),e+=String.fromCharCode(a)}return e},e.prototype.readTerminatedString=function(){for(var e="",t=this.getUint8();t;t=this.getUint8())e+=String.fromCharCode(t);return e},e}();e.Reader=t;var n=function(){function e(e,t){void 0===t&&(t=0),this.data=e,this.writePos=t}return e.prototype.setUint8=function(e){this.data.setUint8(this.writePos++,e)},e.prototype.setUint32=function(e){this.data.setUint32(this.writePos,e),this.writePos+=4},e.prototype.setInt32=function(e){this.data.setInt32(this.writePos,e),this.writePos+=4},e.prototype.setString=function(e){for(var t=0;t<e.length;t++)this.setUint8(e.charCodeAt(t))},e.prototype.setBytes=function(e){for(var t=0;t<e.length;t++)this.setUint8(e[t])},e}();e.Writer=n}(e.DataViewReaderWriter||(e.DataViewReaderWriter={})),e.DataViewReaderWriter}(f||(f={})),function(e){!function(e){"use strict";var t=function(){function e(e,t){void 0===e&&(e=null),void 0===t&&(t=!0),this._azureHtml5=e,this._allowDuplicateHandlers=t,this._registrations={}}return e.prototype.dispose=function(){this._registrations=null},e.prototype.getHandlers=function(e){return e in this._registrations||(this._registrations[e]=[]),this._registrations[e]},e.prototype.addHandler=function(e,t,n){var i=this.getHandlers(e);if(this._allowDuplicateHandlers||-1===this._findHandlerByFunction(i,t)){var r=new a(n,t);i[i.length]=r}},e.prototype.removeHandler=function(e,t){for(var n=this.getHandlers(e),a=this._findHandlerByFunction(n,t);-1!==a;)n.splice(a,1),a=this._findHandlerByFunction(n,t)},e.prototype.dispatchEvent=function(e,t,a){var i=0,r=this.getHandlers(e).slice();for(i=0;i<r.length;i++){var o=new n(e,this._azureHtml5,t,a);r[i].functionHandler.call(r[i].callerInstance,o)}},e.prototype._findHandlerByFunction=function(e,t){for(var n=-1,a=0;a<e.length;a++)if(e[a].functionHandler===t){n=a;break}return n},e}();e.Manager=t;var n=function(e,t,n,a){this.type=e,this.currentDate=new Date,this.azureHtml5=t,this.presentationTimeInSec=t?t.currentTime:0,this.message=n,this.data=a};e.EventInfo=n;var a=function(e,t){this.callerInstance=e,this.functionHandler=t};e.Handler=a}(e.Events||(e.Events={})),e.Events}(f||(f={})),function(e){!function(t){"use strict";var n=function(){function t(e,t,n,a,i,r){this.originModuleId=e,this.code=t,this.message=n,this.serviceErrorCode=a,this.correlationId=i,this.isErrorExpected=r}return t.prototype.dispose=function(){this.originModuleId=null,this.code=null,this.message=null},t.prototype.toString=function(){var t;return t="Module = "+this.originModuleId+" FailureCode = "+e.Common.toHexString(this.code),this.message&&(t+=" "+this.message),t},t}();t.Record=n,t.translateHttpStatusToCode=function(e){return e>=400&&600>e?2097152|e:2097152},t.errorEventToString=function(e){var t="";return e.filename&&(t+=" file: "+e.filename),e.lineno&&(t+=" line: "+e.lineno),e.colno&&(t+=" colno: "+e.colno),e.error&&(t+="error: "+e.error),e.message&&(t+="msg: "+e.message),t},t.mediaErrorToString=function(t){if(null==t)return"undefined";var n=function(e){switch(e){case MediaError.MEDIA_ERR_ABORTED:return"MEDIA_ERR_ABORTED";case MediaError.MEDIA_ERR_NETWORK:return"MEDIA_ERR_NETWORK";case MediaError.MEDIA_ERR_DECODE:return"MEDIA_ERR_DECODE";case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:return"MEDIA_ERR_SRC_NOT_SUPPORTED";default:return e.toString()}}(t.code);return t.msExtendedCode&&(n+=", msErrorCode: "+e.Common.toHexString(t.msExtendedCode)),n},t.attachFailureToRequest=function(e,t,a,i){var r=new n(t,a,i);null!=e&&(e.externalFailure=r)},t.isExternalError=function(e){return e>1048575};var a=function(){function t(e,t,n,a,i){e?(this.code=e,this.message=t):(this.code=0,this.message=null),this.serviceErrorCode=n||null,this.correlationId=a||null,this.isErrorExpected=i||null}return t.prototype.translateMediaError=function(t){this.code=t.code<<20,t.msExtendedCode&&(this.message="msErrorCode: "+e.Common.toHexString(t.msExtendedCode));var n=t.message;n&&n.length&&(this.message=this.message?this.message+" "+n:n)},t.prototype.toString=function(){var t="code: "+e.Common.toHexString(this.code);return this.message&&(t+=", msg: "+this.message),t},t}();t.External=a,t.errorCodeIsServerError=function(e){return 2097652===e||2097654===e||2097655===e||2097656===e}}(e.Failure||(e.Failure={})),e.Failure}(f||(f={})),function(e){!function(t){"use strict";function n(t,n,a,i,r){return new Promise(function(o,s){var c=new e.HttpRequest.XMLHttpRequestWrapper;c.onload=function(){if(200==c.status)o(c.response);else{var a="";null!==c.response&&(a=new e.DataViewReaderWriter.Reader(new DataView(c.response)).readStringUntilEnd()),e.Log.error(13,"XHR load failed status:"+c.statusText+"("+c.status+"), expected to be 200, readyState:"+c.readyState+" ("+n+" "+t+"), response:"+a),s({code:e.Failure.translateHttpStatusToCode(c.status),response:a})}},c.onerror=function(){e.Log.error(13,"XHR failed status: "+c.statusText+" ("+c.status+"), readyState: "+c.readyState);var t=e.Common.clientIsOffline()?2097755:2097753;s({code:t,response:"Key fetch failed"})},c.open(n,t),c.responseType=a,i&&i.forEach(function(e){c.setRequestHeader(e.name,e.value)}),r?c.send(r):c.send()})}t.authorizationHeader="Authorization",t.httpRequestWithRetryConfig=function(t,a,i,r,o){return new Promise(function(s,c){function d(){n(t,a,i,o).then(l,u)}function l(e){s(e)}function u(t){r.maxRetries>f&&t&&(t>=e.Failure.translateHttpStatusToCode(500)||r.retriableErrors&&r.retriableErrors.indexOf(t)>-1)?(f++,e.Log.warning(13,"Request failed error: "+e.Common.toHexString(t)+", number of times tried: "+f+" , retrying the request"),setTimeout(function(){d()},Math.pow(2,f)*r.maxWaitTimeBetweenRetriesMS)):c(t)}var f=0;d()})},t.httpRequest=n}(e.HttpUtil||(e.HttpUtil={})),e.HttpUtil}(f||(f={})),d=this.__extends||function(e,t){function n(){this.constructor=e}for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);n.prototype=t.prototype,e.prototype=new n},function(e){!function(t){"use strict";function n(t,n,i){void 0===i&&(i=0);var r,o=i;if(!n||4!==n.length)return e.Log.error(11,"Parameter error, box type must have four characters"),null;if(!t||t.byteLength<8)return e.Log.error(11,"Parameter error, not enough data"),null;for(;o<t.byteLength&&(r=a(t,o));){if(r.type===n)return r;o+=r.size}return null}function a(t,n){if(!t||t.byteLength-n<8)return e.Log.error(11,"MP4 box parsing error, not enough data for box header"),null;var a=new i(t,n);if(a.size=a.getUint32(),a.type=a.readString(4),1===a.size){if(t.byteLength-n<16)return e.Log.error(11,"MP4 box parsing error, not enough data for largesize"),null;if(a.size=a.getUint32()<<32,a.size+=a.getUint32(),a.size>9007199254740991)return e.Log.error(11,"Box size too big for precise representation as Javascript number"),null}else 0===a.size&&(a.size=t.byteLength);if(a.size>t.byteLength-n)return null;if("uuid"===a.type){if(t.byteLength-a.readPosition<16)return e.Log.error(11,"MP4 box parsing error, not enough data for usertype"),null;a.usertype=a.readString(16)}return a.data=new DataView(t.buffer,t.byteOffset+a.readPosition,t.byteLength-a.readPosition),a}var i=function(){function t(t,n){t&&void 0!==n&&(this.data=t,this.reader=new e.DataViewReaderWriter.Reader(t,n))}return t.prototype.getUint32=function(){return this.reader.getUint32()},t.prototype.getInt32=function(){return this.reader.getInt32()},t.prototype.getUint8=function(){return this.reader.getUint8()},t.prototype.getBytes=function(e){return this.reader.getBytes(e)},t.prototype.getRemainingBytes=function(){return this.reader.getBytes(this.size-this.readPosition)},t.prototype.readString=function(e){return this.reader.readString(e)},t.prototype.readStringUntilEnd=function(){return this.reader.readStringUntilEnd()},t.prototype.readUTF8StringUntilEnd=function(){return this.reader.readUTF8StringUntilEnd()},t.prototype.readTerminatedString=function(){return this.reader.readTerminatedString()},Object.defineProperty(t.prototype,"readPosition",{get:function(){return this.reader.readPos},enumerable:!0,configurable:!0}),t}();t.Mp4Box=i;var r=function(t){function n(n){t.call(this),n&&(this.size=n.size,this.type=n.type,this.usertype=n.usertype,this.data=n.data,this.reader=new e.DataViewReaderWriter.Reader(this.data),this._versionFlags=n._versionFlags)}return d(n,t),n.parse=function(t){var a=null;return t.data.byteLength<4?(e.Log.error(11,"Full box parsing error, not enough bytes"),null):((a=new n).size=t.size,a.type=t.type,a.usertype=t.usertype,a._versionFlags=t.data.getUint32(0),a.data=new DataView(t.data.buffer,t.data.byteOffset+4,t.data.byteLength-4),a.reader=new e.DataViewReaderWriter.Reader(a.data),a)},n.serialize=function(t,n){var a=12+("uuid"===t.type?16:0),i=n+a,r=new ArrayBuffer(i),o=new DataView(r),s=new e.DataViewReaderWriter.Writer(o);if(i>4294967295)throw new Error("Mp4FullBox::serialize, large size is not supported");if(s.setUint32(i),s.setString(t.type),"uuid"===t.type&&s.setString(t.usertype),s.setUint32(t._versionFlags),s.writePos!==a)throw new Error("Mp4FullBox::serialize, inconsistent bytes written");return s},Object.defineProperty(n.prototype,"version",{get:function(){return this._versionFlags>>24},set:function(e){this._versionFlags&=16777215,this._versionFlags|=e<<24},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"flags",{get:function(){return 16777215&this._versionFlags},set:function(e){this._versionFlags&=4278190080,this._versionFlags|=16777215&e},enumerable:!0,configurable:!0}),n.prototype.getUint32Cond=function(e){var t;return e&this.flags&&(t=this.reader.getUint32()),t},n}(i);t.Mp4FullBox=r;var o=function(t){function n(e){t.call(this,e)}return d(n,t),n.parse=function(t){var a,i=null;return(a=r.parse(t))?(i=new n(a),a.data.byteLength<i._calculatedSize()?(e.Log.error(11,"tfhd box parsing error, not enough data"),null):(i.trackId=i.getUint32(),i.baseDataOffsetHi=i.getUint32Cond(n.flags_baseDataOffsetPresent),i.baseDataOffsetLo=i.getUint32Cond(n.flags_baseDataOffsetPresent),i.sampleDescriptionIndex=i.getUint32Cond(n.flags_sampleDescriptionIndexPresent),i.defaultSampleDuration=i.getUint32Cond(n.flags_defaultSampleDurationPresent),i.defaultSampleSize=i.getUint32Cond(n.flags_defaultSampleSizePresent),i.defaultSampleFlags=i.getUint32Cond(n.flags_defaultSampleFlagsPresent),i)):null},n.prototype._calculatedSize=function(){var e=4;return e+=this.flags&n.flags_baseDataOffsetPresent?8:0,e+=this.flags&n.flags_sampleDescriptionIndexPresent?4:0,e+=this.flags&n.flags_defaultSampleDurationPresent?4:0,(e+=this.flags&n.flags_defaultSampleSizePresent?4:0)+(this.flags&n.flags_defaultSampleFlagsPresent?4:0)},n.typeStr="tfhd",n.flags_baseDataOffsetPresent=1,n.flags_sampleDescriptionIndexPresent=2,n.flags_defaultSampleDurationPresent=8,n.flags_defaultSampleSizePresent=16,n.flags_defaultSampleFlagsPresent=32,n.flags_durationIsEmpty=65536,n.flags_defaultBaseIsMoof=131072,n}(r);t.TfhdBox=o;var s=function(t){function n(e){t.call(this,e)}return d(n,t),n.parse=function(t){var a,i=null;if(!(a=r.parse(t)))return null;if(i=new n(a),a.data.byteLength<4)return e.Log.error(11,"trun box parsing error, not enough data"),null;if(i.sampleCount=i.getUint32(),a.data.byteLength<i._calculatedSize())return e.Log.error(11,"trun box parsing error, not enough data"),null;i.dataOffset=i.getUint32Cond(n.flags_dataOffsetPresent),i.firstSampleFlags=i.getUint32Cond(n.flags_firstSampleFlagsPresent),i.sampleInfoArray=[];for(var o=0;o<i.sampleCount;o++){var s=new c;s.sampleDuration=i.getUint32Cond(n.flags_sampleDurationPresent),s.sampleSize=i.getUint32Cond(n.flags_sampleSizePresent),s.sampleFlags=i.getUint32Cond(n.flags_sampleFlagsPresent),i.flags&n.flags_sampleCompositionTimeOffsetsPresent&&(s.sampleCompositionTimeOffset=0===i.version?i.getUint32():i.getInt32()),i.sampleInfoArray.push(s)}return i},n.prototype._calculatedSize=function(){var e,t=4;return t+=this.flags&n.flags_dataOffsetPresent?4:0,t+=this.flags&n.flags_firstSampleFlagsPresent?4:0,e=this.flags&n.flags_sampleDurationPresent?4:0,e+=this.flags&n.flags_sampleSizePresent?4:0,e+=this.flags&n.flags_sampleFlagsPresent?4:0,e+=this.flags&n.flags_sampleCompositionTimeOffsetsPresent?4:0,t+this.sampleCount*e},n.typeStr="trun",n.flags_dataOffsetPresent=1,n.flags_firstSampleFlagsPresent=4,n.flags_sampleDurationPresent=256,n.flags_sampleSizePresent=512,n.flags_sampleFlagsPresent=1024,n.flags_sampleCompositionTimeOffsetsPresent=2048,n}(r);t.TrunBox=s;var c=function(){};t.TrunSampleInfo=c;var l=function(t){function n(e){t.call(this,e),this.baseMediaDecodeTime=0}return d(n,t),n.parse=function(t){var a,i=null;return(a=r.parse(t))?(i=new n(a),a.data.byteLength<i._calculatedSize()?(e.Log.error(11,"tfdt box parsing error, not enough data"),null):(1===i.version&&(i.baseMediaDecodeTime=4294967296*i.getUint32()),i.baseMediaDecodeTime+=i.getUint32(),i.baseMediaDecodeTime>=9007199254740992&&e.Log.warning(11,"tfdt timestamp greater than 53 bits, possible precision loss"),i)):null},n.prototype._calculatedSize=function(){return 1===this.version?8:4},n.typeStr="tfdt",n}(r);t.TfdtBox=l;var u=function(t){function n(e){e?t.call(this,e):this.type=n.typeStr,this._keyIds=[]}return d(n,t),n.parse=function(t){var a,i=null;if(!(a=r.parse(t)))return null;if(i=new n(a),a.data.byteLength<i._calculatedSize())return e.Log.error(11,"pssh box parsing error, not enough data"),null;i.systemId=i.getBytes(16);var o=0;if(i.version>0){if(o=i.getUint32(),i._keyIds.length=o,a.data.byteLength<i._calculatedSize())return e.Log.error(11,"pssh box parsing error, not enough data"),null;for(var s=0;o>s;s++){var c=i.getBytes(16);i._keyIds[s]=c}}var d=i.getUint32();return a.data.byteLength<i._calculatedSize(d)?(e.Log.error(11,"pssh box parsing error, not enough data"),null):(i.specificData=i.getBytes(d),i)},n.prototype.addKeyId=function(e){if(16!==e.length)throw new Error("keyId must be 16 bytes");this.version=1,this._keyIds.push(e)},Object.defineProperty(n.prototype,"keyIds",{get:function(){return this._keyIds},enumerable:!0,configurable:!0}),n.prototype._calculatedSize=function(e){void 0===e&&(e=0);var t=20+e;return this.version>0&&(t+=4+16*this._keyIds.length),t},n.prototype.serialize=function(){var e=r.serialize(this,this._calculatedSize(this.specificData.byteLength));if(!this.systemId)throw new Error("systemId is not set");if(e.setBytes(this.systemId),this.version>0&&(e.setUint32(this._keyIds.length),this._keyIds.forEach(function(t){e.setBytes(t)})),!this.specificData)throw new Error("specificData is not set");if(e.setUint32(this.specificData.byteLength),e.setBytes(this.specificData),e.writePos!=e.data.buffer.byteLength)throw new Error("Failed to write to end of buffer");return e.data.buffer},n.typeStr="pssh",n}(r);t.PsshBox=u;var f=function(e){function t(n){n?e.call(this,n):this.type=t.typeStr}return d(t,e),t.parse=function(e){var n,a=null;if(!(n=r.parse(e)))return null;if(0===(a=new t(n)).version)a.schemeIdUrl=a.readTerminatedString(),a.value=a.readTerminatedString(),a.timescale=a.getUint32(),a.presentationTimeDelta=a.getUint32(),a.eventDuration=a.getUint32(),a.id=a.getUint32();else{if(1!=a.version)return null;a.timescale=a.getUint32(),a.presentationTimePartA=a.getUint32(),a.presentationTimePartB=a.getUint32(),a.eventDuration=a.getUint32(),a.id=a.getUint32(),a.schemeIdUrl=a.readTerminatedString(),a.value=a.readTerminatedString()}return a.messageData=a.getRemainingBytes(),a},t.typeStr="emsg",t}(r);t.EmsgBox=f,t.GetBoxByType=n,t.GetBoxByTypeFromFixedChildren=function(t,n){if(!n||4!==n.length)return e.Log.error(11,"Parameter error, box type must have four characters"),null;if(!t||!t.data||t.data.byteLength<8)return e.Log.error(11,"Parameter error, not enough data"),null;for(var i=t.getUint32(),r=4;i>0&&r<t.data.byteLength&&(t=a(t.data,r));){if(t.type===n)return t;r+=t.size,i--}return null},t.GetTfhdBox=function(t){var a,i=null;return(a=n(t,"tfhd"))?((i=o.parse(a))||e.Log.warning(11,"Parsing of tfhd failed"),i):(e.Log.warning(11,"tfhd not found"),null)},t.GetTrunBox=function(t){var a,i=null;return(a=n(t,"trun"))?((i=s.parse(a))||e.Log.warning(11,"Parsing of trun failed"),i):(e.Log.warning(11,"trun not found"),null)},t.GetTfdtBox=function(t){var a,i=null;return(a=n(t,"tfdt"))?((i=l.parse(a))||e.Log.warning(11,"Parsing of tfdt failed"),i):(e.Log.warning(11,"tfdt not found"),null)},t.GetPsshBoxes=function(t){for(var a,i=[],r=0;r<t.byteLength;){if(!(a=n(t,u.typeStr,r)))return e.Log.warning(11,"pssh not found"),i;var o=u.parse(a);o?i.push(o):e.Log.warning(11,"Parsing of pssh failed"),r+=a.size}return i},t.GetEmsgBoxes=function(t){for(var a,i=[],r=0;r<t.byteLength;){if(!(a=n(t,f.typeStr,r)))return i;var o=f.parse(a);o?i.push(o):e.Log.warning(11,"Parsing of emsg failed"),r+=a.size}return i.length>0&&e.Log.verbose(11,"emsg boxes found: "+i.length),i}}(e.Mp4Util||(e.Mp4Util={})),e.Mp4Util}(f||(f={})),function(e){!function(t){"use strict";!function(e){e[e.type1=1]="type1",e[e.type2=2]="type2",e[e.type3=3]="type3"}(t.Type||(t.Type={})),t.Type,t.MseSupported=function(){return e.VideoElementAdapter.supported()},t.HlsType1Supported=function(e){var t=!1;if(e&&e.canPlayType){var n=e.canPlayType("application/vnd.apple.mpegurl");("maybe"===n||"probably"===n)&&(t=!0)}return t},t.Mp4Type1Supported=function(e){var t=!1;if(e&&e.canPlayType){var n=e.canPlayType("video/mp4");("maybe"===n||"probably"===n)&&(t=!0)}return t}}(e.PlayerDetector||(e.PlayerDetector={})),e.PlayerDetector}(f||(f={})),function(e){!function(t){"use strict";function n(e){var t=null,n=e.lastIndexOf("."),a=e.indexOf("/",n);return n>-1&&(t=e.substring(n+1,-1!==a?a:e.length)),t}function a(e){var t=null,n=e,a="(format=",i=e.lastIndexOf("?");i>-1&&(n=e.substring(0,i));var r=n.lastIndexOf(a);if(r>-1){var o=n.lastIndexOf(")");if(o>r){var s=(t=n.substring(r+a.length,o)).indexOf(",");s>-1&&(t=t.substring(0,s))}}return t}function i(t,n){e.Log.verbose(7,"Using format "+t+" to get player type.");var a=null;switch(t){case 1:e.PlayerDetector.HlsType1Supported(n)?a=1:e.Log.warning(7,"HLS type1 is not supported.");break;case 2:e.PlayerDetector.Mp4Type1Supported(n)?a=1:e.Log.warning(7,"MP4 type1 is not supported.");break;case 3:e.PlayerDetector.MseSupported(n)?a=3:e.Log.warning(7,"MSE is not supported.")}return a}!function(e){e[e.hls=1]="hls",e[e.mp4=2]="mp4",e[e.dash=3]="dash"}(t.Format||(t.Format={}));var r=(t.Format,{"m3u8-aapl-v3":1,"m3u8-aapl-v4":1,"mpd-time-csf":3,"mpd-time-cmaf":3}),o={mp4:2,m3u8:1},s={"video/mp4":2,"application/dash+xml":3,"application/vnd.apple.mpegurl":1};t.getByPresentationType=function(e,t){if(e&&e.length>0){var n=e.trim().toLowerCase();if(s[n])return i(s[n],t)}},t.getByUrl=function(e,t){var s=e.trim().toLowerCase();if(s.lastIndexOf(".ism/")>-1){var c=a(s);if(r[c])return i(r[c],t)}var d=n(s);return o[d]?i(o[d],t):null},t._getFileExtension=n,t._getAzureMediaFormatTag=a,t._getPlayerTypeByFormat=i}(e.PlayerType||(e.PlayerType={})),e.PlayerType}(f||(f={})),function(e){!function(e){"use strict";function t(e){var t=e&&e.requestedStream&&e.requestedStream.tracks&&Array.isArray(e.requestedStream.tracks)?e.requestedStream.tracks:[];return Array.isArray(t)&&1===t.filter(function(e){return e.selectable}).length}function n(e){return e.selectedTrack.bitrate===e.requestedStream.tracks[0].bitrate}var a;e.calculateRequestTimeout=function(e,a){var i=e&&e.requestedStream?e.requestedStream.type:void 0;return 0===a?Math.min(e.sessionContext.httpDataRetrieverSettings.maxTimeoutInMSecDefault,e.sessionContext.httpDataRetrieverSettings.manifestTimeoutInMSec):0!==i||1!==a&&2!==a?1===i?Math.min(e.sessionContext.httpDataRetrieverSettings.maxTimeoutInMSecDefault,e.sessionContext.httpDataRetrieverSettings.audioTimeoutInMSec):2===i?Math.min(e.sessionContext.httpDataRetrieverSettings.maxTimeoutInMSecDefault,e.sessionContext.httpDataRetrieverSettings.textTimeoutInMSec):3===a?Math.min(e.sessionContext.httpDataRetrieverSettings.maxTimeoutInMSecDefault,e.sessionContext.httpDataRetrieverSettings.initBandwidthTimeout):e.sessionContext.httpDataRetrieverSettings.maxTimeoutInMSecDefault:n(e)||t(e)?Math.min(e.sessionContext.httpDataRetrieverSettings.maxTimeoutInMSecDefault,e.sessionContext.httpDataRetrieverSettings.minQualityTimeoutInMSec):Math.min(e.sessionContext.httpDataRetrieverSettings.maxTimeoutInMSecDefault,function(e){var t=1e3*e.requestedStream.maxSegmentDuration,n=1e3*(e.requestedStream.streamingInfo.sourceBuffer.getBufferedAheadOfCurrentTimeInSec()-e.sessionContext.maxBufferInSec()*e.sessionContext.heuristicSettings.vodStableBufferLevelPercent);return Math.max(Math.max(e.sessionContext.httpDataRetrieverSettings.minTimeoutInMSec,t),n)}(e))},e.userHasSelectedBitrate=t,e.videoIsLowestBitrate=n,e.isVideoSegment=function(e,t){var n=t.requestType,a=e&&e.requestedStream?e.requestedStream.type:void 0;return 1===n&&0===a},function(e){e[e.Init=0]="Init",e[e.Wait=1]="Wait",e[e.Terminate=2]="Terminate"}(a||(a={}));var i=function(){function e(e){this._state=0,this._maxWaitTimeMs=e}return e.prototype.shouldWaitForFirstSegment=function(){switch(this._state){case 0:return this._state=1,this._waitStartTimeMs=Date.now(),!0;case 1:return!(Date.now()-this._waitStartTimeMs>=this._maxWaitTimeMs&&(this._state=2,1));default:return!1}},e}();e.FirstSegmentDelayCheck=i}(e.SegmentUtils||(e.SegmentUtils={})),e.SegmentUtils}(f||(f={})),function(e){!function(t){"use strict";function n(e){for(var t=0;t<i.length;t++)if(i[t]&&i[t].id&&i[t].id==e){var n=i.splice(t,1);return 1===n.length?n[0]:null}return null}if(t.setTimeout=window.setTimeout.bind(window),t.clearTimeout=window.clearTimeout.bind(window),window.Worker&&Blob&&window.URL&&window.URL.createObjectURL&&-1==navigator.userAgent.indexOf("MSAppHost")){var a=0,i=[];try{var r=new Blob(["'use strict';(function () {var timers = [];onmessage = function (event) {if (!event.data.id) {return;}if (event.data.start) {if (event.data.ms) {var internalId = setTimeout(function () {var expiredId = removeTimer(event.data.id);if (expiredId && expiredId.external) {postMessage({ type: 'timeout', id: expiredId.external });}}, event.data.ms);timers.push({ external: event.data.id, internal: internalId });postMessage({ type: 'started', id: event.data.id });}else {postMessage({ type: 'timeout', id: event.data.id });}}else if (event.data.stop) {var removedId = removeTimer(event.data.id);if (removedId && removedId.internal) {clearTimeout(removedId.internal);}postMessage({ type: 'cancelled', id: event.data.id });}};function removeTimer(timerId) {for (var i = 0; i < timers.length; i++) {if (timers[i] && timers[i].external && timers[i].external == timerId) {var removed = timers.splice(i, 1);return removed.length === 1 ? removed[0] : null;}}return null;}})();"],{type:"text/javascript"}),o=new Worker(window.URL.createObjectURL(r));o.onmessage=function(e){if("timeout"===e.data.type){var t=n(e.data.id);t&&t.callback&&t.callback.apply(t.ctx,t.args)}else"cancelled"===e.data.type&&n(e.data.id)},t.setTimeout=function(e,t){for(var n=[],r=0;r<arguments.length-2;r++)n[r]=arguments[r+2];return a++,i.push({id:a,ctx:this,callback:e,args:n}),o.postMessage({start:!0,id:a,ms:t}),a},t.clearTimeout=function(e){o.postMessage({stop:!0,id:e})}}catch(t){e.Log.verbose(7,"AzureHtml5JS.Util: setTimeout/clearTimeout override failed: "+t)}}else e.Log.verbose(7,"AzureHtml5JS.Util: cannot override setTimeout/clearTimeout")}(e.Util||(e.Util={})),e.Util}(f||(f={})),function(e){!function(t){"use strict";t.getSegmentDuration=function(e){var t=e.requestedStream.streamingInfo.lastRequestedSegment,n=t.segmentInfo.durationInSec;return!n&&e.sessionContext.commonPresentation.isLive&&t.prev&&(n=t.prev.segmentInfo.durationInSec),n},t.getBufferData=function(t){return e.assert(0===t.requestedStream.type||1===t.requestedStream.type||2===t.requestedStream.type,"getBufferData: unexpected type"),0===t.requestedStream.type?t.sessionContext.videoBufferData:1===t.requestedStream.type?t.sessionContext.audioBufferData:t.sessionContext.textBufferData}}(e.StreamUtil||(e.StreamUtil={})),e.StreamUtil}(f||(f={})),function(e){!function(e){"use strict";var t=Math.pow(10,6);e.add=function(e,n){var a,i,r="";e.length>6?(a=parseInt(e.slice(0,e.length-6),10),i=parseInt(e.slice(e.length-6),10)):(a=0,i=parseInt(e,10)),(i+=n)>=t&&(a+=Math.floor(i/t),i%=t);var o=i.toString();if(a){r=a.toString();for(var s=0;s<6-o.length;s++)r+="0"}return r+o}}(e.Timestamp||(e.Timestamp={})),e.Timestamp}(f||(f={})),function(e){!function(t){"use strict";var n=function(){function t(e){this.imsc1Disabled=!1,this.imsc1TrackPreviouslySelected=!1,this.ttmlTrackIsValid=!1,this.cueDownloadCount=0,this.consecutiveEmptyTtmlsLookup={},this.playerId=e,this.domParser=new DOMParser}return t.prototype.reset=function(){this.ttmlTrackIsValid=!1,this.consecutiveEmptyTtmlsLookup={}},t.prototype.parseInitSegment=function(t){if(!t)return e.Log.warning(16,"Init segment: no media data for TTML"),!1;var n,a,i,r,o,s,c=new DataView(t);return(n=e.Mp4Util.GetBoxByType(c,"moov"))?(a=e.Mp4Util.GetBoxByType(n.data,"trak"))?(i=e.Mp4Util.GetBoxByType(a.data,"mdia"))?(r=e.Mp4Util.GetBoxByType(i.data,"minf"))?(o=e.Mp4Util.GetBoxByType(r.data,"stbl"))?(s=e.Mp4Util.GetBoxByType(o.data,"stsd"))?(s=e.Mp4Util.Mp4FullBox.parse(s),e.Mp4Util.GetBoxByTypeFromFixedChildren(s,"stpp")?(this.ttmlTrackIsValid=!0,e.Log.warning(16,"The ttml track is valid.")):e.Log.warning(16,"The ttml track is invalid."),this.ttmlTrackIsValid):(e.Log.warning(16,"stsd not found"),!1):(e.Log.warning(16,"stbl not found"),!1):(e.Log.warning(16,"minf not found"),!1):(e.Log.warning(16,"mdia not found"),!1):(e.Log.warning(16,"trak not found"),!1):(e.Log.warning(16,"moov not found"),!1)},Object.defineProperty(t.prototype,"normalizedPresentationTimeInSeconds",{set:function(e){this.normalizedPresentationTimeInSecs=e},enumerable:!0,configurable:!0}),t.prototype.processTtml=function(n,a){e.Log.verbose(16,"Processing ttml data");var i=this;if(this.ttmlTrackIsValid){var r=this.extractTtml(a);if(r){var o=this.ttmlToCue(r);if(o.cues.length>0){var s=window.amp.getPlayers(),c=null;if(s&&(c=s[this.playerId])){for(var d=!0,l=o.cues.length-1;l>=0;l--)if(o.cues[l].text){d=!1;break}!d&&this.imsc1Disabled&&(e.Log.verbose(16,"Restarting IMSC1 captions."),c.prepareForImsc1Captions(this.imsc1TrackPreviouslySelected),this.imsc1Disabled=!1);var u=1===c.options_.imsc1CaptionsSettings.length,f=c.textTracks();for(l=0;l<f.length;l++){var p=f[l];if(p.isImsc1&&(void 0!==p.language&&p.language.toLowerCase()==o.lang||u)){i.cueDownloadCount%t.cueCleanupFrequency||i.cleanupCues(c,p),p.loaded_=!0,o.cues.forEach(function(e){p.addCue(e)});var m=this.consecutiveEmptyTtmlsLookup[n];if((!m||isNaN(m))&&(m=0),d){if(++m>=t.consecutiveEmptyCaptionsThreshold){var _="Empty IMSC1 captions in stream "+n;e.Log.error(16,_),m=0}Date.now()-this.lastNonEmptyTtmlTimestamp>t.emptyCaptionsTimeThreadhold&&(e.Log.verbose(16,"Turning off IMSC1 captions."),this.imsc1TrackPreviouslySelected="showing"===p.mode,c.removeRemoteTextTrack(p),this.imsc1Disabled=!0)}else m=0,this.lastNonEmptyTtmlTimestamp=Date.now();this.consecutiveEmptyTtmlsLookup[n]=m;break}}i.cueDownloadCount++}}}}else e.Log.error(16,"Skipping ttml data. The ttml track is invalid.")},t.prototype.extractTtml=function(t){if(e.Log.verbose(16,"Extracting ttml data"),!t)return e.Log.warning(16,"Media segment: no media data for TTML"),null;var n,a=new DataView(t);return(n=e.Mp4Util.GetBoxByType(a,"mdat"))?n.readUTF8StringUntilEnd():(e.Log.warning(16,"mdat not found"),null)},t.prototype.ttmlToCue=function(e){var t=this.domParser.parseFromString(e,"text/xml"),n=this.getLanguage(t),a=t.getElementsByTagName("p"),i=[];if(a.length>0)for(var r=0;r<a.length;r++)i=i.concat(this.parseTTMLCue(a[r]));return{lang:n,cues:i}},t.prototype.getLanguage=function(e){var t,n=e.getElementsByTagName("tt");return n&&n.length>0&&(t=n[0].getAttribute("xml:lang")),(t=t||"").toLowerCase()},t.prototype.parseTTMLCue=function(e){for(var t=e.getAttribute("begin").split(":"),n=e.getAttribute("end").split(":"),a=this.convertTimeToSeconds(t)+this.normalizedPresentationTimeInSecs,i=this.convertTimeToSeconds(n)+this.normalizedPresentationTimeInSecs,r="",o=0;o<e.childNodes.length;o++){var s=e.childNodes[o],c="";3===s.nodeType&&"\n"!==s.nodeValue[0]?c=s.nodeValue:1===s.nodeType&&("br"===s.nodeName?c="\n":"span"===s.nodeName&&""!==s.textContent&&(c=s.textContent)),r+=c}return{startTime:a,endTime:i,text:r,hasBeenReset:!0,align:"middle",line:14,lineAlign:"start",position:50,positionAlign:"middle",size:100,snapToLines:!0,vertical:""}},t.prototype.convertTimeToSeconds=function(e){return 60*(60*parseFloat(e[0])+parseFloat(e[1]))+parseFloat(e[2])},t.prototype.cleanupCues=function(t,n){for(var a=Date.now(),i=t.currentAbsoluteTime()||t.currentTime(),r=n.cues,o=0,s=0;s<r.length;)r[s].endTime<i?(n.removeCue(r[s]),o++):s++;e.Log.verbose(16,"cleanupCues removed "+o+" cues. Spent "+(Date.now()-a)+"ms")},t.prototype.calculateMemorySize=function(t){for(var n=Date.now(),a=t.cues,i=0,r=0,o=function(e){return e?e.length:0};r<a.length;){if(i+=a[r].text.length,a[r].displayState){var s=a[r].displayState;i+=o(s.innerHTML),i+=o(s.innerText),i+=o(s.outerHTML),i+=o(s.outerText),i+=o(s.textContent),i+=o(s.baseURI)}i*=2,r++}e.Log.verbose(16,"calculateMemorySize mem size="+i/1024/1024+" mb. Spent "+(Date.now()-n)+"ms")},t.cueCleanupFrequency=5,t.consecutiveEmptyCaptionsThreshold=10,t.emptyCaptionsTimeThreadhold=3e4,t}();t.Manager=n}(e.Ttml||(e.Ttml={})),e.Ttml}(f||(f={})),function(e){!function(e){"use strict";var t=function(){function t(){}return t.FormatDashMediaUrl=function(e,t,n,a,i,r){if(!e)throw new Error("url Template is not set");if(!t)throw new Error("bitrate is not set");var o=e;return r&&(o=o.replace("$RepresentationID$",r)),o=o.replace("$Bandwidth$",t),n&&(o=o.replace("$Time$",n)),a&&(o=o.replace("$Number$",a.toString())),i&&(o+=i),o},t.FormatDashInitUrl=function(t,n,a,i){return e.UrlFormatter.FormatDashMediaUrl(t,n,null,null,a,i)},t}();e.UrlFormatter=t}(e.Util||(e.Util={})),e.Util}(f||(f={})),function(e){!function(t){"use strict";var n=function(){function t(){if(!t.useJavascriptLibrary){var e="msCrypto"in window?window.msCrypto:window.crypto;this._webCryptor=e.subtle||e.webkitSubtle}}return t.prototype.dispose=function(){this._webCryptor=null},t.prototype.initialize=function(t,n,a,i){var r=this,o={name:"aes-cbc",iv:i};return new Promise(function(s,c){r._webCryptoImportKey(a,o).then(function(t){n.webCrypto={importedkey:t,algorithm:o},r.type="webcrypto",e.Log.verbose(12,"Using webcrypto"),s()},function(o){if(a&&i){var d=function(){n.forge={keyStr:e.Common.uint8ArrayToString(new Uint8Array(a)),ivStr:e.Common.uint8ArrayToString(new Uint8Array(i))},r.type="forge",e.Log.verbose(12,"Using forge"),s()};e.Forge&&e.Forge.forgeScript?d():t.javascriptLoader.load("forge",d,function(){c("failed to load forge JS.")})}else c(o)})})},t.prototype.isInitialized=function(e){return null!=e.forge||null!=e.webCrypto},t.prototype.decrypt=function(e,t){var n=this;return new Promise(function(a,i){e.webCrypto?n._webCryptoDecrypt(e.webCrypto.algorithm,e.webCrypto.importedkey,t).then(function(e){a(e)},function(e){i(e)}):n._forgeDecrypt(e.forge,t).then(function(e){a(e)},function(e){i(e)})})},t.prototype._webCryptoImportKey=function(e,t){var n=this;return new Promise(function(a,i){function r(e){var t=s.result?s.result:e;a(t)}function o(e){i(e)}if(n._webCryptor){var s=n._webCryptor.importKey("raw",new Uint8Array(e),t,!1,["decrypt"]);"oncomplete"in s?(s.oncomplete=r,s.onerror=o):s.then(function(e){r(e)},function(e){o(e)})}else i("Platform doesn't support webCrypto")})},t.prototype._forgeDecrypt=function(n,a){return new Promise(function(i,r){function o(e){i(e.buffer)}var s=Date.now();!function i(){e.Forge.decrypt(o,n,a)||(Date.now()-s<t._maxWorkerWaitMSec?e.Util.setTimeout(i,0):r("The forge worker is too busy, total wait time = "+(Date.now()-s)+"ms"))}()})},t.prototype._webCryptoDecrypt=function(e,t,n){var a=this;return new Promise(function(i,r){function o(e){var t=c.result?c.result:e;i(t)}function s(e){r(e)}var c=a._webCryptor.decrypt(e,t,new Uint8Array(n));"oncomplete"in c?(c.oncomplete=o,c.onerror=s,c.onabort=s):c.then(function(e){o(e)},function(e){s(e)})})},t.useJavascriptLibrary=!1,t._maxWorkerWaitMSec=3e4,t}();t.Decryptor=n}(e.WebCryptoUtil||(e.WebCryptoUtil={})),e.WebCryptoUtil}(f||(f={})),function(e){!function(e){"use strict";var t=function(){function e(){this.xmlHttpRequestDelegate=new XMLHttpRequest}return Object.defineProperty(e.prototype,"responseType",{get:function(){return this.xmlHttpRequestDelegate.responseType},set:function(e){this.xmlHttpRequestDelegate.responseType=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timeout",{get:function(){return this.xmlHttpRequestDelegate.timeout},set:function(e){this.xmlHttpRequestDelegate.timeout=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"msCaching",{get:function(){return this.xmlHttpRequestDelegate.msCaching?this.xmlHttpRequestDelegate.msCaching:void 0},set:function(e){this.xmlHttpRequestDelegate.msCaching&&(this.xmlHttpRequestDelegate.msCaching=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readyState",{get:function(){return this.xmlHttpRequestDelegate.readyState},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this.xmlHttpRequestDelegate.status},set:function(e){this.xmlHttpRequestDelegate.status=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"response",{get:function(){return this.xmlHttpRequestDelegate.response},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"statusText",{get:function(){return this.xmlHttpRequestDelegate.statusText},enumerable:!0,configurable:!0}),e.prototype.setRequestHeader=function(e,t){this.xmlHttpRequestDelegate.setRequestHeader(e,t)},e.prototype.abort=function(){this.xmlHttpRequestDelegate.abort()},e.prototype.open=function(e,t,n,a,i){this.xmlHttpRequestDelegate.open(e,t,n||!0,a,i)},e.prototype.getResponseHeader=function(e){return this.xmlHttpRequestDelegate.getResponseHeader(e)},e.prototype.getAllResponseHeaders=function(){var e=this.xmlHttpRequestDelegate.getAllResponseHeaders();if(!e||"string"!=typeof e)return{};var t={};return e.trim().split(/[\r\n]+/).forEach(function(e){var n=e.split(": "),a=n.shift(),i=n.join(": ");t[a]=i}),t},e.prototype.send=function(e){this.setCallbacksOnDelegate(),this.xmlHttpRequestDelegate.send(e)},e.prototype.setCallbacksOnDelegate=function(){var e=this;this.xmlHttpRequestDelegate.onabort=function(t){e.onabort&&e.onabort(t)},this.xmlHttpRequestDelegate.onerror=function(t){e.onerror&&e.onerror(t)},this.xmlHttpRequestDelegate.onload=function(t){e.onload&&e.onload(t)},this.xmlHttpRequestDelegate.onloadstart=function(t){e.onloadstart&&e.onloadstart(t)},this.xmlHttpRequestDelegate.onloadend=function(t){e.onloadend&&e.onloadend(t)},this.xmlHttpRequestDelegate.onprogress=function(t){e.onprogress&&e.onprogress(t)},this.xmlHttpRequestDelegate.ontimeout=function(t){e.ontimeout&&e.ontimeout(t)},this.xmlHttpRequestDelegate.onreadystatechange=function(t){e.onreadystatechange&&e.onreadystatechange(t)}},e}();e.XMLHttpRequestWrapper=t}(e.HttpRequest||(e.HttpRequest={})),e.HttpRequest}(f||(f={})),function(e){!function(t){"use strict";var n=function(){function t(e){this.decryptorInitialized=!1,this.initSegmentWithHMACRequested=!1,this.isCDNPlaybackEnabled=!1,this.isPlaybackEncrypted=!1,this.eventMgr=e,this.setupEventHandlers()}return t.prototype.getHybridPresentationUrl=function(e){if(this.isCDNPlaybackEnabled=-1!==e.indexOf("enableCdn=1"),!this.isCDNPlaybackEnabled)return e;return this.addUrlQueryString(e,{hybridPlayback:"true"})},t.prototype.onPresentationParsed=function(t){var n=t.periods&&t.periods.length>0&&t.periods[0]||void 0,a=n&&n.streams&&n.streams.length>0&&n.streams[0]||void 0,i=a&&a.contentProtections&&a.contentProtections.length>0&&a.contentProtections[0];this.isPlaybackEncrypted=i&&i.schemeIdUri&&i.schemeIdUri.length>0||!1,this.isHybridModeEligible()?this.eventMgr.dispatchEvent(e.EventName.hybridPlaybackEnabled):e.Log.verbose(12,"HybridPlayback: not enabled: isCdnPlaybackEnabled="+this.isCDNPlaybackEnabled+" isPlaybackEncrypted="+this.isPlaybackEncrypted)},t.prototype.convertInitSegmentUrl=function(t){if(!this.isHybridModeEligible()||this.initSegmentWithHMACRequested)return this.convertMediaSegmentUrl(t);this.initSegmentWithHMACRequested=!0;var n=this.addUrlQueryString(t,{generateHMAC:"true"});return e.Log.verbose(12,"HybridPlayback: changed HMAC state to INPROGRESS"),this.convertMediaSegmentUrl(n.toString())},t.prototype.convertMediaSegmentUrl=function(e){if(!this.decryptorInitialized||!this.hmacInfo||!this.hmacInfo.docIdHash)return e;var t=e.replace("videotranscode","videotranscode/"+this.hmacInfo.docIdHash),n={enableEncryption:"1",enableCdn:"1"};return n.p1=this.hmacInfo.expiry,n.p2=this.hmacInfo.symmetricKey,n.p3=this.hmacInfo.algoId,n.p4=encodeURIComponent(this.hmacInfo.digest),this.addUrlQueryString(t,n)},t.prototype.isEncryptionEnabled=function(e){return e&&-1!==e.indexOf("enableEncryption=1")},t.prototype.checkHMACResponseHeader=function(t){var n=t&&t.data&&t.data.xhr;if(n&&t.data.segmentType===e.Context.RequestType[2]&&this.isHybridModeEligible()&&(!this.hmacInfo||!this.hmacInfo.docIdHash)){var a=n.getResponseHeader("docidhash");a&&(this.hmacInfo={docIdHash:a,expiry:n.getResponseHeader("p1"),symmetricKey:n.getResponseHeader("p2"),algoId:n.getResponseHeader("p3"),digest:decodeURIComponent(n.getResponseHeader("p4"))},e.Log.verbose(5,"HybridPlayback: HMAC headers retrieved: "+JSON.stringify(this.hmacInfo)))}},t.prototype.isHybridModeEligible=function(){return this.isCDNPlaybackEnabled&&this.isPlaybackEncrypted},t.prototype.setupEventHandlers=function(){var t=this;this.eventMgr.addHandler(e.EventName.decryptorInitialized,function(){t.decryptorInitialized=!0,e.Log.verbose(12,"HybridPlayback: changed HMAC state to APPLY")},this),this.eventMgr.addHandler(e.EventName.onDownloadRequestEnded,function(e){t.checkHMACResponseHeader(e)},this)},t.prototype.addUrlQueryString=function(e,t){var n=-1===e.indexOf("?")?"?":"&";return e+n+Object.keys(t).map(function(e){return e+"="+t[e]}).join("&")},t}();t.Manager=n}(e.HybridPlayback||(e.HybridPlayback={})),e.HybridPlayback}(f||(f={})),function(e){!function(e){e.STORAGE_PREFIX="OnePlayer";var t=function(){function t(e,t){this._useSessionStorage=!!e,this._cacheValidiyInDays=t||-1}return t.prototype.getItem=function(t,n){var a;t=e.STORAGE_PREFIX+"."+t;try{a=this._useSessionStorage?window.sessionStorage.getItem(t):window.localStorage.getItem(t)}catch(e){}if(a)try{var i=JSON.parse(a);if(i.validForDays){var r=parseInt(i.time)+24*parseInt(i.validForDays)*60*60*1e3;if(Date.now()<r)return{value:i.val,changed:!0}}}catch(e){}return{value:n||null,changed:!1}},t.prototype.setItem=function(t,n){t=e.STORAGE_PREFIX+"."+t;var a=JSON.stringify({val:n,time:Date.now(),validForDays:this._cacheValidiyInDays});try{this._useSessionStorage?window.sessionStorage.setItem(t,a):window.localStorage.setItem(t,a)}catch(e){}},t}();e.Storage=t}(e.Util||(e.Util={})),e.Util}(f||(f={}));var l,u,f,p=f;!function(e){"use strict";function t(e){if(e&&e.length>0){for(var t=0;t<e.length;t++)if(-1===l.indexOf(e[t]))throw new Error('Format "'+e[t]+'" not supported');return!0}return!1}function n(e,t){for(var n=[],a=0;a<t.length;a++)-1!==_[e].indexOf(t[a].type)&&n.push(t[a]);return n}function a(e){var t=e.trim(),n=t.search(/\.ism\/manifest/i);return t.substr(0,n+h.length)}function i(e){var i,l=e.src.trim(),_=l.search(/format=/i),y=[],S="",D="",I=l.indexOf("?");if(-1!==I&&""!==(D=l.substr(I))){var x=new RegExp("(\\?|&)protectionType=(.[^&]*)","i"),C=new RegExp("(\\?|&)token=(.[^&]*)","i"),O=D.match(x),w=D.match(C);if(O&&3===O.length){var E=new v;E.type=O[2],w&&3===w.length&&(E.authenticationToken=decodeURIComponent(w[2])),e.protectionInfo=[E]}}var A=l.match(/.*\(format=(.*)\)/),L=!1;if(A&&2===A.length){var k=A[1].toLowerCase();(0===k.indexOf(f)||0===k.indexOf(p))&&(L=!0)}_>-1&&(l=(l=l.replace(/format=[^,)]*[ ,]*/i,"")).replace(/\(\s*\)/,"")),(i=l.match(/\.ism\/manifest\([^)]*\)/i))&&i.length>0&&(S=i[0].substr(h.length+1).trim()),l=a(e.src.trim());var M=b;e.streamingFormats&&t(e.streamingFormats)&&(M=e.streamingFormats);for(var P=0;P<M.length;P++){var T,U,F,H="";if(T=M[P],U=m[T],T!==r?(H="(format="+(T==o&&L?f:T!=s&&T!=c&&T!=d||!L?u[T]:p),H+=S?","+S:")"):S&&(H="("+S),e.protectionInfo){var R=n(T,e.protectionInfo);if(!R.length)continue;F=new g(l+H,U,R)}else F=new g(l+H,U,null);""!==D&&(F.src+=D),y.push(F)}return y.length>0?y:null}var r="SMOOTH",o="DASH",s="HLS-V3",c="HLS-V4",d="HLS",l=[r,o,c,s,d],u={DASH:"mpd-time-csf","HLS-V3":"m3u8-aapl-v3","HLS-V4":"m3u8-aapl-v4",HLS:"m3u8-aapl"},f="mpd-time-cmaf",p="m3u8-cmaf",m={SMOOTH:"application/vnd.ms-sstr+xml",DASH:"application/dash+xml","HLS-V3":"application/vnd.apple.mpegurl","HLS-V4":"application/vnd.apple.mpegurl",HLS:"application/vnd.apple.mpegurl"},_={SMOOTH:["AES"],DASH:["AES"],"HLS-V3":["AES"],"HLS-V4":["AES"],HLS:["AES"]},h=".ism/manifest",b=l,g=function(e,t,n){this.src=e,this.type=t,this.protectionInfo=n};e.streamSrc=g;var v=function(){};e.protectionInfo=v,e.setStreamingFormats=function(e){t(e)&&(b=e)},e.resetStreamingFormats=function(){b=l},e.expandSources=function(e){for(var t,n,r=[],o=[],s=0;e&&s<e.length;s++){var c=e[s].src,d=e[s].src.indexOf("?");-1!==d&&(c=e[s].src.substr(0,d).toLowerCase()),-1===c.toLowerCase().lastIndexOf(".ism/manifest")||e[s].disableUrlRewriter?r.push(e[s]):(n=a(e[s].src),-1===o.indexOf(n)&&(o.push(n),(t=i(e[s]))&&(r=r.concat(t))))}return r.length>0?r:null}}(l||(l={})),function(e){!function(e){"use strict";function t(e,t){i(e,3,t)}function n(e,t){i(e,2,t)}function a(e,t){i(e,1,t)}function i(e,t,n){var a=new Date(Date.now());if(d>=t&&l[e]){n=n.scrubUserInfo&&n.scrubUserInfo()||n;var i="["+("0"+a.getHours()).slice(-2)+":"+("0"+a.getMinutes()).slice(-2)+":"+("0"+(a.getSeconds()+a.getMilliseconds()/1e3).toFixed(3)).slice(-6)+"] "+r[t]+": "+o[e]+": "+n;p&&(m.length>_&&m.shift(),m.push(i)),b&&c.log(i)}}!function(e){e[e.none=0]="none",e[e.error=1]="error",e[e.warning=2]="warning",e[e.verbose=3]="verbose"}(e.Level||(e.Level={}));var r=e.Level;!function(e){e[e.functionalTest=0]="functionalTest",e[e.azureHtml5JS=1]="azureHtml5JS",e[e.flashSS=2]="flashSS",e[e.videojs=4]="videojs",e[e.plugin=5]="plugin",e[e.html5=7]="html5",e[e.scte35=8]="scte35",e[e.ampAPI=11]="ampAPI",e[e.cea608Module=12]="cea608Module",e[e.ttml=13]="ttml",e[e.max=14]="max"}(e.Area||(e.Area={}));var o=e.Area;e.verbose=t,e.warning=n,e.error=a,e.startup=function(e,t){i(e,0,t)},e.videoJSLogOverride=function(e){for(var i=[],r=0;r<arguments.length-1;r++)i[r]=arguments[r+1];if(i&&i.length>0){var o=Array.prototype.slice.call(i[0]);switch(e){case"warn":n(4,o.join(" "));break;case"error":a(4,o.join(" "));break;default:t(4,o.join(" "))}}},e.setConsoleOutputByLevel=function(e){d=e},e.enableConsoleOutputByArea=function(e){null==e?l.forEach(function(e,t,n){n[t]=!0}):l[e]=!0},e.disableConsoleOutputByArea=function(e){null==e?l.forEach(function(e,t,n){n[t]=!1}):l[e]=!1},e.enableMemoryLog=function(e){void 0===e&&(e=!0),p=e},e.setLogConfig=function(e){if(void 0!==e&&e.TraceTargets&&!(e.TraceTargets.length<=0)){p=!1,b=!1,d=e.maxLogLevel;for(var t=0;t<e.TraceTargets.length;t++)"console"===e.TraceTargets[t].target.toLowerCase()?b=!0:"memory"===e.TraceTargets[t].target.toLowerCase()&&(p=!0,_=e.TraceTargets[t].maxMemoryTraceCount?e.TraceTargets[t].maxMemoryTraceCount:f)}},e.getMemoryLog=function(e){void 0===e&&(e=!0);var t=m;return e&&(m=[]),t.join("\n")},e.saveMemoryLog=function(){h=m.slice()},e.getSavedMemoryLog=function(){return h.join("\n")},e.writeEntry=i;for(var s=function(){},c=window.console||{log:s,warn:s,error:s},d=0,l=[],u=0;14>u;u++)l.push(!1);var f=5e4,p=!1,m=[],_=f,h=[],b=!0;e.enableConsoleOutputByArea(),e.setConsoleOutputByLevel(1)}(e.Logger||(e.Logger={})),e.Logger}(u||(u={})),function(e){!function(e){"use strict";e.formatString=function(){for(var e=[],t=0;t<arguments.length-0;t++)e[t]=arguments[t+0];var n=Array.prototype.slice.call(e,1);return e[0].replace(/{(\d+)}/g,function(e,t){return void 0!==n[t]?n[t]:e})}}(e.Misc||(e.Misc={})),e.Misc}(u||(u={})),function(e){!function(e){"use strict";!function(e){e[e.audio=0]="audio",e[e.video=1]="video"}(e.MediaType||(e.MediaType={}));var t=(e.MediaType,function(){function e(e,t){this._el=e,this._typeStr=0===t?"Audio":"Video",this._bufferLevel=0,this._handlers=new n,this.downloadRequested=null,this.downloadCompleted=null,this.downloadFailed=null}return Object.defineProperty(e.prototype,"bufferLevel",{get:function(){var e="get"+this._typeStr+"BufferLength";return this._el&&this._el[e]?this._el[e]():0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"perceivedBandwidth",{get:function(){return this._el&&this._el.getPerceivedBandwidth?this._el.getPerceivedBandwidth():0},enumerable:!0,configurable:!0}),e.prototype.addEventListener=function(e,t){this._handlers[e]&&this._handlers[e].push(t)},e.prototype.removeEventListener=function(e,t){if(this._handlers[e]){var n=this._handlers[e].indexOf(t);-1!==n&&this._handlers[e].splice(n,1)}},e.prototype.dispatchEvent=function(e){if(this._handlers[e])for(var t={type:e},n=0;n<this._handlers[e].length;n++)this._handlers[e][n].call(this,t)},e}());e.BufferData=t;var n=function(){this.downloadrequested=[],this.downloadcompleted=[],this.downloaddecrypted=[],this.downloadfailed=[]}}(e.FlashSS||(e.FlashSS={})),e.FlashSS}(u||(u={})),function(e){!function(t){"use strict";var n=function(){function t(e){this._streams=[],this._flashElement=e;for(var t=0;t<e.getNumAlternativeAudioStreams();t++){var n=new a(e,t);this._streams.push(n)}this.selectedIndex=this._streams.length>0?e.getCurrentAlternativeAudioStreamIndex():void 0}return Object.defineProperty(t.prototype,"streams",{get:function(){return this._streams},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enabledIndices",{get:function(){for(var e=[],t=0;t<this._streams.length;t++)if(this._streams[t].enabled){e.push(t);break}return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedIndex",{get:function(){return this._selectedIndex},set:function(e){0!=this._streams.length&&(null!=this._selectedIndex&&(this._streams[this._selectedIndex].enabled=!1),this._streams[e].enabled=!0,this._selectedIndex=e)},enumerable:!0,configurable:!0}),t.prototype.switchIndex=function(t){if(this._flashElement.getHasAlternativeAudio()){if(1!=this.enabledIndices.length)return e.Logger.error(2,"switchIndex failed - only single stream supported: "+this.enabledIndices.length+" streams enabled"),void this._flashElement.tech.trigger(amp.streamListEventName.streamselectnotsupported);if(t>=this.streams.length||0>t)return e.Logger.error(2,"audioChange failed - tried to enable invalid index: "+t),void this._flashElement.tech.trigger(amp.streamListEventName.streamindexinvalid);if(t===this.enabledIndices[0])return e.Logger.verbose(2,"audioChange failed because current stream selected"),void this._flashElement.tech.trigger(amp.streamListEventName.streamselected);this.selectedIndex=t,this._flashElement.switchAlternativeAudioIndex(t),this._flashElement.tech.trigger(amp.streamListEventName.streamselected)}else e.Logger.error(2,"No alternative audio streams found")},t.prototype.addEventListener=function(e,t){this._flashElement.tech.on(e,t)},t.prototype.removeEventListener=function(e,t){this._flashElement.tech.off(e,t)},t}();t.AudioStreamList=n;var a=function(){function e(e,t){this.enabled=!1,this.language=e.getAlternativeAudioItemAt(t).info.attributes.Language,this.codec=e.getAlternativeAudioItemAt(t).info.targetTrack.fourCC,this.bitrate=1e3*e.getAlternativeAudioItemAt(t).bitrate,this.name=this.getName(e,t)}return e.prototype.getName=function(e,t){var n=e.getAlternativeAudioItemAt(t).info.urlTemplate.toLowerCase(),a="fragments(",i=n.indexOf(a),r=n.indexOf("=",i);return e.getAlternativeAudioItemAt(t).info.urlTemplate.substring(i+a.length,r)},e}();t.AudioStream=a}(e.FlashSS||(e.FlashSS={})),e.FlashSS}(u||(u={})),function(e){!function(e){"use strict";e.VideoStreamList=function(e){if(this.streams=[],e.getIsDynamicStream()){var n=new t(e);this.streams.push(n)}this.selectedIndex=this.streams.length>0?0:void 0};var t=function(){function e(e){this.name="",this.tracks=[],this._flashElement=e,this._selectedTrack=-1;for(var t=e.getStreamItems(),n=0;n<t.length;n++){var i=new a(t[n]);this.tracks.push(i)}}return e.prototype.selectTrackByIndex=function(e){if(this._selectedTrack!=e){-1==e?this._flashElement.setAutoDynamicStreamSwitch(!0):(this._flashElement.setAutoDynamicStreamSwitch(!1),this._flashElement.switchDynamicStreamIndex(e));for(var t=0;t<this.tracks.length;t++)this.tracks[t].streamingInfo.selectable=-1===e||e===t;this._selectedTrack=e,this._flashElement.tech.trigger(amp.streamEventName.trackselected)}},e.prototype.addEventListener=function(e,t){this._flashElement.tech.on(e,t)},e.prototype.removeEventListener=function(e,t){this._flashElement.tech.off(e,t)},e}();e.VideoStream=t;var n=function(){this.selectable=!0};e.MediaTrackStreamingInfo=n;var a=function(){function e(e){this.width=e.width,this.height=e.height,this.bitrate=1e3*e.bitrate,this.streamingInfo=new n}return Object.defineProperty(e.prototype,"selectable",{get:function(){return this.streamingInfo.selectable},enumerable:!0,configurable:!0}),e}();e.VideoTrack=a}(e.FlashSS||(e.FlashSS={})),e.FlashSS}(u||(u={})),function(e){!function(e){"use strict";var t=function(){function e(e){this._html5Tech=e}return Object.defineProperty(e.prototype,"streams",{get:function(){var e=[],t=this._html5Tech.player().audioTracks();if(t)for(var n=0;n<t.length;n++){var a={name:t[n].label,codec:"aac",language:t[n].language,bitrate:0,enabled:t[n].enabled,label:t[n].label};e.push(a)}return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabledIndices",{get:function(){var e=[],t=this._html5Tech.player().audioTracks();if(t)for(var n=0;n<t.length;n++)t[n].enabled&&e.push(n);return e},enumerable:!0,configurable:!0}),e.prototype.switchIndex=function(e){var t=this._html5Tech.player().audioTracks();if(t&&e>=0&&e<t.length)for(var n=0;n<t.length;n++)t[n].enabled=n===e,n===e&&this._html5Tech.trigger(amp.streamListEventName.streamselected)},e.prototype.addEventListener=function(e,t){this._html5Tech.on(e,t)},e.prototype.removeEventListener=function(e,t){this._html5Tech.off(e,t)},e}();e.AudioStreamList=t}(e.Html5||(e.Html5={})),e.Html5}(u||(u={})),function e(t,n,a){function i(o,s){if(!n[o]){if(!t[o]){if(r)return r(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[o]={exports:{}};t[o][0].call(d.exports,function(e){return i(t[o][1][e]||e)},d,d.exports,e,t,n,a)}return n[o].exports}for(var r=!1,o=0;o<a.length;o++)i(a[o]);return i}({1:[function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n,a,i,r){var o=function(e){switch(e.toLowerCase()){case"amp":return 1;case"azurehtml5js":return 2;case"flashss":return 3;case"html5":return 5;default:return 0}}(e)<<28;t&=268435455,t|=o;var s=new S.default(t);return s.message=n,s.serviceErrorCode=a,s.correlationId=i,s.isErrorExpected=r,s}n.__esModule=!0;var o=i(e("global/window")),s=i(e("global/document")),c=i(e("object.assign")),d=i(e("lodash-compat/function/throttle")),f=a(e("./video.js/src/js/utils/events.js")),p=(a(e("./video.js/src/js/utils/guid.js")),e("./video.js/src/js/utils/fn.js")),m=a(p),_=a(e("./video.js/src/js/utils/dom.js")),h=a(e("./video.js/src/js/utils/languageLabels.js")),b=e("./video.js/src/js/utils/url.js"),g=a(b),v=i((a(e("./video.js/src/js/utils/browser.js")),e("./video.js/src/js/component.js"))),y=i(e("./video.js/src/js/error-display.js")),S=i(e("./video.js/src/js/media-error.js")),D=i(e("./video.js/src/js/menu/menu.js")),I=i(e("./video.js/src/js/player.js")),x=i(e("./video.js/src/js/tech/tech.js")),C=i(e("./video.js/src/js/utils/to-title-case.js")),O=i(e("./video.js/src/js/video.js")),w=e("./video.js/src/js/utils/log.js"),E=i(e("./video.js/src/js/utils/merge-options.js")),A=i((a(b),e("./video.js/src/js/tracks/text-track.js"))),L=a(e("./ampHeuristicProfiles.js")),k=a(e("./ampDefs.js")),M=e("./version.js"),P=i(e("./ampjsloader.js")),T=i(e("./playbackQualityObserver.js")),U=(i(e("./tech-wrappers/Html5.js")),e("./tech-wrappers/amp-tech-azureHtml5JS.js")),F=(i(U),e("./tech-wrappers/amp-tech-flashSS.js")),H=(i(F),e("timers")),R=O.default;o.default.amp=R,"object"==typeof n&&"object"==typeof t&&(t.exports=R),n.default=R,R.errorCode=k.errorCode,R.eventName=k.eventName,R.streamEventName=k.streamEventName,R.streamListEventName=k.streamListEventName,R.bufferDataEventName=k.bufferDataEventName,R.internalEventName=k.internalEventName,R.protectionType=k.protectionType,R.CorsConfig=k.CorsConfig,R.downloadableMediaType=k.downloadableMediaType,R.getIsoLangs=h.getIsoLangs,R.get2LetterLangCode=h.get2LetterLangCode,R.decodeURL=g.decodeURL,R.encodeURL=g.encodeURL,o.default.videojs=R,R.Player=I.default,R.mergeOptions=E.default,R.options.techOrder=["azureHtml5JS","flashSS","html5"],R.options.silverlightSS=R.options.silverlightSS||{},R.levelTwoErrors={},R.levelTwoErrors[R.errorCode.srcErrLiveNoSegments]="LEVEL2_ERR_CONTENT_NOT_AVAIL_YET",I.default.prototype.enterFullscreen=I.default.prototype.requestFullscreen,I.default.prototype.addEventListener=I.default.prototype.on,I.default.prototype.removeEventListener=I.default.prototype.off,I.default.prototype.currentTechName=function(){return this.techName_},I.default.prototype.playerElement=function(){return this.el_},I.default.prototype.currentAbsoluteTime=function(e){var t=this.techGet_("currentAbsoluteTime");return void 0!==t&&void 0!==e?(this.trigger("currentTimeChanging",{time:this.fromPresentationTime(e)}),this.techCall_("setCurrentAbsoluteTime",e),t>e&&this.trigger("rewind"),this):t},I.default.prototype.presentationTimeOffsetInSec=function(){return this.techGet_("presentationTimeOffsetInSec")},I.default.prototype.currentMediaTime=function(){return this.techGet_("currentMediaTime")},I.default.prototype.currentVideoStreamList=function(){return this.techGet_("currentVideoStreamList")},I.default.prototype.currentAudioStreamList=function(){return this.techGet_("currentAudioStreamList")},I.default.prototype.videoBufferData=function(){return this.techGet_("videoBufferData")},I.default.prototype.audioBufferData=function(){return this.techGet_("audioBufferData")},I.default.prototype.currentDownloadBitrate=function(){return this.techGet_("currentDownloadBitrate")},I.default.prototype.currentPlaybackBitrate=function(){return this.techGet_("currentPlaybackBitrate")},I.default.prototype.videoWidth=function(){return this.techGet_("videoWidth")},I.default.prototype.videoHeight=function(){return this.techGet_("videoHeight")},I.default.prototype.currentProtectionInfo=function(){return this.options_.sourceOptions.protectionInfo},I.default.prototype.isLive=function(){return this.techGet_("isLive")},I.default.prototype.manifestPlayableWindowLength=function(){return this.techGet_("manifestPlayableWindowLength")},I.default.prototype.currentPlayableWindow=function(){return this.techGet_("currentPlayableWindow")},I.default.prototype.playableWindowEndInSec=function(){return this.techGet_("playableWindowEndInSec")},I.default.prototype.segmentBoundaries=function(){return this.techGet_("segmentBoundaries")},I.default.prototype.toPresentationTime=function(e){return this.player().isLive()&&this.player().currentPlayableWindow()?e+this.player().currentPlayableWindow().startInSec:e},I.default.prototype.fromPresentationTime=function(e){return this.player().isLive()&&this.player().currentPlayableWindow()?e-this.player().currentPlayableWindow().startInSec:e},I.default.prototype.currentHeuristicProfile=function(e){return null===this.options_?void 0:void 0===e?L.findProfile(this.options_.heuristicProfile).name:(this.options_.heuristicProfile=e,this)},I.default.prototype.currentPlayerSettingValue=function(e){var t=null;return this.tech_&&x.default._availableSettings.heuristicSettings.hasOwnProperty(e)&&(this.tech_.updateCurrentPlayerConfigs(),t=this.tech_.options_.currentPlayerConfigs.currentHeuristicConfigs[e]),t},I.default.prototype.getIsInAudioOnlyMode=function(){return this.isInAudioOnlyMode},I.default.prototype.getDisplayedAudioOnlyMessage=function(){return this.displayedAudioOnlyMessage},I.default.getScriptRootURL=function(){var e=s.default.getElementsByTagName("script"),t=null;if(e&&e.length>=1)for(var n=e.length-1;n>=0;n--){var a=null;a=e[n].src;var i=new RegExp("(.[^?]+)/azuremediaplayer(?:\\.thin)?(?:\\.min)?\\.js(?:\\?.*)?$","i");if(a){var r=a.match(i);if(r&&2===r.length){t=r[1];break}}}var o=I.default.prototype.getAmpVersion();return!t&&o&&(t="https://amp.azure.net/libs/amp/"+o),t},I.default.prototype.getAmpVersion=function(){var e=null;if(M.ampVersion){var t=new RegExp("([0-9]+.[0-9]+.[0-9]+).[0-9]+"),n=M.ampVersion.match(t);n&&2===n.length&&(e=n[1])}return e},I.default.prototype.getFullAmpVersion=function(){return M.ampVersion},I.default.prototype.addThrottledWindowResizeListener=function(e,t,n){n&&(e=e.bind(n));var a=d.default(e,t);o.default.addEventListener("resize",a),this.on("dispose",function(){o.default.removeEventListener("resize",a)})},I.default.prototype.disableTextTracks=function(){var e=this.textTracks();if(e)for(var t=0;t<e.length;t++)e[t].mode="disabled"},I.default.prototype.setActiveTextTrack=function(e){e instanceof A.default||u.Logger.error(u.Logger.Area.ampAPI,"textTrack is expecting a TextTrack object.");var t=this.textTracks(),n=!1;t||u.Logger.error(u.Logger.Area.ampAPI,"The text tracks are not found.");for(var a=0;a<t.length;a++){var i=t[a];i.id===e.id?(i.mode="showing",n=!0):i.mode="disabled"}n||u.Logger.error(u.Logger.Area.ampAPI,"The specified text track not found.")},I.default.prototype.enableVideo=function(){this.pendingStartTime=this.currentTime(),this.techCall_("enableVideo"),this.player_.showBusy(),this.isInAudioOnlyMode=!1},I.default.prototype.disableVideo=function(){this.pendingStartTime=this.currentTime(),this.techCall_("disableVideo"),this.player_.showBusy(),this.isInAudioOnlyMode=!0,this.player_.trigger("hideAudioOnlyMessageBar")},I.default.prototype.audioOnlyModePlaybackQualityThresholdReached=function(){this.displayedAudioOnlyMessage||!this.options_.audioOnlyMode||this.isInAudioOnlyMode||(this.player_.trigger("showAudioOnlyMessageBar"),this.displayedAudioOnlyMessage=!0)},I.default.prototype.canPlayAudioOnlyMode=function(){return"AzureHtml5JS"===this.techName_&&this.player_.currentAudioStreamList().streams&&this.player_.currentAudioStreamList().streams.length},I.default.prototype.getMaxVideoResolution=function(){function e(e){return e.reduce(function(e,t){return e.width>=t.width&&e.height>=t.height?e:t})}var t=this.currentVideoStreamList();if(t){var n,a=t.selectedIndex;if(t.streams&&t.streams[a]&&t.streams[a].tracks&&t.streams[a].tracks.length>0)return{width:(n=e(t.streams[a].tracks)).width,height:n.height};if(this.isInAudioOnlyMode&&t.streams&&t.streams[0]&&t.streams[0].tracks&&t.streams[0].tracks.length>0)return{width:(n=e(t.streams[0].tracks)).width,height:n.height}}},I.default.prototype.src=function(e,t){u.Logger.verbose(u.Logger.Area.videojs,"AMP version "+this.getFullAmpVersion());var n=e;if(void 0===n)return this.currentSrc();if(this.sizeCal=!1,this.canPlayThroughSignalled_=!1,this.isSeeking_=!1,!(Array.isArray(n)||n instanceof Object))throw new Error("src is expecting a source object or an array of source objects");return this.options_.enableFallback&&!this.fallbackSrcHandler&&(Array.isArray(n)||(n=[n]),u.Logger.verbose(u.Logger.Area.videojs,"Initializing FallbackSrcHandler"),this.fallbackSrcHandler=new u.FallbackSupport.FallbackSrcHandler(n,this.options_.customFallbackErrors,this.options_.customFallbackServiceErrorCodes,this.options_.isFallbackErrorCodePartialMatchingEnabled),u.Logger.verbose(u.Logger.Area.videojs,"FallbackSrcHandler Initialized.  Getting initial source list."),n=this.fallbackSrcHandler.getNextSources()),this.setupInitAmpEventHandlers_(),this.one("loadstart",function(){var e=!this.techName_||"Html5"===this.techName_,t=this.options_.autoplay;e&&(t&&this.options_.hideBigPlayButtonOnAutoplay&&this.player_.isAutoplaySuccess&&(this.addClass("vjs-playing"),this.addClass("vjs-has-started"),this.trigger("firstplay")),this.removeClass("vjs-waiting"),this.trigger("removeSpinner"))}),this.showPlayerLoad(),null!=t&&t.length>0&&(this.options_.tracks=t),n.selected||(this.currentRetryCountForLiveMediaLoad=0,this.clearPlayerTimers(),this.options_.sdn={},Array.isArray(n)?this.options_.sourceList=n:n instanceof Object&&(this.options_.sourceList=[n]),u.Logger.verbose(u.Logger.Area.videojs,"dispatching event: sourceset "+JSON.stringify(n,function(e,t){return-1===e.indexOf("Token")?t:"provided"})),this.trigger(R.eventName.sourceset)),function e(){this.pluginSetupCheck()?n instanceof Object&&n.selected?(this.trigger("playerSetupCheckCompleted"),this.refreshTextTracks(),this.cache_.src=n.src,this.cache_.type=n.type,this.currentType_=n.type||"",this.options_.currentType=this.currentType_,this.techCall_("updatePlayerOptions",this.options_),this.ready(function(){this.loadMediaWithTimeout(function(){this.techCall_("src",n.src),"auto"===this.options_.preload&&this.load()},n)},!0===this.options_.fastSourceSet)):this.sourceList_(l.expandSources(this.options_.sourceList)):H.setTimeout(e.bind(this),50)}.call(this),this},I.default.prototype.vjsOptions=I.default.prototype.options,I.default.prototype.options=function(e){var t=this.vjsOptions(e);return this.techCall_("updatePlayerOptions",t),t},I.default.prototype.showPlayerLoad=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-paused"),this.removeClass("vjs-playing"),this.isPreloadSupported()&&this.addClass("vjs-waiting")},I.default.prototype.pluginSetupCheck=function(){var e=this.options_.plugins;for(var t in e)if(e.hasOwnProperty(t)&&this[t]&&this[t].setupDone&&!this[t].setupDone())return!1;return!0},I.default.prototype.setupInitAmpEventHandlers_=function(){var e=this;this.ampEventHandlersReady?(this.startTriggered=!1,this.firstQuartileTriggered=!1,this.midpointTriggered=!1,this.thirdQuartileTriggered=!1,this.wasPaused=!1):function(){var t=e,n=function(e,n){t.addEventListener(e,n),t.addEventListener("dispose",function(){t.removeEventListener(e,n)})};n("timeupdate",function(){var e=this.duration(),t=this.currentTime();e>0&&(!this.startTriggered&&t>0&&(this.startTriggered=!0,this.trigger("start")),this.isLive()||(!this.firstQuartileTriggered&&t>=e/4&&(this.firstQuartileTriggered=!0,this.trigger("firstquartile")),!this.midpointTriggered&&t>=e/2&&(this.midpointTriggered=!0,this.trigger("midpoint")),!this.thirdQuartileTriggered&&t>=3*e/4&&(this.thirdQuartileTriggered=!0,this.trigger("thirdquartile"))))}),n("play",function(){this.wasPaused&&(this.trigger("resume"),this.wasPaused=!1),this.currentRetryCountForLiveMediaLoad=0}),n("pause",function(){this.wasPaused=!0}),n("fullscreenchange",function(){this.trigger(this.isFullscreen()?"fullscreen":"exitfullscreen")}),n("canplaythrough",function(){this.clearPlayerTimers()}),n("loadstart",function(){"azurehtml5js"===this.techName_.toLowerCase()&&this.clearSetupCheckTimer()}),e.ampEventHandlersReady=!0}()},I.default.prototype.sourceList_=function(e){var t=this.selectSource(e),n=!0;if(t&&(this.updateSourceOptions(t.source),"FlashSS"===t.tech&&void 0!==this.options_.sourceOptions.protectionInfo)){var a=O.default.getTech(t.tech);!0===a.isVersionSupported("30.0")&&!1===a.isVersionSupported("30.0.0.145")&&(n=!1)}if(n&&t){if(this.tech_&&t.tech===this.techName_)if("FlashSS"!==t.tech||JSON.stringify(this.options_.sourceOptions.protectionInfo)===JSON.stringify(t.source.protectionInfo)&&!this.tech_.isReloadNeeded()){t.source.selected=!0;var i=this.tech_.options(),r=i&&i.handleEarlyPrefetchError&&"Html5"===t.tech;this.tech_.error()&&!r&&this.tech_.reset(),this.src(t.source,[])}else this.loadMediaWithTimeout(function(){this.loadTech_(t.tech,t.source),this.refreshTextTracks()},t.source);else this.loadMediaWithTimeout(function(){this.loadTech_(t.tech,t.source),this.refreshTextTracks()},t.source);"AzureHtml5JS"===this.techName_&&this.prepareForImsc1Captions(!0)}else this.tech_&&this.unloadTech_(),I.default.raiseError.call(this,I.default.getAMPErrorCode.call(this,e)),this.triggerReady()},I.default.prototype.initializeCea608=function(){var e=this;if("Html5"!==this.techName_&&this.options().cea708CaptionsSettings&&this.options().cea708CaptionsSettings.enabled){var t=function(){e.cea608Module&&e.cea608Module.dispose(),e.cea608Module=e.cea608Module||new o.default.Cea608Module(e),e.cea608Module.init()};"function"==typeof o.default.Cea608Module?t():this.ampJsLoader.load("cea708",function(){t()})}},I.default.prototype.options_.sourceOptions={},I.default.prototype.updateSourceOptions=function(e){this.options({sourceOptions:null});var t={};e&&e.protectionInfo&&(t.protectionInfo=e.protectionInfo),this.options({sourceOptions:t})},I.default.prototype.pauseAndHide=function(){try{this.el().style.display="none",null!==this.currentSrc()&&this.pause()}catch(e){u.Logger.warning(u.Logger.Area.videojs,"Exception while quering currentSrc in player.pauseAndHide()")}},I.default.prototype.hide=function(){void 0===this.el().style.opacity?this.el().style.display="none":(this.el().style.opacity=0,this.bigPlayButton.el().style.opacity=0)},I.default.prototype.isVisible=function(){return"none"!==this.el().style.display},I.default.prototype.playerContainer=function(){return this.multiPlayerContainerDiv},I.default.prototype.show=function(){this.el().style.display="block",this.el().style.opacity=1,this.bigPlayButton.el().style.opacity=1,this.setupSkipAd(),this.trigger("visibilityChange");var e=this;H.setTimeout(function(){if(e.multiPlayerContainerDiv===s.default.activeElement)try{e.multiPlayerContainerDiv.blur()}catch(e){u.Logger.warning(u.Logger.Area.videojs,"Exception while removing focus from player container")}},100)},I.default.prototype.isDisposed=function(){return null===this.el()},I.default.prototype.resetPlayer=function(){this.error(null),this.title_=""},I.default.prototype.showControls=function(){this.controlBar.el_.style.display="none"},I.default.prototype.hideControls=function(){this.controlBar.el_.style.display="block"},I.default.prototype.oldDispose=I.default.prototype.dispose,I.default.prototype.dispose=function(){this.clearPlayerTimers(),this.oldDispose()},I.default.prototype.getMemoryLog=function(e){return u.Logger.getMemoryLog(e)},I.default.prototype.saveMemoryLog=function(){return u.Logger.saveMemoryLog()},I.default.prototype.getSavedMemoryLog=function(){return u.Logger.getSavedMemoryLog()},I.default.prototype.initAmpJSLoader=function(){this.ampJsLoader=new P.default(this.options_.playerOptions)},I.default.prototype.initPlaybackQualityObserver=function(){this.playbackQualityObserver=new T.default(this.options_.playerOptions,this.tech_,this)},I.default.prototype.setXmlHttpRequestFactory=function(e){this.tech_&&this.tech_.setXmlHttpRequestFactory?this.tech_.setXmlHttpRequestFactory(e):u.Logger.warning(u.Logger.Area.videojs,"setXmlHttpRequestFactory unavailable on "+this.techName_+" playback technology element.")},x.default.prototype.updatePlayerOptions=function(e){this.options_.playerOptions=E.default(this.options_.playerOptions,e)},x.default.prototype.updateCurrentPlayerConfigs=function(){this.options_.currentPlayerConfigs||(this.options_.currentPlayerConfigs={});var e=L.findProfile(this.options_.playerOptions.heuristicProfile);void 0===this.options_.heuristicProfile&&e&&(this.options_.heuristicProfile=e.name);var t=e?c.default({},e):{},n=this.options_.playerOptions.customPlayerSettings;if(n&&n.customHeuristicSettings){var a={};for(var i in n.customHeuristicSettings)x.default._availableSettings.heuristicSettings.hasOwnProperty(i)&&(a[i]=n.customHeuristicSettings[i]);t=c.default(t,a)}t.maxBufferInWallClockSec<t.preRollInWallClockSec&&(t.maxBufferInWallClockSec=t.preRollInWallClockSec),t.livePlaybackOffsetInWallClockSec<t.preRollInWallClockSec&&(t.livePlaybackOffsetInWallClockSec=t.preRollInWallClockSec),this.options_.currentPlayerConfigs.currentHeuristicConfigs=t},x.default._availableSettings={heuristicSettings:{preRollInWallClockSec:0,maxBufferInWallClockSec:0,maxBufferInWallClockSecForCopyCodec:0,livePlaybackOffsetInWallClockSec:0,windowSizeHeuristics:!1,useBrowserWindowForWindowSizeRule:!1,maxStreamingResolutionLimit:0,minFragmentsForBandwidthAverage:1,bandwidthTestWithTimeThresholdDuringLive:!0,useVariableFragmentSizeMode:!1,latencyHeuristicsEnabled:!0,ignoreRequestLatency:!1,maxActiveSegmentRequests:1,maxWaitTimeForFirstSegmentInMSec:0,minBandwidthUsabilityPercent:.5,retryDueToNetworkErrorInMSec:1e3,retryMediaServerErrorInMSec:2e3,defaultBandwidthKbps:800}},I.default.canSupportFormats=function(e,t){var n=t[e.type];if(n){if(!e.protectionInfo)return"maybe";for(var a=0;a<e.protectionInfo.length;a++)if(-1!==n.indexOf(e.protectionInfo[a].type))return"maybe"}return""},I.default.prototype.refreshTextTracks=function(){if(this.tech_){if(this.remoteTextTracks()&&this.remoteTextTracks().tracks_)for(;this.remoteTextTracks().tracks_.length>0;)this.removeRemoteTextTrack(this.remoteTextTracks().tracks_[0]);for(var e=this.options_.tracks||[],t=0;t<e.length;t++){var n=e[t];this.options().useProtectionInfoForPosterAndTextTrack&&(n.protectionInfo=this.player_.currentProtectionInfo()),this.addRemoteTextTrack(n)}this.controlBar&&this.controlBar.subtitlesButton&&this.controlBar.subtitlesButton.update(),this.controlBar&&this.controlBar.captionsButton&&this.controlBar.captionsButton.update(),this.options_.tracks.length=0,this.textTracks_=this.player_.textTracks(),this.watchForTextTrackSelection()}},I.default.prototype.watchForTextTrackSelection=function(){var e=this,t=this.player_.textTracks();t&&function(){var n=function(){t.length>0&&("function"==typeof o.default.WebVTT?e.loadSelectedTextTrack():e.ampJsLoader.load("vtt",function(){e.loadSelectedTextTrack()}))};t.addEventListener("change",n),e.player_.on("dispose",function(){t.removeEventListener("change",n)})}()},I.default.prototype.loadSelectedTextTrack=function(){var e=this,t=this.player_.textTracks();t&&t.length>0&&t.tracks_.forEach(function(t){"showing"===t.mode&&t.hasLoadingInitiated&&!t.hasLoadingInitiated()&&t.startLoading(e.tech_.options_.isClosedCaptions401FixEnabled?e.tech_.options_.getDownloadRequestParametersAsync:null)})},I.default.prototype.getCurrentTextTrack=function(){var e=this.textTracks(),t=0,n=void 0;if(e)for(;t<e.length;t++)if("showing"===(n=e[t]).mode)return n},I.default.prototype.trigger=function(e,t,n){switch(e){case"waiting":case"fullscreenchange":u.Logger.verbose(u.Logger.Area.videojs,"triggering event: "+e)}return f.trigger(this.el_,e,t,n),this},I.default.raiseError=function(e,t,n,a,i){var o=r("amp",e,t,n,a,i);this.error(o)},I.default.prototype.retryPlayerLoad=function(e){var t=0;e&&(t=e.code||0),this.clearPlayerTimers();var n=void 0===t;if(void 0!==t)try{n=this.techGet_("isLiveStartupError")}catch(e){n=!1}if(this.options_.heuristicProfile!==I.default.HeuristicProfile.MeTA&&n&&this.options_.manifestFetchAutoRetryForLive&&this.currentRetryCountForLiveMediaLoad<this.options_.maxRetryCountForLive){this.currentRetryCountForLiveMediaLoad++,this.trigger("livestartupretry",{retryCount:this.currentRetryCountForLiveMediaLoad}),u.Logger.warning(u.Logger.Area.ampAPI,"live startup retry. count :"+this.currentRetryCountForLiveMediaLoad);var a=this;return this.retryTimer=H.setTimeout(function(){a.retryTimer=NaN,a.retryMediaLoad()},this.options_.retryIntervalForLiveInMSec),!0}if(e&&this.fallbackSrcHandler&&this.fallbackSrcHandler.shouldFallback(t,e.serviceErrorCode||"",this.cache_.type)){this.pendingStartTime=this.currentTime(),u.Logger.warning(u.Logger.Area.ampAPI,"Attempting Fallback From: CODE: "+t.toString(16)+" URL: "+this.cache_.src);var i=this.fallbackSrcHandler.getNextSources(this.cache_.type);if(!i||0===i.length)return!1;if(e.message=void 0===e.message||null==e.message?e.message:e.message&&e.message.scrubUserInfo(),null==this.cache_.src||void 0===this.cache_.src)return!1;var r={error:e,URI:this.cache_.src.scrubUserInfo(),mimeType:this.cache_.type,newURLs:i};return this.trigger(R.eventName.attemptingSrcFallback,r),this.pendingStartTime>0&&(this.options_.autoplay=!0),this.tech_&&this.unloadTech_(),this.src(i),!0}return!1},I.default.prototype.switchToAdaptiveStreamingPlaybackType=function(){this.clearPlayerTimers(),this.pendingStartTime=this.currentTime();var e=this.fallbackSrcHandler.getNextAdaptiveStreamingSource();this.pendingStartTime>0&&(this.options_.autoplay=!0),this.src(e)},I.default.prototype.clearPlayerTimers=function(){this.retryTimer&&(H.clearTimeout(this.retryTimer),this.retryTimer=NaN),this.clearSetupCheckTimer()},I.default.prototype.clearSetupCheckTimer=function(){this.setupCheckTimer&&(H.clearTimeout(this.setupCheckTimer),this.setupCheckTimer=NaN)},I.default.prototype.loadMediaWithTimeout=function(e,t){this.trigger("srcSelected",{src:t}),e&&(this.originalSetSource=e),e.call(this),this.startSetupTimeout()},I.default.prototype.retryMediaLoad=function(){this.techCall_("src",this.cache_.src),this.startSetupTimeout()},I.default.prototype.startSetupTimeout=function(){var e=this;this.clearSetupCheckTimer(),this.options_.playerStartupTimeoutTimer&&(this.setupCheckTimer=H.setTimeout(function(){e.setupCheckTimer=NaN,e.currentRetryCountForLiveMediaLoad<e.options_.maxRetryCountForLive?e.retryPlayerLoad():I.default.raiseError.call(this,k.errorCode.srcErrUnknown)},this.options_.playerStartupTimeoutInMSec),this.showBusy())},x.default.raiseError=function(e,t,n,a,i,o){var s=r(e,t,n,a,i,o);this.error(s)},I.default.prototype.prepareForImsc1Captions=function(e){var t=this.options().imsc1CaptionsSettings;if(t){t.length>1&&w.Log.warning(u.Logger.Area.ttml,"Only 1 IMSC1 track is currently supported.");var n=this;t.forEach(function(t){if(t.label&&void 0!==t.srclang){var a=n.addRemoteTextTrack({kind:"captions",label:t.label,srclang:t.srclang});a&&a.track?(a.track.isImsc1=!0,e&&(a.track.mode="showing")):u.Logger.error(u.Logger.Area.ttml,"Unable to create IMSC1 track: "+JSON.stringify(t)),n.textTrackSettings.setValues({justification:"left"})}else u.Logger.error(u.Logger.Area.ttml,"IMSC1 label or srclang is missing: "+JSON.stringify(t))})}},I.default.prototype.getErrorUI=function(e){var t=R.levelTwoErrors[268435455&e.code];if(t&&t.length>0)return t;var n=(267386880&e.code)>>20;return 0===n?e.message:6===n?this.options().notSupportedMessage:255===n?"MEDIA_ERR_UNKNOWN":S.default.errorTypes[n]||""},y.default.prototype.content=function(){var e=this.player().error();if(e){var t=this.player().getErrorUI(e);return[this.htmlEncode(this.localize(t)),s.default.createElement("br"),"(0x"+e.code.toString(16)+")"]}},I.default.getAMPErrorCode=function(e){for(var t=R.errorCode.srcPlayerMismatchUnknown,n=0,a=this.options_.techOrder;n<a.length;n++){var i=C.default(a[n]),r=O.default.getTech(i);if(r&&(!r.isSupported()||"FlashSS"===i&&!1===r.isVersionSupported("30.0.0.145")&&!0===r.isVersionSupported("30.0")))for(var o=0,s=e;o<s.length;o++){var c=s[o];r.canPlaySource(c)&&"FlashSS"===i&&(t|=R.errorCode.srcPlayerMismatchFlashNotInstalled)}}return t},I.default.prototype.canControlPlaybackRate=function(){return this.tech_&&this.tech_.featuresPlaybackRate},I.default.prototype.isPreloadSupported=function(){return this.tech_&&this.tech_.featuresPreload},I.default.prototype.getErrorToBeReported=function(e){function t(e){return e===R.errorCode.srcPlayerMismatchUnknown}var n=e;return(!(e=this.mimeTypeToErrorMap["application/dash+xml"])||t(e.code))&&(!(e=this.mimeTypeToErrorMap["application/vnd.apple.mpegurl"])||t(e.code))&&((e=this.mimeTypeToErrorMap["video/mp4"])||(e=n)),e},I.default.prototype.downloadableMedia=function(e){return void 0!==e?(this.downloadableMediaOptions=e,this.trigger("downloadableMediaChanged"),this):this.downloadableMediaOptions},I.default.prototype.addElClass=function(e,t){_.addElClass(e,t)},I.default.prototype.removeElClass=function(e,t){_.removeElClass(e,t)},I.default.prototype.showBusy=function(){_.addElClass(this.el(),"vjs-waiting"),this.trigger("waiting",{context:"userInitiated"})},w.Log.logByType=u.Logger.videoJSLogOverride,v.default.prototype.prependChild=function(e,t){var n=this.addChild(e,t);return this.contentEl().insertBefore(n.el(),this.contentEl().firstChild),n},v.default.prototype.toggleClass=function(e,t){return void 0!==t?void(t?this.addClass(e):this.removeClass(e)):void(this.hasClass(e)?this.removeClass(e):this.addClass(e))},v.default.prototype.addCrossOriginPolicy=function(e,t){t||(t=this.el()),e===R.CorsConfig.UseCredentials?t.setAttribute("crossorigin","use-credentials"):e===R.CorsConfig.Anonymous&&t.setAttribute("crossorigin","anonymous")},D.default.prototype.prependItem=function(e,t){this.prependChild(e),e.parent=t,e.on("click",m.bind(this,function(){this.unlockShowing()}))},String.prototype.scrubUserInfo=function(){var e=new RegExp("(access_token|token|tempauth)(=|%3d)([^&]*)","gi"),t=this.replace(e,"--token-scrubbed--"),n=new RegExp("docId(=|%3d)([^&]*)","gi");t=t.replace(n,"--docId-scrubbed--");var a=new RegExp("p.(=|%3d)([^&]*)","gi");return t.replace(a,"--hash-param-scrubbed--")},String.prototype.replaceAllLast=function(e,t){var n=this.split(e);if(n.length>1){for(var a=!1,i=n.length-1;i>0&&0===n[i].length;i--)n[i]=t,a=!0;if(a)return n.slice(0,i+1).join(e)+n.slice(i+1,n.length).join("")}return this},String.prototype.replaceAllFirst=function(e,t){var n=this.split(e);if(n.length>1){for(var a=!1,i=0;i<n.length&&0===n[i].length;i++)a=!0,n[i]=t;if(a)return n.slice(0,i+1).join("")+n.slice(i+1,n.length).join(e)}return this},t.exports=n.default},{"./ampDefs.js":2,"./ampHeuristicProfiles.js":3,"./ampjsloader.js":4,"./playbackQualityObserver.js":5,"./tech-wrappers/Html5.js":6,"./tech-wrappers/amp-tech-azureHtml5JS.js":7,"./tech-wrappers/amp-tech-flashSS.js":8,"./version.js":9,"./video.js/src/js/component.js":16,"./video.js/src/js/error-display.js":53,"./video.js/src/js/media-error.js":58,"./video.js/src/js/menu/menu.js":61,"./video.js/src/js/player.js":63,"./video.js/src/js/tech/tech.js":75,"./video.js/src/js/tracks/text-track.js":86,"./video.js/src/js/utils/browser.js":93,"./video.js/src/js/utils/dom.js":96,"./video.js/src/js/utils/events.js":97,"./video.js/src/js/utils/fn.js":98,"./video.js/src/js/utils/guid.js":101,"./video.js/src/js/utils/languageLabels.js":103,"./video.js/src/js/utils/log.js":104,"./video.js/src/js/utils/merge-options.js":105,"./video.js/src/js/utils/to-title-case.js":109,"./video.js/src/js/utils/url.js":110,"./video.js/src/js/video.js":111,"global/document":168,"global/window":169,"lodash-compat/function/throttle":118,"object.assign":162,timers:113}],2:[function(e,t,n){"use strict";n.__esModule=!0,n.protectionType={AES:"AES"},n.CorsConfig={Anonymous:"Anonymous",UseCredentials:"UseCredentials"},n.StreamingFormatMimeType={Smooth:"application/vnd.ms-sstr+xml",Dash:"application/dash+xml",HLS:"application/vnd.apple.mpegurl"},n.eventName={canplaythrough:"canplaythrough",durationchange:"durationchange",ended:"ended",error:"error",fullscreenchange:"fullscreenchange",loadstart:"loadstart",loadedmetadata:"loadedmetadata",loadeddata:"loadeddata",pause:"pause",play:"play",playing:"playing",seeked:"seeked",seeking:"seeking",timeupdate:"timeupdate",volumechange:"volumechange",waiting:"waiting",downloadbitratechanged:"downloadbitratechanged",playbackbitratechanged:"playbackbitratechanged",sourceset:"sourceset",ratechange:"ratechange",disposing:"disposing",emsgAvailable:"emsgAvailable",start:"start",firstquartile:"firstquartile",midpoint:"midpoint",thirdquartile:"thirdquartile",complete:"complete",mute:"mute",unmute:"unmute",rewind:"rewind",resume:"resume",fullscreen:"fullscreen",exitfullscreen:"exitfullscreen",click:"tech-click",livestartupretry:"livestartupretry",embeddedcaptionsfound:"embeddedcaptionsfound",decryptorInitialized:"decryptorInitialized",unsupportedTracksRemoved:"unsupportedTracksRemoved",attemptingSrcFallback:"attemptingSrcFallback",srcSelected:"srcSelected",onDownloadRequestStarted:"onDownloadRequestStarted",onDownloadRequestEnded:"onDownloadRequestEnded",enhancedTrackReady:"enhancedTrackReady",prefetchedManifestPromiseResolved:"prefetchedManifestPromiseResolved"},n.internalEventName={menuadded:"menuadded",currentTimeChanging:"currentTimeChanging",playingAtLiveDVREdge:"playingAtLiveDVREdge",playingAtStartDVREdge:"playingAtStartDVREdge",playingInDVR:"playingInDVR"},n.streamEventName={trackselected:"trackselected"},n.streamListEventName={streamselected:"streamselected",streamindexinvalid:"streamindexinvalid",streamselectnotsupported:"streamselectnotsupported"};var a={abortedErrStart:1048576,abortedErrUnknown:1048576,abortedErrNotImplemented:1048577,abortedErrHttpMixedContentBlocked:1048578,abortedErrEnd:2097151,networkErrStart:2097152,networkErrUnknown:2097152,networkErrHttpResponseBegin:2097552,networkErrHttpBadUrlFormat:2097552,networkErrHttpUserAuthRequired:2097553,networkErrHttpUserForbidden:2097555,networkErrHttpUrlNotFound:2097556,networkErrHttpNotAllowed:2097557,networkErrResourceConflict:2097561,networkErrHttpGone:2097562,networkErrHttpPreconditionFailed:2097564,networkErrHttpInternalServerFailure:2097652,networkErrHttpBadGateway:2097654,networkErrHttpServiceUnavailable:2097655,networkErrHttpGatewayTimeout:2097656,networkErrHttpResponseEnd:2097751,networkErrTimeout:2097752,networkErrError:2097753,networkErrAbort:2097754,networkErrNoInternet:2097755,networkErrBadRequestUpdate:2097756,networkErrEnd:3145727,decodeErrStart:3145728,decodeErrUnknown:3145728,decodeErrEnd:4194303,srcErrStart:4194304,srcErrUnknown:4194304,srcErrParsePresentation:4194305,srcErrParseSegment:4194306,srcErrUnsupportedPresentation:4194307,srcErrInvalidSegment:4194308,srcErrLiveNoSegments:4194309,srcErrEnd:5242879,encryptErrStart:5242880,encryptErrUnknown:5242880,encryptErrDecrypterNotFound:5242881,encryptErrDecrypterInit:5242882,encryptErrDecrypterNotSupported:5242883,encryptErrKeyAcquire:5242884,encryptErrDecryption:5242885,encryptErrLicenseAcquire:5242886,encryptErrEnd:6291455,srcPlayerMismatchStart:6291456,srcPlayerMismatchUnknown:6291456,srcPlayerMismatchFlashNotInstalled:6291457,srcPlayerMismatchEnd:7340031,errUnknown:16711680};n.errorCode=a;var i={400:a.networkErrHttpBadUrlFormat,401:a.networkErrHttpUserAuthRequired,403:a.networkErrHttpUserForbidden,404:a.networkErrHttpUrlNotFound,405:a.networkErrHttpNotAllowed,410:a.networkErrHttpGone,412:a.networkErrHttpPreconditionFailed,500:a.networkErrHttpInternalServerFailure,502:a.networkErrHttpBadGateway,503:a.networkErrHttpServiceUnavailable,504:a.networkErrHttpGatewayTimeout};n.httpErrorCode=i,n.bufferDataEventName={downloadrequested:"downloadrequested",downloadcompleted:"downloadcompleted",downloaddecrypted:"downloaddecrypted",downloadfailed:"downloadfailed"},n.downloadableMediaType={video:"video",videoWithCC:"videoWithCC",audio:"audio",transcript:"transcript"}},{}],3:[function(e,t,n){"use strict";n.__esModule=!0,n.findProfile=function(e){for(var t=[{name:a.default.HeuristicProfile.Hybrid,preRollInWallClockSec:4,maxBufferInWallClockSec:30,livePlaybackOffsetInWallClockSec:8,windowSizeHeuristics:!0},{name:a.default.HeuristicProfile.QuickStart,preRollInWallClockSec:2,maxBufferInWallClockSec:30,livePlaybackOffsetInWallClockSec:8,windowSizeHeuristics:!0},{name:a.default.HeuristicProfile.HighQuality,preRollInWallClockSec:8,maxBufferInWallClockSec:30,livePlaybackOffsetInWallClockSec:15,windowSizeHeuristics:!1},{name:a.default.HeuristicProfile.LowLatency,preRollInWallClockSec:2,maxBufferInWallClockSec:30,livePlaybackOffsetInWallClockSec:2,windowSizeHeuristics:!0},{name:a.default.HeuristicProfile.MeTA,preRollInWallClockSec:4,maxBufferInWallClockSec:120,livePlaybackOffsetInWallClockSec:8,windowSizeHeuristics:!1,maxActiveSegmentRequests:3,ignoreRequestLatency:!0,minWaitTimeToGopRatioForNextSegment:.7,defaultGOPForMissingSegmentData:5,disableSegmentQueryParamParsing:!0,maxTotalRetries:3,retryMediaServerErrorInMSec:1e3,retryDueToNetworkErrorInMSec:1e3,minBandwidthUsabilityPercent:.5,defaultBandwidthKbps:1200,enableBandwidthPersistence:!0}],n=0;n<t.length;n++)if(t[n].name===e)return t[n];return t[0]};var a=function(e){return e&&e.__esModule?e:{default:e}}(e("./video.js/src/js/player"));a.default.HeuristicProfile={Hybrid:"Hybrid",QuickStart:"QuickStart",HighQuality:"HighQuality",LowLatency:"LowLatency",MeTA:"MeTA"}},{"./video.js/src/js/player":63}],4:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var r=a(e("global/document")),o=a(e("./video.js/src/js/player.js")),s=a(e("./video.js/src/js/utils/merge-options.js")),c=function(){function e(t){i(this,e),this.options_=t,this.loadedScripts=[],this.lodingScripts=[],this.erroredScripts=[],this.pendingScriptsCallbacks=[]}return e.prototype.load=function(e,t,n){var a=this,i=this.options_[e],s=-1!==i.search("/")?i:o.default.getScriptRootURL()+"/"+i,c=this.loadedScripts.some(function(t){return e===t}),d=this.lodingScripts.some(function(t){return e===t}),l=this.erroredScripts.some(function(t){return e===t});if(c||d||l)c?(u.Logger.verbose(u.Logger.Area.videojs,"AmpJsLoader script is already loaded successfully ="+s),t&&t()):d?(u.Logger.verbose(u.Logger.Area.videojs,"AmpJsLoader script loading is in progress ="+s),this.pendingScriptsCallbacks.push({resourceName:e,onSuccess:t,onError:n})):(u.Logger.verbose(u.Logger.Area.videojs,"AmpJsLoader script loading errored ="+s),n&&n());else{this.lodingScripts.push(e),this.pendingScriptsCallbacks.push({resourceName:e,onSuccess:t,onError:n});var f=r.default.createElement("script");f.type="text/javascript",u.Logger.verbose(u.Logger.Area.videojs,"AmpJsLoader staring loading for script ="+s),f.onload=function(){a.loadedScripts.push(e),a.onScriptLoadSuccess(e)},f.onerror=function(){a.onScriptLoadError(e),a.erroredScripts.push(e)},f.src=s,r.default.body.appendChild(f)}},e.prototype.onScriptLoadSuccess=function(e){this.pendingScriptsCallbacks&&this.pendingScriptsCallbacks.length>0&&this.pendingScriptsCallbacks.forEach(function(t){t.resourceName===e&&t.onSuccess&&t.onSuccess()}),this.scriptLoadingCompleted(e)},e.prototype.scriptLoadingCompleted=function(e){this.pendingScriptsCallbacks=this.pendingScriptsCallbacks.filter(function(t){return t.resourceName!==e}),this.lodingScripts=this.lodingScripts.filter(function(t){return t!==e})},e.prototype.onScriptLoadError=function(e){this.pendingScriptsCallbacks&&this.pendingScriptsCallbacks.length>0&&this.pendingScriptsCallbacks.forEach(function(t){t.resourceName===e&&t.onError&&t.onError()}),this.scriptLoadingCompleted(e)},e}(),d=function(){function e(t){i(this,e),this.options_=s.default(this.options_,t.externalJs),this.jsLoderInternal=new c(this.options_)}return e.prototype.load=function(e,t,n){this.jsLoderInternal.load(e,t,n)},e}();d.prototype.options_={forge:"amp-forge.min.js",vtt:"amp-vtt.min.js",cea708:"amp-cea708.min.js"},n.default=d,t.exports=n.default},{"./video.js/src/js/player.js":63,"./video.js/src/js/utils/merge-options.js":105,"global/document":168}],5:[function(e,t,n){"use strict";n.__esModule=!0;var a=function(){function e(t,n,a){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.options_=t,this.tech=n,this.player=a,this.startTime=0,this.bufferingStartTime=0,this.totalBufferingTime=0,this.lastCheckedTime=0,this.playTime=0,this.waitingTimer,this.reachedThreshold=!1,this.player.on("canplaythrough",this.handleCanPlayThrough.bind(this)),this.player.on(["waiting","seeking"],this.handleWaitingAndSeeking.bind(this)),this.player.on("playing",this.handlePlaying.bind(this)),this.player.on("timeupdate",this.handleTimeUpdate.bind(this))}return e.prototype.playbackQualityThresholdReached=function(){this.reachedThreshold=!0,this.player.audioOnlyModePlaybackQualityThresholdReached()},e.prototype.handleCanPlayThrough=function(){this.startTime=Date.now()},e.prototype.handlePlaying=function(){clearInterval(this.waitingTimer),this.waitingTimer=void 0,this.checkThresholds.bind(this)(!1)},e.prototype.handleWaitingAndSeeking=function(){var e=this.checkThresholds.bind(this);0===this.bufferingStartTime&&(this.bufferingStartTime=Date.now()),!this.waitingTimer&&this.startTime&&(this.waitingTimer=setInterval(function(){e(!0)},5e3))},e.prototype.handleTimeUpdate=function(){var e=Math.round(this.player.currentTime());e==this.lastCheckedTime+1&&(this.playTime+=1),this.lastCheckedTime=e},e.prototype.checkThresholds=function(e){var t,n,a,i,r,o,s=this;0!==this.bufferingStartTime&&(o=function(){var e=this.player.videoBufferData();return e&&e.downloadRequested?e.downloadRequested.measuredBandwidth:0},t=Date.now()-s.startTime,n=Date.now()-s.bufferingStartTime,e||(s.bufferingStartTime=0),s.totalBufferingTime+=n,a=function(){return t>this.options_.audioOnlyTimeThreshold}.bind(s),i=function(){return!!(this.totalBufferingTime/1e3/this.playTime>this.options_.audioOnlyRebufferThreshold&&this.playTime>0)}.bind(s),r=function(){var e=this.player.currentVideoStreamList(),t=this.player.videoBufferData();if(e&&e.streams&&e.streams[0]&&e.streams[0].tracks&&t){var n=e.streams[0].tracks[0].bitrate,a=t.perceivedBandwidth,i=o.bind(this)();return 0!==i&&(a=Math.min(a,i)),n>a}return!1}.bind(s),i()&&a()&&r()&&!s.reachedThreshold&&(clearInterval(s.waitingTimer),s.waitingTimer=void 0,s.playbackQualityThresholdReached()))},e}();n.default=a,t.exports=n.default},{}],6:[function(e){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}var n=t(e("../video.js/src/js/tech/tech.js")),a=t(e("../video.js/src/js/tech/html5.js"));a.default.prototype.vjsTriggerReady=a.default.prototype.triggerReady,a.default.prototype.triggerReady=function(){this.setupTriggers(),this.vjsTriggerReady()},a.default.prototype.setupTriggers=function(){for(var e=this,t=function(t){e.eventHandler(t)},n=a.default.Events.length-1;n>=0;n--)this.el_.addEventListener(a.default.Events[n],t)},a.default.prototype.eventHandler=function(e){"timeupdate"!==e.type&&"progress"!==e.type&&u.Logger.verbose(u.Logger.Area.html5,"Event: "+e.type),"error"===e.type&&this.error()&&n.default.raiseError.call(this,"html5",this.error().code<<20)},a.default.prototype.presentationTimeOffsetInSec=function(){},a.default.prototype.vjsSetSrc=a.default.prototype.setSrc,a.default.prototype.setSrc=function(e){u.Logger.setLogConfig(this.options_.playerOptions.traceConfig),this.vjsSetSrc(e)},a.default.prototype.isLiveStartupError=function(){var e=this.error();return!(!e||0!=e.code<<20)},a.default.prototype.currentAudioStreamList=function(){return this.audioStreamList_||(this.audioStreamList_=new u.Html5.AudioStreamList(this)),this.audioStreamList_}},{"../video.js/src/js/tech/html5.js":72,"../video.js/src/js/tech/tech.js":75}],7:[function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var r=i(e("global/window")),o=i(e("object.assign")),s=i(e("../video.js/src/js/tech/tech.js")),c=i(e("../video.js/src/js/tech/html5.js")),d=i(e("../video.js/src/js/component.js")),l=i(e("../video.js/src/js/player.js")),f=i(e("../video.js/src/js/video.js")),m=a(e("../video.js/src/js/utils/dom.js")),_=a(e("../video.js/src/js/utils/fn.js")),h=a(e("../video.js/src/js/utils/browser.js")),b=a(e("../ampDefs.js")),g=function(e){function t(n,a){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),e.call(this,n,a),this.manualTimeUpdatesOff();var i,r=void 0;this.featuresPlaybackRate=c.default.canControlPlaybackRate(),this.fullscreenResize=!0,this.progressEvents=!1,this.volumeControl=!0,this.didFetchedManifest=!1,i=n.source,this.setControls(!1),p.Log.setLoggerFunction(u.Logger.writeEntry,u.Logger.Area.azureHtml5JS),r=p.CreateAzureHtml5(this.el_.videoTag_,n.playerId),n.staleDataTimeLimitInSec&&r.setStaleDataTimeLimit(n.staleDataTimeLimitInSec),this.mediaPlayer=r,this.mediaPlayer.setJavascriptLoader(n.ampJsLoader),this.options_.muted&&this.setMuted(!0),this.setupTriggers(r),i&&this.src!==i.src&&this.setSrc(i.src),h.TOUCH_ENABLED&&!0===n.nativeControlsForTouch&&this.setControls(!0),this.options_.playerOptions.traceConfig&&p.Log.setConsoleOutputByLevel(this.options_.playerOptions.traceConfig.maxLogLevel),this.triggerReady()}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.dispose=function(){null!==this.mediaPlayer&&(this.mediaPlayer.dispose(),this.mediaPlayer=null),t.disposeMediaElement(this.el_),e.prototype.dispose.call(this)},t.prototype.createEl=function(){var e=this.options_.tag,n=e;if(!e||!1===this.movingMediaElementInDOM)if(e){var a=e.cloneNode(!0);e.parentNode.insertBefore(a,e),t.disposeMediaElement(e),e=a}else{e=m.createEl("div"),n=m.createEl("video");var i=this.options_.tag&&m.getElAttributes(this.options_.tag),r=o.default({},i);m.setElAttributes(n,o.default(r,{id:this.options_.techId,class:"vjs-tech"})),e.appendChild(n),e.videoTag_=n}m.setElAttributes(n,{oncontextmenu:"return false;"}),m.setElAttributes(n,{tabindex:"-1"}),m.setElAttributes(n,{"aria-hidden":"true"});for(var s=["preload","loop"],c=s.length-1;c>=0;c--){var d=s[c],l={};void 0!==this.options_[d]&&(l[d]=this.options_[d]),m.setElAttributes(n,l)}return e},t.prototype.autoplay=function(){return this.mediaPlayer.autoplay},t.prototype.setAutoplay=function(e){this.options_.autoplay=e},t.prototype.buffered=function(){return this.mediaPlayer.buffered},t.prototype.controls=function(){return this.el_.controls},t.prototype.setControls=function(e){this.el_.controls=!!e},t.prototype.currentSrc=function(){return this.src()},t.prototype.isLive=function(){return this.mediaPlayer.isLive},t.prototype.manifestPlayableWindowLength=function(){return this.mediaPlayer.manifestPlayableWindowLength},t.prototype.currentPlayableWindow=function(){return this.mediaPlayer.currentPlayableWindow},t.prototype.playableWindowEndInSec=function(){return this.mediaPlayer.playableWindowEndInSec},t.prototype.segmentBoundaries=function(){return this.mediaPlayer.segmentBoundaries},t.prototype.setCurrentTime=function(e){this.mediaPlayer.currentTime=e},t.prototype.setCurrentAbsoluteTime=function(e){this.mediaPlayer.currentAbsoluteTime=e},t.prototype.currentTime=function(){return this.mediaPlayer.currentTime},t.prototype.currentAbsoluteTime=function(){return this.mediaPlayer.currentAbsoluteTime},t.prototype.currentMediaTime=function(){return this.mediaPlayer.currentMediaTime},t.prototype.presentationTimeOffsetInSec=function(){return this.mediaPlayer.presentationTimeOffsetInSec},t.prototype.getWallClockTime=function(e,t,n,a,i){return this.mediaPlayer.getWallClockTime(e,t,n,a,i)},t.prototype.presentationTimeFromPercentageOfDvrWindow=function(e){return this.mediaPlayer.presentationTimeFromPercentageOfDvrWindow(e)},t.prototype.currentType=function(){return this.mediaPlayer.type},t.prototype.currentVideoStreamList=function(){return this.mediaPlayer.currentVideoStreamList},t.prototype.currentAudioStreamList=function(){return this.mediaPlayer.currentAudioStreamList},t.prototype.videoBufferData=function(){return this.mediaPlayer.videoBufferData},t.prototype.audioBufferData=function(){return this.mediaPlayer.audioBufferData},t.prototype.currentDownloadBitrate=function(){return this.mediaPlayer.currentDownloadBitrate},t.prototype.currentPlaybackBitrate=function(){return this.mediaPlayer.currentPlaybackBitrate},t.prototype.duration=function(){return this.mediaPlayer.duration},t.prototype.ended=function(){return this.mediaPlayer.ended},t.prototype.isFullScreen=function(){return this.mediaPlayer.isFullScreen},t.prototype.muted=function(){return this.el_.videoTag_.muted||0===this.mediaPlayer.volume},t.prototype.setMuted=function(e){e?(this.el_.videoTag_.muted=!0,this.setVolume(0)):this.el_.videoTag_.muted=!1},t.prototype.paused=function(){return this.mediaPlayer.paused},t.prototype.seeking=function(){return this.mediaPlayer.seeking},t.prototype.src=function(e){return void 0===e?this.mediaPlayer.src:void this.setSrc(e)},t.prototype.enableVideo=function(){this.setSrc(this.src(),!1)},t.prototype.disableVideo=function(){this.setSrc(this.src(),!0)},t.prototype.volume=function(){return this.mediaPlayer.volume},t.prototype.setVolume=function(e){this.mediaPlayer.volume=e},t.prototype.height=function(e){return void 0===e?this.mediaPlayer.height:void(this.mediaPlayer.height=e)},t.prototype.width=function(e){return void 0===e?this.mediaPlayer.width:void(this.mediaPlayer.width=e)},t.prototype.videoHeight=function(){return this.mediaPlayer.videoHeight},t.prototype.videoWidth=function(){return this.mediaPlayer.videoWidth},t.prototype.play=function(){this.mediaPlayer.play()},t.prototype.pause=function(){this.mediaPlayer.pause()},t.prototype.setSrc=function(e,t){var n={type:this.options_.playerOptions.currentType};(n=o.default({autoPlay:!!this.options_.playerOptions.autoplay},n)).headers=this.options_.playerOptions.headers,this.updateCurrentPlayerConfigs(),u.Logger.setLogConfig(this.options_.playerOptions.traceConfig),this.options_.playerOptions.traceConfig&&p.Log.setConsoleOutputByLevel(this.options_.playerOptions.traceConfig.maxLogLevel),this.didFetchedManifest=!1;var a={},i=this.options_.currentPlayerConfigs.currentHeuristicConfigs;a.maxBufferInWallClockSec=i.maxBufferInWallClockSec,a.maxBufferInWallClockSecForCopyCodec=i.maxBufferInWallClockSecForCopyCodec,a.prerollPercent=i.preRollInWallClockSec/i.maxBufferInWallClockSec,a.livePlaybackOffsetPercent=(i.livePlaybackOffsetInWallClockSec-i.preRollInWallClockSec)/i.maxBufferInWallClockSec,a.windowSizeHeuristicsEnabled=i.windowSizeHeuristics,a.useBrowserWindowForWindowSizeRule=i.useBrowserWindowForWindowSizeRule,a.maxStreamingResolutionLimit=i.maxStreamingResolutionLimit,a.minFragmentsForBandwidthAverage=i.minFragmentsForBandwidthAverage,a.bandwidthTestWithTimeThresholdDuringLive=i.bandwidthTestWithTimeThresholdDuringLive,a.useVariableFragmentSizeMode=i.useVariableFragmentSizeMode,a.latencyHeuristicsEnabled=i.latencyHeuristicsEnabled,a.maxActiveSegmentRequests=i.maxActiveSegmentRequests,a.maxWaitTimeForFirstSegmentInMSec=i.maxWaitTimeForFirstSegmentInMSec,a.minBandwidthUsabilityPercent=i.minBandwidthUsabilityPercent,a.isAudioOnlyMode=t,a.maxTotalRetries=i.maxTotalRetries,a.ignoreRequestLatency=i.ignoreRequestLatency,a.retryMediaServerErrorInMSec=i.retryMediaServerErrorInMSec,a.defaultBandwidthKbps=i.defaultBandwidthKbps,a.enableBandwidthPersistence=i.enableBandwidthPersistence,a.retryDueToNetworkErrorInMSec=i.retryDueToNetworkErrorInMSec,a.disableSegmentQueryParamParsing=void 0!==this.options_.playerOptions.disableSegmentQueryParamParsing?this.options_.playerOptions.disableSegmentQueryParamParsing:i.disableSegmentQueryParamParsing,a.defaultGOPForMissingSegmentData=void 0!==this.options_.playerOptions.defaultGOPForMissingSegmentData?this.options_.playerOptions.defaultGOPForMissingSegmentData:i.defaultGOPForMissingSegmentData,a.minWaitTimeToGopRatioForNextSegment=void 0!==this.options_.playerOptions.minWaitTimeToGopRatioForNextSegment?this.options_.playerOptions.minWaitTimeToGopRatioForNextSegment:i.minWaitTimeToGopRatioForNextSegment,this.options_.maxSkipSegments&&(a.maxSkipSegments=this.options_.maxSkipSegments),this.options_.maxRetryPerSegment&&(a.maxRetryPerSegment=this.options_.maxRetryPerSegment),this.options_.maxTotalRetries&&(a.maxTotalRetries=this.options_.maxTotalRetries),this.options_.infiniteSegmentRetryForPreconditionFailed&&(a.infiniteSegmentRetryForPreconditionFailed=this.options_.infiniteSegmentRetryForPreconditionFailed),"QuickStart"===this.options_.heuristicProfile&&(a.preFetchDataEnabled=!1),this.options_.maxRetriesForKeyAcquireFailure&&(a.maxRetriesForKeyAcquireFailure=this.options_.maxRetriesForKeyAcquireFailure),this.options_.maxWaitTimeBetweenRetriesForKeyAcquireMS&&(a.maxWaitTimeBetweenRetriesForKeyAcquireMS=this.options_.maxWaitTimeBetweenRetriesForKeyAcquireMS),this.options_.allowMixedContent&&(a.allowMixedContent=this.options_.allowMixedContent),this.options_.getDownloadRequestParametersAsync&&(a.getDownloadRequestParametersAsync=this.options_.getDownloadRequestParametersAsync),this.options_.isClosedCaptions401FixEnabled&&(a.isClosedCaptions401FixEnabled=this.options_.isClosedCaptions401FixEnabled),void 0!==this.options_.playerOptions.maxRetryPerSegment&&(a.maxRetryPerSegment=this.options_.playerOptions.maxRetryPerSegment),void 0!==this.options_.playerOptions.maxSkipSegments&&(a.maxSkipSegments=this.options_.playerOptions.maxSkipSegments),void 0!==this.options_.playerOptions.maxTotalRetries&&(a.maxTotalRetries=this.options_.playerOptions.maxTotalRetries),void 0!==this.options_.playerOptions.infiniteSegmentRetryForPreconditionFailed&&(a.infiniteSegmentRetryForPreconditionFailed=this.options_.playerOptions.infiniteSegmentRetryForPreconditionFailed),void 0!==this.options_.playerOptions.maxRetriesForKeyAcquireFailure&&(a.maxRetriesForKeyAcquireFailure=this.options_.playerOptions.maxRetriesForKeyAcquireFailure),void 0!==this.options_.playerOptions.maxWaitTimeBetweenRetriesForKeyAcquireMS&&(a.maxWaitTimeBetweenRetriesForKeyAcquireMS=this.options_.playerOptions.maxWaitTimeBetweenRetriesForKeyAcquireMS),void 0!==this.options_.playerOptions.retryMediaInMSec&&(a.retryMediaInMSec=this.options_.playerOptions.retryMediaInMSec),void 0!==this.options_.playerOptions.retryMediaServerErrorInMSec&&(a.retryMediaServerErrorInMSec=this.options_.playerOptions.retryMediaServerErrorInMSec),void 0!==this.options_.playerOptions.defaultBandwidthKbps&&(a.defaultBandwidthKbps=this.options_.playerOptions.defaultBandwidthKbps),void 0!==this.options_.playerOptions.enableBandwidthPersistence&&(a.enableBandwidthPersistence=this.options_.playerOptions.enableBandwidthPersistence),void 0!==this.options_.playerOptions.retryPresentationInMSec&&(a.retryPresentationInMSec=this.options_.playerOptions.retryPresentationInMSec),void 0!==this.options_.playerOptions.retryDueToNetworkErrorInMSec&&(a.retryDueToNetworkErrorInMSec=this.options_.playerOptions.retryDueToNetworkErrorInMSec),void 0!==this.options_.playerOptions.waitTimeForRetryOnNoDataTimeouts&&(a.waitTimeForRetryOnNoDataTimeouts=this.options_.playerOptions.waitTimeForRetryOnNoDataTimeouts),void 0!==this.options_.playerOptions.maxRequestTimeoutInMS&&(a.maxTimeoutInMSecDefault=this.options_.playerOptions.maxRequestTimeoutInMS),void 0!==this.options_.playerOptions.audioTimeoutInMSec&&(a.audioTimeoutInMSec=this.options_.playerOptions.audioTimeoutInMSec),void 0!==this.options_.playerOptions.textTimeoutInMSec&&(a.textTimeoutInMSec=this.options_.playerOptions.textTimeoutInMSec),void 0!==this.options_.playerOptions.minQualityTimeoutInMSec&&(a.minQualityTimeoutInMSec=this.options_.playerOptions.minQualityTimeoutInMSec),void 0!==this.options_.playerOptions.initBandwidthTimeoutInMSec&&(a.initBandwidthTimeoutInMSec=this.options_.playerOptions.initBandwidthTimeoutInMSec),void 0!==this.options_.playerOptions.noDataTimeoutInMSec&&(a.noDataTimeoutInMSec=this.options_.playerOptions.noDataTimeoutInMSec),void 0!==this.options_.playerOptions.minTimeoutInMSec&&(a.minTimeoutInMSec=this.options_.playerOptions.minTimeoutInMSec),void 0!==this.options_.playerOptions.manifestTimeoutInMSec&&(a.manifestTimeoutInMSec=this.options_.playerOptions.manifestTimeoutInMSec),void 0!==this.options_.enableHybridMode&&(a.enableHybridMode=this.options_.enableHybridMode),void 0!==this.options_.enableRaiseDownloadStartedEvent&&(a.enableRaiseDownloadStartedEvent=this.options_.enableRaiseDownloadStartedEvent),void 0!==this.options_.prefetchedManifestPromise&&(a.prefetchedManifestPromise=this.options_.prefetchedManifestPromise),void 0!==this.options_.enableFinegrainedBandwidthTelemetry&&(a.enableFinegrainedBandwidthTelemetry=this.options_.enableFinegrainedBandwidthTelemetry),void 0!==this.options_.isImprovedSourceBufferLogEnabled&&(a.isImprovedSourceBufferLogEnabled=this.options_.isImprovedSourceBufferLogEnabled),void 0!==this.options_.prefetchAudioInitSegmentQuality&&(a.prefetchAudioInitSegmentQuality=this.options_.prefetchAudioInitSegmentQuality),void 0!==this.options_.prefetchVideoInitSegmentQuality&&(a.prefetchVideoInitSegmentQuality=this.options_.prefetchVideoInitSegmentQuality),n.userConfig=a;var r=this.options_.playerOptions.sourceOptions.protectionInfo,s=null;if(r){for(var c=0;c<r.length;c++)r[c].type===b.protectionType.AES&&r[c].authenticationToken&&(s||(s={}),s[r[c].type]=r[c].authenticationToken);s&&(n=o.default({authenticationTokens:s},n))}this.mediaPlayer.setSrc(e,n)},t.prototype.load=function(){},t.prototype.supportsFullScreen=function(){return!0},t.prototype.enterFullScreen=function(){this.mediaPlayer.requestFullScreen()},t.prototype.exitFullScreen=function(){this.mediaPlayer.exitFullscreen()},t.prototype.setXmlHttpRequestFactory=function(e){this.mediaPlayer.setXmlHttpRequestFactory(e)},t.prototype.playbackRate=function(){return this.mediaPlayer.playbackRate()},t.prototype.setPlaybackRate=function(e){this.mediaPlayer.setPlaybackRate(e)},t.prototype.restartCheckMediaWorkflowIfNeeded=function(){this.mediaPlayer.restartCheckMediaWorkflowIfNeeded()},t.prototype.getTag=function(){return this.el_.videoTag_||this.el_},t.prototype.readyState=function(){return this.getTag().readyState},t}(s.default);g.isSupported=function(){return!!r.default.MediaSource},g.canPlaySource=function(e){return l.default.canSupportFormats(e,this.supportedFormats)},g.supportedFormats={},g.supportedFormats[b.StreamingFormatMimeType.Dash]=[b.protectionType.AES],g._defaultVideoCodecMime='video/mp4; codecs="avc1.42001E"',g._defaultAudioCodecMime='audio/mp4; codecs="mp4a.40.2"',g.CHECK_PENDING="pending",g.CHECK_DONE="done",g.prototype.setupTriggers=function(e){e.addEventListener(p.EventName.volumechange,_.bind(this,g.onPassthroughHandler)),e.addEventListener(p.EventName.ended,_.bind(this,g.onPassthroughHandler)),e.addEventListener(p.EventName.timeupdate,_.bind(this,g.onPassthroughHandler)),e.addEventListener(p.EventName.pause,_.bind(this,g.onPassthroughHandler)),e.addEventListener(p.EventName.play,_.bind(this,g.onPassthroughHandler)),e.addEventListener(p.EventName.playing,_.bind(this,g.onPassthroughHandler)),e.addEventListener(p.EventName.seeking,_.bind(this,g.onPassthroughHandler)),e.addEventListener(p.EventName.seeked,_.bind(this,g.onPassthroughHandler)),e.addEventListener(p.EventName.suspend,_.bind(this,g.onSuspend)),e.addEventListener(p.EventName.loadstart,_.bind(this,g.onPassthroughHandler)),e.addEventListener(p.EventName.loadedmetadata,_.bind(this,g.onPassthroughHandler)),e.addEventListener(p.EventName.loadeddata,_.bind(this,g.onPassthroughHandler)),e.addEventListener(p.EventName.fullscreenchange,_.bind(this,g.onPassthroughHandler)),e.addEventListener(p.EventName.waiting,_.bind(this,g.onPassthroughHandler)),e.addEventListener(p.EventName.canplaythrough,_.bind(this,g.onPassthroughHandler)),e.addEventListener(p.EventName.error,_.bind(this,g.onError)),e.addEventListener(p.EventName.durationchange,_.bind(this,g.onPassthroughHandler)),e.addEventListener(p.EventName.downloadbitratechanged,_.bind(this,g.onPassthroughHandler)),e.addEventListener(p.EventName.playbackbitratechanged,_.bind(this,g.onPassthroughHandler)),e.addEventListener(p.EventName.ratechange,_.bind(this,g.onPassthroughHandler)),e.addEventListener(p.EventName.emsgAvailable,_.bind(this,g.onPassthroughHandler)),e.addEventListener(p.EventName.decryptorInitialized,_.bind(this,g.onPassthroughHandler)),e.addEventListener(p.EventName.aesKeyFetchCompleted,_.bind(this,g.onPassthroughHandler)),e.addEventListener(p.EventName.decryptionFailed,_.bind(this,g.onPassthroughHandler)),e.addEventListener(p.EventName.manifestParsingCompleted,_.bind(this,g.onPassthroughHandler)),e.addEventListener(p.EventName.manifestFetchCompleted,_.bind(this,g.onPassthroughHandler)),e.addEventListener(p.EventName.initialBandwidthEstimationCompleted,_.bind(this,g.onPassthroughHandler)),e.addEventListener(p.EventName.mediaSourceSrcSetResolved,_.bind(this,g.onPassthroughHandler)),e.addEventListener(p.EventName.mediaSourceSrcSetRequested,_.bind(this,g.onPassthroughHandler)),e.addEventListener(p.EventName.unsupportedTracksRemoved,_.bind(this,g.onPassthroughHandler)),e.addEventListener("saveMemoryLog",_.bind(this,g.onPassthroughHandler)),e.addEventListener("drmselected",_.bind(this,g.onPassthroughHandler)),e.addEventListener(p.EventName.onDownloadRequestStarted,_.bind(this,g.onPassthroughHandler)),e.addEventListener(p.EventName.onDownloadRequestEnded,_.bind(this,g.onPassthroughHandler)),e.addEventListener(p.EventName.enhancedTrackReady,_.bind(this,g.onPassthroughHandler)),e.addEventListener(p.EventName.hybridPlaybackEnabled,_.bind(this,g.onPassthroughHandler)),e.addEventListener(p.EventName.prefetchedManifestPromiseResolved,_.bind(this,g.onPassthroughHandler)),e.addEventListener(p.EventName.autoplayfailed,_.bind(this,g.onPassthroughHandler))},g.onPassthroughHandler=function(e){e.type===p.EventName.manifestFetchCompleted&&(this.didFetchedManifest=!0),this.trigger(e)},g.onSuspend=function(){this.removeClass("vjs-waiting")},g.onError=function(){var e=this.mediaPlayer.error;s.default.raiseError.call(this,"AzureHtml5JS",e.code,e.message,e.serviceErrorCode,e.correlationId,e.isErrorExpected)},g.prototype.isLiveStartupError=function(){var e=this.mediaPlayer.error,t=e&&e.code===p.ErrorCode.networkErrHttpUrlNotFound&&!this.didFetchedManifest,n=e&&e.code===p.ErrorCode.srcErrParsePresentation,a=e&&e.code===p.ErrorCode.errUnknown;return e&&this.isLive()&&e.code===p.ErrorCode.srcErrLiveNoChunks||t||n||a},g.prototype.movingMediaElementInDOM=!h.IS_IOS,g.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);c.default.disposeMediaElement(e.videoTag_),e.videoTag_=null}},f.default.options.azureHtml5JS={},d.default.registerComponent("AzureHtml5JS",g),s.default.registerTech("AzureHtml5JS",g),n.default=g,t.exports=n.default},{"../ampDefs.js":2,"../video.js/src/js/component.js":16,"../video.js/src/js/player.js":63,"../video.js/src/js/tech/html5.js":72,"../video.js/src/js/tech/tech.js":75,"../video.js/src/js/utils/browser.js":93,"../video.js/src/js/utils/dom.js":96,"../video.js/src/js/utils/fn.js":98,"../video.js/src/js/video.js":111,"global/window":169,"object.assign":162}],8:[function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.charAt(0).toUpperCase()+e.slice(1);I["set"+t]=function(e){return this.el_["set"+t]?this.el_["set"+t](e):null}}function o(e){I[e]=function(){var t=e.charAt(0).toUpperCase()+e.slice(1);return this.el_["get"+t]?this.el_["get"+t]():null}}n.__esModule=!0;for(var s=i(e("global/window")),c=i(e("global/document")),d=i(e("object.assign")),l=i(e("../video.js/src/js/tech/tech.js")),f=i(e("../video.js/src/js/tech/flash.js")),p=i(e("../video.js/src/js/component.js")),m=i(e("../video.js/src/js/player.js")),_=i(e("../video.js/src/js/video.js")),h=e("../video.js/src/js/utils/time-ranges.js"),b=a(e("../video.js/src/js/utils/dom.js")),g=a(e("../video.js/src/js/utils/fn.js")),v=a(e("../video.js/src/js/utils/browser.js")),y=a(e("../video.js/src/js/utils/url.js")),S=a(e("../ampDefs.js")),D=function(e){function t(n,a){var i=this;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.call(this,n,a),this.manualTimeUpdatesOff(),n.source?(n.startTime&&this.ready(function(){this.load(),this.play(),this.currentTime(n.startTime)}),s.default.amp=s.default.amp||{},s.default.amp.FlashSS=s.default.amp.FlashSS||{},s.default.amp.FlashSS.onEvent=t.onEvent,this.ready(this.setupTriggers),(v.IS_IE||v.IS_EDGE)&&function(){var e=g.bind(i,i.mouseUp);s.default.addEventListener("mouseup",e,!1),i.on("dispose",function(){s.default.removeEventListener("mouseup",e)})}(),void(this.state=l.default.ReadyState.HAVE_NOTHING)):(u.Logger.setLogConfig(this.options_.playerOptions.traceConfig),void this.triggerReady())}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this)},t.prototype.createEl=function(){var e=this.options_,n=m.default.getScriptRootURL();!e.swf&&n&&(e.swf=n+"/techs/StrobeMediaPlayback.2.0.swf");var a=e.source,i=e.techId,r=d.default({playerId:this.id(),controlBarMode:"none",playButtonOverlay:"false",bufferingOverlay:"false",AdaptiveStreamingPlugin_retryLive:"true",autoPlay:!0,preload:e.preload,loop:e.loop,muted:e.muted,sendRawDataToJS:e.playerOptions.cea708CaptionsSettings&&e.playerOptions.cea708CaptionsSettings.enabled},e.flashVars),o=d.default({menu:!1,wmode:"opaque",bgcolor:"#000000"},e.params),c=d.default({id:i,name:i,class:"vjs-tech",tabindex:"-1"},e.attributes);if(this.flashSS=this,this.flashSS.lastSeekTarget_=NaN,this.reset(),a&&(a.src=t.getFullSourceURL(a.src),t._src=a.src,r.src=a.src,a.protectionInfo))for(var l=0;l<a.protectionInfo.length;l++)a.protectionInfo[l].type===S.protectionType.AES&&a.protectionInfo[l].authenticationToken&&(r.AdaptiveStreamingPlugin_encryptionKeyToken=a.protectionInfo[l].authenticationToken);this.updateCurrentPlayerConfigs();var p=e.currentPlayerConfigs.currentHeuristicConfigs;if(r.AdaptiveStreamingPlugin_minimumBufferTimeInSeconds=p.preRollInWallClockSec,r.AdaptiveStreamingPlugin_maximumBufferTimeInSeconds=p.maxBufferInWallClockSec,r.AdaptiveStreamingPlugin_livePlaybackOffsetInSecond=p.livePlaybackOffsetInWallClockSec,t._heuristicSettings.minimumBufferTimeInSeconds=p.preRollInWallClockSec,t._heuristicSettings.maximumBufferTimeInSeconds=p.maxBufferInWallClockSec,t._heuristicSettings.livePlaybackOffsetInSecond=p.livePlaybackOffsetInWallClockSec,t._isTraceEnabled=e.isTraceEnabled,u.Logger.setLogConfig(e.playerOptions.traceConfig),e.playerOptions.traceConfig&&e.playerOptions.traceConfig.maxLogLevel)switch(r.AdaptiveStreamingPlugin_enableOSMFLogging=!0,s.default.org.osmf.player.debug.logs=t.onLogMessage,e.playerOptions.traceConfig.maxLogLevel){case 0:r.AdaptiveStreamingPlugin_minimalLogLevel=0,r.AdaptiveStreamingPlugin_enableOSMFLogging=!1,s.default.org.osmf.player.debug.logs=void 0;break;case 1:r.AdaptiveStreamingPlugin_minimalLogLevel=2;break;case 2:r.AdaptiveStreamingPlugin_minimalLogLevel=1;break;default:r.AdaptiveStreamingPlugin_minimalLogLevel=0}else r.AdaptiveStreamingPlugin_enableOSMFLogging=!1,s.default.org.osmf.player.debug.logs=void 0;return t._traceConfig=e.playerOptions.traceConfig,this.el_=f.default.embed(e.swf,r,o,c),this.el_.tech=this,this.el_},t.prototype.readyState=function(){return this.state},t.prototype.autoplay=function(){return!!this.options_.playerOptions.autoplay},t.prototype.setAutoplay=function(){},t.prototype.isLive=function(){return!(!this.el_.getStreamType||"dvr"!==this.el_.getStreamType())},t.prototype.buffered=function(){return this.el_.getBufferLength?h.createTimeRange(this.currentTime(),this.currentTime()+this.el_.getBufferLength()):null},t.prototype.setCurrentTime=function(e){this.el_.setCurrentTime&&(e=(e=e<=this.duration()?e:this.duration())>0?e:0,this.lastSeekTarget_=e,this.el_.setCurrentTime(e))},t.prototype.currentTime=function(){return this.seeking()?this.lastSeekTarget_||0:this.el_.getCurrentTime?this.el_.getCurrentTime():null},t.prototype.currentAbsoluteTime=function(){},t.prototype.currentMediaTime=function(){return this.el_.getCurrentMediaTime?this.el_.getCurrentMediaTime():null},t.prototype.presentationTimeOffsetInSec=function(){},t.prototype.currentVideoStreamList=function(){return t._currentVideoStreamList},t.prototype.currentAudioStreamList=function(){return t._currentAudioStreamList},t.prototype.videoBufferData=function(){return t._videoBufferData},t.prototype.audioBufferData=function(){return t._audioBufferData},t.prototype.currentDownloadBitrate=function(){if(t._currentVideoStreamList&&this.el_.getCurrentDynamicStreamIndex){var e=this.el_.getCurrentDynamicStreamIndex();return t._currentVideoStreamList.streams[0].tracks[e].bitrate}},t.prototype.currentPlaybackBitrate=function(){},t.prototype.ended=function(){return t._ended},t.prototype.isFullscreen=function(){return this.isFullscreen()},t.prototype.src=function(e){return void 0===e?this.currentSrc():(this.el_.setAutoPlay&&this.el_.setMediaResourceURL&&(this.reset(),e=t.getFullSourceURL(e),t._src=e,this.mediaError=null,this.el_.setAutoPlay(!0),this.el_.setMediaResourceURL(e)),void(this.state=l.default.ReadyState.HAVE_NOTHING))},t.prototype.currentSrc=function(){return t._src?t._src:this.el_.getCurrentSrc?this.el_.getCurrentSrc():null},t.prototype.load=function(){this.el_.load&&this.el_.load()},t.prototype.play=function(){this.el_.play2&&this.el_.play2()},t.prototype.pause=function(){this.el_.pause&&this.el_.pause()},t.prototype.supportsFullScreen=function(){return!1},t.prototype.enterFullScreen=function(){return!1},t.prototype.getWallClockTime=function(){},t.prototype.restartCheckMediaWorkflowIfNeeded=function(){},t}(l.default),I=D.prototype,x="controls,muted,volume".split(","),C="duration,paused,seeking,videoHeight,videoWidth".split(","),O=0;O<x.length;O++)o(x[O]),r(x[O]);for(O=0;O<C.length;O++)o(C[O]);void 0===s.default.org&&(s.default.org={}),void 0===s.default.org.osmf&&(s.default.org.osmf={}),void 0===s.default.org.osmf.player&&(s.default.org.osmf.player={}),void 0===s.default.org.osmf.player.debug&&(s.default.org.osmf.player.debug={}),D.onLogMessage=function(e){for(var t=e.split("###"),n=0;n<t.length;n++)u.Logger.verbose(u.Logger.Area.flashSS,t[n])},D.isSupported=function(){return f.default.isSupported()},D.isVersionSupported=function(e){return f.default.isVersionSupported(e)},D.canPlaySource=function(e){return m.default.canSupportFormats(e,this.supportedFormats)},D.supportedFormats={},D.supportedFormats[S.StreamingFormatMimeType.Smooth]=[S.protectionType.AES],D.prototype.setupTriggers=function(){this.el_.addEventListener("switchingChange","amp.FlashSS.onEvent")},D.prototype.mouseUp=function(e){var t=c.default.elementFromPoint(e.clientX,e.clientY),n=this.el().parentNode;n&&(t===this.el()?n.focus():n.blur())},D.onReady=function(e){u.Logger.verbose(u.Logger.Area.flashSS,e+" - Ready");var t=b.getEl(e),n=t&&t.tech;n&&n.el()&&D.checkReady(n)},D.checkReady=function(e){return!!e.el()&&(e.el().getBufferTime?(e.triggerReady(),D._videoBufferData=new u.FlashSS.BufferData(e.el(),u.FlashSS.MediaType.video),D._audioBufferData=new u.FlashSS.BufferData(e.el(),u.FlashSS.MediaType.audio),!0):(this.setTimeout(function(){D.checkReady(e)},50),!1))},D._firstReady=!0,D._src=null,D._ended=!1,D._heuristicSettings={},D._currentVideoStreamList=void 0,D._currentAudioStreamList=void 0,D._videoBufferData=void 0,D._audioBufferData=void 0,D._traceConfig=void 0,D._passThroughEvents=["seeking","durationchange","loadstart","waiting","volumechange"],D.prototype.forcePauseToPlayStateTransition=function(){try{!this.stateTransitionForced&&this.currentTime()>.05&&!this.isLive()&&(u.Logger.warning(u.Logger.Area.flashSS," Forcing a state transition to play by pausing first."),this.pause(),this.play(),this.stateTransitionForced=!0)}catch(e){}},D.onEvent=function(e,t,n){try{var a=b.getEl(e),i=a&&a.tech;if(!i||!i.el())return void u.Logger.warning(u.Logger.Area.flashSS," Got an event from stale flashSS tech "+e+" - Event:"+t);if(-1!==D._passThroughEvents.indexOf(t)&&i.trigger(t),!i.firstPlayingOccurredWithAutoplayFalse_&&"timeupdate"===t)return void i.forcePauseToPlayStateTransition();switch(t){case"onJavaScriptBridgeCreated":D.onReady(e),i.trigger("javascriptBridgeCreated");break;case"complete":D._ended=!0,i.trigger("ended");break;case"emptied":D._firstReady&&(D._currentVideoStreamList||(D._currentVideoStreamList=new u.FlashSS.VideoStreamList(i.el()),D._currentAudioStreamList=new u.FlashSS.AudioStreamList(i.el()),0===D._currentAudioStreamList.streams.length&&(D._currentAudioStreamList=void 0)),i.trigger("loadeddata"),i.trigger("loadedmetadata"),this.state=l.default.ReadyState.HAVE_METADATA,D._firstReady=!1,i.el().setAutoDynamicStreamSwitch(!0));break;case"downloadevent":i.downloadEvent(n),this.state===l.default.ReadyState.HAVE_METADATA&&(this.state=l.default.ReadyState.HAVE_CURRENT_DATA);break;case"play":i.options_.playerOptions.autoplay||i.firstPlayingOccurredWithAutoplayFalse_?(i.firstPlayingOccurredWithAutoplayFalse_||(i.trigger("canplaythrough"),i.firstPlayingOccurredWithAutoplayFalse_=!0),i.trigger("play"),i.trigger("playing")):(i.pause(),i.trigger("canplaythrough"),i.firstPlayingOccurredWithAutoplayFalse_=!0),this.state=l.default.ReadyState.HAVE_FUTURE_DATA;break;case"pause":i.firstPlayingOccurredWithAutoplayFalse_&&i.trigger("pause");break;case"seeked":i.firstPlayingOccurredWithAutoplayFalse_&&i.trigger("seeked");break;case"timeupdate":i.firstPlayingOccurredWithAutoplayFalse_&&i.trigger("timeupdate");break;case"error":i.currentSrc()&&(i.mediaError=n.code,l.default.raiseError.call(i,"flashss",D.getMediaErrorCode(n.code,n.detail),D.getMediaErrorMsg(n.code)),i.firstPlayingOccurredWithAutoplayFalse_=!1);break;case"switchingChange":i.trigger("downloadbitratechanged")}"timeupdate"!==t&&"progress"!==t&&u.Logger.verbose(u.Logger.Area.flashSS,e+" - Event:"+t)}catch(n){throw u.Logger.error(u.Logger.Area.flashSS,e+" - Event:"+t+" - error:"+n),n}},D.prototype.downloadEvent=function(e){function t(e,t){!e.isAudio&&e.rawData&&(t.mediaDownload.rawSampleTimeScale=e.rawSampleTimeScale,t.mediaDownload.data=function(e){for(var t=s.default.atob(e),n=t.length,a=new Uint8Array(n),i=0;n>i;i++)a[i]=t.charCodeAt(i);return a.buffer}(e.rawData),e.rawSampleTimeScale&&(t.mediaDownload.presentationTimeOffsetInSec=e.presentationTimeOffset/e.rawSampleTimeScale))}if(e&&e.type){var n=void 0;switch(e.type){case"downloadStarted":(n=e.isAudio?D._audioBufferData:D._videoBufferData).downloadRequested=n.downloadRequested||{},n.downloadRequested.url=e.url,n.downloadRequested.bitrate=e.bitrate,n.downloadRequested.mediaTime=e.mediaTime,n.dispatchEvent(S.bufferDataEventName.downloadrequested);break;case"downloadCompleted":(n=e.isAudio?D._audioBufferData:D._videoBufferData).downloadCompleted=n.downloadCompleted||{},n.downloadCompleted.measuredBandwidth=8*e.downloadBytes/e.downloadTime,n.downloadCompleted.totalBytes=e.downloadBytes,n.downloadCompleted.totalDownloadMs=1e3*e.downloadTime,n.downloadCompleted.mediaDownload=n.downloadCompleted.mediaDownload||{},n.downloadCompleted.mediaDownload.url=e.url,n.downloadCompleted.mediaDownload.bitrate=e.bitrate,n.downloadCompleted.mediaDownload.mediaTime=e.mediaTime,t(e,n.downloadCompleted),n.dispatchEvent(S.bufferDataEventName.downloadcompleted);break;case"downloadDecrypted":(n=e.isAudio?D._audioBufferData:D._videoBufferData).decryptionCompleted=n.decryptionCompleted||{},n.decryptionCompleted.mediaDownload=n.downloadCompleted.mediaDownload||{},n.decryptionCompleted.mediaDownload.mediaTime=e.mediaTime,t(e,n.decryptionCompleted),n.dispatchEvent(S.bufferDataEventName.downloaddecrypted);break;case"mediaError":(n=e.isAudio?D._audioBufferData:D._videoBufferData).downloadFailed=n.downloadFailed||{},n.downloadFailed.code=e.code,n.downloadFailed.message=e.message,n.downloadFailed.mediaDownload=n.downloadFailed.mediaDownload||{},n.downloadFailed.mediaDownload.url=e.url,n.downloadFailed.mediaDownload.bitrate=e.bitrate,n.downloadFailed.mediaDownload.mediaTime=e.mediaTime,n.dispatchEvent(S.bufferDataEventName.downloadfailed),l.default.raiseError.call(this,"flashss",D.getMediaErrorCode(e.code,e.detail),D.getMediaErrorMsg(e.code))}}},D.getMediaErrorCode=function(e,t){switch(e){case D.errorCodes.OSMF_HTTP_GET_FAILED:case D.errorCodes.OSMF_NETCONNECTION_REJECTED:case D.errorCodes.OSMF_NETCONNECTION_APPLICATION_INVALID:case D.errorCodes.OSMF_NETCONNECTION_FAILED:case D.errorCodes.FRAGMENT_DOWNLOAD_ERROR:case D.errorCodes.MANIFEST_DOWNLOAD_ERROR:return D.getHttpErrorCode(t);case D.errorCodes.OSMF_NETCONNECTION_TIMEOUT:case D.errorCodes.MANIFEST_DOWNLOAD_TIMEOUT:case D.errorCodes.FRAGMENT_DOWNLOAD_TIMEOUT:return S.errorCode.networkErrTimeout;case D.errorCodes.MANIFEST_NOT_SUPPORTED_ELEMENT:case D.errorCodes.MANIFEST_NOT_SUPPORTED_AUDIO_TRACK:case D.errorCodes.MANIFEST_NOT_SUPPORTED_VIDEO_TRACK:case D.errorCodes.VIDEO_STREAM_MISSING:case D.errorCodes.MANIFEST_LIVE_DVRWINDOWLENGTH_TOO_SMALL:return S.errorCode.srcErrUnsupportedPresentation;case D.errorCodes.TOO_EARLY_TO_JOIN_LIVE_EVENT:return S.errorCode.srcErrLiveNoSegments;case D.errorCodes.MANIFEST_PARSE_TIMEOUT:case D.errorCodes.MANIFEST_MAJOR_VERSION_MISSING:case D.errorCodes.MANIFEST_MINOR_VERSION_MISSING:case D.errorCodes.MANIFEST_STREAMINDEX_MISSING:case D.errorCodes.MANIFEST_UNEXPECTED_ROOT_ELEMENT:case D.errorCodes.MANIFEST_UNEXPECTED_ROOT_ATTRIBUTE:case D.errorCodes.MANIFEST_STREAMINFO_TYPE_MISSING:case D.errorCodes.MANIFEST_STREAMINFO_URL_MISSING:case D.errorCodes.MANIFEST_CHUNK_ATTRIBUTE_MISSING:case D.errorCodes.MANIFEST_INVALID_ATTRIBUTE_VALUE:case D.errorCodes.INVALID_SMOOTH_DYNAMIC_RESOURCE:case D.errorCodes.MANIFEST_AUDIO_QUALITYLEVEL_BITRATE_MISSING:case D.errorCodes.MANIFEST_AUDIO_QUALITYLEVEL_AUDIOTAG_MISSING:case D.errorCodes.MANIFEST_VIDEO_QUALITYLEVEL_BITRATE_MISSING:case D.errorCodes.MANIFEST_VIDEO_QUALITYLEVEL_FOURCC_MISSING:case D.errorCodes.MANIFEST_VIDEO_QUALITYLEVEL_MAXWIDTH_MISSING:case D.errorCodes.MANIFEST_VIDEO_QUALITYLEVEL_MAXHEIGHT_MISSING:case D.errorCodes.MANIFEST_UNEXPECTED_PROTECTION_HEADER:case D.errorCodes.MANIFEST_LIVE_LOOKAHEADFRAGMENTCOUNT_MISSING:return S.errorCode.srcErrParsePresentation;case D.errorCodes.OSMF_NETSTREAM_PLAY_FAILED:case D.errorCodes.OSMF_NETSTREAM_FILE_STRUCTURE_INVALID:case D.errorCodes.OSMF_IO_ERROR:case D.errorCodes.OSMF_SECURITY_ERROR:case D.errorCodes.OSMF_ASYNC_ERROR:case D.errorCodes.OSMF_ARGUMENT_ERROR:case D.errorCodes.OSMF_URL_SCHEME_INVALID:case D.errorCodes.OSMF_MEDIA_LOAD_FAILED:case D.errorCodes.OSMF_PLUGIN_VERSION_INVALID:case D.errorCodes.OSMF_PLUGIN_IMPLEMENTATION_INVALID:case D.errorCodes.OSMF_SOUND_PLAY_FAILED:case D.errorCodes.OSMF_NETSTREAM_STREAM_NOT_FOUND:case D.errorCodes.OSMF_DVRCAST_SUBSCRIBE_FAILED:case D.errorCodes.OSMF_DVRCAST_CONTENT_OFFLINE:case D.errorCodes.OSMF_DVRCAST_STREAM_INFO_RETRIEVAL_FAILED:case D.errorCodes.OSMF_F4M_FILE_INVALID:case D.errorCodes.CANNOT_SET_AUDIO_STREAM_INDEX:case D.errorCodes.PLUGIN_INVALID_PARAM:case D.errorCodes.PLUGIN_NULL_PARAM:return S.errorCode.srcErrUnknown;case D.errorCodes.ENCRYPTIONKEY_DOWNLOAD_ERROR:case D.errorCodes.ENCRYPTIONKEY_DOWNLOAD_AUTH_ERROR:case D.errorCodes.ENCRYPTIONKEY_DOWNLOAD_TIMEOUT:case D.errorCodes.ENCRYPTIONKEYURL_TOKEN_VERIFICATION_ERROR:return S.errorCode.encryptErrKeyAcquire;case D.errorCodes.FRAGMENT_DECRYPT_ERROR:return S.errorCode.encryptErrDecryption;default:return S.errorCode.errUnknown}},D.getHttpErrorCode=function(e){var t=S.errorCode.networkErrUnknown;if(e){var n=e.match(/^httpStatus:([0-9]+)/);2===n.length&&(t=S.httpErrorCode[n[1]]||t)}return t},D.errorCodes={OSMF_IO_ERROR:1,OSMF_SECURITY_ERROR:2,OSMF_ASYNC_ERROR:3,OSMF_ARGUMENT_ERROR:4,OSMF_URL_SCHEME_INVALID:5,OSMF_HTTP_GET_FAILED:6,OSMF_MEDIA_LOAD_FAILED:7,OSMF_PLUGIN_VERSION_INVALID:8,OSMF_PLUGIN_IMPLEMENTATION_INVALID:9,OSMF_SOUND_PLAY_FAILED:10,OSMF_NETCONNECTION_REJECTED:11,OSMF_NETCONNECTION_APPLICATION_INVALID:12,OSMF_NETCONNECTION_FAILED:13,OSMF_NETCONNECTION_TIMEOUT:14,OSMF_NETSTREAM_PLAY_FAILED:15,OSMF_NETSTREAM_STREAM_NOT_FOUND:16,OSMF_NETSTREAM_FILE_STRUCTURE_INVALID:17,OSMF_NETSTREAM_NO_SUPPORTED_TRACK_FOUND:18,OSMF_DRM_SYSTEM_UPDATE_ERROR:19,OSMF_DVRCAST_SUBSCRIBE_FAILED:20,OSMF_DVRCAST_CONTENT_OFFLINE:21,OSMF_DVRCAST_STREAM_INFO_RETRIEVAL_FAILED:22,OSMF_F4M_FILE_INVALID:23,MANIFEST_DOWNLOAD_TIMEOUT:1e3,MANIFEST_PARSE_TIMEOUT:1001,MANIFEST_DOWNLOAD_ERROR:1002,MANIFEST_MAJOR_VERSION_MISSING:1003,MANIFEST_MINOR_VERSION_MISSING:1004,MANIFEST_STREAMINDEX_MISSING:1005,MANIFEST_UNEXPECTED_ROOT_ELEMENT:1006,MANIFEST_UNEXPECTED_ROOT_ATTRIBUTE:1007,MANIFEST_STREAMINFO_TYPE_MISSING:1008,MANIFEST_STREAMINFO_URL_MISSING:1009,MANIFEST_AUDIO_QUALITYLEVEL_BITRATE_MISSING:1010,MANIFEST_AUDIO_QUALITYLEVEL_AUDIOTAG_MISSING:1011,MANIFEST_VIDEO_QUALITYLEVEL_BITRATE_MISSING:1012,MANIFEST_VIDEO_QUALITYLEVEL_FOURCC_MISSING:1013,MANIFEST_VIDEO_QUALITYLEVEL_MAXWIDTH_MISSING:1014,MANIFEST_VIDEO_QUALITYLEVEL_MAXHEIGHT_MISSING:1015,MANIFEST_CHUNK_ATTRIBUTE_MISSING:1016,MANIFEST_NOT_SUPPORTED_ELEMENT:1017,MANIFEST_NOT_SUPPORTED_AUDIO_TRACK:1018,MANIFEST_NOT_SUPPORTED_VIDEO_TRACK:1019,MANIFEST_INVALID_ATTRIBUTE_VALUE:1020,INVALID_SMOOTH_DYNAMIC_RESOURCE:1021,FRAGMENT_DOWNLOAD_TIMEOUT:1022,FRAGMENT_DOWNLOAD_ERROR:1023,CANNOT_SET_AUDIO_STREAM_INDEX:1024,VIDEO_STREAM_MISSING:1025,MANIFEST_LIVE_LOOKAHEADFRAGMENTCOUNT_MISSING:1026,PLUGIN_INVALID_PARAM:1027,PLUGIN_NULL_PARAM:1028,MANIFEST_LIVE_DVRWINDOWLENGTH_TOO_SMALL:1029,TOO_EARLY_TO_JOIN_LIVE_EVENT:1030,MANIFEST_UNEXPECTED_PROTECTION_HEADER:1048,ENCRYPTIONKEY_DOWNLOAD_ERROR:1049,ENCRYPTIONKEY_DOWNLOAD_AUTH_ERROR:1050,ENCRYPTIONKEY_DOWNLOAD_TIMEOUT:1051,ENCRYPTIONKEYURL_TOKEN_VERIFICATION_ERROR:1052,FRAGMENT_DECRYPT_ERROR:1053},D.getMediaErrorMsg=function(e){for(var t in D.errorCodes)if(D.errorCodes.hasOwnProperty(t)&&D.errorCodes[t]===e)return t;return e},D.getFullSourceURL=function(e){return 0===(e=y.getAbsoluteURL(e)).indexOf("//")&&(e=s.default.location.protocol+e),e},D.prototype.state,D.prototype.reset=function(){D._firstReady=!0,D._ended=!1,D._src=null,D._currentVideoStreamList=void 0,D._currentAudioStreamList=void 0,this.flashSS.firstPlayingOccurredWithAutoplayFalse_=!1,this.stateTransitionForced=!1},D.prototype.setPlaybackRate=function(){},D.prototype.isReloadNeeded=function(){var e=this.options_.currentPlayerConfigs;return null==D._src||!e||!e.currentHeuristicConfigs||D._heuristicSettings.minimumBufferTimeInSeconds!==e.currentHeuristicConfigs.preRollInWallClockSec||D._heuristicSettings.maximumBufferTimeInSeconds!==e.currentHeuristicConfigs.maxBufferInWallClockSec||D._heuristicSettings.livePlaybackOffsetInSecond!==e.currentHeuristicConfigs.livePlaybackOffsetInWallClockSec||D._traceConfig!==this.options_.traceConfig},D.prototype.isLiveStartupError=function(){return this.mediaError===D.errorCodes.MANIFEST_DOWNLOAD_ERROR||this.mediaError===D.errorCodes.TOO_EARLY_TO_JOIN_LIVE_EVENT},_.default.options.flashSS={},p.default.registerComponent("FlashSS",D),l.default.registerTech("FlashSS",D),n.default=D,t.exports=n.default},{"../ampDefs.js":2,"../video.js/src/js/component.js":16,"../video.js/src/js/player.js":63,"../video.js/src/js/tech/flash.js":71,"../video.js/src/js/tech/tech.js":75,"../video.js/src/js/utils/browser.js":93,"../video.js/src/js/utils/dom.js":96,"../video.js/src/js/utils/fn.js":98,"../video.js/src/js/utils/time-ranges.js":107,"../video.js/src/js/utils/url.js":110,"../video.js/src/js/video.js":111,"global/document":168,"global/window":169,"object.assign":162}],9:[function(e,t,n){"use strict";n.__esModule=!0,n.ampVersion="2.3.52.2"},{}],10:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=a(e("./component")),r=a(e("object.assign")),o=function(e){function t(n,a){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),e.call(this,n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.createEl=function(){var e=arguments.length<=0||void 0===arguments[0]?"div":arguments[0],t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return t=r.default({className:this.buildCSSClass()},t),i.default.prototype.createEl.call(this,e,t,n)},t.prototype.buildCSSClass=function(){return"vjs-fullscreen-outline "+e.prototype.buildCSSClass.call(this)},t}(i.default);i.default.registerComponent("FullscreenOutline",o),n.default=o,t.exports=n.default},{"./component":16,"object.assign":162}],11:[function(e,t,n){"use strict";n.__esModule=!0;var a=function(e){return e&&e.__esModule?e:{default:e}}(e("./component")),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./utils/dom.js")),r=function(e){function t(n,a){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),e.call(this,n,a),this.on(n,["removeSpinner","canplaythrough","canplay","playing","pause","seeked","error"],this.updatePlaying),this.on(n,["sourceset","waiting","seeking"],this.updateWaiting),this.on(n,"fullscreenchange",this.handleFullscreenChange),this.on("focus",this.handleFocus)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"p",{className:"vjs-screen-reader-text",id:"player-use-for-screen-reader-alert-only"+Math.random()});return t.setAttribute("role","alert"),t.setAttribute("aria-atomic","true"),t},t.prototype.updateWaiting=function(){var e=this;setTimeout(function(){null!=e.el_&&(e.el_.innerHTML=e.htmlEncode(e.localize("video loading")))},0)},t.prototype.updatePlaying=function(){var e=this;setTimeout(function(){null!=e.el_&&(e.el_.innerHTML="")},0)},t.prototype.switchFocusToLastControlForSelectorInControlBar=function(e){for(var t=e+" .vjs-control",n=this.player_.controlBar.el().querySelectorAll(t),a=n.length-1;a>=0;a--){var r=n[a].getAttribute("tabIndex"),o=i.isVisible(n[a]);if(r>=0&&o)return n[a].focus(),!0}return!1},t.prototype.reverseFocus=function(){for(var e=[".amp-controlbaricons-right",".amp-cotnrolbaricons-middle",".amp-controlbaricons-left"],t=0;t<e.length;t++)if(this.switchFocusToLastControlForSelectorInControlBar(e[t]))return},t.prototype.handleFocus=function(){this.player_.isFullscreen()&&setTimeout(function(e){e.player_.el().focus()},200,this)},t.prototype.handleFullscreenChange=function(){this.player_.isFullscreen()?this.el_.setAttribute("tabIndex",0):this.el_.setAttribute("tabIndex",-1)},t}(a.default);a.default.registerComponent("AriaAlerts",r),n.default=r,t.exports=n.default},{"./component":16,"./utils/dom.js":96}],12:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=a(e("./button.js")),r=a(e("./component.js")),o=function(e){function t(n,a){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),e.call(this,n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.buildCSSClass=function(){return this.options_.playerOptions.overrideDisabledForBigPlayButton?"vjs-big-play-button override-controls-disabled ":"vjs-big-play-button "},t.prototype.handleClick=function(){this.player_.play()},t}(i.default);o.prototype.controlText_="Play Video",r.default.registerComponent("BigPlayButton",o),n.default=o,t.exports=n.default},{"./button.js":13,"./component.js":16}],13:[function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var r=i(e("./tooltip-clickable")),o=i(e("./component")),s=(a(e("./utils/events.js")),e("./utils/fn.js")),c=i((a(s),e("./utils/log.js"))),d=(i(e("global/document")),e("object.assign")),l=i(d),u=i(e("./utils/close-other-menu.js")),f=function(e){function t(n,a){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),e.call(this,n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.createEl=function(){var e=arguments.length<=0||void 0===arguments[0]?"button":arguments[0],t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];t=l.default({className:this.buildCSSClass()},t),"button"!==e&&(c.default.warn("Creating a Button with an HTML element of "+e+" is deprecated; use ClickableComponent instead."),t=l.default({tabIndex:0},t),n=l.default({role:"button"},n)),n=l.default({type:"button","aria-live":"off"},n);var a=o.default.prototype.createEl.call(this,e,t,n);return this.createControlTextEl(a),a},t.prototype.addChild=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=this.constructor.name;return c.default.warn("Adding an actionable (user controllable) child to a Button ("+n+") is not supported; use a ClickableComponent instead."),o.default.prototype.addChild.call(this,e,t)},t.prototype.handleKeyPress=function(t){this.clearKeyboardTooltip(),32===t.which||13===t.which||e.prototype.handleKeyPress.call(this,t)},t.prototype.clearOtherMenus=function(){u.default(this),this.clearKeyboardTooltip()},t}(r.default);o.default.registerComponent("Button",f),n.default=f,t.exports=n.default},{"./component":16,"./tooltip-clickable":76,"./utils/close-other-menu.js":95,"./utils/events.js":97,"./utils/fn.js":98,"./utils/log.js":104,"global/document":168,"object.assign":162}],14:[function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var r=i(e("./component")),o=a(e("./utils/dom.js")),s=a(e("./utils/events.js")),c=a(e("./utils/fn.js")),d=i(e("./utils/log.js")),l=i(e("global/document")),u=i(e("object.assign")),f=function(e){function t(n,a){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),e.call(this,n,a),this.emitTapEvents(),this.on("tap",this.handleClick),this.on("click",this.handleClick),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.createEl=function(){var t=arguments.length<=0||void 0===arguments[0]?"div":arguments[0],n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];n=u.default({className:this.buildCSSClass(),tabIndex:0},n),"button"===t&&d.default.error("Creating a ClickableComponent with an HTML element of "+t+" is not supported; use a Button instead."),a=u.default({role:"button","aria-live":"off"},a);var i=e.prototype.createEl.call(this,t,n,a);return this.createControlTextEl(i),i},t.prototype.createControlTextEl=function(e){return this.controlTextEl_=o.createEl("span",{className:"vjs-control-text"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},t.prototype.controlText=function(e){if((arguments.length<=1||void 0===arguments[1])&&this.el(),!e)return this.controlText_||"Need Text";var t=this.localize(e);return this.controlText_=e,this.controlTextEl_.innerHTML=this.htmlEncode(t),this},t.prototype.buildCSSClass=function(){return"vjs-control vjs-button "+e.prototype.buildCSSClass.call(this)},t.prototype.addChild=function(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return e.prototype.addChild.call(this,t,n)},t.prototype.enable=function(){return this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),this},t.prototype.disable=function(){return this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),this},t.prototype.handleClick=function(){},t.prototype.handleFocus=function(){s.on(l.default,"keydown",c.bind(this,this.handleKeyPress)),this.el().setAttribute("aria-live","polite")},t.prototype.handleKeyPress=function(t){32===t.which||13===t.which?(t.preventDefault(),this.handleClick(t)):e.prototype.handleKeyPress&&e.prototype.handleKeyPress.call(this,t)},t.prototype.handleBlur=function(){s.off(l.default,"keydown",c.bind(this,this.handleKeyPress)),this.el().setAttribute("aria-live","off")},t}(r.default);r.default.registerComponent("ClickableComponent",f),n.default=f,t.exports=n.default},{"./component":16,"./utils/dom.js":96,"./utils/events.js":97,"./utils/fn.js":98,"./utils/log.js":104,"global/document":168,"object.assign":162}],15:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=a(e("./button")),r=a(e("./component")),o=function(e){function t(n,a){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),e.call(this,n,a),this.controlText(a&&a.controlText||this.localize("Close"))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.buildCSSClass=function(){return"vjs-close-button "+e.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(){this.trigger({type:"close",bubbles:!1})},t}(i.default);r.default.registerComponent("CloseButton",o),n.default=o,t.exports=n.default},{"./button":13,"./component":16}],16:[function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var r=i(e("global/window")),o=a(e("./utils/dom.js")),s=a(e("./utils/fn.js")),c=a(e("./utils/guid.js")),d=a(e("./utils/events.js")),l=i(e("./utils/log.js")),u=i(e("./utils/to-title-case.js")),f=i(e("./utils/merge-options.js")),p=a(e("./utils/browser.js")),m=function(){function e(t,n,a){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.player_=!t&&this.play?t=this:t,this.options_=f.default({},this.options_),n=this.options_=f.default(this.options_,n),this.id_=n.id||n.el&&n.el.id,!this.id_){var i=t&&t.id&&t.id()||"no_player";this.id_=i+"_component_"+c.newGUID()}this.name_=n.name||null,n.el?this.el_=n.el:!1!==n.createEl&&(this.el_=this.createEl()),this.children_=[],this.childIndex_={},this.childNameIndex_={},!1!==n.initChildren&&this.initChildren(),this.ready(a),!1!==n.reportTouchActivity&&this.enableTouchActivity()}return e.prototype.dispose=function(){if(this.el_&&this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var e=this.children_.length-1;e>=0;e--){this.children_[e].dispose&&this.children_[e].dispose();var t=this.children_[e].name_;t&&this[t]&&delete this[t]}this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.el_&&this.off(),this.el_&&this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),this.contentEl_&&this.contentEl_.parentNode&&this.contentEl_.parentNode.removeChild(this.contentEl_),this.el_&&o.removeElData(this.el_),this.contentEl_&&o.removeElData(this.contentEl_),this.el_=null,this.contentEl_=null,this.player_=null,this.options_=null},e.prototype.player=function(){return this.player_},e.prototype.options=function(e){return l.default.warn("this.options() has been deprecated and will be moved to the constructor in 6.0"),e?(this.options_=f.default(this.options_,e),this.options_):this.options_},e.prototype.el=function(){return this.el_},e.prototype.createEl=function(e,t,n){return o.createEl(e,t,n)},e.prototype.localize=function(e){var t=this.player_.language&&this.player_.language(),n=this.player_.languages&&this.player_.languages();if(!t||!n)return e;var a=n[t];if(a&&a[e])return a[e];var i=n[t.split("-")[0]];return i&&i[e]?i[e]:e},e.prototype.htmlEncode=function(e){if(!e)return"";for(var t=e.length,n=[],a=0;t>a;a++){var i=e.charAt(a);switch(i){case"<":n.push("&lt;");break;case">":n.push("&gt;");break;case"&":n.push("&amp;");break;case'"':n.push("&quot;");break;case"'":n.push("&#39;");break;default:n.push(i)}}return n.join("")},e.prototype.contentEl=function(){return this.contentEl_||this.el_},e.prototype.id=function(){return this.id_},e.prototype.name=function(){return this.name_},e.prototype.children=function(){return this.children_},e.prototype.getChildById=function(e){return this.childIndex_[e]},e.prototype.getChild=function(e){return this.childNameIndex_[e]},e.prototype.addChild=function(t){var n,a=this,i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=arguments.length<=2||void 0===arguments[2]?this.children_.length:arguments[2],s=void 0,c=void 0;if("string"==typeof t){c=t,i||(i={}),!0===i&&(l.default.warn("Initializing a child component with `true` is deprecated. Children should be defined in an array when possible, but if necessary use an object instead of `true`."),i={});var d=i.componentClass||u.default(c);i.name=c;var f=e.getComponent(d);if(!f)throw new Error("Component "+d+" does not exist");if("function"!=typeof f)return null;s=new f(this.player_||this,i)}else s=t;return this.children_.splice(o,0,s),"function"==typeof s.id&&(this.childIndex_[s.id()]=s),(c=c||s.name&&s.name())&&(this.childNameIndex_[c]=s),"function"==typeof s.el&&s.el()&&function(){var e=a.contentEl().children[o]||null;p.IS_MSAPPHOST&&r.default.MSApp&&r.default.MSApp.execUnsafeLocalFunction?(n=a.contentEl(),r.default.MSApp.execUnsafeLocalFunction(function(){n.insertBefore(s.el(),e)})):a.contentEl().insertBefore(s.el(),e)}(),s},e.prototype.removeChild=function(e){if("string"==typeof e&&(e=this.getChild(e)),e&&this.children_){for(var t=!1,n=this.children_.length-1;n>=0;n--)if(this.children_[n]===e){t=!0,this.children_.splice(n,1);break}if(t){this.childIndex_[e.id()]=null,this.childNameIndex_[e.name()]=null;var a=e.el();a&&a.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}}},e.prototype.initChildren=function(){var t=this,n=this.options_.children;n&&function(){var a=t.options_,i=void 0,r=e.getComponent("Tech");(i=Array.isArray(n)?n:Object.keys(n)).concat(Object.keys(t.options_).filter(function(e){return!i.some(function(t){return"string"==typeof t?e===t:e===t.name})})).map(function(e){var a=void 0,i=void 0;return"string"==typeof e?i=n[a=e]||t.options_[a]||{}:(a=e.name,i=e),{name:a,opts:i}}).filter(function(t){var n=e.getComponent(t.opts.componentClass||u.default(t.name));return n&&!r.isTech(n)}).forEach(function(e){var n=e.name,i=e.opts;if(void 0!==a[n]&&(i=a[n]),!1!==i){!0===i&&(i={}),i.playerOptions=t.options_.playerOptions;var r=t.addChild(n,i);r&&(t[n]=r)}})}()},e.prototype.buildCSSClass=function(){return""},e.prototype.on=function(e,t,n){var a=this;return"string"==typeof e||Array.isArray(e)?d.on(this.el_,e,s.bind(this,t)):function(){var i=e,r=t,o=s.bind(a,n),c=function(){return a.off(i,r,o)};c.guid=o.guid,a.on("dispose",c);var l=function(){return a.off("dispose",c)};l.guid=o.guid,e.nodeName?(d.on(i,r,o),d.on(i,"dispose",l)):"function"==typeof e.on&&(i.on(r,o),i.on("dispose",l))}(),this},e.prototype.off=function(e,t,n){if(!e||"string"==typeof e||Array.isArray(e))d.off(this.el_,e,t);else{var a=e,i=t,r=s.bind(this,n);this.off("dispose",r),e.nodeName?(d.off(a,i,r),d.off(a,"dispose",r)):(a.off(i,r),a.off("dispose",r))}return this},e.prototype.one=function(e,t,n){var a=this,i=arguments;return"string"==typeof e||Array.isArray(e)?d.one(this.el_,e,s.bind(this,t)):function(){var r=e,o=t,c=s.bind(a,n),d=function e(){a.off(r,o,e),c.apply(null,i)};d.guid=c.guid,a.on(r,o,d)}(),this},e.prototype.trigger=function(e,t){return d.trigger(this.el_,e,t),this},e.prototype.ready=function(e){var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];return e&&(this.isReady_?t?e.call(this):this.setTimeout(e,1):(this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(e))),this},e.prototype.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach(function(e){e.call(this)},this),this.trigger("ready")},1)},e.prototype.$=function(e,t){return o.$(e,t||this.contentEl())},e.prototype.$$=function(e,t){return o.$$(e,t||this.contentEl())},e.prototype.hasClass=function(e){return o.hasElClass(this.el_,e)},e.prototype.addClass=function(e){return o.addElClass(this.el_,e),this},e.prototype.removeClass=function(e){return o.removeElClass(this.el_,e),this},e.prototype.toggleClass=function(e,t){return o.toggleElClass(this.el_,e,t),this},e.prototype.show=function(){return this.removeClass("vjs-hidden"),this},e.prototype.hide=function(){return this.addClass("vjs-hidden"),this},e.prototype.lockShowing=function(){return this.addClass("vjs-lock-showing"),this},e.prototype.unlockShowing=function(){return this.removeClass("vjs-lock-showing"),this},e.prototype.width=function(e,t){return this.dimension("width",e,t)},e.prototype.height=function(e,t){return this.dimension("height",e,t)},e.prototype.dimensions=function(e,t){return this.width(e,!0).height(t)},e.prototype.dimension=function(e,t,n){if(void 0!==t)return(null===t||t!=t)&&(t=0),this.el_.style[e]=-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?t:"auto"===t?"":t+"px",n||this.trigger("resize"),this;if(!this.el_)return 0;var a=this.el_.style[e],i=a.indexOf("px");return-1!==i?parseInt(a.slice(0,i),10):parseInt(this.el_["offset"+u.default(e)],10)},e.prototype.currentDimension=function(e){var t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if("function"==typeof r.default.getComputedStyle){var n=r.default.getComputedStyle(this.el_);t=n.getPropertyValue(e)||n[e]}else if(this.el_.currentStyle){var a="offset"+u.default(e);t=this.el_[a]}return parseFloat(t)},e.prototype.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},e.prototype.currentWidth=function(){return this.currentDimension("width")},e.prototype.currentHeight=function(){return this.currentDimension("height")},e.prototype.emitTapEvents=function(){var e=0,t=null,n=void 0;this.on("touchstart",function(a){1===a.touches.length&&(t={pageX:a.touches[0].pageX,pageY:a.touches[0].pageY},e=(new Date).getTime(),n=!0)}),this.on("touchmove",function(e){if(e.touches.length>1)n=!1;else if(t){var a=e.touches[0].pageX-t.pageX,i=e.touches[0].pageY-t.pageY;Math.sqrt(a*a+i*i)>10&&(n=!1)}});var a=function(){n=!1};this.on("touchleave",a),this.on("touchcancel",a),this.on("touchend",function(a){t=null,!0===n&&200>(new Date).getTime()-e&&(a.preventDefault(),this.trigger("tap"))})},e.prototype.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var e=s.bind(this.player(),this.player().reportUserActivity),t=void 0;this.on("touchstart",function(){e(),this.clearInterval(t),t=this.setInterval(e,250)});var n=function(){e(),this.clearInterval(t)};this.on("touchmove",e),this.on("touchend",n),this.on("touchcancel",n)}},e.prototype.setTimeout=function(e,t){e=s.bind(this,e);var n=r.default.setTimeout(e,t),a=function(){this.clearTimeout(n)};return a.guid="vjs-timeout-"+n,this.on("dispose",a),n},e.prototype.clearTimeout=function(e){r.default.clearTimeout(e);var t=function(){};return t.guid="vjs-timeout-"+e,this.off("dispose",t),e},e.prototype.setInterval=function(e,t){e=s.bind(this,e);var n=r.default.setInterval(e,t),a=function(){this.clearInterval(n)};return a.guid="vjs-interval-"+n,this.on("dispose",a),n},e.prototype.clearInterval=function(e){r.default.clearInterval(e);var t=function(){};return t.guid="vjs-interval-"+e,this.off("dispose",t),e},e.registerComponent=function(t,n){return e.components_||(e.components_={}),e.components_[t]=n,n},e.getComponent=function(t){return e.components_&&e.components_[t]?e.components_[t]:r.default&&r.default.videojs&&r.default.videojs[t]?(l.default.warn("The "+t+" component was added to the videojs object when it should be registered using videojs.registerComponent(name, component)"),r.default.videojs[t]):void 0},e.extend=function(t){t=t||{},l.default.warn("Component.extend({}) has been deprecated, use videojs.extend(Component, {}) instead");var n=t.init||t.init||this.prototype.init||this.prototype.init||function(){},a=function(){n.apply(this,arguments)};for(var i in(a.prototype=Object.create(this.prototype)).constructor=a,a.extend=e.extend,t)t.hasOwnProperty(i)&&(a.prototype[i]=t[i]);return a},e}();m.registerComponent("Component",m),n.default=m,t.exports=n.default},{"./utils/browser.js":93,"./utils/dom.js":96,"./utils/events.js":97,"./utils/fn.js":98,"./utils/guid.js":101,"./utils/log.js":104,"./utils/merge-options.js":105,"./utils/to-title-case.js":109,"global/window":169}],17:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var r=a(e("../track-button.js")),o=a(e("../../component.js")),s=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(e("../../utils/fn.js")),e("./audio-track-menu-item.js")),c=a(s),d=function(e){function t(n){var a=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];i(this,t),a.tracks=n.audioTracks&&n.audioTracks(),e.call(this,n,a),this.el_.setAttribute("aria-label","Audio Menu")}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.buildCSSClass=function(){return"vjs-audio-button "+e.prototype.buildCSSClass.call(this)},t.prototype.createItems=function(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],t=this.player_.audioTracks&&this.player_.audioTracks();if(!t)return e;for(var n=0;n<t.length;n++){var a=t[n];e.push(new c.default(this.player_,{selectable:!0,track:a}))}return e},t}(r.default);o.default.registerComponent("AudioTrackButton",d),n.default=d,t.exports=n.default},{"../../component.js":16,"../../utils/fn.js":98,"../track-button.js":48,"./audio-track-menu-item.js":18}],18:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=a(e("../../menu/menu-item.js")),r=a(e("../../component.js")),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../../utils/fn.js")),s=function(e){function t(n,a){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=a.track,s=n.audioTracks();a.label=r.label||r.language||"Unknown",a.selected=r.enabled,e.call(this,n,a),this.track=r,s&&function(){var e=o.bind(i,i.handleTracksChange);s.addEventListener("change",e),i.on("dispose",function(){s.removeEventListener("change",e)})}()}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.handleClick=function(t){var n=this.player_.audioTracks();if(e.prototype.handleClick.call(this,t),n)for(var a=0;a<n.length;a++){var i=n[a];i===this.track&&(i.enabled=!0)}},t.prototype.handleTracksChange=function(){this.selected(this.track.enabled)},t}(i.default);r.default.registerComponent("AudioTrackMenuItem",s),n.default=s,t.exports=n.default},{"../../component.js":16,"../../menu/menu-item.js":60,"../../utils/fn.js":98}],19:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=a(e("../component.js")),r=(a(e("./play-toggle.js")),e("./time-controls/current-time-display.js")),o=(a(r),e("./time-controls/duration-display.js")),s=(a(o),e("./time-controls/time-divider.js")),c=(a(s),e("./time-controls/remaining-time-display.js")),d=(a(c),e("./live-display.js")),l=(a(d),e("./progress-control/progress-control.js")),u=(a(l),e("./fullscreen-toggle.js")),f=(a(u),e("./volume-control/volume-control.js")),p=(a(f),e("./volume-menu-button.js")),m=(a(p),e("./mute-toggle.js")),_=(a(m),e("./text-track-controls/chapters-button.js")),h=(a(_),e("./text-track-controls/descriptions-button.js")),b=(a(h),e("./text-track-controls/subtitles-button.js")),g=(a(b),e("./text-track-controls/captions-button.js")),v=(a(g),e("./audio-track-controls/audio-track-button.js")),y=(a(v),e("./playback-rate-menu/playback-rate-menu-button.js")),S=(a(y),e("./spacer-controls/custom-control-spacer.js")),D=(a(S),function(e){function t(n,a){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),e.call(this,n,a),this.hide(),this.on(n,"play",function(){this.show()})}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"},{role:"region","aria-label":"Video controls"})},t}(i.default));D.prototype.options_={children:["playToggle","volumeMenuButton","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subtitlesButton","captionsButton","audioTrackButton","fullscreenToggle"]},i.default.registerComponent("ControlBar",D),n.default=D,t.exports=n.default},{"../component.js":16,"./audio-track-controls/audio-track-button.js":17,"./fullscreen-toggle.js":20,"./live-display.js":21,"./mute-toggle.js":22,"./play-toggle.js":23,"./playback-rate-menu/playback-rate-menu-button.js":24,"./progress-control/progress-control.js":29,"./spacer-controls/custom-control-spacer.js":33,"./text-track-controls/captions-button.js":36,"./text-track-controls/chapters-button.js":37,"./text-track-controls/descriptions-button.js":39,"./text-track-controls/subtitles-button.js":41,"./time-controls/current-time-display.js":44,"./time-controls/duration-display.js":45,"./time-controls/remaining-time-display.js":46,"./time-controls/time-divider.js":47,"./volume-control/volume-control.js":50,"./volume-menu-button.js":52}],20:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=(a(e("global/window")),e("../button.js")),r=a(i),o=a(e("../component.js")),s=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(e("../utils/browser.js")),function(e){function t(n,a){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),e.call(this,n,a),this.on(n,"fullscreenchange",this.handleFullscreenChange),this.on("keydown",this.handleKeyPress),this.on("mouseover",this.clearOtherMenus),this.on("focus",this.clearOtherMenus),this.el_.setAttribute("style","cursor:pointer"),this.el_.setAttribute("title",this.localize("Fullscreen"))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.buildCSSClass=function(){return"vjs-fullscreen-control "+e.prototype.buildCSSClass.call(this)},t.prototype.handleFullscreenChange=function(){this.player_.isFullscreen()?(this.controlText("Non-Fullscreen"),this.el_.setAttribute("title",this.localize("Non-Fullscreen"))):(this.controlText("Fullscreen"),this.el_.setAttribute("title",this.localize("Fullscreen"))),this.el_.focus()},t.prototype.handleClick=function(){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},t}(r.default));s.prototype.controlText_="Fullscreen",o.default.registerComponent("FullscreenToggle",s),n.default=s,t.exports=n.default},{"../button.js":13,"../component.js":16,"../utils/browser.js":93,"global/window":169}],21:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=a(e("../clickable-component.js")),r=a(e("../component.js")),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../utils/dom.js")),s=function(e){function t(n,a){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),e.call(this,n,a),this.updateShowing(),this.on(this.player(),"durationchange",this.updateShowing)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=o.createEl("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.htmlEncode(this.localize("Stream Type"))+"</span>"+this.htmlEncode(this.localize("LIVE"))},{"aria-live":"off"}),t.appendChild(this.contentEl_),t.setAttribute("aria-label",this.htmlEncode(this.localize("LIVE"))),t.setAttribute("style","cursor:pointer"),t.setAttribute("title",this.localize("Go to live")),t},t.prototype.updateShowing=function(){this.player().duration()===1/0?this.show():this.hide()},t.prototype.handleClick=function(){this.clickHandler&&this.clickHandler()},t.prototype.setClickHandler=function(e){this.clickHandler=e},t}(i.default);r.default.registerComponent("LiveDisplay",s),n.default=s,t.exports=n.default},{"../clickable-component.js":14,"../component.js":16,"../utils/dom.js":96}],22:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=a(e("../button")),r=a(e("../component")),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../utils/dom.js")),s=function(e){function t(n,a){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),e.call(this,n,a),this.on(n,"volumechange",this.update),n.tech_&&!1===n.tech_.featuresVolumeControl&&this.addClass("vjs-hidden"),this.on(n,"loadstart",function(){this.update(),!1===n.tech_.featuresVolumeControl?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")}),this.on("focus",this.clearOtherMenus)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.buildCSSClass=function(){return"vjs-mute-control "+e.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(){this.player_.muted(!this.player_.muted())},t.prototype.update=function(){var e=this.player_.volume(),t=3;0===e||this.player_.muted()?t=0:.33>e?t=1:.67>e&&(t=2);var n=this.htmlEncode(this.localize(this.player_.muted()?"Unmute":"Mute"));this.controlText()!==n&&this.controlText(n);for(var a=0;4>a;a++)o.removeElClass(this.el_,"vjs-vol-"+a);o.addElClass(this.el_,"vjs-vol-"+t)},t}(i.default);s.prototype.controlText_="Mute",r.default.registerComponent("MuteToggle",s),n.default=s,t.exports=n.default},{"../button":13,"../component":16,"../utils/dom.js":96}],23:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=(a(e("global/window")),e("../button.js")),r=a(i),o=a(e("../component.js")),s=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(e("../utils/browser.js")),function(e){function t(n,a){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),e.call(this,n,a),this.on(n,"play",this.handlePlay),this.on(n,"pause",this.handlePause),this.on("keydown",this.handleKeyPress),this.on("mouseover",this.clearOtherMenus),this.on("focus",this.clearOtherMenus),this.el_.setAttribute("style","cursor:pointer")}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.buildCSSClass=function(){return"vjs-play-control "+e.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(){this.player_.paused()?this.player_.play():this.player_.pause()},t.prototype.handlePlay=function(){this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText(this.htmlEncode(this.localize("Pause"))),this.el_.setAttribute("title",this.localize("Pause"))},t.prototype.handlePause=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText(this.htmlEncode(this.localize("Play"))),this.el_.setAttribute("title",this.localize("Play"))},t}(r.default));s.prototype.controlText_="Play",o.default.registerComponent("PlayToggle",s),n.default=s,t.exports=n.default},{"../button.js":13,"../component.js":16,"../utils/browser.js":93,"global/window":169}],24:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=a(e("../../menu/menu-button.js")),r=a(e("../../menu/menu.js")),o=a(e("./playback-rate-menu-item.js")),s=a(e("../../component.js")),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../../utils/dom.js")),d=function(e){function t(n,a){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),e.call(this,n,a),this.updateVisibility(),this.updateLabel(),this.on(n,"loadstart",this.updateVisibility),this.on(n,"ratechange",this.updateLabel)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this);return this.labelEl_=c.createEl("div",{className:"vjs-playback-rate-value",innerHTML:1}),t.appendChild(this.labelEl_),t},t.prototype.buildCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildCSSClass.call(this)},t.prototype.createMenu=function(){var e=new r.default(this.player()),t=this.playbackRates();if(t)for(var n=t.length-1;n>=0;n--)e.addChild(new o.default(this.player(),{rate:t[n]+"x"}));return e},t.prototype.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},t.prototype.handleClick=function(){for(var e=this.player().playbackRate(),t=this.playbackRates(),n=t[0],a=0;a<t.length;a++)if(t[a]>e){n=t[a];break}this.player().playbackRate(n)},t.prototype.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},t.prototype.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},t.prototype.updateVisibility=function(){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},t.prototype.updateLabel=function(){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.htmlEncode(this.player().playbackRate())+"x")},t}(i.default);d.prototype.controlText_="Playback Rate",s.default.registerComponent("PlaybackRateMenuButton",d),n.default=d,t.exports=n.default},{"../../component.js":16,"../../menu/menu-button.js":59,"../../menu/menu.js":61,"../../utils/dom.js":96,"./playback-rate-menu-item.js":25}],25:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=a(e("../../menu/menu-item.js")),r=a(e("../../component.js")),o=function(e){function t(n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=a.rate,r=parseFloat(i,10);a.label=i,a.selected=1===r,e.call(this,n,a),this.label=i,this.rate=r,this.on(n,"ratechange",this.update)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.handleClick=function(){e.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},t.prototype.update=function(){this.selected(this.player().playbackRate()===this.rate)},t}(i.default);o.prototype.contentElType="button",r.default.registerComponent("PlaybackRateMenuItem",o),n.default=o,t.exports=n.default},{"../../component.js":16,"../../menu/menu-item.js":60}],26:[function(e,t,n){"use strict";n.__esModule=!0;var a=function(e){return e&&e.__esModule?e:{default:e}}(e("../../component.js")),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../../utils/dom.js")),r=function(e){function t(n,a){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),e.call(this,n,a),this.on(n,"progress",this.update)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-load-progress ",innerHTML:'<span class="vjs-control-text"><span>'+this.htmlEncode(this.localize("Loaded"))+"</span>: 0%</span>"})},t.prototype.update=function(){var e=this.player_.buffered(),t=this.player_.duration(),n=this.player_.bufferedEnd(),a=this.el_.children,r=function(e,t){var n=e/t||0;return 100*(n>=1?1:n)+"%"};this.el_.style.width=r(n,t);for(var o=0;o<e.length;o++){var s=e.start(o),c=e.end(o),d=a[o];d||(d=this.el_.appendChild(i.createEl())),d.style.left=r(s,n),d.style.width=r(c-s,n)}for(o=a.length;o>e.length;o--)this.el_.removeChild(a[o-1])},t}(a.default);a.default.registerComponent("LoadProgressBar",r),n.default=r,t.exports=n.default},{"../../component.js":16,"../../utils/dom.js":96}],27:[function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var r=i(e("global/window")),o=i(e("../../component.js")),s=a(e("../../utils/dom.js")),c=a(e("../../utils/fn.js")),d=i(e("../../utils/format-time.js")),l=i(e("lodash-compat/function/throttle")),u=function(e){function t(n,a){var i=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),e.call(this,n,a),a.playerOptions&&a.playerOptions.controlBar&&a.playerOptions.controlBar.progressControl&&a.playerOptions.controlBar.progressControl.keepTooltipsInside&&(this.keepTooltipsInside=a.playerOptions.controlBar.progressControl.keepTooltipsInside),this.keepTooltipsInside&&(this.tooltip=s.createEl("div",{className:"vjs-time-tooltip"}),this.el().appendChild(this.tooltip),this.addClass("vjs-keep-tooltips-inside")),this.tooltipSpan=s.createEl("span",{className:"amp-time-tooltip"}),this.el().appendChild(this.tooltipSpan),this.update(0,0),n.on("ready",function(){i.on(n.controlBar.progressControl.el(),"mousemove",l.default(c.bind(i,i.handleMouseMove),25))}),this.wallClockTimeDisplaySettings=a.playerOptions.wallClockTimeDisplaySettings,this.showWallClockTime=!!this.wallClockTimeDisplaySettings&&this.wallClockTimeDisplaySettings.enabled}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},t.prototype.handleMouseMove=function(e){var t=this.player_.duration(),n=this.calculateDistance(e)*t,a=e.pageX-s.findElPosition(this.el().parentNode).left;this.update(n,a)},t.prototype.update=function(e,t){var n=d.default(e,this.player_.duration());if(this.showWallClockTime){var a=e/this.player_.duration(),i=this.player_.presentationTimeFromPercentageOfDvrWindow(a);n=this.player_.getWallClockTime(i,this.wallClockTimeDisplaySettings.useLocalTimeZone,this.wallClockTimeDisplaySettings.timezone,this.wallClockTimeDisplaySettings.controlBar12HourFormat,!0)||n}if(this.el().style.left=t+"px",this.tooltipSpan.innerHtml=this.tooltipSpan.innerText=n,this.clampAmpTooltipPosition_(t),this.keepTooltipsInside){var o=t-this.clampPosition_(t)+1,s=parseFloat(r.default.getComputedStyle(this.tooltip).width)/2;this.tooltip.innerHTML=n,this.tooltip.style.right="-"+(s-o)+"px"}},t.prototype.calculateDistance=function(e){return s.getPointerPosition(this.el().parentNode,e).x},t.prototype.clampPosition_=function(e){if(!this.keepTooltipsInside)return e;var t=parseFloat(r.default.getComputedStyle(this.player().el()).width),n=parseFloat(r.default.getComputedStyle(this.tooltip).width)/2,a=e;return n>e?a=Math.ceil(n):e>t-n&&(a=Math.floor(t-n)),a},t.prototype.clampAmpTooltipPosition_=function(e){var t,n=parseFloat(r.default.getComputedStyle(this.player().el()).width),a=this.tooltipSpan.offsetWidth/2;t=a>e?Math.ceil(this.tooltipSpan.offsetWidth-e):e>n-a?Math.floor(n-e):a,this.tooltipSpan.style.right=-t+"px"},t}(o.default);o.default.registerComponent("MouseTimeDisplay",u),n.default=u,t.exports=n.default},{"../../component.js":16,"../../utils/dom.js":96,"../../utils/fn.js":98,"../../utils/format-time.js":100,"global/window":169,"lodash-compat/function/throttle":118}],28:[function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var r=i(e("../../component.js")),o=a(e("../../utils/fn.js")),s=i((a(e("../../utils/dom.js")),e("../../utils/format-time.js"))),c=function(e){function t(n,a){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),e.call(this,n,a),this.updateDataAttr(),this.on(n,"timeupdate",this.updateDataAttr),n.ready(o.bind(this,this.updateDataAttr)),a.playerOptions&&a.playerOptions.controlBar&&a.playerOptions.controlBar.progressControl&&a.playerOptions.controlBar.progressControl.keepTooltipsInside&&(this.keepTooltipsInside=a.playerOptions.controlBar.progressControl.keepTooltipsInside),this.keepTooltipsInside&&this.addClass("vjs-keep-tooltips-inside")}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar ",innerHTML:'<span class="vjs-control-text"><span>'+this.htmlEncode(this.localize("Progress"))+"</span>: 0%</span>"})},t.prototype.updateDataAttr=function(){var e=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.el_.setAttribute("data-current-time",s.default(e,this.player_.duration()))},t}(r.default);r.default.registerComponent("PlayProgressBar",c),n.default=c,t.exports=n.default},{"../../component.js":16,"../../utils/dom.js":96,"../../utils/fn.js":98,"../../utils/format-time.js":100}],29:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var r=a(e("../../component.js")),o=(a(e("./seek-bar.js")),e("./mouse-time-display.js")),s=(a(o),function(e){function t(){i(this,t),e.apply(this,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control",tabIndex:-1})},t}(r.default));s.prototype.options_={children:["seekBar"]},r.default.registerComponent("ProgressControl",s),n.default=s,t.exports=n.default},{"../../component.js":16,"./mouse-time-display.js":27,"./seek-bar.js":30}],30:[function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var r=i(e("global/window")),o=i(e("../../slider/slider.js")),s=i(e("../../component.js")),c=(i(e("./load-progress-bar.js")),e("./play-progress-bar.js")),d=(i(c),e("./tooltip-progress-bar.js")),l=(i(d),e("./seek-handle.js")),u=(i(l),e("../../utils/fn.js")),f=i((a(u),e("../../utils/format-time.js"))),p=a((i(e("object.assign")),e("../../utils/browser.js"))),m=function(e){function t(n,a){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),e.call(this,n,a),this.timeInterval=8e3,this.isIntervalEnabled=!0,this.timerFunction,this.videoWasPlaying=null,this.on(n,"timeupdate",this.updateProgress),this.on(n,"ended",this.playEnded),this.on(n,"play",this.enableAriaUpdate),this.on(n,"pause",this.handlePause),this.on(n,"seeked",this.handleManualSeeked),this.on(n,"playing",this.handlePlaying),a.playerOptions&&a.playerOptions.controlBar&&a.playerOptions.controlBar.progressControl&&a.playerOptions.controlBar.progressControl.keepTooltipsInside&&(this.keepTooltipsInside=a.playerOptions.controlBar.progressControl.keepTooltipsInside),this.keepTooltipsInside&&(this.tooltipProgressBar=this.addChild("TooltipProgressBar"))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":"progress bar"})},t.prototype.playEnded=function(){this.isIntervalEnabled=!1,clearTimeout(this.timerFunction),this.updateProgress()},t.prototype.handleManualSeeked=function(){this.updateAriaAttributes(this.el_,!0),null!==this.videoWasPlaying&&(this.videoWasPlaying?this.player_.play():this.videoWasPlaying=null)},t.prototype.handlePause=function(){clearTimeout(this.timerFunction),this.isIntervalEnabled=!0},t.prototype.handlePlaying=function(){this.videoWasPlaying=null},t.prototype.enableAriaUpdate=function(){var e=this;this.timerFunction=this.setTimeout(function(){e.isIntervalEnabled=!e.isIntervalEnabled,e.enableAriaUpdate()},this.timeInterval,this)},t.prototype.updateProgress=function(){if(this.updateAriaAttributes(this.el_,!1),this.keepTooltipsInside){this.updateAriaAttributes(this.tooltipProgressBar.el_),this.tooltipProgressBar.el_.style.width=this.bar.el_.style.width;var e=parseFloat(r.default.getComputedStyle(this.player().el()).width),t=parseFloat(r.default.getComputedStyle(this.tooltipProgressBar.tooltip).width),n=this.tooltipProgressBar.el().style;n.maxWidth=Math.floor(e-t/2)+"px",n.minWidth=Math.ceil(t/2)+"px",n.right="-"+t/2+"px"}},t.prototype.updateAriaAttributes=function(e,t){if(t||this.isIntervalEnabled){var n=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();if(e.setAttribute("aria-valuenow",(100*this.getPercent()).toFixed(2)),0===n)e.setAttribute("aria-valuetext","0");else if(p.IS_SAFARI)e.setAttribute("aria-valuetext",f.default(n,this.player_.duration()));else{for(var a=f.default(n,this.player_.duration()),i=a.split(":"),r=0;r<i.length;r++)parseInt(i[r])<10&&(i[r]="0"+parseInt(i[r]));a=2===i.length?"00:"+i[0]+":"+i[1]:i[0]+":"+i[1]+":"+i[2],e.setAttribute("aria-valuetext",a)}this.isIntervalEnabled=!1}},t.prototype.getPercent=function(){var e=this.player_.duration(),t=0===e?0:this.player_.currentTime()/e;return t>=1?1:t},t.prototype.handleMouseDown=function(t){this.player_.scrubbing(!0),null===this.videoWasPlaying&&(this.videoWasPlaying=!this.player_.paused()),this.player_.pause(),e.prototype.handleMouseDown.call(this,t)},t.prototype.handleMouseMove=function(e){var t=this.calculateDistance(e)*this.player_.duration();t===this.player_.duration()&&(t-=.1),this.player_.currentTime(t)},t.prototype.handleMouseUp=function(t){e.prototype.handleMouseUp.call(this,t),this.player_.scrubbing(!1)},t.prototype.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)},t.prototype.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)},t}(o.default);m.prototype.options_={children:["loadProgressBar","mouseTimeDisplay","playProgressBar","seekHandle"],barName:"playProgressBar",handleName:"seekHandle"},m.prototype.playerEvent="timeupdate",s.default.registerComponent("SeekBar",m),n.default=m,t.exports=n.default},{"../../component.js":16,"../../slider/slider.js":69,"../../utils/browser.js":93,"../../utils/fn.js":98,"../../utils/format-time.js":100,"./load-progress-bar.js":26,"./play-progress-bar.js":28,"./seek-handle.js":31,"./tooltip-progress-bar.js":32,"global/window":169,"object.assign":162}],31:[function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}n.__esModule=!0;var i=function(e){return e&&e.__esModule?e:{default:e}}(e("../../component.js")),r=a(e("../../utils/fn.js")),o=(a(e("../../utils/dom.js")),function(e){function t(n,a){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),e.call(this,n,a),this.on(n,"timeupdate",this.update),n.ready(r.bind(this,this.update))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-slider-handle ",innerHTML:'<span class="vjs-control-text">Seekbar Handle</span>'})},t.prototype.update=function(){this.player_.controlBar&&this.player_.controlBar.progressControl&&this.player_.controlBar.progressControl.seekBar&&this.player_.controlBar.progressControl.seekBar.playProgressBar&&(this.el().style.left=this.player_.controlBar.progressControl.seekBar.playProgressBar.el_.style.width)},t}(i.default));i.default.registerComponent("SeekHandle",o),n.default=o,t.exports=n.default},{"../../component.js":16,"../../utils/dom.js":96,"../../utils/fn.js":98}],32:[function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var r=i(e("../../component.js")),o=a(e("../../utils/fn.js")),s=i((a(e("../../utils/dom.js")),e("../../utils/format-time.js"))),c=function(e){function t(n,a){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),e.call(this,n,a),this.updateDataAttr(),this.on(n,"timeupdate",this.updateDataAttr),n.ready(o.bind(this,this.updateDataAttr))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-tooltip-progress-bar vjs-slider-bar",innerHTML:'<div class="vjs-time-tooltip"></div>\n        <span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"});return this.tooltip=t.querySelector(".vjs-time-tooltip"),t},t.prototype.updateDataAttr=function(){var e=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),t=s.default(e,this.player_.duration());this.el_.setAttribute("data-current-time",t),this.tooltip.innerHTML=t},t}(r.default);r.default.registerComponent("TooltipProgressBar",c),n.default=c,t.exports=n.default},{"../../component.js":16,"../../utils/dom.js":96,"../../utils/fn.js":98,"../../utils/format-time.js":100}],33:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var r=a(e("./spacer.js")),o=a(e("../../component.js")),s=function(e){function t(){i(this,t),e.apply(this,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.buildCSSClass=function(){return"vjs-custom-control-spacer "+e.prototype.buildCSSClass.call(this)},t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,{className:this.buildCSSClass()});return t.innerHTML="&nbsp;",t},t}(r.default);o.default.registerComponent("CustomControlSpacer",s),n.default=s,t.exports=n.default},{"../../component.js":16,"./spacer.js":34}],34:[function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var i=function(e){return e&&e.__esModule?e:{default:e}}(e("../../component.js")),r=function(e){function t(){a(this,t),e.apply(this,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.buildCSSClass=function(){return"vjs-spacer "+e.prototype.buildCSSClass.call(this)},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},t}(i.default);i.default.registerComponent("Spacer",r),n.default=r,t.exports=n.default},{"../../component.js":16}],35:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=a(e("./text-track-menu-item.js")),r=a(e("../../component.js")),o=function(e){function t(n,a){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),a.track={kind:a.kind,player:n,label:"Settings",selectable:!1,default:!1,mode:"disabled"},a.selectable=!1,e.call(this,n,a),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+a.kind+" settings dialog")}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.handleClick=function(){this.player().getChild("textTrackSettings").show(),this.player().getChild("textTrackSettings").el_.focus()},t}(i.default);r.default.registerComponent("CaptionSettingsMenuItem",o),n.default=o,t.exports=n.default},{"../../component.js":16,"./text-track-menu-item.js":43}],36:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=a(e("./text-track-button.js")),r=a(e("../../component.js")),o=a(e("./caption-settings-menu-item.js")),s=function(e){function t(n,a,i){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),e.call(this,n,a,i),this.el_.setAttribute("aria-label","Captions Menu"),this.el_.setAttribute("title",this.localize("Captions Menu")),this.el_.setAttribute("role","region")}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.buildCSSClass=function(){return"vjs-captions-button "+e.prototype.buildCSSClass.call(this)},t.prototype.update=function(){var t=2;e.prototype.update.call(this),this.player().tech_&&this.player().tech_.featuresNativeTextTracks&&(t=1),this.items&&this.items.length>t?this.show():this.hide()},t.prototype.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||t.push(new o.default(this.player_,{kind:this.kind_})),e.prototype.createItems.call(this,t)},t}(i.default);s.prototype.kind_="captions",s.prototype.controlText_="Captions",r.default.registerComponent("CaptionsButton",s),n.default=s,t.exports=n.default},{"../../component.js":16,"./caption-settings-menu-item.js":35,"./text-track-button.js":42}],37:[function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var r=i(e("./text-track-button.js")),o=i(e("../../component.js")),s=i(e("./text-track-menu-item.js")),c=i(e("./chapters-track-menu-item.js")),d=i(e("../../menu/menu.js")),l=a(e("../../utils/dom.js")),u=i((a(e("../../utils/fn.js")),e("../../utils/to-title-case.js"))),f=(i(e("global/window")),function(e){function t(n,a,i){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),e.call(this,n,a,i),this.el_.setAttribute("aria-label","Chapters Menu"),this.el_.setAttribute("title",this.localize("Chapters Menu"))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.buildCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildCSSClass.call(this)},t.prototype.createItems=function(){var e=[],t=this.player_.textTracks();if(!t)return e;for(var n=0;n<t.length;n++){var a=t[n];a.kind===this.kind_&&e.push(new s.default(this.player_,{track:a}))}return e},t.prototype.createMenu=function(){for(var e=this,t=this.player_.textTracks()||[],n=void 0,a=this.items||[],i=t.length-1;i>=0;i--){var r=t[i];if(r.kind===this.kind_){n=r;break}}var o=new d.default(this.player_),s=l.createEl("li",{className:"vjs-menu-title",innerHTML:u.default(this.kind_),tabIndex:-1});if(o.children_.unshift(s),l.insertElFirst(s,o.contentEl()),n&&null==n.cues){n.mode="hidden";var f=this.player_.remoteTextTrackEls().getTrackElementByTrack_(n);f&&f.addEventListener("load",function(){return e.update()})}if(n&&n.cues&&n.cues.length>0)for(var p=n.cues,m=void 0,_=(i=0,p.length);_>i;i++){m=p[i];var h=new c.default(this.player_,{track:n,cue:m});a.push(h),o.addChild(h)}return a.length>0&&this.show(),this.items=a,o},t}(r.default));f.prototype.kind_="chapters",f.prototype.controlText_="Chapters",o.default.registerComponent("ChaptersButton",f),n.default=f,t.exports=n.default},{"../../component.js":16,"../../menu/menu.js":61,"../../utils/dom.js":96,"../../utils/fn.js":98,"../../utils/to-title-case.js":109,"./chapters-track-menu-item.js":38,"./text-track-button.js":42,"./text-track-menu-item.js":43,"global/window":169}],38:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=a(e("../../menu/menu-item.js")),r=a(e("../../component.js")),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../../utils/fn.js")),s=function(e){function t(n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=a.track,r=a.cue,s=n.currentTime();a.label=r.text,a.selected=r.startTime<=s&&s<r.endTime,e.call(this,n,a),this.track=i,this.cue=r,i.addEventListener("cuechange",o.bind(this,this.update))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.handleClick=function(){e.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},t.prototype.update=function(){var e=this.cue,t=this.player_.currentTime();this.selected(e.startTime<=t&&t<e.endTime)},t}(i.default);r.default.registerComponent("ChaptersTrackMenuItem",s),n.default=s,t.exports=n.default},{"../../component.js":16,"../../menu/menu-item.js":60,"../../utils/fn.js":98}],39:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=a(e("./text-track-button.js")),r=a(e("../../component.js")),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../../utils/fn.js")),s=function(e){function t(n,a,i){var r=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),e.call(this,n,a,i),this.el_.setAttribute("aria-label","Descriptions Menu"),this.el_.setAttribute("title",this.localize("Descriptions Menu"));var s=n.textTracks();s&&function(){var e=o.bind(r,r.handleTracksChange);s.addEventListener("change",e),r.on("dispose",function(){s.removeEventListener("change",e)})}()}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.handleTracksChange=function(){for(var e=this.player().textTracks(),t=!1,n=0,a=e.length;a>n;n++){var i=e[n];if(i.kind!==this.kind_&&"showing"===i.mode){t=!0;break}}t?this.disable():this.enable()},t.prototype.buildCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildCSSClass.call(this)},t}(i.default);s.prototype.kind_="descriptions",s.prototype.controlText_="Descriptions",r.default.registerComponent("DescriptionsButton",s),n.default=s,t.exports=n.default},{"../../component.js":16,"../../utils/fn.js":98,"./text-track-button.js":42}],40:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=a(e("./text-track-menu-item.js")),r=a(e("../../component.js")),o=a(e("../../utils/to-title-case.js")),s=function(e){function t(n,a){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),a.track={kind:a.kind,player:n,label:o.default(a.kind)+" Off",default:!1,mode:"disabled"},a.selectable=!0,e.call(this,n,a),this.selected(!0)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.handleTracksChange=function(){for(var e=this.player().textTracks(),t=!0,n=0,a=e.length;a>n;n++){var i=e[n];if(i.kind===this.track.kind&&"showing"===i.mode){t=!1;break}}this.selected(t)},t}(i.default);r.default.registerComponent("OffTextTrackMenuItem",s),n.default=s,t.exports=n.default},{"../../component.js":16,"../../utils/to-title-case.js":109,"./text-track-menu-item.js":43}],41:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=a(e("./text-track-button.js")),r=a(e("../../component.js")),o=function(e){function t(n,a,i){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),e.call(this,n,a,i),this.el_.setAttribute("aria-label","Subtitles Menu"),this.el_.setAttribute("title",this.localize("Subtitles Menu")),this.el_.setAttribute("role","region")}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.buildCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildCSSClass.call(this)},t.prototype.update=function(){e.prototype.update.call(this),this.items&&this.items.length>1?this.show():this.hide()},t}(i.default);o.prototype.kind_="subtitles",o.prototype.controlText_="Subtitles",r.default.registerComponent("SubtitlesButton",o),n.default=o,t.exports=n.default},{"../../component.js":16,"./text-track-button.js":42}],42:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var r=a(e("../track-button.js")),o=a(e("../../component.js")),s=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(e("../../utils/fn.js")),e("./text-track-menu-item.js")),c=a(s),d=a(e("./off-text-track-menu-item.js")),l=function(e){function t(n){var a=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];i(this,t),a.tracks=n.textTracks(),e.call(this,n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.createItems=function(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];e.push(new d.default(this.player_,{kind:this.kind_}));var t=this.player_.textTracks();if(!t)return e;for(var n=0;n<t.length;n++){var a=t[n];a.kind===this.kind_&&e.push(new c.default(this.player_,{selectable:!0,track:a}))}return e},t}(r.default);o.default.registerComponent("TextTrackButton",l),n.default=l,t.exports=n.default},{"../../component.js":16,"../../utils/fn.js":98,"../track-button.js":48,"./off-text-track-menu-item.js":40,"./text-track-menu-item.js":43}],43:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=a(e("../../menu/menu-item.js")),r=a(e("../../component.js")),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../../utils/fn.js")),s=a(e("global/window")),c=a(e("global/document")),d=function(e){function t(n,a){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=a.track,d=n.textTracks();a.label=r.label||r.language||"Unknown",a.selected=r.default||"showing"===r.mode,e.call(this,n,a),this.track=r,d&&function(){var e=o.bind(i,i.handleTracksChange,i.id_);d.addEventListener("change",e),i.on("dispose",function(){d.removeEventListener("change",e)})}(),d&&void 0===d.onchange&&function(){var e=void 0;i.on(["tap","click"],function(){if("object"!=typeof s.default.Event)try{e=new s.default.Event("change")}catch(e){}e||(e=c.default.createEvent("Event")).initEvent("change",!0,!0),d.dispatchEvent(e)})}()}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.handleClick=function(t){var n=this.track.kind,a=this.player_.textTracks();if(e.prototype.handleClick.call(this,t),a)for(var i=0;i<a.length;i++){var r=a[i];r.kind===n&&(r.mode=r===this.track?"showing":"disabled")}},t.prototype.handleTracksChange=function(){this.selected("showing"===this.track.mode)},t}(i.default);r.default.registerComponent("TextTrackMenuItem",d),n.default=d,t.exports=n.default},{"../../component.js":16,"../../menu/menu-item.js":60,"../../utils/fn.js":98,"global/document":168,"global/window":169}],44:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=a(e("../../component.js")),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../../utils/dom.js")),o=a(e("../../utils/format-time.js")),s=function(e){function t(n,a){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),e.call(this,n,a),this.on(n,"timeupdate",this.updateContent),this.wallClockTimeDisplaySettings=a.playerOptions.wallClockTimeDisplaySettings,this.showWallClockTime=!!this.wallClockTimeDisplaySettings&&this.wallClockTimeDisplaySettings.enabled}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-current-time vjs-time-control vjs-control"});return this.contentEl_=r.createEl("div",{className:"vjs-current-time-display",innerHTML:'<span class="vjs-control-text">'+this.htmlEncode(this.localize("Current Time"))+" </span>0:00"},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},t.prototype.updateContent=function(){var e=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();e=o.default(e,this.player_.duration()),this.showWallClockTime&&(e=this.player_.getWallClockTime(null,this.wallClockTimeDisplaySettings.useLocalTimeZone,this.wallClockTimeDisplaySettings.timezone,this.wallClockTimeDisplaySettings.controlBar12HourFormat,!0)||e);var t=this.localize("Current Time");e!==this.time_&&(this.time_=e,this.contentEl_.innerHTML='<span class="vjs-control-text">'+this.htmlEncode(t)+"</span> "+e)},t}(i.default);i.default.registerComponent("CurrentTimeDisplay",s),n.default=s,t.exports=n.default},{"../../component.js":16,"../../utils/dom.js":96,"../../utils/format-time.js":100}],45:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=a(e("../../component.js")),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../../utils/dom.js")),o=a(e("../../utils/format-time.js")),s=function(e){function t(n,a){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),e.call(this,n,a),this.wallClockTimeDisplaySettings=a.playerOptions.wallClockTimeDisplaySettings,this.showWallClockTime=!!this.wallClockTimeDisplaySettings&&this.wallClockTimeDisplaySettings.enabled,this.showWallClockTime?this.on(n,"timeupdate",this.updateContentWallClockTime):(this.on(n,"durationchange",this.updateContent),a&&a.playerOptions&&a.playerOptions.handleEventDelayedError&&this.updateContent())}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-duration vjs-time-control vjs-control"});return this.contentEl_=r.createEl("div",{className:"vjs-duration-display",innerHTML:'<span class="vjs-control-text">'+this.htmlEncode(this.localize("Duration Time"))+"</span> 0:00"},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},t.prototype.updateContent=function(){var e=this.player_.duration();if(e&&this.duration_!==e){this.duration_=e;var t=this.localize("Duration Time"),n=o.default(e);this.contentEl_.innerHTML='<span class="vjs-control-text">'+this.htmlEncode(t)+"</span> "+n}},t.prototype.updateContentWallClockTime=function(){var e,t=this.player_.playableWindowEndInSec()||this.player_.duration();if(e=this.player_.getWallClockTime(t,this.wallClockTimeDisplaySettings.useLocalTimeZone,this.wallClockTimeDisplaySettings.timezone,this.wallClockTimeDisplaySettings.controlBar12HourFormat,!0)){if(this.duration_!==e){this.duration_=e;var n=this.localize("End Time");this.contentEl_.innerHTML='<span class="vjs-control-text">'+this.htmlEncode(n)+"</span> "+e}}else this.updateContent()},t}(i.default);i.default.registerComponent("DurationDisplay",s),n.default=s,t.exports=n.default},{"../../component.js":16,"../../utils/dom.js":96,"../../utils/format-time.js":100}],46:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=a(e("../../component.js")),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../../utils/dom.js")),o=a(e("../../utils/format-time.js")),s=function(e){function t(n,a){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),e.call(this,n,a),this.on(n,"timeupdate",this.updateContent),this.on(n,"durationchange",this.updateContent)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-remaining-time vjs-time-control vjs-control"});return this.contentEl_=r.createEl("div",{className:"vjs-remaining-time-display",innerHTML:'<span class="vjs-control-text">'+this.htmlEncode(this.localize("Remaining Time"))+"</span> -0:00"},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},t.prototype.updateContent=function(){if(this.player_.duration()){var e=this.localize("Remaining Time"),t=o.default(this.player_.remainingTime());t!==this.formattedTime_&&(this.formattedTime_=t,this.contentEl_.innerHTML='<span class="vjs-control-text">'+this.htmlEncode(e)+"</span> -"+t)}},t}(i.default);i.default.registerComponent("RemainingTimeDisplay",s),n.default=s,t.exports=n.default},{"../../component.js":16,"../../utils/dom.js":96,"../../utils/format-time.js":100}],47:[function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var i=function(e){return e&&e.__esModule?e:{default:e}}(e("../../component.js")),r=function(e){function t(){a(this,t),e.apply(this,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"})},t.prototype.blank=function(){this.el().innerHTML="<div><span></span></div>"},t.prototype.unblank=function(){this.el().innerHTML="<div><span>/</span></div>"},t}(i.default);i.default.registerComponent("TimeDivider",r),n.default=r,t.exports=n.default},{"../../component.js":16}],48:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=a(e("../menu/menu-button.js")),r=a(e("../component.js")),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../utils/fn.js")),s=function(e){function t(n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=a.tracks;if(e.call(this,n,a),this.items.length<=1&&this.hide(),i){var r=o.bind(this,this.update);i.addEventListener("removetrack",r),i.addEventListener("addtrack",r),this.player_.on("dispose",function(){i.removeEventListener("removetrack",r),i.removeEventListener("addtrack",r)})}}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(i.default);r.default.registerComponent("TrackButton",s),n.default=s,t.exports=n.default},{"../component.js":16,"../menu/menu-button.js":59,"../utils/fn.js":98}],49:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=a(e("../../slider/slider.js")),r=a(e("../../component.js")),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../../utils/fn.js")),s=(a(e("./volume-level.js")),function(e){function t(n,a){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),e.call(this,n,a),this.on(n,"volumechange",this.updateARIAAttributes),n.ready(o.bind(this,this.updateARIAAttributes))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar "},{"aria-label":"volume level"})},t.prototype.handleMouseMove=function(e){this.checkMuted(),this.player_.volume(this.calculateDistance(e))},t.prototype.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},t.prototype.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},t.prototype.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},t.prototype.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},t.prototype.updateARIAAttributes=function(){var e=(100*this.player_.volume()).toFixed(2);this.el_.setAttribute("aria-valuenow",e),this.el_.setAttribute("aria-valuetext",e+"%")},t}(i.default));s.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},s.prototype.playerEvent="volumechange",r.default.registerComponent("VolumeBar",s),n.default=s,t.exports=n.default},{"../../component.js":16,"../../slider/slider.js":69,"../../utils/fn.js":98,"./volume-level.js":51}],50:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=a(e("../../component.js")),r=(a(e("./volume-bar.js")),function(e){function t(n,a){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),e.call(this,n,a),n.tech_&&!1===n.tech_.featuresVolumeControl&&this.addClass("vjs-hidden"),this.on(n,"loadstart",function(){!1===n.tech_.featuresVolumeControl?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")})}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control"})},t}(i.default));r.prototype.options_={children:["volumeBar"]},i.default.registerComponent("VolumeControl",r),n.default=r,t.exports=n.default},{"../../component.js":16,"./volume-bar.js":49}],51:[function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var i=function(e){return e&&e.__esModule?e:{default:e}}(e("../../component.js")),r=function(e){function t(){a(this,t),e.apply(this,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},t}(i.default);i.default.registerComponent("VolumeLevel",r),n.default=r,t.exports=n.default},{"../../component.js":16}],52:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../utils/fn.js")),o=a(e("../component.js")),s=a(e("../popup/popup.js")),c=a(e("../popup/popup-button.js")),d=a(e("./mute-toggle.js")),l=a(e("./volume-control/volume-bar.js")),u=function(e){function t(n){function a(){n.tech_&&!1===n.tech_.featuresVolumeControl?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")}var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];i(this,t),void 0===r.inline&&(r.inline=!0),void 0===r.vertical&&(r.vertical=!r.inline),r.volumeBar=r.volumeBar||{},r.volumeBar.vertical=!!r.vertical,e.call(this,n,r),this.on(n,"volumechange",this.volumeUpdate),this.on(n,"loadstart",this.volumeUpdate),a.call(this),this.on(n,"loadstart",a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.buildCSSClass=function(){var t;return t=this.options_.vertical?"vjs-volume-menu-button-vertical":"vjs-volume-menu-button-horizontal","vjs-volume-menu-button "+e.prototype.buildCSSClass.call(this)+" "+t},t.prototype.createPopup=function(){var e=new s.default(this.player_,{contentElType:"div"}),t=new l.default(this.player_,this.options_.volumeBar);return e.addChild(t),this.menuContent=e,this.volumeBar=t,this.attachVolumeBarEvents(),e},t.prototype.handleClick=function(){d.default.prototype.handleClick.call(this),this.buttonPressed_=!this.buttonPressed_,e.prototype.handleClick.call(this)},t.prototype.attachVolumeBarEvents=function(){this.menuContent.on(["mousedown","touchdown"],r.bind(this,this.handleMouseDown))},t.prototype.handleMouseDown=function(){this.on(["mousemove","touchmove"],r.bind(this.volumeBar,this.volumeBar.handleMouseMove)),this.on(this.el_.ownerDocument,["mouseup","touchend"],this.handleMouseUp)},t.prototype.handleMouseUp=function(){this.off(["mousemove","touchmove"],r.bind(this.volumeBar,this.volumeBar.handleMouseMove))},t}(c.default);u.prototype.volumeUpdate=d.default.prototype.update,u.prototype.controlText_="Volume",u.prototype.buttonPressed_=!1,u.prototype.unpressButton=function(){this.menuContent.unlockShowing(),this.el_.setAttribute("aria-expanded","false"),this.buttonPressed_=!1},o.default.registerComponent("VolumeMenuButton",u),n.default=u,t.exports=n.default},{"../component.js":16,"../popup/popup-button.js":65,"../popup/popup.js":66,"../utils/fn.js":98,"./mute-toggle.js":22,"./volume-control/volume-bar.js":49}],53:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=a(e("./component")),r=a(e("./modal-dialog")),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./utils/dom")),s=a(e("./utils/merge-options")),c=function(e){function t(n,a){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),e.call(this,n,a),this.contentEl_.setAttribute("tabIndex",0),this.on(n,"error",this.open)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.buildCSSClass=function(){return"vjs-error-display "+e.prototype.buildCSSClass.call(this)},t.prototype.content=function(){var e=this.player().error();return e?this.localize(e.message):""},t.prototype.open=function(){e.prototype.open.call(this),this.opened_&&(o.textContent(this.descEl_,this.content()),this.player_.controlBar&&this.player_.controlBar.hide())},t.prototype.close=function(){!0===this.hasBeenOpened_&&this.player_.controlBar&&this.player_.controlBar.show(),e.prototype.close.call(this)},t}(r.default);c.prototype.options_=s.default(r.default.prototype.options_,{fillAlways:!0,temporary:!1,uncloseable:!0}),i.default.registerComponent("ErrorDisplay",c),n.default=c,t.exports=n.default},{"./component":16,"./modal-dialog":62,"./utils/dom":96,"./utils/merge-options":105}],54:[function(e,t,n){"use strict";n.__esModule=!0;var a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./utils/events.js")),i=function(){};i.prototype.allowedEvents_={},i.prototype.on=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},a.on(this,e,t),this.addEventListener=n},i.prototype.addEventListener=i.prototype.on,i.prototype.off=function(e,t){a.off(this,e,t)},i.prototype.removeEventListener=i.prototype.off,i.prototype.one=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},a.one(this,e,t),this.addEventListener=n},i.prototype.trigger=function(e){var t=e.type||e;"string"==typeof e&&(e={type:t}),e=a.fixEvent(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),a.trigger(this,e)},i.prototype.dispatchEvent=i.prototype.trigger,n.default=i,t.exports=n.default},{"./utils/events.js":97}],55:[function(e,t,n){"use strict";n.__esModule=!0;var a=function(e){return e&&e.__esModule?e:{default:e}}(e("./utils/log")),i=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.super_=t)};n.default=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=function(){e.apply(this,arguments)},r={};for(var o in"object"==typeof t?("function"==typeof t.init&&(a.default.warn("Constructor logic via init() is deprecated; please use constructor() instead."),t.constructor=t.init),t.constructor!==Object.prototype.constructor&&(n=t.constructor),r=t):"function"==typeof t&&(n=t),i(n,e),r)r.hasOwnProperty(o)&&(n.prototype[o]=r[o]);return n},t.exports=n.default},{"./utils/log":104}],56:[function(e,t,n){"use strict";n.__esModule=!0;for(var a=function(e){return e&&e.__esModule?e:{default:e}}(e("global/document")),i={},r=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],o=r[0],s=void 0,c=0;c<r.length;c++)if(r[c][1]in a.default){s=r[c];break}if(s)for(c=0;c<s.length;c++)i[o[c]]=s[c];n.default=i,t.exports=n.default},{"global/document":168}],57:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=a(e("./component")),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./utils/dom.js")),o=(a(e("global/document")),function(e){function t(n,a){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),e.call(this,n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.createEl=function(){this.contentEl_=r.createEl("span",{});var t=e.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return t.appendChild(this.contentEl_),t},t}(i.default));i.default.registerComponent("LoadingSpinner",o),n.default=o,t.exports=n.default},{"./component":16,"./utils/dom.js":96,"global/document":168}],58:[function(e,t,n){"use strict";n.__esModule=!0;var a=function(e){return e&&e.__esModule?e:{default:e}}(e("object.assign")),i=function e(t){"number"==typeof t?this.code=t:"string"==typeof t?this.message=t:"object"==typeof t&&a.default(this,t),this.message||(this.message=e.defaultMessages[this.code]||"")};i.prototype.code=0,i.prototype.message="",i.prototype.status=null,i.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],i.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var r=0;r<i.errorTypes.length;r++)i[i.errorTypes[r]]=r,i.prototype[i.errorTypes[r]]=r;n.default=i,t.exports=n.default},{"object.assign":162}],59:[function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var o=i(e("../tooltip-clickable.js")),s=i(e("../component.js")),c=i(e("./menu.js")),d=a(e("../utils/dom.js")),l=a(e("../utils/fn.js")),u=i(e("../utils/to-title-case.js")),f=a(e("../utils/browser.js")),p=(i(e("global/window")),e("../utils/close-other-menu.js")),m=i(p),_=function(e){function t(n){var a=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];r(this,t),e.call(this,n,a),this.update(),this.enabled_=!0,this.el_.setAttribute("aria-haspopup","true"),this.el_.setAttribute("role","menuitem"),this.on("keydown",this.handleSubmenuKeyPress),this.on("mouseover",this.handleMouseOver),this.on("mouseleave",this.handleMouseLeave),this.on("focus",this.clearOtherMenus),this.on("focusin",this.handleFocusin),this.on("focusout",this.clearKeyboardTooltip);var i=this;n.on("userinactive",function(){i.buttonPressed_&&(i.unpressButton(),i.el_.focus())})}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.update=function(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.el_.setAttribute("aria-expanded","false"),this.items&&0===this.items.length?this.hide():this.items&&this.items.length>1&&this.show()},t.prototype.createMenu=function(){var e=new c.default(this.player_);if(this.options_.title){var t=d.createEl("li",{className:"vjs-menu-title",innerHTML:this.htmlEncode(u.default(this.options_.title)),tabIndex:-1});e.children_.unshift(t),d.insertElFirst(t,e.contentEl())}if(this.items=this.createItems(),this.items)for(var n=0;n<this.items.length;n++)e.addItem(this.items[n]);return e},t.prototype.createItems=function(){},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},t.prototype.buildCSSClass=function(){var t="vjs-menu-button";return"vjs-menu-button "+(t+=!0===this.options_.inline?"-inline":"-popup")+" "+e.prototype.buildCSSClass.call(this)},t.prototype.handleFocusin=function(){this.buttonPressed_||e.prototype.handleFocusin.call(this)},t.prototype.hasJustBeenClicked=function(){return!1},t.prototype.handleClick=function(){this.hasJustBeenClicked()||(this.clearOtherMenus(),this.one(this.menu.contentEl(),"mouseleave",l.bind(this,function(){this.unpressButton(),this.el_.blur()})),this.buttonPressed_?this.unpressButton():this.pressButton())},t.prototype.handleKeyPress=function(t){27===t.which||9===t.which?(this.buttonPressed_&&this.unpressButton(),9!==t.which&&t.preventDefault()):38===t.which||40===t.which?this.buttonPressed_||(this.pressButton(),t.preventDefault()):e.prototype.handleKeyPress.call(this,t)},t.prototype.handleSubmenuKeyPress=function(e){(27===e.which||9===e.which)&&(this.buttonPressed_&&(this.unpressButton(),27===e.which&&this.el_.focus()),9!==e.which&&e.preventDefault())},t.prototype.handleMouseOver=function(){this.clearOtherMenus(),this.buttonPressed_||this.pressButton(),this.clearKeyboardTooltip()},t.prototype.handleMouseLeave=function(){this.unpressButton()},t.prototype.pressButton=function(){this.enabled_&&(this.buttonPressed_=!0,this.menu.lockShowing(),this.el_.setAttribute("aria-expanded","true"),this.menu.focus())},t.prototype.unpressButton=function(){if(this.enabled_){this.buttonPressed_=!1,this.menu.unlockShowing(),this.el_.setAttribute("aria-expanded","false");var e=this.player().getChild("textTrackSettings").el_.className;f.IS_ANDROID&&e.indexOf("vjs-hidden")>=0&&this.el_.focus()}},t.prototype.disable=function(){return this.buttonPressed_=!1,this.menu.unlockShowing(),this.el_.setAttribute("aria-expanded","false"),this.enabled_=!1,e.prototype.disable.call(this)},t.prototype.enable=function(){return this.enabled_=!0,e.prototype.enable.call(this)},t.prototype.clearOtherMenus=function(){m.default(this),this.clearKeyboardTooltip()},t}(o.default);s.default.registerComponent("MenuButton",_),n.default=_,t.exports=n.default},{"../component.js":16,"../tooltip-clickable.js":76,"../utils/browser.js":93,"../utils/close-other-menu.js":95,"../utils/dom.js":96,"../utils/fn.js":98,"../utils/to-title-case.js":109,"./menu.js":61,"global/window":169}],60:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=a(e("../clickable-component.js")),r=a(e("../component.js")),o=a(e("object.assign")),s=function(e){function t(n,a){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),e.call(this,n,a),this.selectable=a.selectable,this.selected(a.selected),this.selectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitem")}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.createEl=function(t,n,a){return e.prototype.createEl.call(this,"li",o.default({className:"vjs-menu-item",innerHTML:this.htmlEncode(this.localize(this.options_.label)),tabIndex:-1},n),a=o.default({"aria-label":this.htmlEncode(this.localize(this.options_.label))},a))},t.prototype.handleClick=function(){this.selected(!0)},t.prototype.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected")):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(" ")))},t}(i.default);r.default.registerComponent("MenuItem",s),n.default=s,t.exports=n.default},{"../clickable-component.js":14,"../component.js":16,"object.assign":162}],61:[function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}n.__esModule=!0;var i=function(e){return e&&e.__esModule?e:{default:e}}(e("../component.js")),r=a(e("../utils/dom.js")),o=a(e("../utils/fn.js")),s=a(e("../utils/events.js")),c=function(e){function t(n,a){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),e.call(this,n,a),this.focusedChild_=-1,this.on("keydown",this.handleKeyPress)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.addItem=function(e){this.addChild(e),e.on("click",o.bind(this,function(){this.unlockShowing()}))},t.prototype.createEl=function(){var t=this.options_.contentElType||"ul";this.contentEl_=r.createEl(t,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var n=e.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return n.setAttribute("role","presentation"),n.appendChild(this.contentEl_),s.on(n,"click",function(e){e.preventDefault(),e.stopImmediatePropagation()}),n},t.prototype.handleKeyPress=function(e){37===e.which||40===e.which?(e.preventDefault(),this.stepForward()):(38===e.which||39===e.which)&&(e.preventDefault(),this.stepBack())},t.prototype.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e,!0)},t.prototype.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e,!1)},t.prototype.focus=function(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],t=arguments.length<=1||void 0===arguments[1]||arguments[1],n=this.children().slice(),a=n.length&&n[0].className&&/vjs-menu-title/.test(n[0].className);a&&n.shift(),n.length>0&&(0>e?e=0:e>=n.length&&(e=n.length-1),-1!==(e=this.getNextVisibleElement(e,n,t))&&(this.focusedChild_=e,n[e].el_.focus()))},t.prototype.getNextVisibleElement=function(e,t,n){for(;e>=0&&e<t.length;){if(r.isVisible(t[e].el_))return e;n?e+=1:e-=1}return-1},t}(i.default);i.default.registerComponent("Menu",c),n.default=c,t.exports=n.default},{"../component.js":16,"../utils/dom.js":96,"../utils/events.js":97,"../utils/fn.js":98}],62:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}n.__esModule=!0;var r=i(e("./utils/dom")),o=i(e("./utils/fn")),s=(a(e("./utils/log")),e("./component")),c=a(s),d=(a(e("./close-button")),"vjs-modal-dialog"),l=function(e){function t(n,a){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),e.call(this,n,a),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=r.createEl("div",{className:d+"-content"},{role:"document"}),this.descEl_=r.createEl("p",{className:d+"-description vjs-offscreen",id:this.el().getAttribute("aria-describedby")}),r.textContent(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},t.prototype.buildCSSClass=function(){return d+" vjs-hidden "+e.prototype.buildCSSClass.call(this)},t.prototype.handleKeyPress=function(e){27===e.which&&this.closeable()&&this.close()},t.prototype.label=function(){return this.options_.label||this.localize("Modal Window")},t.prototype.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},t.prototype.open=function(){if(!this.opened_){var e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.wasPlaying_&&e.pause(),this.closeable()&&this.on(this.el_.ownerDocument,"keydown",o.bind(this,this.handleKeyPress)),this.playerControlsEnabled_=e.controls(),this.playerControlsEnabled_&&e.controls(!1),this.show(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}return this},t.prototype.opened=function(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},t.prototype.close=function(){if(this.opened_){var e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&e.play(),this.closeable()&&this.off(this.el_.ownerDocument,"keydown",o.bind(this,this.handleKeyPress)),this.playerControlsEnabled_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.options_.temporary&&this.dispose()}return this},t.prototype.closeable=function(e){if("boolean"==typeof e){var t=this.closeable_=!!e,n=this.getChild("closeButton");if(t&&!n){var a=this.contentEl_;this.contentEl_=this.el_,n=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=a,this.on(n,"close",this.close)}!t&&n&&(this.off(n,"close",this.close),this.removeChild(n),n.dispose())}return this.closeable_},t.prototype.fill=function(){return this.fillWith(this.content())},t.prototype.fillWith=function(e){var t=this.contentEl(),n=t.parentNode,a=t.nextSibling;return this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n&&n.removeChild(t),this.empty(),r.insertContent(t,e),this.trigger("modalfill"),n&&(a?n.insertBefore(t,a):n.appendChild(t)),this},t.prototype.empty=function(){return this.trigger("beforemodalempty"),r.emptyEl(this.contentEl()),this.trigger("modalempty"),this},t.prototype.content=function(e){return void 0!==e&&(this.content_=e),this.content_},t}(c.default);l.prototype.options_={temporary:!0},c.default.registerComponent("ModalDialog",l),n.default=l,t.exports=n.default},{"./close-button":15,"./component":16,"./utils/dom":96,"./utils/fn":98,"./utils/log":104}],63:[function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var r=i(e("./component.js")),o=i(e("global/document")),s=i(e("global/window")),c=a(e("./utils/events.js")),d=a(e("./utils/dom.js")),l=a(e("./utils/fn.js")),f=a(e("./utils/guid.js")),p=a(e("./utils/browser.js")),m=i(e("./utils/log.js")),_=i(e("./utils/to-camel-case.js")),h=i(e("./utils/to-title-case.js")),b=e("./utils/time-ranges.js"),g=e("./utils/buffer.js"),v=a(e("./utils/stylesheet.js")),y=i(e("./fullscreen-api.js")),S=i(e("./media-error.js")),D=i(e("safe-json-parse/tuple")),I=i(e("object.assign")),x=i(e("./utils/merge-options.js")),C=i(e("./tracks/text-track-list-converter.js")),O=i(e("./tracks/audio-track-list.js")),w=i(e("./tracks/video-track-list.js")),E=(i(e("./tech/loader.js")),e("./FullscreenOutline.js")),A=(i(E),e("./poster-image.js")),L=(i(A),e("./tracks/text-track-display.js")),k=(i(L),e("./loading-spinner.js")),M=(i(k),e("./aria-alerts.js")),P=(i(M),e("./big-play-button.js")),T=(i(P),e("./control-bar/control-bar.js")),U=(i(T),e("./error-display.js")),F=(i(U),e("./tracks/text-track-settings.js")),H=(i(F),e("./modal-dialog")),R=i(H),N=i(e("./utils/highContrastCheck.js")),B=i(e("./utils/font-checker.js")),j=i(e("./tech/tech.js")),V=(i(e("./tech/html5.js")),function(e){function t(n,a,i,r){var o=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n.id=n.id||"vjs_video_"+f.newGUID(),a=I.default(t.getTagSettings(n),a),u.Logger.setLogConfig(a.traceConfig),a.initChildren=!1,a.createEl=!1,a.reportTouchActivity=!1,!a.language)if("function"==typeof n.closest){var s=n.closest("[lang]");s&&(a.language=s.getAttribute("lang"))}else for(var c=n;c&&1===c.nodeType;){if(d.getElAttributes(c).hasOwnProperty("lang")){a.language=c.getAttribute("lang");break}c=c.parentNode}if(e.call(this,null,a,i),this.multiPlayerContainerDiv=null,this.styleEl_=null,this.sharedStyleAndParentDiv=!1,this.mainPlayer=null,this.isSeeking_=!1,this.canPlayThroughSignalled_=!1,this.pendingStartTime=-1,this.isInAudioOnlyMode=!1,this.displayedAudioOnlyMessage=!1,this.mimeTypeToErrorMap={},r&&(this.multiPlayerContainerDiv=r.multiPlayerContainerDiv,this.styleEl_=r.styleEl_,this.sharedStyleAndParentDiv=!0,this.mainPlayer=r),!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");this.tag=n,this.tagAttributes=n&&d.getElAttributes(n),this.language(this.options_.language),a.languages?function(){var e={};Object.getOwnPropertyNames(a.languages).forEach(function(t){e[t.toLowerCase()]=a.languages[t]}),o.languages_=e}():this.languages_=t.prototype.options_.languages,this.cache_={},a.muted&&(this.cache_.muted=!0),this.cache_.volume=1,this.poster_=a.poster||"",n.poster="",this.controls_=!!a.controls,this.adClickEnabled_=!!a.adClickEnabled,n.controls=!1,this.scrubbing_=!1,this.el_=this.createEl();var l=x.default(this.options_);this.options_.playerOptions=l,this.initAmpJSLoader(),this.initChildren(),this.isAudio("audio"===n.nodeName.toLowerCase()),this.isAutoplaySuccess=!0,this.addClass(this.controls()?"vjs-controls-enabled":"vjs-controls-disabled"),this.isAudio()?this.el_.setAttribute("aria-label",a.ariaLabel||"audio player, press space key to play/pause the audio"):this.el_.setAttribute("aria-label",a.ariaLabel||"video player, press space key to play/pause the video"),this.isAudio()&&this.addClass("vjs-audio"),this.flexNotSupported_()&&this.addClass("vjs-no-flex"),this.addClass("vjs-player"),p.IS_IOS||this.addClass("vjs-workinghover"),t.players[this.id_]=this,this.userActive(!0),this.reportUserActivity(),this.listenForUserActivity_(),this.on("fullscreenchange",this.handleFullscreenChange_),this.on("stageclick",this.handleStageClick_),this.addThrottledWindowResizeListener(function(){this.updateStyleEl_()},200,this),this.pluginInitStatus={},this.loadPlugins(a.plugins),this.on("keydown",this.handleKeyPress)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.loadPlugins=function(e){e&&Object.getOwnPropertyNames(e).forEach(function(t){if("function"==typeof this[t]){if(!this.pluginInitStatus[t])try{this[t](e[t]),this.pluginInitStatus[t]=!0}catch(e){m.default.error("plugin "+t+" failed:",e)}}else m.default.error("Unable to find plugin:",t)},this)},t.prototype.dispose=function(){this.el_&&(this.trigger("disposing"),this.trigger("dispose"),this.off("dispose")),t.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.tech_=null),e.prototype.dispose.call(this),this.sharedStyleAndParentDiv||(this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),this.multiPlayerContainerDiv&&this.multiPlayerContainerDiv.parentNode&&this.multiPlayerContainerDiv.parentNode.removeChild(this.multiPlayerContainerDiv),this.multiPlayerContainerDiv&&d.removeElData(this.multiPlayerContainerDiv),this.multiPlayerContainerDiv=null),this.playbackQualityObserver=null},t.prototype.createEl=function(){var t=!1;this.multiPlayerContainerDiv||(this.multiPlayerContainerDiv=e.prototype.createEl.call(this,"div"),this.multiPlayerContainerDiv.playerId=this.tag.id,this.multiPlayerContainerDiv.player=this,t=!0);var n=this.el_=e.prototype.createEl.call(this,"div"),a=this.tag;a.removeAttribute("width"),a.removeAttribute("height");var i=d.getElAttributes(a),r=this;if(Object.getOwnPropertyNames(i).forEach(function(e){t&&("class"===e?r.multiPlayerContainerDiv.className=i[e]:r.multiPlayerContainerDiv.setAttribute(e,i[e]))}),null===this.mainPlayer?(this.el_.setAttribute("tabIndex",this.multiPlayerContainerDiv.getAttribute("tabIndex")),this.multiPlayerContainerDiv.setAttribute("tabIndex","-1")):this.el_.setAttribute("tabIndex",this.mainPlayer.el_.getAttribute("tabIndex")),a.playerId=a.id,a.id+="_html5_api",a.className="vjs-tech",a.player=n.player=this,this.addClass(this.options_.autoplay&&this.options_.hideBigPlayButtonOnAutoplay?"vjs-waiting":"vjs-paused"),!0!==s.default.VIDEOJS_NO_DYNAMIC_STYLE&&null===this.styleEl_){this.styleEl_=v.createStyleElement("vjs-styles-dimensions");var o=d.$(".vjs-styles-defaults"),c=d.$("head");c.insertBefore(this.styleEl_,o?o.nextSibling:c.firstChild)}this.width(this.options_.width),this.height(this.options_.height),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio);for(var l=a.getElementsByTagName("a"),u=0;u<l.length;u++){var f=l.item(u);d.addElClass(f,"vjs-hidden"),f.setAttribute("hidden","hidden")}return a.initNetworkState_=a.networkState,t&&a.parentNode.insertBefore(this.multiPlayerContainerDiv,a),this.multiPlayerContainerDiv.appendChild(n),d.insertElFirst(a,n),this.children_.unshift(a),this.el_=n,N.default(),B.default(),n},t.prototype.width=function(e){return this.dimension("width",e)},t.prototype.height=function(e){return this.dimension("height",e)},t.prototype.dimension=function(e,t){var n=e+"_";if(void 0===t)return-1!==(""+this[n]).indexOf("%")?parseInt(this.multiPlayerContainerDiv["offset"+h.default(e)],10):this[n]||0;if(""===t)this[n]=void 0;else if(-1!==(""+t).indexOf("%"))this.multiPlayerContainerDiv.style[e]=t,this[n]=t;else if("auto"===t)this._autoDimension=e;else{var a=parseFloat(t);if(isNaN(a))return m.default.error('Improper value "'+t+'" supplied for for '+e),this;this[n]=a}return this.updateStyleEl_(),this},t.prototype.fluid=function(e){return void 0===e?!!this.fluid_:(this.fluid_=!!e,void(e?d.addElClass(this.multiPlayerContainerDiv,"vjs-fluid"):d.removeElClass(this.multiPlayerContainerDiv,"vjs-fluid")))},t.prototype.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},t.prototype.updateStyleEl_=function(){if(!0!==s.default.VIDEOJS_NO_DYNAMIC_STYLE){var e=20,t=l.bind(this,function(){var n,a,i,r=void 0;void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?r=this.aspectRatio_:this.videoWidth()?(r=this.videoWidth()+":"+this.videoHeight(),1080===this.videoHeight()&&1920===this.videoWidth()&&e--&&this.setTimeout(t,100)):(r="16:9",e--&&this.setTimeout(t,100));var o=r.split(":"),s=o[1]/o[0];n=void 0!==this.width_?this.dimension("width"):void 0!==this.height_?this.height_/s:this.videoWidth()||300,a=void 0!==this.height_?this.dimension("height"):n*s;var c=d.getElAttributes(this.multiPlayerContainerDiv);i=/^[^a-zA-Z]/.test(c.id)?"dimensions-"+c.id:c.id+"-dimensions",null!==this.mainPlayer&&this.mainPlayer.sizeCal||(d.addElClass(this.multiPlayerContainerDiv,i),v.setTextContent(this.styleEl_,"\n                ."+i+" {\n                        width: "+n+"px;\n                        height: "+a+"px;\n                    }\n\n                ."+i+".vjs-fluid {\n                        padding-top: "+100*s+"%;\n                    }\n            "),this.sizeCal=!0)});t()}else{var n="number"==typeof this.width_?this.width_:this.options_.width,a="number"==typeof this.height_?this.height_:this.options_.height,i=this.tech_&&this.tech_.el();i&&(n>=0&&(i.width=n),a>=0&&(i.height=a))}},t.prototype.hasAudioStream=function(){var e=this.currentAudioStreamList();return!!e&&!!e.streams&&!!e.streams.length},t.prototype.loadTech_=function(e,t){var n=this;this.tech_&&this.unloadTech_(),"Html5"!==e&&this.tag&&(j.default.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=e,this.isReady_=!1;var a=this.id()+"_"+e+"_api_"+parseInt(1e4*Math.random()),i=I.default({nativeControlsForTouch:this.options_.nativeControlsForTouch,source:t,playerId:this.id(),techId:a,videoTracks:this.videoTracks_,textTracks:this.textTracks_,audioTracks:this.audioTracks_,autoplay:this.options_.autoplay,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),"vtt.js":this.options_["vtt.js"],staleDataTimeLimitInSec:this.options_.staleDataTimeLimitInSec,ampJsLoader:this.ampJsLoader,playbackQualityObserver:this.playbackQualityObserver},this.options_[_.default(e)]);i.playerOptions=I.default({},this.options_),this.tag&&(i.tag=this.tag),i.originalTagAttributes=this.tagAttributes,t&&(this.currentType_=t.type,i.playerOptions.currentType=t.type,t.src===this.cache_.src&&this.cache_.currentTime>0&&(i.startTime=this.cache_.currentTime),this.cache_.src=t.src,this.cache_.type=t.type);var o=j.default.getTech(e);o||(o=r.default.getComponent(e)),this.tech_=new o(i),this.initPlaybackQualityObserver(),this.tech_.ready(l.bind(this,this.handleTechReady_),!0),C.default.jsonToTextTracks(this.textTracksJson_||[],this.tech_),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"canplay",this.handleTechCanPlay_),this.on(this.tech_,"canplaythrough",this.handleTechCanPlayThrough_),this.on(this.tech_,"playing",this.handleTechPlaying_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"seeked",this.handleTechSeeked_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"progress",this.handleTechProgress_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"suspend",this.handleTechSuspend_),this.on(this.tech_,"abort",this.handleTechAbort_),this.on(this.tech_,"emptied",this.handleTechEmptied_),this.on(this.tech_,"stalled",this.handleTechStalled_),this.on(this.tech_,"loadedmetadata",this.handleTechLoadedMetaData_),this.on(this.tech_,"loadeddata",this.handleTechLoadedData_),this.on(this.tech_,"timeupdate",this.handleTechTimeUpdate_),this.on(this.tech_,"ratechange",this.handleTechRateChange_),this.on(this.tech_,"volumechange",this.handleTechVolumeChange_),this.on(this.tech_,"texttrackchange",this.handleTechTextTrackChange_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.on(this.tech_,"sourceset",this.handleTechSourceSet_),this.on(this.tech_,"downloadbitratechanged",this.handleTechDownloadBitrateChanged_),this.on(this.tech_,"playbackbitratechanged",this.handleTechPlaybackBitrateChanged_),this.on(this.tech_,"emsgAvailable",this.handleTechEmsgAvailable_),this.on(this.tech_,"hybridPlaybackEnabled",this.handleHybridPlaybackEnabled_),this.on(this.tech_,"autoplayfailed",this.handleAutoplayFailed_),this.on(this.tech_,"saveMemoryLog",function(){n.trigger("saveMemoryLog")}),this.on(this.tech_,"unsupportedTracksRemoved",this.handleTechTracksRemoved_),this.on(this.tech_,"drmselected",function(){n.trigger("drmselected")}),["manifestFetchCompleted","manifestParsingCompleted","initialBandwidthEstimationCompleted","mediaSourceSrcSetResolved","javascriptBridgeCreated","mediaSourceSrcSetRequested"].forEach(function(e){var t=this;this.on(this.tech_,e,function(){t.trigger(e)})},this),this.on(this.tech_,"aesKeyFetchCompleted",function(e){n.trigger("aesKeyFetchCompleted",{type:e.message,totalDownloadTimeMs:e.data.totalDownloadTimeMs})}),this.on(this.tech_,"decryptorInitialized",function(e){n.trigger("decryptorInitialized",{type:e.message})}),this.on(this.tech_,"decryptionFailed",function(e){n.trigger("decryptionFailed",{url:e.message,streamType:e.data.streamType})}),this.on(this.tech_,"onDownloadRequestStarted",function(e){n.options_.azureHtml5JS.enableRaiseDownloadStartedEvent&&n.trigger("onDownloadRequestStarted",{msg:e.message,xhr:e.data.xhr,segmentType:e.data.segmentType,headers:e.data.headers,retryCount:e.data.retryCount,url:e.data.url})}),this.on(this.tech_,"onDownloadRequestEnded",function(e){"onLoaded"===e.message?n.options_.azureHtml5JS.enableRaiseDownloadStartedEvent?n.trigger("onDownloadRequestEnded",{msg:e.message,xhr:e.data.xhr,bandwidthInfo:e.data.bandwidthInfo,retryCount:e.data.retryCount,segmentType:e.data.segmentType,headers:e.data.headers,url:e.data.url}):n.trigger("onDownloadRequestEnded",{msg:e.message,xhr:e.data.xhr,bandwidthInfo:e.data.bandwidthInfo,retryCount:e.data.retryCount,segmentType:e.data.segmentType}):n.trigger("onDownloadRequestEnded",{msg:e.message,xhr:e.data.xhr})}),this.on(this.tech_,"enhancedTrackReady",function(){n.trigger("enhancedTrackReady")}),this.on(this.tech_,"prefetchedManifestPromiseResolved",function(e){n.trigger("prefetchedManifestPromiseResolved",{type:e.message,timeSpentWaitingPrefetchedManifestMS:e.data.timeSpentWaitingPrefetchedManifestMS})}),this.usingNativeControls(this.techGet_("controls")),(this.controls()&&!this.usingNativeControls()||!this.controls()&&this.adClickEnabled_)&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===e&&this.tag||d.insertElFirst(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},t.prototype.unloadTech_=function(){this.videoTracks_=this.videoTracks(),this.textTracks_=this.textTracks(),this.audioTracks_=this.audioTracks(),this.textTracksJson_=C.default.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1},t.prototype.tech=function(e){if(e&&e.IWillNotUseThisInPlugins)return this.tech_;var t="\n      Please make sure that you are not using this inside of a plugin.\n      To disable this alert and error, please pass in an object with\n      `IWillNotUseThisInPlugins` to the `tech` method. See\n      https://github.com/videojs/video.js/issues/2617 for more info.\n    ";throw s.default.alert(t),new Error(t)},t.prototype.addTechControlsListeners_=function(){this.tech_&&(this.removeTechControlsListeners_(),this.on(this.tech_,"mousedown",this.handleTechClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_))},t.prototype.removeTechControlsListeners_=function(){this.tech_&&(this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mousedown",this.handleTechClick_))},t.prototype.handleTechSourceSet_=function(){this.trigger("sourceset")},t.prototype.handleTechDownloadBitrateChanged_=function(){this.trigger("downloadbitratechanged")},t.prototype.handleTechPlaybackBitrateChanged_=function(){this.trigger("playbackbitratechanged")},t.prototype.handleTechEmsgAvailable_=function(e){this.trigger("emsgAvailable",{data:e.data})},t.prototype.handleHybridPlaybackEnabled_=function(){this.trigger("hybridPlaybackEnabled")},t.prototype.handleTechTracksRemoved_=function(e){this.trigger("unsupportedTracksRemoved",{data:e.data})},t.prototype.handleTechReady_=function(){if(this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_(),(this.src()||this.currentSrc())&&this.tag&&this.options_.autoplay&&this.paused()){try{delete this.tag.poster}catch(e){m.default("deleting tag.poster throws in some browsers",e)}this.play()}},t.prototype.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.error(null),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay"))},t.prototype.hasStarted=function(e){return void 0!==e?(this.hasStarted_!==e&&(this.hasStarted_=e,e?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started")),this):!!this.hasStarted_},t.prototype.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.removeClass("vjs-waiting"),this.hasStarted(!0),this.trigger("play"),this.isSeeking_=!1},t.prototype.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting");var t=s.default&&s.default.navigator&&!s.default.navigator.onLine?"offline":this.isSeeking_?"userInitiated":this.canPlayThroughSignalled_?"bufferUnderrun":"loading";this.trigger("waiting",{context:t}),this.one("timeupdate",function(){return e.removeClass("vjs-waiting")})},t.prototype.handleTechCanPlay_=function(){this.autoplayHelper_(),this.removeClass("vjs-waiting"),this.trigger("canplay")},t.prototype.handleTechCanPlayThrough_=function(){this.canPlayThroughSignalled_||(this.canPlayThroughSignalled_=!0,this.isSeeking_=!1,this.autoplayHelper_(),this.removeClass("vjs-waiting"),this.trigger("canplaythrough"))},t.prototype.autoplayHelper_=function(){this.options_.hideBigPlayButtonOnAutoplay&&this.isAutoplaySuccess&&this.options_.autoplay&&(this.addClass("vjs-playing"),this.hasStarted(!0))},t.prototype.handleAutoplayFailed_=function(){this.trigger("autoplayfailed"),this.removeClass("vjs-playing"),this.hasStarted(!1),this.isAutoplaySuccess=!1,this.addClass("vjs-paused")},t.prototype.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing"),this.isSeeking_=!1},t.prototype.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},t.prototype.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-waiting"),this.trigger("seeked"),this.isSeeking_=!1},t.prototype.handleTechFirstPlay_=function(){this.options_.starttime&&this.currentTime(this.options_.starttime),this.addClass("vjs-has-started"),this.trigger("firstplay")},t.prototype.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},t.prototype.handleTechProgress_=function(){this.trigger("progress")},t.prototype.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},t.prototype.handleTechDurationChange_=function(){this.duration(Math.floor(this.techGet_("duration")));var e=function(e,t){null!=e&&(t?e.show():e.hide())},t=isFinite(this.duration());null!=this.controlBar&&(e(this.controlBar.progressControl,t),e(this.controlBar.currentTimeDisplay,t),e(this.controlBar.durationDisplay,t),e(this.controlBar.remainingTimeDisplay,t),t?this.controlBar.timeDivider.unblank():this.controlBar.timeDivider.blank())},t.prototype.handleTechClick_=function(e){0===e.button&&(this.controls()&&(this.paused()?this.play():this.pause()),this.trigger("tech-click"))},t.prototype.handleTechTap_=function(){this.userActive(!this.userActive())},t.prototype.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},t.prototype.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},t.prototype.handleTechTouchEnd_=function(e){e.preventDefault()},t.prototype.handleFullscreenChange_=function(){this.isFullscreen()?(d.addElClass(this.multiPlayerContainerDiv,"vjs-fullscreen"),d.removeElClass(this.multiPlayerContainerDiv,"vjs-fluid")):(this.fluid()&&d.addElClass(this.multiPlayerContainerDiv,"vjs-fluid"),d.removeElClass(this.multiPlayerContainerDiv,"vjs-fullscreen"),this.updateStyleEl_())},t.prototype.handleStageClick_=function(){this.reportUserActivity()},t.prototype.handleTechFullscreenChange_=function(e,t){t&&this.isFullscreen(t.isFullscreen),this.trigger("fullscreenchange")},t.prototype.handleTechError_=function(){var e=this.tech_.error();this.error(e)},t.prototype.handleTechSuspend_=function(){this.trigger("suspend")},t.prototype.handleTechAbort_=function(){this.trigger("abort")},t.prototype.handleTechEmptied_=function(){this.trigger("emptied")},t.prototype.handleTechStalled_=function(){this.trigger("stalled")},t.prototype.handleTechLoadedMetaData_=function(){var e=this;this.error(null),this.trigger("loadedmetadataInternal"),this.trigger("loadedmetadata"),this.initializeCea608(),setTimeout(function(){e.pendingStartTime&&-1!==e.pendingStartTime&&(e.currentTime(e.pendingStartTime),e.pendingStartTime=-1)},0)},t.prototype.handleTechTextData_=function(){var e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)},t.prototype.handleTechLoadedData_=function(){this.trigger("loadeddata")},t.prototype.handleTechTimeUpdate_=function(){if(this.trigger("timeupdate"),"AzureHtml5JS"===this.techName_){var e=this.currentTime();e>this.duration()&&this.duration(e)}},t.prototype.handleTechRateChange_=function(){this.trigger("ratechange")},t.prototype.handleTechVolumeChange_=function(){this.trigger("volumechange")},t.prototype.handleTechTextTrackChange_=function(){this.trigger("texttrackchange")},t.prototype.getCache=function(){return this.cache_},t.prototype.techCall_=function(e,t){if(this.tech_&&!this.tech_.isReady_)this.tech_.ready(function(){this[e](t)},!0);else try{this.tech_&&this.tech_[e](t)}catch(e){throw m.default(e),e}},t.prototype.techGet_=function(e){if(this.tech_&&this.tech_.isReady_)try{return this.tech_[e]()}catch(t){throw void 0===this.tech_[e]?m.default("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",t):"TypeError"===t.name?(m.default("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",t),this.tech_.isReady_=!1):m.default(t),t}},t.prototype.techGetWithParams_=function(e,t){if(this.tech_&&this.tech_.isReady_)try{var n;return(n=this.tech_)[e].apply(n,t)}catch(t){throw void 0===this.tech_[e]?m.default("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",t):"TypeError"===t.name?(m.default("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",t),this.tech_.isReady_=!1):m.default(t),t}},t.prototype.play=function(){return this.src()||this.currentSrc()?this.techCall_("play"):this.tech_.one("loadstart",function(){this.play()}),this},t.prototype.pause=function(){return this.techCall_("pause"),this},t.prototype.paused=function(){return!1!==this.techGet_("paused")},t.prototype.scrubbing=function(e){return void 0!==e?(this.scrubbing_=!!e,e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing"),this):this.scrubbing_},t.prototype.currentTime=function(e){var t=this.techGet_("currentTime")||0;if(void 0!==e){this.isSeeking_=!0,this.trigger("currentTimeChanging",{time:e});var n=this.duration();return 0>=e?e=0:e>=n&&(e=n-.1),this.techCall_("setCurrentTime",e),t>e&&this.trigger("rewind"),this}return this.cache_.currentTime=t},t.prototype.getWallClockTime=function(e,t,n,a,i){return this.techGetWithParams_("getWallClockTime",[e,t,n,a,i])},t.prototype.restartCheckMediaWorkflowIfNeeded=function(){this.techCall_("restartCheckMediaWorkflowIfNeeded")},t.prototype.presentationTimeFromPercentageOfDvrWindow=function(e){return this.techGetWithParams_("presentationTimeFromPercentageOfDvrWindow",[e])},t.prototype.duration=function(e){return void 0===e?this.cache_.duration||0:(0>(e=parseFloat(e)||0)&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),this.trigger("durationchange")),this)},t.prototype.remainingTime=function(){return this.duration()-this.currentTime()},t.prototype.buffered=function(){var e=this.techGet_("buffered");return e&&e.length||(e=b.createTimeRange(0,0)),e},t.prototype.bufferedPercent=function(){return g.bufferedPercent(this.buffered(),this.duration())},t.prototype.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),n=e.end(e.length-1);return n>t&&(n=t),n},t.prototype.volume=function(e){var t=void 0;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),this):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)},t.prototype.muted=function(e){return void 0!==e?(e?this.cache_.muted=!0:(this.cache_.muted=!1,void 0!==this.cache_.volume&&this.volume(this.cache_.volume)),this.techCall_("setMuted",e),this.trigger(e?"mute":"unmute"),this):this.techGet_("muted")||!1},t.prototype.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},t.prototype.isFullscreen=function(e){return void 0!==e?(this.isFullscreen_=!!e,this):!!this.isFullscreen_},t.prototype.requestFullscreen=function(){var e=y.default;return this.isFullscreen(!0),e.requestFullscreen?(c.on(o.default,e.fullscreenchange,l.bind(this,function t(){this.isFullscreen(o.default[e.fullscreenElement]),!1===this.isFullscreen()&&c.off(o.default,e.fullscreenchange,t),this.trigger("fullscreenchange")})),this.multiPlayerContainerDiv[e.requestFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange")),this},t.prototype.exitFullscreen=function(){var e=y.default;return this.isFullscreen(!1),e.requestFullscreen?o.default[e.exitFullscreen]():this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange")),this},t.prototype.enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=o.default.documentElement.style.overflow,c.on(o.default,"keydown",l.bind(this,this.fullWindowOnEscKey)),o.default.documentElement.style.overflow="hidden",d.addElClass(o.default.body,"vjs-full-window"),this.trigger("enterFullWindow")},t.prototype.fullWindowOnEscKey=function(e){27===e.keyCode&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())},t.prototype.exitFullWindow=function(){this.isFullWindow=!1,c.off(o.default,"keydown",this.fullWindowOnEscKey),o.default.documentElement.style.overflow=this.docOrigOverflow,d.removeElClass(o.default.body,"vjs-full-window"),this.trigger("exitFullWindow")},t.prototype.canPlayType=function(e){for(var t=void 0,n=0,a=this.options_.techOrder;n<a.length;n++){var i=h.default(a[n]),o=j.default.getTech(i);if(o||(o=r.default.getComponent(i)),o){if(o.isSupported()&&(t=o.canPlayType(e)))return t}else m.default.error('The "'+i+'" tech is undefined. Skipped browser support check for that tech.')}return""},t.prototype.selectSource=function(e){var t,n=this,a=this.options_.techOrder.map(h.default).map(function(e){return[e,j.default.getTech(e)||r.default.getComponent(e)]}).filter(function(e){var t=e[0],n=e[1];return n?n.isSupported():(m.default.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),i=function(e,t,n){var a=void 0;return e.some(function(e){return t.some(function(t){return!!(a=n(e,t))||void 0})}),a},o=function(e,t){var a=e[0];return e[1].canPlaySource(t,n.options_[_.default(a)])?{source:t,tech:a}:void 0};return t=this.options_.sourceOrder?i(e,a,function(e){return function(t,n){return e(n,t)}}(o)):i(a,e,o),t||!1},t.prototype.src=function(e){if(void 0===e)return this.techGet_("src");var t=j.default.getTech(this.techName_);return t||(t=r.default.getComponent(this.techName_)),Array.isArray(e)?this.sourceList_(e):"string"==typeof e?this.src({src:e}):e instanceof Object&&(e.type&&!t.canPlaySource(e,this.options_[_.default(this.techName_)])?this.sourceList_([e]):(this.cache_.src=e.src,this.currentType_=e.type||"",this.ready(function(){t.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),"auto"===this.options_.preload&&this.load(),this.options_.autoplay&&this.play()},!0))),this},t.prototype.sourceList_=function(e){var t=this.selectSource(e);t?t.tech===this.techName_?this.src(t.source):this.loadTech_(t.tech,t.source):(this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),this.triggerReady())},t.prototype.load=function(){return this.techCall_("load"),this},t.prototype.reset=function(){return this.loadTech_(h.default(this.options_.techOrder[0]),null),this.techCall_("reset"),this},t.prototype.currentSrc=function(){return this.techGet_("currentSrc")||this.cache_.src||""},t.prototype.currentType=function(){return this.currentType_||""},t.prototype.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),this.options_.preload=e,this.techCall_("updatePlayerOptions",this.options_),this):this.techGet_("preload")},t.prototype.autoplay=function(e){return void 0!==e?(this.techCall_("setAutoplay",e),this.options_.autoplay=e,this.techCall_("updatePlayerOptions",this.options_),this):this.techGet_("autoplay",e)},t.prototype.loop=function(e){return void 0!==e?(this.techCall_("setLoop",e),this.options_.loop=e,this.techCall_("updatePlayerOptions",this.options_),this):this.techGet_("loop")},t.prototype.poster=function(e){return void 0===e?this.poster_:(e||(e=""),this.poster_=e,this.techCall_("setPoster",e),this.trigger("posterchange"),this)},t.prototype.handleTechPosterChange_=function(){!this.poster_&&this.tech_&&this.tech_.poster&&(this.poster_=this.tech_.poster()||"",this.trigger("posterchange"))},t.prototype.controls=function(e){return void 0!==e?(e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),e?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_())),this):!!this.controls_},t.prototype.usingNativeControls=function(e){return void 0!==e?(e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,e?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols"))),this):!!this.usingNativeControls_},t.prototype.error=function(e){if(void 0===e)return this.error_||null;if(null===e)return this.error_=e,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close(),this;if(e&&this.cache_.type){var t=this.cache_.type.toLowerCase();this.mimeTypeToErrorMap[t]||(this.mimeTypeToErrorMap[t]=e)}if(!this.error_&&!this.retryPlayerLoad(e)){e=this.getErrorToBeReported(e),this.error_=e instanceof S.default?e:new S.default(e),this.addClass("vjs-error"),this.fallbackSrcHandler=null,m.default.error((this.getFullAmpVersion?this.getFullAmpVersion():"")+" (CODE:"+this.error_.code+" "+S.default.errorTypes[this.error_.code]+")",this.error_.message,this.error_);var n=this;setTimeout(function(){n.trigger("error")},50)}return this},t.prototype.ended=function(){return this.techGet_("ended")},t.prototype.seeking=function(){return this.techGet_("seeking")},t.prototype.seekable=function(){return this.techGet_("seekable")},t.prototype.reportUserActivity=function(){this.userActivity_=!0},t.prototype.userActive=function(e){var t=d.hasElClass(this.multiPlayerContainerDiv,"vjs-user-active");return void 0!==e?((e=!!e)!==t&&(e?(this.userActivity_=!0,d.removeElClass(this.multiPlayerContainerDiv,"vjs-user-inactive"),d.addElClass(this.multiPlayerContainerDiv,"vjs-user-active"),this.trigger("useractive")):(this.userActivity_=!1,this.tech_&&this.tech_.one("mousemove",function(e){e.stopPropagation(),e.preventDefault()}),d.removeElClass(this.multiPlayerContainerDiv,"vjs-user-active"),d.addElClass(this.multiPlayerContainerDiv,"vjs-user-inactive"),this.trigger("userinactive"))),this):t},t.prototype.listenForUserActivity_=function(){var e=void 0,t=void 0,n=void 0,a=l.bind(this,this.reportUserActivity);this.on("mousedown",function(){a(),this.clearInterval(e),e=this.setInterval(a,250)}),this.on("mousemove",function(e){(e.screenX!==t||e.screenY!==n)&&(t=e.screenX,n=e.screenY,a())}),this.on("mouseup",function(){a(),this.clearInterval(e)}),this.on("keydown",a),this.on("keyup",a);var i=void 0;this.setInterval(function(){if(this.userActivity_&&this.isVisible()){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(i);var e=this.options_.inactivityTimeout;e>0&&(i=this.setTimeout(function(){if(!this.userActivity_&&this.isVisible()){var e=this.children_.filter(function(e){return"moreOptionsDialog"===e.name_}),t=this.controlBar.playbackSpeedButton&&this.controlBar.playbackSpeedButton.children_[0];if(e[0]&&e[0].el().contains(o.default.activeElement))return;if(t&&t.el().contains(o.default.activeElement))return;this.userActive(!1)}},e))}},250)},t.prototype.playbackRate=function(e){return void 0!==e?(this.techCall_("setPlaybackRate",e),this):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("playbackRate"):1},t.prototype.isAudio=function(e){return void 0!==e?(this.isAudio_=!!e,this):!!this.isAudio_},t.prototype.handleKeyPress=function(e){if(this.controls()&&this.isFullscreen()&&e.target===this.el_&&e.shiftKey&&9===e.which&&this.controls_){e.preventDefault();var t=this;setTimeout(function(){t.ariaAlerts.reverseFocus()},250)}},t.prototype.networkState=function(){return this.techGet_("networkState")},t.prototype.readyState=function(){return this.techGet_("readyState")},t.prototype.videoTracks=function(){return this.tech_?this.tech_.videoTracks():(this.videoTracks_=this.videoTracks_||new w.default,this.videoTracks_)},t.prototype.audioTracks=function(){return this.tech_?this.tech_.audioTracks():(this.audioTracks_=this.audioTracks_||new O.default,this.audioTracks_)},t.prototype.textTracks=function(){return this.tech_&&this.tech_.textTracks()},t.prototype.remoteTextTracks=function(){return this.tech_&&this.tech_.remoteTextTracks()},t.prototype.remoteTextTrackEls=function(){return this.tech_&&this.tech_.remoteTextTrackEls()},t.prototype.addTextTrack=function(e,t,n){return this.tech_&&this.tech_.addTextTrack(e,t,n)},t.prototype.addRemoteTextTrack=function(e){return this.tech_&&this.tech_.addRemoteTextTrack(e)},t.prototype.removeRemoteTextTrack=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=e.track,n=void 0===t?arguments[0]:t;this.tech_&&this.tech_.removeRemoteTextTrack(n)},t.prototype.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},t.prototype.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},t.prototype.language=function(e){return void 0===e?this.language_:(this.language_=(""+e).toLowerCase(),this)},t.prototype.languages=function(){return t.prototype.options_.languagesMutated&&(t.prototype.options_.languagesMutated=!1,this.languages_=x.default(t.prototype.options_.languages,this.languages_)),this.languages_},t.prototype.toJSON=function(){var e=x.default(this.options_),t=e.tracks;e.tracks=[];for(var n=0;n<t.length;n++){var a=t[n];(a=x.default(a)).player=void 0,e.tracks[n]=a}return e},t.prototype.createModal=function(e,t){var n=this;(t=t||{}).content=e||"";var a=new R.default(n,t);return n.addChild(a),a.on("dispose",function(){n.removeChild(a)}),a.open()},t.getTagSettings=function(e){var t={sources:[],tracks:[]},n=d.getElAttributes(e),a=n["data-setup"];if(null!==a){var i=D.default(a||"{}"),r=i[0],o=i[1];r&&m.default.error(r),I.default(n,o)}if(I.default(t,n),e.hasChildNodes())for(var s=e.childNodes,c=0,l=s.length;l>c;c++){var u=s[c],f=u.nodeName.toLowerCase(),p=d.getElAttributes(u),_=p["data-setup"];if(null!==_){var h=D.default(_||"{}");r=h[0],o=h[1],r&&m.default.error(r),I.default(p,o)}"source"===f?t.sources.push(p):"track"===f&&t.tracks.push(p)}return t},t}(r.default));V.players={};var z=s.default.navigator;V.prototype.options_={techOrder:["html5","flash"],html5:{},flash:{},defaultVolume:0,inactivityTimeout:5e3,playbackRates:[],children:["mediaLoader","fullscreenOutline","posterImage","textTrackDisplay","loadingSpinner","bigPauseButton","bigPlayButton","controlBar","errorDisplay","textTrackSettings","ariaAlerts"],language:z.languages&&z.languages[0]||z.userLanguage||z.language||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",plugins:{},manifestFetchAutoRetryForLive:!1,maxRetryCountForLive:5,retryIntervalForLiveInMSec:2e3,playerStartupTimeoutInMSec:1e4,playerStartupTimeoutTimer:!1,useProtectionInfoForPosterAndTextTrack:!1,disableTooltip:!0,imsc1CaptionsSettings:[]},V.prototype.handleTechLoadStart_,V.prototype.handleLoadedMetaData_,V.prototype.handleTextData_,V.prototype.handleLoadedData_,V.prototype.handleUserActive_,V.prototype.handleUserInactive_,V.prototype.handleTimeUpdate_,V.prototype.handleTechEnded_,V.prototype.handleVolumeChange_,V.prototype.handleError_,V.prototype.flexNotSupported_=function(){var e=o.default.createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},r.default.registerComponent("Player",V),n.default=V,t.exports=n.default},{"./FullscreenOutline.js":10,"./aria-alerts.js":11,"./big-play-button.js":12,"./component.js":16,"./control-bar/control-bar.js":19,"./error-display.js":53,"./fullscreen-api.js":56,"./loading-spinner.js":57,"./media-error.js":58,"./modal-dialog":62,"./poster-image.js":67,"./tech/html5.js":72,"./tech/loader.js":73,"./tech/tech.js":75,"./tracks/audio-track-list.js":77,"./tracks/text-track-display.js":82,"./tracks/text-track-list-converter.js":83,"./tracks/text-track-settings.js":85,"./tracks/video-track-list.js":90,"./utils/browser.js":93,"./utils/buffer.js":94,"./utils/dom.js":96,"./utils/events.js":97,"./utils/fn.js":98,"./utils/font-checker.js":99,"./utils/guid.js":101,"./utils/highContrastCheck.js":102,"./utils/log.js":104,"./utils/merge-options.js":105,"./utils/stylesheet.js":106,"./utils/time-ranges.js":107,"./utils/to-camel-case.js":108,"./utils/to-title-case.js":109,"global/document":168,"global/window":169,"object.assign":162,"safe-json-parse/tuple":165}],64:[function(e,t,n){"use strict";n.__esModule=!0;var a=function(e){return e&&e.__esModule?e:{default:e}}(e("./player.js"));n.default=function(e,t){a.default.prototype[e]=t},t.exports=n.default},{"./player.js":63}],65:[function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var o=i(e("../clickable-component.js")),s=i(e("../component.js")),c=(a((i(e("./popup.js")),e("../utils/dom.js"))),e("../utils/fn.js")),d=(i((a(c),e("../utils/to-title-case.js"))),function(e){function t(n){var a=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];r(this,t),e.call(this,n,a),this.update()}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.update=function(){var e=this.createPopup();this.popup&&this.removeChild(this.popup),this.popup=e,this.addChild(e),this.items&&0===this.items.length?this.hide():this.items&&this.items.length>1&&this.show()},t.prototype.createPopup=function(){},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},t.prototype.buildCSSClass=function(){var t="vjs-menu-button";return"vjs-menu-button "+(t+=!0===this.options_.inline?"-inline":"-popup")+" "+e.prototype.buildCSSClass.call(this)},t}(o.default));s.default.registerComponent("PopupButton",d),n.default=d,t.exports=n.default},{"../clickable-component.js":14,"../component.js":16,"../utils/dom.js":96,"../utils/fn.js":98,"../utils/to-title-case.js":109,"./popup.js":66}],66:[function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(e("../component.js")),o=a(e("../utils/dom.js")),s=a(e("../utils/fn.js")),c=a(e("../utils/events.js")),d=function(e){function t(){i(this,t),e.apply(this,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.addItem=function(e){this.addChild(e),e.on("click",s.bind(this,function(){this.unlockShowing()}))},t.prototype.createEl=function(){var t=this.options_.contentElType||"ul";this.contentEl_=o.createEl(t,{className:"vjs-menu-content"});var n=e.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return n.appendChild(this.contentEl_),c.on(n,"click",function(e){e.preventDefault(),e.stopImmediatePropagation()}),n},t}(r.default);r.default.registerComponent("Popup",d),n.default=d,t.exports=n.default},{"../component.js":16,"../utils/dom.js":96,"../utils/events.js":97,"../utils/fn.js":98}],67:[function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var r=i(e("./clickable-component.js")),o=i(e("./component.js")),s=a(e("./utils/fn.js")),c=a(e("./utils/dom.js")),d=(a(e("./utils/browser.js")),e("./utils/url.js")),l=a(d),u=i(e("./utils/log.js")),f=i(e("xhr")),p=a(e("./utils/base64Utils.js")),m=function(e){function t(n,a){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),e.call(this,n,a),this.shouldUseToken=this.player().options().useProtectionInfoForPosterAndTextTrack,this.protectionInfoAvailable=!0,this.update(),n.on("posterchange",s.bind(this,this.update)),n.on("fullscreenchange",s.bind(this,this.updateCss)),n.on("sourceset",s.bind(this,this.updateToken)),n.addThrottledWindowResizeListener(s.bind(this,this.updateCss),50)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.updateToken=function(){this.shouldUseToken&&(this.token=this.player().options().sourceList&&this.player().options().sourceList[0].protectionInfo&&this.player().options().sourceList[0].protectionInfo[0].authenticationToken,this.token||(this.protectionInfoAvailable=!1),this.fetchPoster(this.url))},t.prototype.dispose=function(){this.player().off("fullscreenchange",this.updateCss),this.player().off("posterchange",this.update),e.prototype.dispose.call(this)},t.prototype.createEl=function(){var e=c.createEl("div",{className:"vjs-poster",tabIndex:-1});return this.span=c.createEl("span",{className:"vjs-poster-span",tabIndex:-1}),e.appendChild(this.span),this.fallbackImg_=c.createEl("img"),e.appendChild(this.fallbackImg_),e},t.prototype.update=function(){var e=this.player().poster();this.setSrc(e),e?this.show():this.hide()},t.prototype.shouldFetchPoster=function(){return!this.shouldUseToken||!this.protectionInfoAvailable||!!this.token},t.prototype.setSrc=function(e){if(this.url=e,this.shouldFetchPoster())if(e&&-1===(e=l.getAbsoluteURL(e)).search(/^(https?:)?\/\//i)&&(u.default.warn("ignoring invalid poster URL"),e=""),this.fallbackImg_)if(this.shouldUseToken)this.fetchPoster(e);else{var t=this;this.fallbackImg_.onload=function(){t.updateCss()},this.fallbackImg_.src=e,this.fallbackImg_.style.display="none",this.addCrossOriginPolicy(this.player().options().corsPolicy,this.fallbackImg_),setTimeout(function(){t.updateCss()},500)}else{var n="";e&&(n='url("'+e+'")'),this.el_.style.backgroundImage=n}},t.prototype.fetchPoster=function(e){if(e){var t={method:"get",uri:e,responseType:"arraybuffer"};this.shouldUseToken&&this.protectionInfoAvailable&&this.token?t.headers={Authorization:this.token}:l.isCrossOrigin(e)&&(t.withCredentials=!0);var n=this;f.default(t,function(e,t,a){if(200===t.statusCode){var i=new Uint8Array(a),r="data:image/jpeg;base64,"+p.binaryToBase64(i);n.fallbackImg_.src=r,n.updateCss()}})}},t.prototype.updateCss=function(){this.fallbackImg_.style.display="inline";var e="100%",t="auto";if(this.fallbackImg_.naturalHeight&&this.fallbackImg_.naturalWidth&&this.fallbackImg_.parentElement){var n=this.fallbackImg_.parentElement.clientWidth,a=this.fallbackImg_.parentElement.clientHeight;a&&n?n/a>this.fallbackImg_.naturalWidth/this.fallbackImg_.naturalHeight&&(t="100%",e="auto"):this.fallbackImg_.naturalHeight>this.fallbackImg_.naturalWidth&&(t="100%",e="auto")}if(this.player_){var i=this.player_.options_.posterAltString?this.player_.options_.posterAltString:"";c.setElAttributes(this.fallbackImg_,{width:e,height:t,alt:this.player_.htmlEncode(i)}),""===i&&c.setElAttributes(this.fallbackImg_,{role:"presentation"})}},t.prototype.handleClick=function(){this.player_.paused()?this.player_.play():this.player_.pause()},t}(r.default);o.default.registerComponent("PosterImage",m),n.default=m,t.exports=n.default},{"./clickable-component.js":14,"./component.js":16,"./utils/base64Utils.js":92,"./utils/browser.js":93,"./utils/dom.js":96,"./utils/fn.js":98,"./utils/log.js":104,"./utils/url.js":110,xhr:174}],68:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./utils/events.js")),r=a(e("global/document")),o=a(e("global/window")),s=!1,c=void 0,d=function(){var e=r.default.getElementsByTagName("video"),t=r.default.getElementsByTagName("audio"),n=[];if(e&&e.length>0)for(var a=0,i=e.length;i>a;a++)n.push(e[a]);if(t&&t.length>0)for(a=0,i=t.length;i>a;a++)n.push(t[a]);if(n&&n.length>0)for(a=0,i=n.length;i>a;a++){var o=n[a];if(!o||!o.getAttribute){l(1);break}void 0===o.player&&null!==o.getAttribute("data-setup")&&c(o)}else s||l(1)},l=function(e,t){t&&(c=t),setTimeout(d,e)};"complete"===r.default.readyState?s=!0:i.one(o.default,"load",function(){s=!0}),n.autoSetup=d,n.autoSetupTimeout=l,n.hasLoaded=function(){return s}},{"./utils/events.js":97,"global/document":168,"global/window":169}],69:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=a(e("../component.js")),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../utils/dom.js")),o=a(e("object.assign")),s=function(e){function t(n,a){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),e.call(this,n,a),this.bar=this.getChild(this.options_.barName),this.seekHandle=this.getChild(this.options_.handleName),n.controls_&&this.vertical(!!this.options_.vertical),this.on("mousedown",this.handleMouseDown),this.on("touchstart",this.handleMouseDown),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur),this.on("click",this.handleClick),this.on(n,"controlsvisible",this.update),this.on(n,this.playerEvent,this.update)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.createEl=function(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return n.className=n.className+" vjs-slider",n=o.default({tabIndex:0},n),a=o.default({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},a),e.prototype.createEl.call(this,t,n,a)},t.prototype.handleMouseDown=function(e){var t=this.bar.el_.ownerDocument;e.preventDefault(),r.blockTextSelection(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchmove",this.handleMouseMove),this.on(t,"touchend",this.handleMouseUp),this.handleMouseMove(e)},t.prototype.handleMouseMove=function(){},t.prototype.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;r.unblockTextSelection(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.update(),this.setFocusOnSlider()},t.prototype.update=function(){if(this.el_){var e=this.getPercent(),t=this.bar;if(t){("number"!=typeof e||e!=e||0>e||e===1/0)&&(e=0);var n=(100*e).toFixed(2)+"%";this.vertical()?t.el().style.height=n:t.el().style.width=n,this.seekHandle&&this.seekHandle.update()}}},t.prototype.calculateDistance=function(e){var t=r.getPointerPosition(this.el_,e);return this.vertical()?t.y:t.x},t.prototype.handleFocus=function(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},t.prototype.setFocusOnSlider=function(){var e=this.el_.ownerDocument.activeElement,t=this.el_;e!==t&&(e.blur(),t.focus())},t.prototype.handleKeyPress=function(e){37===e.which||40===e.which?(e.preventDefault(),this.stepBack()):(38===e.which||39===e.which)&&(e.preventDefault(),this.stepForward())},t.prototype.handleBlur=function(){this.off(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},t.prototype.handleClick=function(e){e.stopImmediatePropagation(),e.preventDefault(),this.setFocusOnSlider()},t.prototype.vertical=function(e){return void 0===e?this.vertical_||!1:(this.vertical_=!!e,this.addClass(this.vertical_?"vjs-slider-vertical":"vjs-slider-horizontal"),this)},t}(i.default);i.default.registerComponent("Slider",s),n.default=s,t.exports=n.default},{"../component.js":16,"../utils/dom.js":96,"object.assign":162}],70:[function(e,t,n){"use strict";n.__esModule=!0,n.default=function(e){return e.streamingFormats={"rtmp/mp4":"MP4","rtmp/flv":"FLV"},e.streamFromParts=function(e,t){return e+"&"+t},e.streamToParts=function(e){var t={connection:"",stream:""};if(!e)return t;var n=e.search(/&(?!\w+=)/),a=void 0;return-1!==n?a=n+1:0===(n=a=e.lastIndexOf("/")+1)&&(n=a=e.length),t.connection=e.substring(0,n),t.stream=e.substring(a,e.length),t},e.isStreamingType=function(t){return t in e.streamingFormats},e.RTMP_RE=/^rtmp[set]?:\/\//i,e.isStreamingSrc=function(t){return e.RTMP_RE.test(t)},e.rtmpSourceHandler={},e.rtmpSourceHandler.canPlayType=function(t){return e.isStreamingType(t)?"maybe":""},e.rtmpSourceHandler.canHandleSource=function(t){return e.rtmpSourceHandler.canPlayType(t.type)||(e.isStreamingSrc(t.src)?"maybe":"")},e.rtmpSourceHandler.handleSource=function(t,n){var a=e.streamToParts(t.src);n.setRtmpConnection(a.connection),n.setRtmpStream(a.stream)},e.registerSourceHandler(e.rtmpSourceHandler),e},t.exports=n.default},{}],71:[function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.charAt(0).toUpperCase()+e.slice(1);b["set"+t]=function(t){return this.el_.vjs_setProperty(e,t)}}function o(e){b[e]=function(){return this.el_.vjs_getProperty(e)}}n.__esModule=!0;for(var s=i(e("./tech")),c=a(e("../utils/dom.js")),d=a(e("../utils/url.js")),l=e("../utils/time-ranges.js"),u=e("./swfobject.js"),f=i(e("./flash-rtmp")),p=i(e("../component")),m=i(e("global/window")),_=i(e("object.assign")),h=(m.default.navigator,function(e){function t(n,a){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),e.call(this,n,a),n.source&&this.ready(function(){this.setSource(n.source)},!0),n.startTime&&this.ready(function(){this.load(),this.play(),this.currentTime(n.startTime)},!0),m.default.videojs=m.default.videojs||{},m.default.videojs.Flash=m.default.videojs.Flash||{},m.default.videojs.Flash.onReady=t.onReady,m.default.videojs.Flash.onEvent=t.onEvent,m.default.videojs.Flash.onError=t.onError,this.on("seeked",function(){this.lastSeekTarget_=void 0})}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.createEl=function(){var e=this.options_,n=e.techId,a=_.default({readyFunction:"videojs.Flash.onReady",eventProxyFunction:"videojs.Flash.onEvent",errorEventProxyFunction:"videojs.Flash.onError",autoplay:e.autoplay,preload:e.preload,loop:e.loop,muted:e.muted},e.flashVars),i=_.default({wmode:"opaque",bgcolor:"#000000"},e.params),r=_.default({id:n,name:n,class:"vjs-tech"},e.attributes);return this.el_=t.embed(e.swf,a,i,r),this.el_.tech=this,this.el_},t.prototype.play=function(){this.ended()&&this.setCurrentTime(0),this.el_.vjs_play()},t.prototype.pause=function(){this.el_.vjs_pause()},t.prototype.src=function(e){return void 0===e?this.currentSrc():this.setSrc(e)},t.prototype.setSrc=function(e){if(e=d.getAbsoluteURL(e),this.el_.vjs_src(e),this.autoplay()){var t=this;this.setTimeout(function(){t.play()},0)}},t.prototype.seeking=function(){return void 0!==this.lastSeekTarget_},t.prototype.setCurrentTime=function(t){var n=this.seekable();n.length&&(t=(t=t>n.start(0)?t:n.start(0))<n.end(n.length-1)?t:n.end(n.length-1),this.lastSeekTarget_=t,this.trigger("seeking"),this.el_.vjs_setProperty("currentTime",t),e.prototype.setCurrentTime.call(this))},t.prototype.currentTime=function(){return this.seeking()?this.lastSeekTarget_||0:this.el_.vjs_getProperty("currentTime")},t.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.vjs_getProperty("currentSrc")},t.prototype.duration=function(){if(0===this.readyState())return NaN;var e=this.el_.vjs_getProperty("duration");return e>=0?e:1/0},t.prototype.load=function(){this.el_.vjs_load()},t.prototype.poster=function(){this.el_.vjs_getProperty("poster")},t.prototype.setPoster=function(){},t.prototype.seekable=function(){var e=this.duration();return 0===e?l.createTimeRange():l.createTimeRange(0,e)},t.prototype.buffered=function(){var e=this.el_.vjs_getProperty("buffered");return 0===e.length?l.createTimeRange():l.createTimeRange(e[0][0],e[0][1])},t.prototype.supportsFullScreen=function(){return!1},t.prototype.enterFullScreen=function(){return!1},t}(s.default)),b=h.prototype,g="rtmpConnection,rtmpStream,preload,defaultPlaybackRate,playbackRate,autoplay,loop,mediaGroup,controller,controls,volume,muted,defaultMuted".split(","),v="networkState,readyState,initialTime,startOffsetTime,paused,ended,videoWidth,videoHeight".split(","),y=0;y<g.length;y++)o(g[y]),r(g[y]);for(y=0;y<v.length;y++)o(v[y]);h.isSupported=function(){return u.swfobject.hasFlashPlayerVersion("11.4")},h.isVersionSupported=function(e){return u.swfobject.hasFlashPlayerVersion(e)},s.default.withSourceHandlers(h),h.nativeSourceHandler={},h.nativeSourceHandler.canPlayType=function(e){return e in h.formats?"maybe":""},h.nativeSourceHandler.canHandleSource=function(e){var t;return t=e.type?e.type.replace(/;.*/,"").toLowerCase():function(e){var t=d.getFileExtension(e);return t?"video/"+t:""}(e.src),h.nativeSourceHandler.canPlayType(t)},h.nativeSourceHandler.handleSource=function(e,t){t.setSrc(e.src)},h.nativeSourceHandler.dispose=function(){},h.registerSourceHandler(h.nativeSourceHandler),h.formats={"video/flv":"FLV","video/x-flv":"FLV","video/mp4":"MP4","video/m4v":"MP4"},h.onReady=function(e){var t=c.getEl(e),n=t&&t.tech;n&&n.el()&&h.checkReady(n)},h.checkReady=function(e){e.el()&&(e.el().vjs_getProperty?e.triggerReady():this.setTimeout(function(){h.checkReady(e)},50))},h.onEvent=function(e,t){var n=c.getEl(e).tech;n.trigger(t,Array.prototype.slice.call(arguments,2))},h.onError=function(e,t){var n=c.getEl(e).tech;return"srcnotfound"===t?n.error(4):void n.error("FLASH: "+t)},h.embed=function(e,t,n,a){var i=h.getEmbedCode(e,t,n,a);return c.createEl("div",{innerHTML:i}).childNodes[0]},h.getEmbedCode=function(e,t,n,a){var i="",r="",o="";return t&&Object.getOwnPropertyNames(t).forEach(function(e){i+=encodeURIComponent(e)+"="+encodeURIComponent(t[e])+"&amp;"}),delete n.flashvars,n=_.default({movie:e,flashvars:i,allowScriptAccess:"always",allowNetworking:"all"},n),Object.getOwnPropertyNames(n).forEach(function(e){r+='<param name="'+encodeURIComponent(e)+'" value="'+("flashvars"!==e?encodeURI(n[e]):n[e])+'" />'}),a=_.default({data:e,width:"100%",height:"100%"},a),Object.getOwnPropertyNames(a).forEach(function(e){o+=encodeURIComponent(e)+'="'+encodeURI(a[e])+'" '}),'<object type="application/x-shockwave-flash" '+o+">"+r+"</object>"},f.default(h),p.default.registerComponent("Flash",h),s.default.registerTech("Flash",h),n.default=h,t.exports=n.default},{"../component":16,"../utils/dom.js":96,"../utils/time-ranges.js":107,"../utils/url.js":110,"./flash-rtmp":70,"./swfobject.js":74,"./tech":75,"global/window":169,"object.assign":162}],72:[function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var r=function(e,t){return e.raw=["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used. \n            This may prevent text tracks from loading."],e}(["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used. \n            This may prevent text tracks from loading."]),o=i(e("./tech.js")),s=i(e("../component")),c=a(e("../utils/dom.js")),d=a(e("../utils/url.js")),l=a(e("../utils/fn.js")),u=i(e("../utils/log.js")),f=i(e("tsml")),p=a((i(e("../../../src/js/tracks/text-track.js")),e("../utils/browser.js"))),m=i(e("global/document")),_=i(e("global/window")),h=i(e("object.assign")),b=i(e("../utils/merge-options.js")),g=i(e("../utils/to-title-case.js")),v=a(e("../utils/guid.js")),y=function(e){function t(n,a){var i=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),e.call(this,n,a);var o=n.source,s=!1;if(o&&(this.el_.currentSrc!==o.src||n.tag&&3===n.tag.initNetworkState_)?this.setSource(o):this.setTimeout(function(){this.handleLateInit_(this.el_)},0),this.el_.hasChildNodes()){for(var m=this.el_.childNodes,_=m.length,h=[];_--;){var b=m[_];"track"===b.nodeName.toLowerCase()&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(b),this.remoteTextTracks().addTrack_(b.track),s||this.el_.hasAttribute("crossorigin")||!d.isCrossOrigin(b.src)||(s=!0)):h.push(b))}for(var v=0;v<h.length;v++)this.el_.removeChild(h[v])}["audio","video"].forEach(function(e){var t=g.default(e);if(i["featuresNative"+t+"Tracks"]){var n=i.el()[e+"Tracks"];n&&n.addEventListener&&(n.addEventListener("change",l.bind(i,i["handle"+t+"TrackChange_"])),n.addEventListener("addtrack",l.bind(i,i["handle"+t+"TrackAdd_"])),n.addEventListener("removetrack",l.bind(i,i["handle"+t+"TrackRemove_"])),i.on("loadstart",i["removeOld"+t+"Tracks_"]))}}),this.featuresNativeTextTracks&&(s&&u.default.warn(f.default(r)),this.handleTextTrackChange_=l.bind(this,this.handleTextTrackChange),this.handleTextTrackAdd_=l.bind(this,this.handleTextTrackAdd),this.handleTextTrackRemove_=l.bind(this,this.handleTextTrackRemove),this.proxyNativeTextTracks_()),(p.TOUCH_ENABLED||p.IS_IPHONE||p.IS_NATIVE_ANDROID)&&!0===n.nativeControlsForTouch&&this.setControls(!0);var y="auto";"auto"!==c.getElAttributes(this.el_).preload&&(y="none"),c.setElAttributes(this.el_,{oncontextmenu:"return false;",preload:y,tabindex:"-1"}),this.setPoster(this.options_.playerOptions.poster||""),this.triggerReady();var S=this,D=t.TEST_VID.play();void 0!==D&&D.then(function(){}).catch(function(){S.trigger("autoplayfailed")})}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.dispose=function(){var n=this;["audio","video","text"].forEach(function(e){var t=g.default(e),a=n.el_[e+"Tracks"];a&&a.removeEventListener&&(a.removeEventListener("change",n["handle"+t+"TrackChange_"]),a.removeEventListener("addtrack",n["handle"+t+"TrackAdd_"]),a.removeEventListener("removetrack",n["handle"+t+"TrackRemove_"])),a&&n.off("loadstart",n["removeOld"+t+"Tracks_"])}),t.disposeMediaElement(this.el_),e.prototype.dispose.call(this)},t.prototype.createEl=function(){var e=this.options_.tag;if(!e||!1===this.movingMediaElementInDOM)if(e){var n=e.cloneNode(!0);e.parentNode.insertBefore(n,e),t.disposeMediaElement(e),e=n}else{e=m.default.createElement("video");var a=this.options_.originalTagAttributes,i=b.default({},a);p.TOUCH_ENABLED&&!0===this.options_.nativeControlsForTouch||delete i.controls,c.setElAttributes(e,h.default(i,{id:this.options_.techId,class:"vjs-tech"}))}for(var r=["autoplay","preload","loop","muted"],o=r.length-1;o>=0;o--){var s=r[o],d={};void 0!==this.options_[s]&&(d[s]=this.options_[s]),c.setElAttributes(e,d)}return e},t.prototype.handleLateInit_=function(e){var t=this;if(0!==e.networkState&&3!==e.networkState){if(0===e.readyState){var n=function(){var e=!1,n=function(){e=!0};t.on("loadstart",n);var a=function(){e||this.trigger("loadstart")};return t.on("loadedmetadata",a),t.ready(function(){this.off("loadstart",n),this.off("loadedmetadata",a),e||this.trigger("loadstart")}),{v:void 0}}();if("object"==typeof n)return n.v}var a=["loadstart"];a.push("loadedmetadata"),e.readyState>=2&&a.push("loadeddata"),e.readyState>=3&&a.push("canplay"),e.readyState>=4&&a.push("canplaythrough"),this.ready(function(){a.forEach(function(e){this.trigger(e)},this)})}},t.prototype.proxyNativeTextTracks_=function(){var e=this.el().textTracks;if(e){for(var t=0;t<e.length;t++)this.textTracks().addTrack_(e[t]);e.addEventListener&&(e.addEventListener("change",this.handleTextTrackChange_),e.addEventListener("addtrack",this.handleTextTrackAdd_),e.addEventListener("removetrack",this.handleTextTrackRemove_)),this.on("loadstart",this.removeOldTextTracks_)}},t.prototype.handleTextTrackChange=function(){var e=this.textTracks();this.textTracks().trigger({type:"change",target:e,currentTarget:e,srcElement:e})},t.prototype.handleTextTrackAdd=function(e){this.textTracks().addTrack_(e.track)},t.prototype.handleTextTrackRemove=function(e){this.textTracks().removeTrack_(e.track)},t.prototype.handleVideoTrackChange_=function(){var e=this.videoTracks();this.videoTracks().trigger({type:"change",target:e,currentTarget:e,srcElement:e})},t.prototype.handleVideoTrackAdd_=function(e){this.videoTracks().addTrack_(e.track)},t.prototype.handleVideoTrackRemove_=function(e){this.videoTracks().removeTrack_(e.track)},t.prototype.handleAudioTrackChange_=function(){var e=this.audioTracks();this.audioTracks().trigger({type:"change",target:e,currentTarget:e,srcElement:e})},t.prototype.handleAudioTrackAdd_=function(e){this.audioTracks().addTrack_(e.track)},t.prototype.handleAudioTrackRemove_=function(e){this.audioTracks().removeTrack_(e.track)},t.prototype.removeOldTracks_=function(e,t){var n=[];if(t){for(var a=0;a<e.length;a++){for(var i=e[a],r=!1,o=0;o<t.length;o++)if(t[o]===i){r=!0;break}r||n.push(i)}for(a=0;a<n.length;a++){var s=n[a];e.removeTrack_(s)}}},t.prototype.removeOldTextTracks_=function(){var e=this.textTracks(),t=this.el().textTracks;this.removeOldTracks_(e,t)},t.prototype.removeOldAudioTracks_=function(){var e=this.audioTracks(),t=this.el().audioTracks;this.removeOldTracks_(e,t)},t.prototype.removeOldVideoTracks_=function(){var e=this.videoTracks(),t=this.el().videoTracks;this.removeOldTracks_(e,t)},t.prototype.play=function(){var e=this,t=this.el_.play();void 0!==t&&"function"==typeof t.then&&t.then(function(){}).catch(function(){e.trigger("autoplayfailed")})},t.prototype.pause=function(){this.el_.pause()},t.prototype.paused=function(){return this.el_.paused},t.prototype.currentTime=function(){return this.el_.currentTime},t.prototype.currentAbsoluteTime=function(){},t.prototype.currentMediaTime=function(){},t.prototype.setCurrentTime=function(e){try{this.el_.currentTime=e}catch(e){u.default(e,"Video is not ready. (Video.js)")}},t.prototype.currentVideoStreamList=function(){},t.prototype.currentAudioStreamList=function(){},t.prototype.videoBufferData=function(){},t.prototype.audioBufferData=function(){},t.prototype.currentDownloadBitrate=function(){},t.prototype.currentPlaybackBitrate=function(){},t.prototype.duration=function(){return this.el_.duration||0},t.prototype.buffered=function(){return this.el_.buffered},t.prototype.isLive=function(){return this.duration()===1/0||this.duration()===Number.MAX_VALUE},t.prototype.volume=function(){return this.el_.volume},t.prototype.setVolume=function(e){this.el_.volume=e},t.prototype.muted=function(){return this.el_.muted},t.prototype.setMuted=function(e){this.el_.muted=e},t.prototype.width=function(){return this.el_.offsetWidth},t.prototype.height=function(){return this.el_.offsetHeight},t.prototype.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var e=_.default.navigator.userAgent;if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},t.prototype.enterFullScreen=function(){var e=this.el_;"webkitDisplayingFullscreen"in e&&this.one("webkitbeginfullscreen",function(){this.one("webkitendfullscreen",function(){this.trigger("fullscreenchange",{isFullscreen:!1})}),this.trigger("fullscreenchange",{isFullscreen:!0})}),e.paused&&e.networkState<=e.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){e.pause(),e.webkitEnterFullScreen()},0)):e.webkitEnterFullScreen()},t.prototype.exitFullScreen=function(){this.el_.webkitExitFullScreen()},t.prototype.src=function(e){return void 0===e?this.el_.src:void this.setSrc(e)},t.prototype.setSrc=function(e){var t=this.options_.playerOptions.html5,n=this.isPrefetchedSrc(e);return t&&t.handleEarlyPrefetchError&&this.error()&&n?void o.default.raiseError.call(this,"html5",this.error().code<<20):(this.addCrossOriginPolicy(this.options_.playerOptions.corsPolicy),this.setAutoplay(this.options_.playerOptions.autoplay),void(n||(this.el_.src=e)))},t.prototype.load=function(){this.isPrefetchedSrc(this.el_.src)||this.el_.load()},t.prototype.isPrefetchedSrc=function(e){var t=this.options_.playerOptions.html5;return t&&t.prefetchedSrc&&t.prefetchedSrc===e},t.prototype.reset=function(){e.prototype.reset.call(this),t.resetMediaElement(this.el_)},t.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},t.prototype.poster=function(){return this.el_.poster},t.prototype.setPoster=function(e){(void 0===e||""===e)&&this.el_.removeAttribute("poster"),this.trigger("posterchange")},t.prototype.preload=function(){return this.el_.preload},t.prototype.setPreload=function(e){this.el_.preload=e},t.prototype.autoplay=function(){return this.el_.autoplay},t.prototype.setAutoplay=function(e){this.el_.autoplay=e},t.prototype.controls=function(){return this.el_.controls},t.prototype.setControls=function(e){this.el_.controls=!!e},t.prototype.loop=function(){return this.el_.loop},t.prototype.setLoop=function(e){this.el_.loop=e},t.prototype.error=function(t){return void 0===t?this.error_||this.el_.error:void e.prototype.error.call(this,t)},t.prototype.seeking=function(){return this.el_.seeking},t.prototype.seekable=function(){return this.el_.seekable},t.prototype.ended=function(){return this.el_.ended},t.prototype.defaultMuted=function(){return this.el_.defaultMuted},t.prototype.playbackRate=function(){return this.el_.playbackRate},t.prototype.played=function(){return this.el_.played},t.prototype.setPlaybackRate=function(e){this.el_.playbackRate=e},t.prototype.networkState=function(){return this.el_.networkState},t.prototype.readyState=function(){return this.el_.readyState},t.prototype.videoWidth=function(){return this.el_.videoWidth},t.prototype.videoHeight=function(){return this.el_.videoHeight},t.prototype.textTracks=function(){return e.prototype.textTracks.call(this)},t.prototype.addTextTrack=function(t,n,a){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,n,a):e.prototype.addTextTrack.call(this,t,n,a)},t.prototype.addRemoteTextTrack=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(!this.featuresNativeTextTracks)return e.prototype.addRemoteTextTrack.call(this,t);var n=m.default.createElement("track");return t.kind&&(n.kind=t.kind),t.label&&(n.label=t.label),(t.language||t.srclang)&&(n.srclang=t.language||t.srclang),t.default&&(n.default=t.default),t.id||(t.id="vjs_track_"+v.newGUID()),t.id&&(n.id=t.id),t.src&&(n.src=t.src),this.el().appendChild(n),this.remoteTextTrackEls().addTrackElement_(n),this.remoteTextTracks().addTrack_(n.track),n},t.prototype.removeRemoteTextTrack=function(t){if(!this.featuresNativeTextTracks)return e.prototype.removeRemoteTextTrack.call(this,t);var n,a=void 0,i=this.remoteTextTrackEls().getTrackElementByTrack_(t);for(this.remoteTextTrackEls().removeTrackElement_(i),this.remoteTextTracks().removeTrack_(t),a=(n=this.$$("track")).length;a--;)(t===n[a]||t===n[a].track)&&this.el().removeChild(n[a])},t}(o.default);y.TEST_VID=m.default.createElement("video");var S=m.default.createElement("track");S.kind="captions",S.srclang="en",S.label="English",y.TEST_VID.appendChild(S),y.isSupported=function(){try{y.TEST_VID.volume=.5}catch(e){return!1}return!!y.TEST_VID.canPlayType},o.default.withSourceHandlers(y),y.nativeSourceHandler={},y.nativeSourceHandler.canPlayType=function(e){try{return y.TEST_VID.canPlayType(e)}catch(e){return""}},y.nativeSourceHandler.canHandleSource=function(e){var t;return e.type?y.nativeSourceHandler.canPlayType(e.type):e.src?(t=d.getFileExtension(e.src),y.nativeSourceHandler.canPlayType("video/"+t)):""},y.nativeSourceHandler.handleSource=function(e,t){t.setSrc(e.src)},y.nativeSourceHandler.dispose=function(){},y.registerSourceHandler(y.nativeSourceHandler),y.canControlVolume=function(){try{var e=y.TEST_VID.volume;return y.TEST_VID.volume=e/2+.1,e!==y.TEST_VID.volume}catch(e){return!1}},y.canControlPlaybackRate=function(){try{var e=y.TEST_VID.playbackRate;return y.TEST_VID.playbackRate=e/2+.1,e!==y.TEST_VID.playbackRate}catch(e){return!1}},y.isPreloadSupported=function(){return!p.IS_IOS||!p.IS_SAFARI},y.supportsNativeTextTracks=function(){var e;return(e=!!y.TEST_VID.textTracks)&&y.TEST_VID.textTracks.length>0&&(e="number"!=typeof y.TEST_VID.textTracks[0].mode),e&&p.IS_FIREFOX&&(e=!1),!e||"onremovetrack"in y.TEST_VID.textTracks||(e=!1),e},y.supportsNativeVideoTracks=function(){return!!y.TEST_VID.videoTracks},y.supportsNativeAudioTracks=function(){return!!y.TEST_VID.audioTracks},y.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","volumechange","autoplayfailed"],y.prototype.featuresVolumeControl=y.canControlVolume(),y.prototype.featuresPlaybackRate=y.canControlPlaybackRate(),y.prototype.featuresPreload=y.isPreloadSupported(),y.prototype.movingMediaElementInDOM=!p.IS_IOS,y.prototype.featuresFullscreenResize=!0,y.prototype.featuresProgressEvents=!0,y.prototype.featuresNativeTextTracks=y.supportsNativeTextTracks(),y.prototype.featuresNativeVideoTracks=y.supportsNativeVideoTracks(),y.prototype.featuresNativeAudioTracks=y.supportsNativeAudioTracks();var D=void 0,I=/^application\/(?:x-|vnd\.apple\.)mpegurl/i,x=/^video\/mp4/i;y.patchCanPlayType=function(){p.ANDROID_VERSION>=4&&(D||(D=y.TEST_VID.constructor.prototype.canPlayType),y.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&I.test(e)?"maybe":D.call(this,e)}),p.IS_OLD_ANDROID&&(D||(D=y.TEST_VID.constructor.prototype.canPlayType),y.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&x.test(e)?"maybe":D.call(this,e)})},y.unpatchCanPlayType=function(){var e=y.TEST_VID.constructor.prototype.canPlayType;return y.TEST_VID.constructor.prototype.canPlayType=D,D=null,e},y.patchCanPlayType(),y.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},y.resetMediaElement=function(e){if(e){for(var t=e.querySelectorAll("source"),n=t.length;n--;)e.removeChild(t[n]);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},s.default.registerComponent("Html5",y),o.default.registerTech("Html5",y),n.default=y,t.exports=n.default},{"../../../src/js/tracks/text-track.js":86,"../component":16,"../utils/browser.js":93,"../utils/dom.js":96,"../utils/fn.js":98,"../utils/guid.js":101,"../utils/log.js":104,"../utils/merge-options.js":105,"../utils/to-title-case.js":109,"../utils/url.js":110,"./tech.js":75,"global/document":168,"global/window":169,"object.assign":162,tsml:166}],73:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=a(e("../component.js")),r=a(e("./tech.js")),o=(a(e("global/window")),e("../utils/to-title-case.js")),s=a(o),c=function(e){function t(n,a,o){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.call(this,n,a,o),a.playerOptions.sources&&0!==a.playerOptions.sources.length)n.src(a.playerOptions.sources);else for(var c=0,d=a.playerOptions.techOrder;c<d.length;c++){var l=s.default(d[c]),u=r.default.getTech(l);if(l||(u=i.default.getComponent(l)),u&&u.isSupported()){n.loadTech_(l);break}}}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(i.default);i.default.registerComponent("MediaLoader",c),n.default=c,t.exports=n.default},{"../component.js":16,"../utils/to-title-case.js":109,"./tech.js":75,"global/window":169}],74:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=a(e("global/window")),r=a(e("global/document")),o=function(){function e(e){return parseInt(e,10)}var t="undefined",n="Shockwave Flash",a="application/x-shockwave-flash",o=i.default,s=r.default,c=i.default.navigator,d=function(){var i=typeof s.getElementById!==t&&typeof s.getElementsByTagName!==t&&typeof s.createElement!==t,r=c.userAgent.toLowerCase(),d=c.platform.toLowerCase(),l=/win/.test(d||r),u=/mac/.test(d||r),f=!!/webkit/.test(r)&&parseFloat(r.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),p="Microsoft Internet Explorer"===c.appName,m=[0,0,0,145],_=null;if(typeof c.plugins!==t&&"object"==typeof c.plugins[n])if((_=c.plugins[n].version)&&typeof c.mimeTypes!==t&&c.mimeTypes[a]&&c.mimeTypes[a].enabledPlugin){p=!1;var h=_.split(".");m[0]=e(h[0]),m[1]=e(h[1]),m[2]=e(h[2]),m[3]=e(h[3])}else(_=c.plugins[n].description)&&typeof c.mimeTypes!==t&&c.mimeTypes[a]&&c.mimeTypes[a].enabledPlugin&&(p=!1,_=_.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),m[0]=e(_.replace(/^(.*)\..*$/,"$1")),m[1]=e(_.replace(/^.*\.(.*)\s.*$/,"$1")),m[2]=/[a-zA-Z]/.test(_)?e(_.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0);else if(typeof o.ActiveXObject!==t)try{var b=new o.ActiveXObject("ShockwaveFlash.ShockwaveFlash");b&&(_=b.GetVariable("$version"))&&(p=!0,m=[e((_=_.split(" ")[1].split(","))[0]),e(_[1]),e(_[2])])}catch(e){}return{w3:i,pv:m,wk:f,ie:p,win:l,mac:u}}();return{ua:d,hasFlashPlayerVersion:function(t){t+="";var n=d.pv,a=t.split(".");return a[0]=e(a[0]),a[1]=e(a[1])||0,a[2]=e(a[2])||0,a[3]=e(a[3])||0,n[0]>a[0]||n[0]===a[0]&&n[1]>a[1]||n[0]===a[0]&&n[1]===a[1]&&n[2]>a[2]||n[0]===a[0]&&n[1]===a[1]&&n[2]===a[2]&&n[3]>=a[3]}}}();n.swfobject=o},{"global/document":168,"global/window":169}],75:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var r=a(e("../component")),o=a(e("../tracks/html-track-element")),s=a(e("../tracks/html-track-element-list")),c=a(e("../utils/merge-options.js")),d=a(e("../tracks/text-track")),l=a(e("../tracks/text-track-list")),u=(a(e("../tracks/video-track")),e("../tracks/video-track-list")),f=a(u),p=a(e("../tracks/audio-track-list")),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}((a(e("../tracks/audio-track")),e("../utils/fn.js"))),_=a(e("../utils/log.js")),h=e("../utils/time-ranges.js"),b=e("../utils/buffer.js"),g=a(e("../media-error.js")),v=a(e("global/window")),y=(a(e("global/document")),function(e){function t(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],a=arguments.length<=1||void 0===arguments[1]?function(){}:arguments[1];i(this,t),n.reportTouchActivity=!1,e.call(this,null,n,a),this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),this.textTracks_=n.textTracks,this.videoTracks_=n.videoTracks,this.audioTracks_=n.audioTracks,this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),(!1===n.nativeCaptions||!1===n.nativeTextTracks)&&(this.featuresNativeTextTracks=!1),this.featuresNativeTextTracks||this.on("ready",this.emulateTextTracks),this.initTextTrackListeners(),this.initTrackListeners(),this.emitTapEvents()}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},t.prototype.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},t.prototype.trackProgress=function(){this.stopTrackingProgress(),this.progressInterval=this.setInterval(m.bind(this,function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),this.bufferedPercent_=e,1===e&&this.stopTrackingProgress()}),500)},t.prototype.onDurationChange=function(){this.duration_=this.duration()},t.prototype.buffered=function(){return h.createTimeRange(0,0)},t.prototype.bufferedPercent=function(){return b.bufferedPercent(this.buffered(),this.duration_)},t.prototype.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},t.prototype.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime),this.one("timeupdate",function(e){e.manuallyTriggered||(this.featuresTimeupdateEvents=!0,this.manualTimeUpdatesOff())})},t.prototype.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},t.prototype.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},t.prototype.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},t.prototype.dispose=function(){this.clearTracks(["audio","video","text"]),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),e.prototype.dispose.call(this)},t.prototype.clearTracks=function(e){var t=this;(e=[].concat(e)).forEach(function(e){for(var n=t[e+"Tracks"]()||[],a=n.length;a--;){var i=n[a];"text"===e&&t.removeRemoteTextTrack(i),n.removeTrack_(i)}})},t.prototype.reset=function(){this.error_=void 0},t.prototype.error=function(e){return void 0!==e&&(this.error_=e instanceof g.default?e:new g.default(e),this.trigger("error")),this.error_},t.prototype.played=function(){return this.hasStarted_?h.createTimeRange(0,0):h.createTimeRange()},t.prototype.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},t.prototype.initTextTrackListeners=function(){var e=m.bind(this,function(){this.trigger("texttrackchange")}),t=this.textTracks();t&&(t.addEventListener("removetrack",e),t.addEventListener("addtrack",e),this.on("dispose",m.bind(this,function(){t.removeEventListener("removetrack",e),t.removeEventListener("addtrack",e)})))},t.prototype.initTrackListeners=function(){var e=this;["video","audio"].forEach(function(t){var n=function(){e.trigger(t+"trackchange")},a=e[t+"Tracks"]();a.addEventListener("removetrack",n),a.addEventListener("addtrack",n),e.on("dispose",function(){a.removeEventListener("removetrack",n),a.removeEventListener("addtrack",n)})})},t.prototype.emulateTextTracks=function(){var e=this,t=this.textTracks();if(t){var n=function(){return e.trigger("texttrackchange")},a=function(){n();for(var e=0;e<t.length;e++){var a=t[e];a.removeEventListener("cuechange",n),"showing"===a.mode&&a.addEventListener("cuechange",n)}};a(),t.addEventListener("change",a),this.on("dispose",function(){t.removeEventListener("change",a)})}},t.prototype.videoTracks=function(){return this.videoTracks_=this.videoTracks_||new f.default,this.videoTracks_},t.prototype.audioTracks=function(){return this.audioTracks_=this.audioTracks_||new p.default,this.audioTracks_},t.prototype.textTracks=function(){return this.textTracks_=this.textTracks_||new l.default,this.textTracks_},t.prototype.remoteTextTracks=function(){return this.remoteTextTracks_=this.remoteTextTracks_||new l.default,this.remoteTextTracks_},t.prototype.remoteTextTrackEls=function(){return this.remoteTextTrackEls_=this.remoteTextTrackEls_||new s.default,this.remoteTextTrackEls_},t.prototype.addTextTrack=function(e,t,n){if(!e)throw new Error("TextTrack kind is required but was not provided");return S(this,e,t,n)},t.prototype.addRemoteTextTrack=function(e){var t=c.default(e,{tech:this}),n=new o.default(t);return this.remoteTextTrackEls().addTrackElement_(n),this.remoteTextTracks().addTrack_(n.track),this.textTracks().addTrack_(n.track),n},t.prototype.removeRemoteTextTrack=function(e){this.textTracks().removeTrack_(e);var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack_(e)},t.prototype.setPoster=function(){},t.prototype.canPlayType=function(){return""},t.prototype.readyState=function(){},t.isTech=function(e){return e.prototype instanceof t||e instanceof t||e===t},t.registerTech=function(e,n){if(t.techs_||(t.techs_={}),!t.isTech(n))throw new Error("Tech "+e+" must be a Tech");return t.techs_[e]=n,n},t.getTech=function(e){return t.techs_&&t.techs_[e]?t.techs_[e]:v.default&&v.default.videojs&&v.default.videojs[e]?(_.default.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),v.default.videojs[e]):void 0},t}(r.default));y.prototype.textTracks_,y.prototype.audioTracks_,y.prototype.videoTracks_;var S=function(e,t,n,a){var i=arguments.length<=4||void 0===arguments[4]?{}:arguments[4],r=e.textTracks();i.kind=t,n&&(i.label=n),a&&(i.language=a),i.tech=e;var o=new d.default(i);return r.addTrack_(o),o};y.prototype.featuresVolumeControl=!0,y.prototype.featuresFullscreenResize=!1,y.prototype.featuresPlaybackRate=!1,y.prototype.featuresPreload=!0,y.prototype.featuresProgressEvents=!1,y.prototype.featuresTimeupdateEvents=!1,y.prototype.featuresNativeTextTracks=!1,y.withSourceHandlers=function(e){e.registerSourceHandler=function(t,n){var a=e.sourceHandlers;a||(a=e.sourceHandlers=[]),void 0===n&&(n=a.length),a.splice(n,0,t)},e.canPlayType=function(t){for(var n=e.sourceHandlers||[],a=void 0,i=0;i<n.length;i++)if(a=n[i].canPlayType(t))return a;return""},e.selectSourceHandler=function(t,n){for(var a=e.sourceHandlers||[],i=0;i<a.length;i++)if(a[i].canHandleSource(t,n))return a[i];return null},e.canPlaySource=function(t,n){var a=e.selectSourceHandler(t,n);return a?a.canHandleSource(t,n):""},["seekable","duration"].forEach(function(e){var t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})},e.prototype),e.prototype.setSource=function(t){var n=e.selectSourceHandler(t,this.options_);return n||(e.nativeSourceHandler?n=e.nativeSourceHandler:_.default.error("No source hander found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),n!==e.nativeSourceHandler&&(this.currentSource_=t,this.off(this.el_,"loadstart",e.prototype.firstLoadStartListener_),this.off(this.el_,"loadstart",e.prototype.successiveLoadStartListener_),this.one(this.el_,"loadstart",e.prototype.firstLoadStartListener_)),this.sourceHandler_=n.handleSource(t,this,this.options_),this.on("dispose",this.disposeSourceHandler),this},e.prototype.firstLoadStartListener_=function(){this.one(this.el_,"loadstart",e.prototype.successiveLoadStartListener_)},e.prototype.successiveLoadStartListener_=function(){this.currentSource_=null,this.disposeSourceHandler(),this.one(this.el_,"loadstart",e.prototype.successiveLoadStartListener_)},e.prototype.disposeSourceHandler=function(){this.sourceHandler_&&this.sourceHandler_.dispose&&(this.off(this.el_,"loadstart",e.prototype.firstLoadStartListener_),this.off(this.el_,"loadstart",e.prototype.successiveLoadStartListener_),this.sourceHandler_.dispose(),this.sourceHandler_=null)}},y.ReadyState={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},r.default.registerComponent("Tech",y),r.default.registerComponent("MediaTechController",y),y.registerTech("Tech",y),n.default=y,t.exports=n.default},{"../component":16,"../media-error.js":58,"../tracks/audio-track":78,"../tracks/audio-track-list":77,"../tracks/html-track-element":80,"../tracks/html-track-element-list":79,"../tracks/text-track":86,"../tracks/text-track-list":84,"../tracks/video-track":91,"../tracks/video-track-list":90,"../utils/buffer.js":94,"../utils/fn.js":98,"../utils/log.js":104,"../utils/merge-options.js":105,"../utils/time-ranges.js":107,"global/document":168,"global/window":169}],76:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=a(e("./clickable-component.js")),r=a(e("./component")),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./utils/dom.js")),s=function(e){function t(n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=this;e.call(this,n,a),n&&n.options_&&n.options_.disableTooltip||(this.lastClickedTime_=Date.now(),this.on("keydown",this.clearKeyboardTooltip),this.on("mouseover",this.clearKeyboardTooltip),this.on("focusout",this.clearKeyboardTooltip),this.on("click",function(){this.lastClickedTime_=Date.now(),this.clearKeyboardTooltip(),e.prototype.handleClick.call(i)}),this.on("focusin",this.handleFocusin))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.handleFocusin=function(){Date.now()-this.lastClickedTime_>500&&this.showKeyboardTooltip()},t.prototype.showKeyboardTooltip=function(){var e=this.el_.getAttribute("title");e&&void 0!==e&&(this.buttonTooltipEl_&&void 0!==this.buttonTooltipEl_||(this.buttonTooltipEl_=o.createEl("span",{className:"vjs-button-tooltip"}),this.el_.appendChild(this.buttonTooltipEl_),this.buttonTooltipEl_.innerHtml=this.buttonTooltipEl_.innerText=e))},t.prototype.clearKeyboardTooltip=function(){this.buttonTooltipEl_&&void 0!==this.buttonTooltipEl_&&(this.buttonTooltipEl_.innerHtml=this.buttonTooltipEl_.innerText=null,this.el_.removeChild(this.buttonTooltipEl_),this.buttonTooltipEl_=null)},t}(i.default);r.default.registerComponent("TooltipClickable",s),n.default=s,t.exports=n.default},{"./clickable-component.js":14,"./component":16,"./utils/dom.js":96}],77:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var r=a(e("./track-list")),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../utils/browser.js")),s=a(e("global/document")),c=function(e,t){for(var n=0;n<e.length;n++)t.id!==e[n].id&&(e[n].enabled=!1)},d=function(e){function t(){var n=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];i(this,t);for(var a=void 0,d=n.length-1;d>=0;d--)if(n[d].enabled){c(n,n[d]);break}if(o.IS_IE8){for(var l in a=s.default.createElement("custom"),r.default.prototype)"constructor"!==l&&(a[l]=r.default.prototype[l]);for(var l in t.prototype)"constructor"!==l&&(a[l]=t.prototype[l])}return(a=e.call(this,n,a)).changing_=!1,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.addTrack_=function(t){var n=this;t.enabled&&c(this,t),e.prototype.addTrack_.call(this,t),t.addEventListener&&t.addEventListener("enabledchange",function(){n.changing_||(n.changing_=!0,c(n,t),n.changing_=!1,n.trigger("change"))})},t.prototype.addTrack=function(e){this.addTrack_(e)},t.prototype.removeTrack=function(t){e.prototype.removeTrack_.call(this,t)},t}(r.default);n.default=d,t.exports=n.default},{"../utils/browser.js":93,"./track-list":88,"global/document":168}],78:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var r=e("./track-enums"),o=a(e("./track")),s=a(e("../utils/merge-options")),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../utils/browser.js")),d=function(e){function t(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,t);var a=s.default(n,{kind:r.AudioTrackKind[n.kind]||""}),o=e.call(this,a),d=!1;if(c.IS_IE8)for(var l in t.prototype)"constructor"!==l&&(o[l]=t.prototype[l]);return Object.defineProperty(o,"enabled",{get:function(){return d},set:function(e){"boolean"==typeof e&&e!==d&&(d=e,this.trigger("enabledchange"))}}),a.enabled&&(o.enabled=a.enabled),o.loaded_=!0,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(o.default);n.default=d,t.exports=n.default},{"../utils/browser.js":93,"../utils/merge-options":105,"./track":89,"./track-enums":87}],79:[function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../utils/browser.js")),r=function(e){return e&&e.__esModule?e:{default:e}}(e("global/document")),o=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];a(this,e);var n=this;if(i.IS_IE8)for(var o in n=r.default.createElement("custom"),e.prototype)"constructor"!==o&&(n[o]=e.prototype[o]);n.trackElements_=[],Object.defineProperty(n,"length",{get:function(){return this.trackElements_.length}});for(var s=0,c=t.length;c>s;s++)n.addTrackElement_(t[s]);return i.IS_IE8?n:void 0}return e.prototype.addTrackElement_=function(e){this.trackElements_.push(e)},e.prototype.getTrackElementByTrack_=function(e){for(var t=void 0,n=0,a=this.trackElements_.length;a>n;n++)if(e===this.trackElements_[n].track){t=this.trackElements_[n];break}return t},e.prototype.removeTrackElement_=function(e){for(var t=0,n=this.trackElements_.length;n>t;t++)if(e===this.trackElements_[t]){this.trackElements_.splice(t,1);break}},e}();n.default=o,t.exports=n.default},{"../utils/browser.js":93,"global/document":168}],80:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../utils/browser.js")),o=a(e("global/document")),s=a(e("../event-target")),c=a(e("../tracks/text-track")),d=function(e){function t(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,t),e.call(this);var a=void 0,s=this;if(r.IS_IE8)for(var d in s=o.default.createElement("custom"),t.prototype)"constructor"!==d&&(s[d]=t.prototype[d]);var l=new c.default(n);return s.kind=l.kind,s.src=l.src,s.srclang=l.language,s.label=l.label,s.default=l.default,Object.defineProperty(s,"readyState",{get:function(){return a}}),Object.defineProperty(s,"track",{get:function(){return l}}),a=0,l.addEventListener("loadeddata",function(){a=2,s.trigger({type:"load",target:s})}),r.IS_IE8?s:void 0}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(s.default);d.prototype.allowedEvents_={load:"load"},d.NONE=0,d.LOADING=1,d.LOADED=2,d.ERROR=3,n.default=d,t.exports=n.default},{"../event-target":54,"../tracks/text-track":86,"../utils/browser.js":93,"global/document":168}],81:[function(e,t,n){"use strict";n.__esModule=!0;var a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../utils/browser.js")),i=function(e){return e&&e.__esModule?e:{default:e}}(e("global/document")),r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=this;if(a.IS_IE8)for(var r in n=i.default.createElement("custom"),e.prototype)"constructor"!==r&&(n[r]=e.prototype[r]);return e.prototype.setCues_.call(n,t),Object.defineProperty(n,"length",{get:function(){return this.length_}}),a.IS_IE8?n:void 0}return e.prototype.setCues_=function(e){var t=this.length||0,n=0,a=e.length;this.cues_=e,this.length_=e.length;var i=function(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})};if(a>t)for(n=t;a>n;n++)i.call(this,n)},e.prototype.getCueById=function(e){for(var t=null,n=0,a=this.length;a>n;n++){var i=this[n];if(i.id===e){t=i;break}}return t},e}();n.default=r,t.exports=n.default},{"../utils/browser.js":93,"global/document":168}],82:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];return t?"rgba("+n.join(",")+","+t+")":"rgb("+n.join(",")+")"}function r(e,t,n){try{e.style[t]=n}catch(e){}}function o(e,t,n,a){try{for(var i=0;i<e.length;i++){var r=e[i];(!a||a(r))&&r.style.setProperty(t,n,"important")}}catch(e){}}function s(e,t,n,a){function i(e){return h.default.getComputedStyle?h.default.getComputedStyle(e,""):e.currentStyle}function r(e){return"rgb("+[parseInt(e[1]+e[2],16),parseInt(e[3]+e[4],16),parseInt(e[5]+e[6],16)].join(",")+")"}for(var o=0;o<e.length;o++){var s=e[o];if(!a||a(s)){var d=i(s)[t];d.indexOf("rgb")<0&&(d=r(d));var l=c(d);if(!l)return;l[3]=n;var u="rgba("+l.join(",")+")";try{s.style.setProperty(t,u,"important")}catch(e){}}}}function c(e){var t=/rgba?\((\d+,\s*\d+,\s*\d+(?:,\s*[\d\.]+)?)\)/.exec(e);return!t||t.length<2?null:t[1].split(/,\s*/)}function d(e,t){for(var n=c(e),a=c(t),i=0;3>i;i++)if(n[i]!==a[i])return!1;return!0}function l(e){return e&&e.className&&e.className.indexOf("bg_")>=0}n.__esModule=!0;var u=a(e("../component")),f=(a(e("../menu/menu.js")),e("../menu/menu-item.js")),p=(a(f),e("../menu/menu-button.js")),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}((a(p),e("../utils/fn.js"))),_=(a(e("global/document")),e("global/window")),h=a(_),b="#222",g={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'},v=function(e){function t(n,a,i){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),e.call(this,n,a,i),n.on("loadstart",m.bind(this,this.toggleDisplay)),n.on("texttrackchange",m.bind(this,this.updateDisplay)),n.ready(m.bind(this,function(){if(n.tech_&&n.tech_.featuresNativeTextTracks)this.hide();else{n.on("fullscreenchange",m.bind(this,this.updateDisplay));for(var e=this.options_.playerOptions.tracks||[],t=0;t<e.length;t++){var a=e[t];this.player_.addRemoteTextTrack(a)}var i={captions:1,subtitles:1},r=this.player_.textTracks(),o=void 0,s=void 0;if(r){for(t=0;t<r.length;t++)(a=r[t]).default&&("descriptions"!==a.kind||o?a.kind in i&&!s&&(s=a):o=a);s?s.mode="showing":o&&(o.mode="showing")}}}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"assertive","aria-atomic":"true"})},t.prototype.clearDisplay=function(){"function"==typeof h.default.WebVTT&&h.default.WebVTT.processCues(h.default,[],this.el_)},t.prototype.updateDisplay=function(){var e=this.getTrackToDisplay();this.clearDisplay(),e&&this.updateForTrack(e)},t.prototype.updateStyle=function(){var e=this.getTrackToDisplay();e&&this.updateForTrack(e,!0)},t.prototype.getTrackToDisplay=function(){var e=this.player_.textTracks();if(!e)return null;for(var t=null,n=0;n<e.length;n++){var a=e[n];if("showing"===a.mode){if("descriptions"!==a.kind)return a;null!==t&&(t=a)}}return t},t.prototype.sanitizeCue=function(e){if(e.text){e.text=e.text.trim();var t=e.text.match(/^([^<]*)(<[^>]+>?)?([^>]*$)?/);t&&!t[1]&&!t[3]&&t[2]&&(e.text.substr(t[2].length).match(/([^>])/g)||(e.text=e.text.replaceAllFirst("<","&lt;").replaceAllLast(">","&gt;")))}return e.isSanitized=!0,e},t.prototype.updateForTrack=function(e,t){if("function"==typeof h.default.WebVTT&&e.activeCues){for(var n=this.player_.textTrackSettings.getValues(),a=[],c=0;c<e.activeCues.length;c++)(f=(f=e.activeCues[c]).isSanitized?f:this.sanitizeCue(f)).text&&a.push(f);if(!(a.length<=0||this.el_.offsetHeight<=0||this.el_.offsetWidth<=0)){t||h.default.WebVTT.processCues(h.default,a,this.el_);for(var u=a.length;u--;){var f;if(f=a[u]){var p=f.displayState,m=this.changedByUser?p.firstChild.querySelectorAll("span"):[];if(n.color){var _=p.firstChild.style.color;p.firstChild.style.color=n.color,this.changedByUser&&!d(i(n.color),_)&&o(m,"color",n.color)}n.textOpacity&&(r(p.firstChild,"color",i(n.color||"#fff",n.textOpacity)),this.changedByUser&&s(m,"color",n.textOpacity));var v=p.firstChild.style.backgroundColor;if(n.backgroundColor&&(p.firstChild.style.backgroundColor=n.backgroundColor,this.changedByUser&&!d(i(n.backgroundColor),v)&&o(m,"background-color",n.backgroundColor,l)),n.backgroundOpacity){var y=i(n.backgroundColor||"#000",n.backgroundOpacity);r(p.firstChild,"backgroundColor",y),this.changedByUser&&s(m,"background-color",d(i(n.backgroundColor),v)?n.backgroundOpacity:0,l)}if(n.windowColor&&(n.windowOpacity?r(p,"backgroundColor",i(n.windowColor,n.windowOpacity)):p.style.backgroundColor=n.windowColor),n.edgeStyle&&("dropshadow"===n.edgeStyle?p.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px "+b:"raised"===n.edgeStyle?p.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px "+b:"depressed"===n.edgeStyle?p.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px "+b:"uniform"===n.edgeStyle&&(p.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px "+b)),n.fontPercent&&1!==n.fontPercent){var S=h.default.parseFloat(p.style.fontSize);p.style.fontSize=S*n.fontPercent+"px",p.style.height="auto",p.style.top="auto",p.style.bottom="2px"}n.fontFamily&&"default"!==n.fontFamily&&("small-caps"===n.fontFamily?p.firstChild.style.fontVariant="small-caps":p.firstChild.style.fontFamily=g[n.fontFamily]),n.justification&&(p.style.textAlign=n.justification),n.padding&&(p.style.padding=n.padding),n.textPadding&&(p.firstChild.style.padding=n.textPadding),n.boxShadow&&(p.firstChild.style.boxShadow=n.boxShadow,p.firstChild.style.webkitBoxShadow=n.boxShadow)}}}}},t.prototype.setAsChangedByUser=function(){this.changedByUser=!0},t}(u.default);u.default.registerComponent("TextTrackDisplay",v),n.default=v,t.exports=n.default},{"../component":16,"../menu/menu-button.js":59,"../menu/menu-item.js":60,"../menu/menu.js":61,"../utils/fn.js":98,"global/document":168,"global/window":169}],83:[function(e,t,n){"use strict";n.__esModule=!0;var a=function(e){var t=["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(t,n){return e[n]&&(t[n]=e[n]),t},{cues:e.cues&&Array.prototype.map.call(e.cues,function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}})});return t};n.default={textTracksToJson:function(e){var t=e.$$("track"),n=Array.prototype.map.call(t,function(e){return e.track}),i=Array.prototype.map.call(t,function(e){var t=a(e.track);return e.src&&(t.src=e.src),t});return i.concat(Array.prototype.filter.call(e.textTracks(),function(e){return-1===n.indexOf(e)}).map(a))},jsonToTextTracks:function(e,t){return e.forEach(function(e){var n=t.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach(function(e){return n.addCue(e)})}),t.textTracks()},trackToJson_:a},t.exports=n.default},{}],84:[function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var o=i(e("./track-list")),s=a(e("../utils/fn.js")),c=a(e("../utils/browser.js")),d=i(e("global/document")),l=function(e){function t(){var n=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];r(this,t);var a=void 0;if(c.IS_IE8){for(var i in a=d.default.createElement("custom"),o.default.prototype)"constructor"!==i&&(a[i]=o.default.prototype[i]);for(var i in t.prototype)"constructor"!==i&&(a[i]=t.prototype[i])}return e.call(this,n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.addTrack_=function(t){e.prototype.addTrack_.call(this,t),t.addEventListener("modechange",s.bind(this,function(){this.trigger("change")}))},t.prototype.removeTrack_=function(e){for(var t=void 0,n=0,a=this.length;a>n;n++)if(this[n]===e){(t=this[n]).off&&t.off(),this.tracks_.splice(n,1);break}t&&this.trigger({track:t,type:"removetrack"})},t.prototype.getTrackById=function(e){for(var t=null,n=0,a=this.length;a>n;n++){var i=this[n];if(i.id===e){t=i;break}}return t},t}(o.default);n.default=l,t.exports=n.default},{"../utils/browser.js":93,"../utils/fn.js":98,"./track-list":88,"global/document":168}],85:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=void 0;return e.selectedOptions?t=e.selectedOptions[0]:e.options&&(t=e.options[e.options.selectedIndex]),t.value}function r(e,t){if(t){var n=void 0;for(n=0;n<e.options.length&&e.options[n].value!==t;n++);e.selectedIndex=n}}function o(e,t,n){return'\n    <div role="document">\n      <div role="heading" aria-level="1" id="'+t+'" class="vjs-control-text">Captions Settings Dialog</div>\n      <div id="'+n+'" class="vjs-control-text">Beginning of dialog window. Escape will cancel and close the window.</div>\n      <div class="vjs-tracksettings">\n        <div class="vjs-tracksettings-colors">\n          <fieldset class="vjs-fg-color vjs-tracksetting">\n            <legend>'+this.htmlEncode(this.localize("Text"))+'</legend>\n            <label class="vjs-label" for="captions-foreground-color-'+e+'">'+this.htmlEncode(this.localize("Text color"))+'</label>\n            <select id="captions-foreground-color-'+e+'">\n              <option value="#FFF" selected>'+this.htmlEncode(this.localize("White"))+'</option>\n              <option value="#000">'+this.htmlEncode(this.localize("Black"))+'</option>\n              <option value="#F00">'+this.htmlEncode(this.localize("Red"))+'</option>\n              <option value="#0F0">'+this.htmlEncode(this.localize("Green"))+'</option>\n              <option value="#00F">'+this.htmlEncode(this.localize("Blue"))+'</option>\n              <option value="#FF0">'+this.htmlEncode(this.localize("Yellow"))+'</option>\n              <option value="#F0F">'+this.htmlEncode(this.localize("Magenta"))+'</option>\n              <option value="#0FF">'+this.htmlEncode(this.localize("Cyan"))+'</option>\n            </select>\n            <span class="vjs-text-opacity vjs-opacity">\n             <label class="vjs-label" for="captions-foreground-opacity-'+e+'">'+this.htmlEncode(this.localize("Text opacity"))+'</label>\n              <select id="captions-foreground-opacity-'+e+'">\n                <option value="1" selected>'+this.htmlEncode(this.localize("Opaque"))+'</option>\n                <option value="0.5">'+this.htmlEncode(this.localize("Semi-Opaque"))+'</option>\n              </select>\n            </span>\n          </fieldset>\n          <fieldset class="vjs-bg-color vjs-tracksetting">\n            <legend>'+this.htmlEncode(this.localize("Background"))+'</legend>\n            <label class="vjs-label" for="captions-background-color-'+e+'">'+this.htmlEncode(this.localize("Background Color"))+'</label>\n            <select id="captions-background-color-'+e+'">\n              <option value="#000" selected>'+this.htmlEncode(this.localize("Black"))+'</option>\n              <option value="#FFF">'+this.htmlEncode(this.localize("White"))+'</option>\n              <option value="#F00">'+this.htmlEncode(this.localize("Red"))+'</option>\n              <option value="#0F0">'+this.htmlEncode(this.localize("Green"))+'</option>\n              <option value="#00F">'+this.htmlEncode(this.localize("Blue"))+'</option>\n              <option value="#FF0">'+this.htmlEncode(this.localize("Yellow"))+'</option>\n              <option value="#F0F">'+this.htmlEncode(this.localize("Magenta"))+'</option>\n              <option value="#0FF">'+this.htmlEncode(this.localize("Cyan"))+'</option>\n            </select>\n            <span class="vjs-bg-opacity vjs-opacity">\n              <label class="vjs-label" for="captions-background-opacity-'+e+'">'+this.htmlEncode(this.localize("Background opacity"))+'</label>\n              <select id="captions-background-opacity-'+e+'">\n                <option value="1" selected>'+this.htmlEncode(this.localize("Opaque"))+'</option>\n                <option value="0.5">'+this.htmlEncode(this.localize("Semi-Transparent"))+'</option>\n                <option value="0">'+this.htmlEncode(this.localize("Transparent"))+'</option>\n              </select>\n            </span>\n          </fieldset>\n          <fieldset class="window-color vjs-tracksetting">\n            <legend>'+this.htmlEncode(this.localize("Window"))+'</legend>\n            <label class="vjs-label" for="captions-window-color-'+e+'">'+this.htmlEncode(this.localize("Window Color"))+'</label>\n            <select id="captions-window-color-'+e+'">\n              <option value="#000" selected>'+this.htmlEncode(this.localize("Black"))+'</option>\n              <option value="#FFF">'+this.htmlEncode(this.localize("White"))+'</option>\n              <option value="#F00">'+this.htmlEncode(this.localize("Red"))+'</option>\n              <option value="#0F0">'+this.htmlEncode(this.localize("Green"))+'</option>\n              <option value="#00F">'+this.htmlEncode(this.localize("Blue"))+'</option>\n              <option value="#FF0">'+this.htmlEncode(this.localize("Yellow"))+'</option>\n              <option value="#F0F">'+this.htmlEncode(this.localize("Magenta"))+'</option>\n              <option value="#0FF">'+this.htmlEncode(this.localize("Cyan"))+'</option>\n            </select>\n            <span class="vjs-window-opacity vjs-opacity">\n              <label class="vjs-label" for="captions-window-opacity-'+e+'">'+this.htmlEncode(this.localize("Transparency"))+'</label>\n              <select id="captions-window-opacity-'+e+'">\n                <option value="0" selected>'+this.htmlEncode(this.localize("Transparent"))+'</option>\n                <option value="0.5">'+this.htmlEncode(this.localize("Semi-Transparent"))+'</option>\n                <option value="1">'+this.htmlEncode(this.localize("Opaque"))+'</option>\n              </select>\n            </span>\n          </fieldset>\n        </div> \x3c!-- vjs-tracksettings-colors --\x3e\n        <div class="vjs-tracksettings-font">\n          <div class="vjs-font-percent vjs-tracksetting">\n            <label class="vjs-label" for="captions-font-size-'+e+'">'+this.htmlEncode(this.localize("Font Size"))+'</label>\n            <select id="captions-font-size-'+e+'">\n              <option value="0.50">50%</option>\n              <option value="0.75">75%</option>\n              <option value="1.00" selected>100%</option>\n              <option value="1.25">125%</option>\n              <option value="1.50">150%</option>\n              <option value="1.75">175%</option>\n              <option value="2.00">200%</option>\n              <option value="3.00">300%</option>\n              <option value="4.00">400%</option>\n            </select>\n          </div>\n          <div class="vjs-edge-style vjs-tracksetting">\n            <label class="vjs-label" for="captions-edge-style-'+e+'">'+this.htmlEncode(this.localize("Text Edge Style"))+'</label>\n            <select id="captions-edge-style-'+e+'">\n              <option value="none" selected>'+this.htmlEncode(this.localize("None"))+'</option>\n              <option value="raised">'+this.htmlEncode(this.localize("Raised"))+'</option>\n              <option value="depressed">'+this.htmlEncode(this.localize("Depressed"))+'</option>\n              <option value="uniform">'+this.htmlEncode(this.localize("Uniform"))+'</option>\n              <option value="dropshadow">'+this.htmlEncode(this.localize("Dropshadow"))+'</option>\n            </select>\n          </div>\n          <div class="vjs-font-family vjs-tracksetting">\n            <label class="vjs-label" for="captions-font-family-'+e+'">'+this.htmlEncode(this.localize("Font Family"))+'</label>\n            <select id="captions-font-family-'+e+'">\n              <option value="proportionalSansSerif" selected>'+this.htmlEncode(this.localize("Proportional Sans-Serif"))+'</option>\n              <option value="monospaceSansSerif">'+this.htmlEncode(this.localize("Monospace Sans-Serif"))+'</option>\n              <option value="proportionalSerif">'+this.htmlEncode(this.localize("Proportional Serif"))+'</option>\n              <option value="monospaceSerif">'+this.htmlEncode(this.localize("Monospace Serif"))+'</option>\n              <option value="casual">'+this.htmlEncode(this.localize("Casual"))+'</option>\n              <option value="script">'+this.htmlEncode(this.localize("Script"))+'</option>\n              <option value="small-caps">'+this.htmlEncode(this.localize("Small Caps"))+'</option>\n            </select>\n          </div>\n        </div> \x3c!-- vjs-tracksettings-font --\x3e\n        <div class="vjs-tracksettings-controls">\n          <button class="vjs-default-button">'+this.htmlEncode(this.localize("Defaults"))+'</button>\n          <button class="vjs-done-button">'+this.htmlEncode(this.localize("Done"))+'</button>\n        </div>\n      </div> \x3c!-- vjs-tracksettings --\x3e\n    </div> \x3c!--  role="document" --\x3e'}n.__esModule=!0;var s=a(e("../component")),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../utils/fn.js")),d=a(e("../utils/log.js")),l=a(e("safe-json-parse/tuple")),u=a(e("global/window")),f=function(e){function t(n,a){var i=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),e.call(this,n,a),this.hide(),void 0===a.persistTextTrackSettings&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.hiddenSettings={justification:"center"},this.on(this.$(".vjs-done-button"),"click",function(){i.saveSettings(),i.hide(),i.returnFocusBack()}),this.on(this.$(".vjs-done-button"),"keydown",this.handleKeyPress_DoneBtn),this.on(this.$(".vjs-fg-color"),"keydown",this.handleKeyPress_FgColor),this.on(this.$(".vjs-default-button"),"click",function(){i.$(".vjs-fg-color > select").selectedIndex=0,i.$(".vjs-bg-color > select").selectedIndex=0,i.$(".window-color > select").selectedIndex=0,i.$(".vjs-text-opacity > select").selectedIndex=0,i.$(".vjs-bg-opacity > select").selectedIndex=0,i.$(".vjs-window-opacity > select").selectedIndex=0,i.$(".vjs-edge-style select").selectedIndex=0,i.$(".vjs-font-family select").selectedIndex=0,i.$(".vjs-font-percent select").selectedIndex=2,i.updateDisplay()}),this.on(this.$(".vjs-fg-color > select"),"change",this.updateDisplay),this.on(this.$(".vjs-bg-color > select"),"change",this.updateDisplay),this.on(this.$(".window-color > select"),"change",this.updateDisplay),this.on(this.$(".vjs-text-opacity > select"),"change",this.updateDisplay),this.on(this.$(".vjs-bg-opacity > select"),"change",this.updateDisplay),this.on(this.$(".vjs-window-opacity > select"),"change",this.updateDisplay),this.on(this.$(".vjs-font-percent select"),"change",this.updateDisplay),this.on(this.$(".vjs-edge-style select"),"change",this.updateDisplay),this.on(this.$(".vjs-font-family select"),"change",this.updateDisplay),this.on(this.el_.ownerDocument,"keydown",c.bind(this,this.handleKeyPress)),this.options_.persistTextTrackSettings&&this.restoreSettings()}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.createEl=function(){var t=this.id_,n="TTsettingsDialogLabel-"+t,a="TTsettingsDialogDescription-"+t;return e.prototype.createEl.call(this,"div",{className:"vjs-caption-settings vjs-modal-overlay",innerHTML:o.call(this,t,n,a),tabIndex:-1},{role:"dialog","aria-labelledby":n,"aria-describedby":a})},t.prototype.getValues=function(){var e=i(this.$(".vjs-edge-style select")),t=i(this.$(".vjs-font-family select")),n=i(this.$(".vjs-fg-color > select")),a=i(this.$(".vjs-text-opacity > select")),r=i(this.$(".vjs-bg-color > select")),o=i(this.$(".vjs-bg-opacity > select")),s=i(this.$(".window-color > select")),c={backgroundOpacity:o,textOpacity:a,windowOpacity:i(this.$(".vjs-window-opacity > select")),edgeStyle:e,fontFamily:t,color:n,backgroundColor:r,windowColor:s,fontPercent:u.default.parseFloat(i(this.$(".vjs-font-percent > select"))),justification:this.hiddenSettings.justification};for(var d in c)(""===c[d]||"none"===c[d]||"fontPercent"===d&&1===c[d])&&delete c[d];return c},t.prototype.setValues=function(e){r(this.$(".vjs-edge-style select"),e.edgeStyle),r(this.$(".vjs-font-family select"),e.fontFamily),r(this.$(".vjs-fg-color > select"),e.color),r(this.$(".vjs-text-opacity > select"),e.textOpacity),r(this.$(".vjs-bg-color > select"),e.backgroundColor),r(this.$(".vjs-bg-opacity > select"),e.backgroundOpacity),r(this.$(".window-color > select"),e.windowColor),r(this.$(".vjs-window-opacity > select"),e.windowOpacity);var t=e.fontPercent;t&&(t=t.toFixed(2)),r(this.$(".vjs-font-percent > select"),t),e.justification&&(this.hiddenSettings.justification=e.justification)},t.prototype.restoreSettings=function(){var e=void 0,t=void 0;try{var n=l.default(u.default.localStorage.getItem("vjs-text-track-settings"));e=n[0],t=n[1],e&&d.default.error(e)}catch(e){d.default.warn(e)}t&&this.setValues(t)},t.prototype.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.getOwnPropertyNames(e).length>0?u.default.localStorage.setItem("vjs-text-track-settings",JSON.stringify(e)):u.default.localStorage.removeItem("vjs-text-track-settings")}catch(e){d.default.warn(e)}}},t.prototype.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&(e.updateDisplay(),e.setAsChangedByUser())},t.prototype.returnFocusBack=function(){var e=this.player_.controlBar.captionsButton.el().getElementsByClassName("vjs-lock-showing"),t=this.player_.controlBar.captionsButton.el().getElementsByClassName("vjs-texttrack-settings");null!=e&&e.length>0&&null!=t&&t.length>0?t[0].focus():this.player_.controlBar.captionsButton.el().focus()},t.prototype.handleKeyPress=function(e){this.hasClass("vjs-hidden")||27!==e.which||(this.hide(),this.returnFocusBack())},t.prototype.handleKeyPress_DoneBtn=function(e){e.shiftKey||9!==e.which||this.el().focus()},t.prototype.handleKeyPress_FgColor=function(e){e.shiftKey&&9===e.which&&this.el().getElementsByClassName("vjs-done-button")[0].focus()},t}(s.default);s.default.registerComponent("TextTrackSettings",f),n.default=f,t.exports=n.default},{"../component":16,"../utils/fn.js":98,"../utils/log.js":104,"global/window":169,"safe-json-parse/tuple":165}],86:[function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var o=i(e("./text-track-cue-list")),s=a(e("../utils/fn.js")),c=e("./track-enums"),d=i(e("../utils/log.js")),l=(i(e("global/document")),e("global/window")),u=i(l),f=i(e("./track.js")),p=e("../utils/url.js"),m=i(e("xhr")),_=i(e("../utils/merge-options")),h=a(e("../utils/browser.js")),b=function(e,t){var n=new u.default.WebVTT.Parser(u.default,u.default.vttjs,u.default.WebVTT.StringDecoder()),a=[];n.oncue=function(e){t.addCue(e)},n.onparsingerror=function(e){a.push(e)},n.onflush=function(){t.trigger({type:"loadeddata",target:t})},n.parse(e),a.length>0&&(console.groupCollapsed,a.forEach(function(e){return d.default.error(e)}),console.groupEnd),n.flush()},g=function(e,t,n,a){var i={uri:e,headers:a};t.protectionInfo?i.headers={Authorization:t.protectionInfo[0].authenticationToken}:p.isCrossOrigin(e)&&(i.withCredentials=n),m.default(i,s.bind(this,function(e,n,a){return e?d.default.error(e,n):(t.loaded_=!0,void("function"!=typeof u.default.WebVTT?t.tech_&&function(){var e=function(){return b(a,t)};t.tech_.on("vttjsloaded",e),t.tech_.on("vttjserror",function(){d.default.error("vttjs failed to load, stopping trying to process "+t.src),t.tech_.off("vttjsloaded",e)})}():b(a,t)))}))},v=function(e){function t(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(r(this,t),!n.tech)throw new Error("A tech was not provided.");var a=_.default(n,{kind:c.TextTrackKind[n.kind]||"subtitles",language:n.language||n.srclang||""}),i=c.TextTrackMode[a.mode]||"disabled",d=a.default;("metadata"===a.kind||"chapters"===a.kind)&&(i="hidden");var l=e.call(this,a);if(l.tech_=a.tech,l.protectionInfo=a.protectionInfo,h.IS_IE8)for(var u in t.prototype)"constructor"!==u&&(l[u]=t.prototype[u]);l.cues_=[],l.activeCues_=[];var f=new o.default(l.cues_),p=new o.default(l.activeCues_),m=!1,b=s.bind(l,function(){this.activeCues,m&&(this.trigger("cuechange"),m=!1)});return"disabled"!==i&&l.tech_.on("timeupdate",b),Object.defineProperty(l,"default",{get:function(){return d},set:function(){}}),Object.defineProperty(l,"mode",{get:function(){return i},set:function(e){c.TextTrackMode[e]&&("showing"===(i=e)&&this.tech_.on("timeupdate",b),this.trigger("modechange"))}}),Object.defineProperty(l,"cues",{get:function(){return this.loaded_?f:null},set:function(){}}),Object.defineProperty(l,"activeCues",{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return p;for(var e=this.tech_.currentAbsoluteTime()||this.tech_.currentTime(),t=[],n=0,a=this.cues.length;a>n;n++){var i=this.cues[n];(i.startTime<=e&&i.endTime>=e||i.startTime===i.endTime&&i.startTime<=e&&i.startTime+.5>=e)&&t.push(i)}if(m=!1,t.length!==this.activeCues_.length)m=!0;else for(n=0;n<t.length;n++)-1===this.activeCues_.indexOf(t[n])&&(m=!0);return this.activeCues_=t,p.setCues_(this.activeCues_),p},set:function(){}}),a.src?l.src=a.src:l.loaded_=!0,l}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.startLoading=function(e){var t=this;this.loadingStarted=!0,e&&"function"==typeof e?e(this.src).then(function(e){g(t.src,t,t.tech_.options_.playerOptions.corsPolicy===u.default.videojs.CorsConfig.UseCredentials,e?e.headers:null)},function(e){d.default.error("Failed to update request: "+e)}):g(this.src,this,this.tech_.options_.playerOptions.corsPolicy===u.default.videojs.CorsConfig.UseCredentials,null)},t.prototype.hasLoadingInitiated=function(){return this.loadingStarted},t.prototype.addCue=function(e){var t=this.tech_.textTracks();if(t)for(var n=0;n<t.length;n++)t[n]!==this&&t[n].removeCue(e);this.cues_.push(e),this.cues.setCues_(this.cues_)},t.prototype.removeCue=function(e){for(var t=!1,n=0,a=this.cues_.length;a>n;n++)this.cues_[n]===e&&(this.cues_.splice(n,1),t=!0);t&&this.cues.setCues_(this.cues_)},t}(f.default);v.prototype.allowedEvents_={cuechange:"cuechange"},n.default=v,t.exports=n.default},{"../utils/browser.js":93,"../utils/fn.js":98,"../utils/log.js":104,"../utils/merge-options":105,"../utils/url.js":110,"./text-track-cue-list":81,"./track-enums":87,"./track.js":89,"global/document":168,"global/window":169,xhr:174}],87:[function(e,t,n){"use strict";n.__esModule=!0,n.default={VideoTrackKind:{alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},AudioTrackKind:{alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},TextTrackKind:{subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},TextTrackMode:{disabled:"disabled",hidden:"hidden",showing:"showing"}},t.exports=n.default},{}],88:[function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var o=i(e("../event-target")),s=(a(e("../utils/fn.js")),e("../utils/browser.js")),c=a(s),d=i(e("global/document")),l=function(e){function t(){var n=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],a=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if(r(this,t),e.call(this),!a&&(a=this,c.IS_IE8))for(var i in a=d.default.createElement("custom"),t.prototype)"constructor"!==i&&(a[i]=t.prototype[i]);a.tracks_=[],Object.defineProperty(a,"length",{get:function(){return this.tracks_.length}});for(var o=0;o<n.length;o++)a.addTrack_(n[o]);return a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.addTrack_=function(e){var t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.tracks_[t]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack"}))},t.prototype.removeTrack_=function(e){for(var t=void 0,n=0,a=this.length;a>n;n++)if(this[n]===e){(t=this[n]).off&&t.off(),this.tracks_.splice(n,1);break}t&&this.trigger({track:t,type:"removetrack"})},t.prototype.getTrackById=function(e){for(var t=null,n=0,a=this.length;a>n;n++){var i=this[n];if(i.id===e){t=i;break}}return t},t}(o.default);for(var u in l.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"},l.prototype.allowedEvents_)l.prototype["on"+u]=null;n.default=l,t.exports=n.default},{"../event-target":54,"../utils/browser.js":93,"../utils/fn.js":98,"global/document":168}],89:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var o=i(e("../utils/browser.js")),s=a(e("global/document")),c=i(e("../utils/guid.js")),d=function(e){function t(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];r(this,t),e.call(this);var a=this;if(o.IS_IE8)for(var i in a=s.default.createElement("custom"),t.prototype)"constructor"!==i&&(a[i]=t.prototype[i]);var d={id:n.id||"vjs_track_"+c.newGUID(),kind:n.kind||"",label:n.label||"",language:n.language||""},l=function(e){Object.defineProperty(a,e,{get:function(){return d[e]},set:function(){}})};for(var u in d)l(u);return a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(a(e("../event-target")).default);n.default=d,t.exports=n.default},{"../event-target":54,"../utils/browser.js":93,"../utils/guid.js":101,"global/document":168}],90:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var r=a(e("./track-list")),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../utils/browser.js")),s=a(e("global/document")),c=function(e,t){for(var n=0;n<e.length;n++)t.id!==e[n].id&&(e[n].selected=!1)},d=function(e){function t(){var n=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];i(this,t);for(var a=void 0,d=n.length-1;d>=0;d--)if(n[d].selected){c(n,n[d]);break}if(o.IS_IE8){for(var l in a=s.default.createElement("custom"),r.default.prototype)"constructor"!==l&&(a[l]=r.default.prototype[l]);for(var l in t.prototype)"constructor"!==l&&(a[l]=t.prototype[l])}return(a=e.call(this,n,a)).changing_=!1,Object.defineProperty(a,"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}}),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.addTrack_=function(t){var n=this;t.selected&&c(this,t),e.prototype.addTrack_.call(this,t),t.addEventListener&&t.addEventListener("selectedchange",function(){n.changing_||(n.changing_=!0,c(n,t),n.changing_=!1,n.trigger("change"))})},t.prototype.addTrack=function(e){this.addTrack_(e)},t.prototype.removeTrack=function(t){e.prototype.removeTrack_.call(this,t)},t}(r.default);n.default=d,t.exports=n.default},{"../utils/browser.js":93,"./track-list":88,"global/document":168}],91:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var r=e("./track-enums"),o=a(e("./track")),s=a(e("../utils/merge-options")),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../utils/browser.js")),d=function(e){function t(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,t);var a=s.default(n,{kind:r.VideoTrackKind[n.kind]||""}),o=e.call(this,a),d=!1;if(c.IS_IE8)for(var l in t.prototype)"constructor"!==l&&(o[l]=t.prototype[l]);return Object.defineProperty(o,"selected",{get:function(){return d},set:function(e){"boolean"==typeof e&&e!==d&&(d=e,this.trigger("selectedchange"))}}),a.selected&&(o.selected=a.selected),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(o.default);n.default=d,t.exports=n.default},{"../utils/browser.js":93,"../utils/merge-options":105,"./track":89,"./track-enums":87}],92:[function(e,t,n){"use strict";n.__esModule=!0,n.binaryToBase64=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=[],a=0;a<e.byteLength;){var i=e[a++];n.push(t.charAt(i>>2)),i=(3&i)<<4,a<e.byteLength?(n.push(t.charAt(i|e[a]>>4)),i=(15&e[a++])<<2,a<e.byteLength?(n.push(t.charAt(i|e[a]>>6)),n.push(t.charAt(63&e[a++]))):(n.push(t.charAt(i)),n.push("="))):(n.push(t.charAt(i)),n.push("=="))}return n.join("")},n.base64ToBinary=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=new Uint8Array(new ArrayBuffer(3*e.length/4+4)),a=0,i=0;a<e.length;){var r=t.indexOf(e.charAt(a)),o=t.indexOf(e.charAt(a+1));if(n[i++]=r<<2|o>>4,"="!==e.charAt(a+2)){var s=t.indexOf(e.charAt(a+2));if(n[i++]=o<<4|s>>2,"="!==e.charAt(a+3)){var c=t.indexOf(e.charAt(a+3));n[i++]=s<<6|c}}a+=4}return new Uint8Array(n.buffer,0,i)}},{}],93:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=a(e("global/document")),r=a(e("global/window")),o=r.default.navigator.userAgent,s=/AppleWebKit\/([\d.]+)/i.exec(o),c=s?parseFloat(s.pop()):null,d=/iPad/i.test(o);n.IS_IPAD=d;var l=/iPhone/i.test(o)&&!d;n.IS_IPHONE=l;var u=/iPod/i.test(o);n.IS_IPOD=u;var f=l||d||u;n.IS_IOS=f;var p=function(){var e=o.match(/OS (\d+)_/i);return e&&e[1]?e[1]:void 0}();n.IOS_VERSION=p;var m=/Android/i.test(o);n.IS_ANDROID=m;var _=function(){var e,t,n=o.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);return n?(e=n[1]&&parseFloat(n[1]),t=n[2]&&parseFloat(n[2]),e&&t?parseFloat(n[1]+"."+n[2]):e||null):null}();n.ANDROID_VERSION=_;var h=m&&/webkit/i.test(o)&&2.3>_;n.IS_OLD_ANDROID=h;var b=m&&5>_&&537>c;n.IS_NATIVE_ANDROID=b;var g=/Edge/i.test(o);n.IS_EDGE=g;var v=!!i.default.documentMode;n.IS_IE=v;var y=/MSIE\s8\.0/.test(o);n.IS_IE8=y;var S=/MSIE\s9\.0/.test(o);n.IS_IE9=S;var D=!!r.default.MSInputMethodContext&&!!i.default.documentMode;n.IS_IE11=D;var I=/IEMobile\/([0-9.]*)/.test(o);n.IS_IEMOBILE=I;var x=function(e){return e&&parseFloat(e[1])}(/MSIE\s(\d+)\.\d/.exec(o));n.IE_VERSION=x;var C=/Firefox/i.test(o);n.IS_FIREFOX=C;var O=function(){var e=o.match(/Firefox\/([0-9.]*)/i);return e&&e[1]?e[1]:void 0}();n.FIREFOX_VERSION=O;var w=!g&&/Chrome/i.test(o);n.IS_CHROME=w;var E=/Safari/i.test(o)&&!w&&!g&&!I;n.IS_SAFARI=E;var A=/Macintosh/i.test(o)&&/AppleWebKit/i.test(o)&&!E&&!C&&!w;n.IS_MACWEBVIEW=A;var L=!!("ontouchstart"in r.default||r.default.DocumentTouch&&i.default instanceof r.default.DocumentTouch);n.TOUCH_ENABLED=L;var k="backgroundSize"in i.default.createElement("video").style;n.BACKGROUND_SIZE_SUPPORTED=k;var M=/android|webos|windows phone|iphone|ipad|ipod|blackBerry|iemobile|opera mini/i.test(o.toLowerCase());n.IS_MOBILE=M;var P=/MSAppHost/.test(o);n.IS_MSAPPHOST=P},{"global/document":168,"global/window":169}],94:[function(e,t,n){"use strict";n.__esModule=!0,n.bufferedPercent=function(e,t){var n,i,r=0;if(!t)return 0;e&&e.length||(e=a.createTimeRange(0,0));for(var o=0;o<e.length;o++)n=e.start(o),(i=e.end(o))>t&&(i=t),r+=i-n;return r/t};var a=e("./time-ranges.js")},{"./time-ranges.js":107}],95:[function(e,t,n){"use strict";n.__esModule=!0,n.default=function(e){var t=e,n=e.player_.controlBar;n&&Object.getOwnPropertyNames(n).forEach(function(e){n[e]!==t&&n[e].el_&&n[e].el_.className&&(-1!==n[e].el_.className.indexOf("vjs-menu-button")||-1!==n[e].el_.className.indexOf("vjs-volume-control"))&&n[e].buttonPressed_&&n[e].unpressButton()})},t.exports=n.default},{}],96:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e){return"string"==typeof e&&/\S/.test(e)}function r(e){if(/\s/.test(e))throw new Error("class has illegal whitespace characters")}function o(e){return function(t,n){return i(t)?(i(n)&&(n=b.default.querySelector(n)),(u(n)?n:b.default)[e](t)):b.default[e](null)}}function s(e,t){return e.classList?e.classList.contains(t):(r(t),function(e){return new RegExp("(^|\\s)"+e+"($|\\s)")}(t).test(e.className))}function c(e,t){return null!=t&&t.length>0&&(e.classList?e.classList.add(t):s(e,t)||(e.className=(e.className+" "+t).trim())),e}function d(e,t){return e.classList?e.classList.remove(t):(r(t),e.className=e.className.split(/\s+/).filter(function(e){return e!==t}).join(" ")),e}function l(e){var t=void 0;if(e.getBoundingClientRect&&e.parentNode&&(t=e.getBoundingClientRect()),!t)return{left:0,top:0};var n,a=b.default.documentElement,i=b.default.body,r=a.clientLeft||i.clientLeft||0,o=g.default.pageXOffset||i.scrollLeft,s=a.clientTop||i.clientTop||0,c=g.default.pageYOffset||i.scrollTop,d=t.top+c-s,l=a.msContentZoomFactor;return n=l&&l>1?t.left-r:t.left+o-r,{left:Math.round(n),top:Math.round(d)}}function u(e){return!!e&&"object"==typeof e&&1===e.nodeType}function f(e){return!!e&&"object"==typeof e&&3===e.nodeType}function p(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function m(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map(function(e){return"function"==typeof e&&(e=e()),u(e)||f(e)?e:"string"==typeof e&&/\S/.test(e)?b.default.createTextNode(e):void 0}).filter(function(e){return e})}function _(e,t){return m(t).forEach(function(t){return e.appendChild(t)}),e}n.__esModule=!0,n.isVisible=function(e){return"hidden"!==g.default.getComputedStyle(e).visibility&&!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},n.getEl=function(e){return 0===e.indexOf("#")&&(e=e.slice(1)),b.default.getElementById(e)},n.createEl=function(){var e=arguments.length<=0||void 0===arguments[0]?"div":arguments[0],t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],a=b.default.createElement(e);return Object.getOwnPropertyNames(t).forEach(function(e){var n=t[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(y.default.warn(S.default(h,e,n)),a.setAttribute(e,n)):a[e]=n}),Object.getOwnPropertyNames(n).forEach(function(e){n[e],a.setAttribute(e,n[e])}),a},n.textContent=function(e,t){void 0===e.textContent?e.innerText=t:e.textContent=t},n.insertElFirst=function(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)},n.getElData=function(e){var t=e[I];return t||(t=e[I]=v.newGUID()),D[t]||(D[t]={}),D[t]},n.hasElData=function(e){var t=e[I];return!!t&&!!Object.getOwnPropertyNames(D[t]).length},n.removeElData=function(e){var t=e[I];if(t){delete D[t];try{delete e[I]}catch(t){e.removeAttribute?e.removeAttribute(I):e[I]=null}}},n.hasElClass=s,n.addElClass=c,n.removeElClass=d,n.toggleElClass=function(e,t,n){var a=s(e,t);return"function"==typeof n&&(n=n(e,t)),"boolean"!=typeof n&&(n=!a),n!==a?(n?c(e,t):d(e,t),e):void 0},n.setElAttributes=function(e,t){Object.getOwnPropertyNames(t).forEach(function(n){var a=t[n];null==a||!1===a?e.removeAttribute(n):e.setAttribute(n,!0===a?"":a)})},n.getElAttributes=function(e){var t,n,a,i;if(t={},e&&e.attributes&&e.attributes.length>0)for(var r=(n=e.attributes).length-1;r>=0;r--)a=n[r].name,i=n[r].value,("boolean"==typeof e[a]||-1!==",autoplay,controls,loop,muted,default,".indexOf(","+a+","))&&(i=null!==i),t[a]=i;return t},n.blockTextSelection=function(){b.default.body.focus(),b.default.onselectstart=function(){return!1}},n.unblockTextSelection=function(){b.default.onselectstart=function(){return!0}},n.findElPosition=l,n.getPointerPosition=function(e,t){var n={},a=l(e),i=e.offsetWidth,r=e.offsetHeight,o=a.top,s=a.left,c=t.pageY,d=t.pageX;return t.changedTouches&&(d=t.changedTouches[0].pageX,c=t.changedTouches[0].pageY),n.y=Math.max(0,Math.min(1,(o-c+r)/r)),n.x=Math.max(0,Math.min(1,(d-s)/i)),n},n.isEl=u,n.isTextNode=f,n.emptyEl=p,n.normalizeContent=m,n.appendContent=_,n.insertContent=function(e,t){return _(p(e),t)};var h=function(e,t){return e.raw=["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."],e}(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]),b=a(e("global/document")),g=a(e("global/window")),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./guid.js")),y=a(e("./log.js")),S=a(e("tsml")),D={},I="vdata"+(new Date).getTime(),x=o("querySelector");n.$=x;var C=o("querySelectorAll");n.$$=C},{"./guid.js":101,"./log.js":104,"global/document":168,"global/window":169,tsml:166}],97:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e,t,n){if(Array.isArray(t))return d(r,e,t,n);var a=l.getElData(e);a.handlers||(a.handlers={}),a.handlers[t]||(a.handlers[t]=[]),n.guid||(n.guid=u.newGUID()),a.handlers[t].push(n),a.dispatcher||(a.disabled=!1,a.dispatcher=function(t,n){if(!a.disabled){t=s(t);var i=a.handlers[t.type];if(i)for(var r=i.slice(0),o=0,c=r.length;c>o&&!t.isImmediatePropagationStopped();o++)r[o].call(e,t,n)}}),1===a.handlers[t].length&&(e.addEventListener?e.addEventListener(t,a.dispatcher):e.attachEvent&&e.attachEvent("on"+t,a.dispatcher))}function o(e,t,n){if(l.hasElData(e)){var a=l.getElData(e);if(a.handlers){if(Array.isArray(t))return d(o,e,t,n);var i=function(t){a.handlers[t]=[],c(e,t)};if(t){var r=a.handlers[t];if(r){if(!n)return void i(t);if(n.guid)for(var s=0;s<r.length;s++)r[s].guid===n.guid&&r.splice(s--,1);c(e,t)}}else for(var u in a.handlers)i(u)}}}function s(e){function t(){return!0}function n(){return!1}if(!e||!e.isPropagationStopped){var a=e||f.default.event;for(var i in e={},a)"layerX"!==i&&"layerY"!==i&&"keyLocation"!==i&&"webkitMovementX"!==i&&"webkitMovementY"!==i&&("returnValue"===i&&a.preventDefault||(e[i]=a[i]));if(e.target||(e.target=e.srcElement||p.default),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){a.preventDefault&&a.preventDefault(),e.returnValue=!1,a.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){a.stopPropagation&&a.stopPropagation(),e.cancelBubble=!0,a.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=n,e.stopImmediatePropagation=function(){a.stopImmediatePropagation&&a.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=n,null!=e.clientX){var r=p.default.documentElement,o=p.default.body;e.pageX=e.clientX+(r&&r.scrollLeft||o&&o.scrollLeft||0)-(r&&r.clientLeft||o&&o.clientLeft||0),e.pageY=e.clientY+(r&&r.scrollTop||o&&o.scrollTop||0)-(r&&r.clientTop||o&&o.clientTop||0)}e.which=e.charCode||e.keyCode,null!=e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e}function c(e,t){var n=l.getElData(e);0===n.handlers[t].length&&(delete n.handlers[t],e.removeEventListener?e.removeEventListener(t,n.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),0===Object.getOwnPropertyNames(n).length&&l.removeElData(e)}function d(e,t,n,a){n.forEach(function(n){e(t,n,a)})}n.__esModule=!0,n.on=r,n.off=o,n.trigger=function e(t,n,a,i){var r=l.hasElData(t)?l.getElData(t):{},o=t.parentNode||t.ownerDocument;if("string"==typeof n&&(n={type:n,target:t,time:i}),n=s(n),r.dispatcher&&r.dispatcher.call(t,n,a),o&&!n.isPropagationStopped()&&!0===n.bubbles)e.call(null,o,n,a);else if(!o&&!n.defaultPrevented){var c=l.getElData(n.target);n.target[n.type]&&(c.disabled=!0,"function"==typeof n.target[n.type]&&n.target[n.type](),c.disabled=!1)}return!n.defaultPrevented},n.one=function e(t,n,a){if(Array.isArray(n))return d(e,t,n,a);var i=function e(){o(t,n,e),a.apply(this,arguments)};i.guid=a.guid=a.guid||u.newGUID(),r(t,n,i)},n.fixEvent=s;var l=i(e("./dom.js")),u=i(e("./guid.js")),f=a(e("global/window")),p=a(e("global/document"))},{"./dom.js":96,"./guid.js":101,"global/document":168,"global/window":169}],98:[function(e,t,n){"use strict";n.__esModule=!0;var a=e("./guid.js");n.bind=function(e,t,n){t.guid||(t.guid=a.newGUID());var i=function(){return t.apply(e,arguments)};return i.guid=n?n+"_"+t.guid:t.guid,i}},{"./guid.js":101}],99:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=a(e("global/window")),r=a(e("../player.js"));n.default=function(){var e=["monospace","sans-serif","serif"],t=i.default.document.getElementsByTagName("body")[0],n=i.default.document.createElement("span");n.style.fontSize="72px",n.style.position="absolute",n.style.top="-9999px",n.style.left="-9999px",n.innerHTML="mmmmmmmmmmlli";var a={},o={};for(var s in e)n.style.fontFamily=e[s],t.appendChild(n),a[e[s]]=n.offsetWidth,o[e[s]]=n.offsetHeight,t.removeChild(n);var c=!1;for(var s in e){n.style.fontFamily="Segoe UI,"+e[s],t.appendChild(n);var d=n.offsetWidth!==a[e[s]]||n.offsetHeight!==o[e[s]];t.removeChild(n),c=c||d}if(!c){var l=i.default.document.createElement("style"),u=i.default.document.getElementsByTagName("head")[0],f="/skins/amp-default/assets/fonts/segoeui/",p=r.default.getScriptRootURL();l.appendChild(i.default.document.createTextNode('@font-face{font-family:"Segoe UI";src: url("'+p+f+'segoeui.eot");src: url("'+p+f+'segoeui.eot?#iefix") format("embedded-opentype"),url("'+p+f+'segoeui.woff") format("woff"), url("'+p+f+'segoeui.ttf") format("truetype"), url("'+p+f+'segoeui.svg#Segoe") format("svg");font-weight: normal;font-style: normal;}')),u.appendChild(l)}},t.exports=n.default},{"../player.js":63,"global/window":169}],100:[function(e,t,n){"use strict";n.__esModule=!0,n.default=function(e){var t=arguments.length<=1||void 0===arguments[1]?e:arguments[1];return function(){e=0>e?0:e;var n=Math.floor(e%60),a=Math.floor(e/60%60),i=Math.floor(e/3600),r=Math.floor(t/60%60),o=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(i=a=n="-"),(i=i>0||o>0?i+":":"")+(a=((i||r>=10)&&10>a?"0"+a:a)+":")+(10>n?"0"+n:n)}()},t.exports=n.default},{}],101:[function(e,t,n){"use strict";n.__esModule=!0,n.newGUID=function(){return a++};var a=1},{}],102:[function(e,t,n){"use strict";n.__esModule=!0;var a=function(e){return e&&e.__esModule?e:{default:e}}(e("global/window"));n.default=function(){var e=void 0,t=void 0;(e=a.default.document.createElement("div")).style.color="rgb(31, 41, 59)",a.default.document.body.appendChild(e),t=(t=a.default.document.defaultView?a.default.document.defaultView.getComputedStyle(e,null).color:e.currentStyle.color).replace(/ /g,""),a.default.document.body.removeChild(e),String.prototype.includes||(String.prototype.includes=function(){return-1!==String.prototype.indexOf.apply(this,arguments)});var n="rgb(31,41,59)"!==t;n&&!a.default.document.body.className.includes("high-contrast-enabled")?a.default.document.body.className=a.default.document.body.className+" high-contrast-enabled ":n||(a.default.document.body.className=a.default.document.body.className.replace("high-contrast-enabled",""))},t.exports=n.default},{"global/window":169}],103:[function(e,t,n){"use strict";n.__esModule=!0,n.getIsoLangs=function(){return{ab:{name:"Abkhaz",nativeName:""},aa:{name:"Afar",nativeName:"Afaraf"},af:{name:"Afrikaans",nativeName:"Afrikaans"},ak:{name:"Akan",nativeName:"Akan"},sq:{name:"Albanian",nativeName:"Shqip"},am:{name:"Amharic",nativeName:""},ar:{name:"Arabic",nativeName:""},an:{name:"Aragonese",nativeName:"Aragons"},hy:{name:"Armenian",nativeName:""},as:{name:"Assamese",nativeName:""},av:{name:"Avaric",nativeName:" ,  "},ae:{name:"Avestan",nativeName:"avesta"},ay:{name:"Aymara",nativeName:"aymar aru"},az:{name:"Azerbaijani",nativeName:"azrbaycan dili"},bm:{name:"Bambara",nativeName:"bamanankan"},ba:{name:"Bashkir",nativeName:" "},eu:{name:"Basque",nativeName:"euskara, euskera"},be:{name:"Belarusian",nativeName:""},bn:{name:"Bangla",nativeName:""},bh:{name:"Bihari",nativeName:""},bi:{name:"Bislama",nativeName:"Bislama"},bs:{name:"Bosnian",nativeName:"bosanski jezik"},br:{name:"Breton",nativeName:"brezhoneg"},bg:{name:"Bulgarian",nativeName:" "},my:{name:"Burmese",nativeName:""},ca:{name:"Catalan; Valencian",nativeName:"Catal"},ch:{name:"Chamorro",nativeName:"Chamoru"},ce:{name:"Chechen",nativeName:" "},ny:{name:"Chichewa; Chewa; Nyanja",nativeName:"chiChea, chinyanja"},zh:{name:"Chinese",nativeName:" (Zhngwn), , "},cv:{name:"Chuvash",nativeName:" "},kw:{name:"Cornish",nativeName:"Kernewek"},co:{name:"Corsican",nativeName:"corsu, lingua corsa"},cr:{name:"Cree",nativeName:""},hr:{name:"Croatian",nativeName:"hrvatski"},cs:{name:"Czech",nativeName:"etina"},da:{name:"Danish",nativeName:"dansk"},dv:{name:"Divehi; Dhivehi; Maldivian;",nativeName:""},nl:{name:"Dutch",nativeName:"Nederlands"},en:{name:"English",nativeName:"English"},eo:{name:"Esperanto",nativeName:"Esperanto"},et:{name:"Estonian",nativeName:"eesti"},ee:{name:"Ewe",nativeName:"Eegbe"},fo:{name:"Faroese",nativeName:"froyskt"},fj:{name:"Fijian",nativeName:"vosa Vakaviti"},fi:{name:"Finnish",nativeName:"suomi"},fr:{name:"French",nativeName:"franais"},ff:{name:"Fula; Fulah; Pulaar; Pular",nativeName:"Fulfulde, Pulaar, Pular"},gl:{name:"Galician",nativeName:"Galego"},ka:{name:"Georgian",nativeName:""},de:{name:"German",nativeName:"Deutsch"},el:{name:"Greek, Modern",nativeName:""},gn:{name:"Guaran",nativeName:"Avae"},gu:{name:"Gujarati",nativeName:""},ht:{name:"Haitian; Haitian Creole",nativeName:"Kreyl ayisyen"},ha:{name:"Hausa",nativeName:"Hausa, "},he:{name:"Hebrew (modern)",nativeName:""},hz:{name:"Herero",nativeName:"Otjiherero"},hi:{name:"Hindi",nativeName:", "},ho:{name:"Hiri Motu",nativeName:"Hiri Motu"},hu:{name:"Hungarian",nativeName:"Magyar"},ia:{name:"Interlingua",nativeName:"Interlingua"},id:{name:"Indonesian",nativeName:"Bahasa Indonesia"},ie:{name:"Interlingue",nativeName:"Interlingue"},ga:{name:"Irish",nativeName:"Gaeilge"},ig:{name:"Igbo",nativeName:"Ass Igbo"},ik:{name:"Inupiaq",nativeName:"Iupiaq"},io:{name:"Ido",nativeName:"Ido"},is:{name:"Icelandic",nativeName:"slenska"},it:{name:"Italian",nativeName:"Italiano"},iu:{name:"Inuktitut",nativeName:""},ja:{name:"Japanese",nativeName:""},jv:{name:"Javanese",nativeName:"basa Jawa"},kl:{name:"Kalaallisut, Greenlandic",nativeName:"kalaallisut, kalaallit oqaasii"},kn:{name:"Kannada",nativeName:""},kr:{name:"Kanuri",nativeName:"Kanuri"},ks:{name:"Kashmiri",nativeName:", "},kk:{name:"Kazakh",nativeName:" "},km:{name:"Khmer",nativeName:""},ki:{name:"Kikuyu, Gikuyu",nativeName:"Gky"},rw:{name:"Kinyarwanda",nativeName:"Ikinyarwanda"},ky:{name:"Kirghiz, Kyrgyz",nativeName:" "},kv:{name:"Komi",nativeName:" "},kg:{name:"Kongo",nativeName:"KiKongo"},ko:{name:"Korean",nativeName:" (),  ()"},ku:{name:"Kurdish",nativeName:""},kj:{name:"Kwanyama, Kuanyama",nativeName:"Kuanyama"},la:{name:"Latin",nativeName:"latine"},lb:{name:"Luxembourgish, Letzeburgesch",nativeName:"Ltzebuergesch"},lg:{name:"Luganda",nativeName:"Luganda"},li:{name:"Limburgish, Limburgan, Limburger",nativeName:"Limburgs"},ln:{name:"Lingala",nativeName:"Lingla"},lo:{name:"Lao",nativeName:""},lt:{name:"Lithuanian",nativeName:"lietuvi kalba"},lu:{name:"Luba-Katanga",nativeName:""},lv:{name:"Latvian",nativeName:"latvieu valoda"},gv:{name:"Manx",nativeName:"Gaelg, Gailck"},mk:{name:"Macedonian",nativeName:" "},mg:{name:"Malagasy",nativeName:"Malagasy fiteny"},ms:{name:"Malay",nativeName:"bahasa Melayu,  "},ml:{name:"Malayalam",nativeName:""},mt:{name:"Maltese",nativeName:"Malti"},mi:{name:"Mori",nativeName:"te reo Mori"},mr:{name:"Marathi (Marh)",nativeName:""},mh:{name:"Marshallese",nativeName:"Kajin Maje"},mn:{name:"Mongolian",nativeName:""},na:{name:"Nauru",nativeName:"Ekakair Naoero"},nv:{name:"Navajo, Navaho",nativeName:"Din bizaad, Dinkeh"},nb:{name:"Norwegian Bokml",nativeName:"Norsk bokml"},nd:{name:"North Ndebele",nativeName:"isiNdebele"},ne:{name:"Nepali",nativeName:""},ng:{name:"Ndonga",nativeName:"Owambo"},nn:{name:"Norwegian Nynorsk",nativeName:"Norsk nynorsk"},no:{name:"Norwegian",nativeName:"Norsk"},ii:{name:"Nuosu",nativeName:" Nuosuhxop"},nr:{name:"South Ndebele",nativeName:"isiNdebele"},oc:{name:"Occitan",nativeName:"Occitan"},oj:{name:"Ojibwe, Ojibwa",nativeName:""},cu:{name:"Old Church Slavonic, Church Slavic, Church Slavonic, Old Bulgarian, Old Slavonic",nativeName:" "},om:{name:"Oromo",nativeName:"Afaan Oromoo"},or:{name:"Odia",nativeName:""},os:{name:"Ossetian, Ossetic",nativeName:" "},pa:{name:"Panjabi, Punjabi",nativeName:", "},pi:{name:"Pli",nativeName:""},fa:{name:"Persian",nativeName:""},pl:{name:"Polish",nativeName:"polski"},ps:{name:"Pashto, Pushto",nativeName:""},pt:{name:"Portuguese",nativeName:"Portugus"},qu:{name:"Quechua",nativeName:"Runa Simi, Kichwa"},rm:{name:"Romansh",nativeName:"rumantsch grischun"},rn:{name:"Kirundi",nativeName:"kiRundi"},ro:{name:"Romanian, Moldovans, Moldovan",nativeName:"romn"},ru:{name:"Russian",nativeName:""},sa:{name:"Sanskrit (Saskta)",nativeName:""},sc:{name:"Sardinian",nativeName:"sardu"},sd:{name:"Sindhi",nativeName:",  "},se:{name:"Northern Sami",nativeName:"Davvismegiella"},sm:{name:"Samoan",nativeName:"gagana faa Samoa"},sg:{name:"Sango",nativeName:"yng t sng"},sr:{name:"Serbian",nativeName:" "},gd:{name:"Scottish Gaelic; Gaelic",nativeName:"Gidhlig"},sn:{name:"Shona",nativeName:"chiShona"},si:{name:"Sinhala, Sinhalese",nativeName:""},sk:{name:"Slovak",nativeName:"slovenina"},sl:{name:"Slovene",nativeName:"slovenina"},so:{name:"Somali",nativeName:"Soomaaliga, af Soomaali"},st:{name:"Southern Sotho",nativeName:"Sesotho"},es:{name:"Spanish",nativeName:"espaol"},su:{name:"Sundanese",nativeName:"Basa Sunda"},sw:{name:"Swahili",nativeName:"Kiswahili"},ss:{name:"Swati",nativeName:"SiSwati"},sv:{name:"Swedish",nativeName:"svenska"},ta:{name:"Tamil",nativeName:""},te:{name:"Telugu",nativeName:""},tg:{name:"Tajik",nativeName:""},th:{name:"Thai",nativeName:""},ti:{name:"Tigrinya",nativeName:""},bo:{name:"Tibetan Standard, Tibetan, Central",nativeName:""},tk:{name:"Turkmen",nativeName:"Trkmen"},tl:{name:"Tagalog",nativeName:"Wikang Tagalog"},tn:{name:"Tswana",nativeName:"Setswana"},to:{name:"Tonga (Tonga Islands)",nativeName:"faka Tonga"},tr:{name:"Turkish",nativeName:"Trke"},ts:{name:"Tsonga",nativeName:"Xitsonga"},tt:{name:"Tatar",nativeName:""},tw:{name:"Twi",nativeName:"Twi"},ty:{name:"Tahitian",nativeName:"Reo Tahiti"},ug:{name:"Uighur, Uyghur",nativeName:""},uk:{name:"Ukrainian",nativeName:""},ur:{name:"Urdu",nativeName:""},uz:{name:"Uzbek",nativeName:"zbek, , "},ve:{name:"Venda",nativeName:"Tshivena"},vi:{name:"Vietnamese",nativeName:"Ting Vit"},vo:{name:"Volapk",nativeName:"Volapk"},wa:{name:"Walloon",nativeName:"Walon"},cy:{name:"Welsh",nativeName:"Cymraeg"},wo:{name:"Wolof",nativeName:"Wollof"},fy:{name:"Western Frisian",nativeName:"Frysk"},xh:{name:"Xhosa",nativeName:"isiXhosa"},yi:{name:"Yiddish",nativeName:""},yo:{name:"Yoruba",nativeName:"Yorb"},za:{name:"Zhuang, Chuang",nativeName:"Sa cue, Saw cuengh"},mis:{name:"uncoded languages",nativeName:"uncoded languages"},mul:{name:"multiple languages",nativeName:"multiple languages"},und:{name:"undetermined",nativeName:"undetermined"},zxx:{name:"no linguistic content/not applicable",nativeName:"no linguistic content/not applicable"}}},n.get2LetterLangCode=function(e){return{aar:"aa",abk:"ab",ave:"ae",afr:"af",aka:"ak",amh:"am",ara:"ar",asm:"as",ava:"av",aym:"ay",aze:"az",bak:"ba",bel:"be",bul:"bg",bih:"bh",bis:"bi",bam:"bm",ben:"bn",bod:"bo",tib:"bo",bre:"br",bos:"bs",cat:"ca",che:"ce",cha:"ch",cos:"co",cre:"cr",ces:"cs",cze:"cs",chu:"cu",chv:"cv",cym:"cy",wel:"cy",dan:"da",deu:"de",ger:"de",div:"dv",dzo:"dz",ewe:"ee",ell:"el",gre:"el",eng:"en",epo:"eo",spa:"es",est:"et",baq:"eu",eus:"eu",fas:"fa",per:"fa",ful:"ff",fin:"fi",fij:"fj",fao:"fo",fre:"fr",fra:"fr",fry:"fy",gle:"ga",gla:"gd",glg:"gl",grn:"gn",glv:"gv",guj:"gu",hau:"ha",heb:"he",hin:"hi",hmo:"ho",hrv:"hr",hat:"ht",hun:"hu",arm:"hy",hye:"hy",her:"hz",ina:"ia",ind:"id",ile:"ie",ibo:"ig",iii:"ii",ipk:"ik",ido:"io",ice:"is",isl:"is",ita:"it",iku:"iu",jpn:"ja",jav:"jv",geo:"ka",kat:"ka",kon:"kg",kik:"ki",kua:"kj",kaz:"kk",kal:"kl",khm:"km",kan:"kn",kor:"ko",kau:"kr",kas:"ks",kur:"ku",kom:"kv",cor:"kw",kir:"ky",lat:"la",ltz:"lb",lug:"lg",lim:"li",lin:"ln",lao:"lo",lit:"lt",lub:"lu",lav:"lv",mlg:"mg",mah:"mh",mao:"mi",mri:"mi",mac:"mk",mkd:"mk",mal:"ml",mon:"mn",mar:"mr",may:"ms",msa:"ms",mlt:"mt",bur:"my",mya:"my",nau:"na",nob:"nb",nde:"nd",nep:"ne",ndo:"ng",dut:"nl",nld:"nl",nno:"nn",nor:"no",nbl:"nr",nav:"nv",nya:"ny",oci:"oc",oji:"oj",orm:"om",ori:"or",oss:"os",pan:"pa",pli:"pi",pol:"pl",pus:"ps",por:"pt",que:"qu",roh:"rm",run:"rn",ron:"ro",rum:"ro",rus:"ru",kin:"rw",san:"sa",srd:"sc",snd:"sd",sme:"se",sag:"sg",sin:"si",slk:"sk",slo:"sk",slv:"sl",smo:"sm",sna:"sn",som:"so",alb:"sq",sqi:"sq",srp:"sr",ssw:"ss",sot:"st",sun:"su",swe:"sv",swa:"sw",tam:"ta",tel:"te",tgk:"tg",tha:"th",tir:"ti",tuk:"tk",tgl:"tl",tsn:"tn",ton:"to",tur:"tr",tso:"ts",tat:"tt",twi:"tw",tah:"ty",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",chi:"zh",zho:"zh",zul:"zu"}[e]}},{}],104:[function(e,t,n){"use strict";function a(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];o.logByType("log",t)}n.__esModule=!0;var i=function(e){return e&&e.__esModule?e:{default:e}}(e("global/window")),r=e("./browser"),o={};n.Log=o,o.logByType=function(e,t){var n=arguments.length<=2||void 0===arguments[2]?!!r.IE_VERSION&&r.IE_VERSION<11:arguments[2],o=i.default.console,s=o&&o[e]||function(){};"log"!==e&&t.unshift(e.toUpperCase()+":"),a.history.push(t),t.unshift("VIDEOJS:"),n&&(t=t.map(function(e){if(e&&"object"==typeof e||Array.isArray(e))try{return JSON.stringify(e)}catch(e){}return String(e)}).join(" ")),s.apply?s[Array.isArray(t)?"apply":"call"](o,t):s(t)},a.history=[],a.error=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return o.logByType("error",t)},a.warn=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return o.logByType("warn",t)},n.default=a},{"./browser":93,"global/window":169}],105:[function(e,t,n){"use strict";function a(e){return!!e&&"object"==typeof e&&"[object Object]"===e.toString()&&e.constructor===Object}function i(){var e=Array.prototype.slice.call(arguments);return e.unshift({}),e.push(o),r.default.apply(null,e),e[0]}n.__esModule=!0,n.default=i;var r=function(e){return e&&e.__esModule?e:{default:e}}(e("lodash-compat/object/merge")),o=function(e,t){return a(t)?a(e)?void 0:i(t):t};t.exports=n.default},{"lodash-compat/object/merge":151}],106:[function(e,t,n){"use strict";n.__esModule=!0;var a=function(e){return e&&e.__esModule?e:{default:e}}(e("global/document"));n.createStyleElement=function(e){var t=a.default.createElement("style");return t.className=e,t},n.setTextContent=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t}},{"global/document":168}],107:[function(e,t,n){"use strict";function a(e,t){return Array.isArray(e)?i(e):void 0===e||void 0===t?i():i([[e,t]])}function i(e){return void 0===e||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:r.bind(null,"start",0,e),end:r.bind(null,"end",1,e)}}function r(e,t,n,a){return void 0===a&&(o.default.warn("DEPRECATED: Function '"+e+"' on 'TimeRanges' called without an index argument."),a=0),function(e,t,n){if(0>t||t>n)throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is greater than or equal to the maximum bound ("+n+").")}(e,a,n.length-1),n[a][t]}n.__esModule=!0,n.createTimeRanges=a;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("./log.js"));n.createTimeRange=a},{"./log.js":104}],108:[function(e,t,n){"use strict";n.__esModule=!0,n.default=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},t.exports=n.default},{}],109:[function(e,t,n){"use strict";n.__esModule=!0,n.default=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},t.exports=n.default},{}],110:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=a(e("global/document")),r=a(e("global/window")),o=function(e){var t=["protocol","hostname","port","pathname","search","hash","host"];e=encodeURI(e);var n=i.default.createElement("a");n.href=e;var a=""===n.host&&"file:"!==n.protocol,r=void 0;a&&((r=i.default.createElement("div")).innerHTML='<a href="'+e+'"></a>',n=r.firstChild,r.setAttribute("style","display:none; position:absolute;"),i.default.body.appendChild(r));for(var o={},s=0;s<t.length;s++)o[t[s]]=n[t[s]];return"http:"===o.protocol&&(o.host=o.host.replace(/:80$/,"")),"https:"===o.protocol&&(o.host=o.host.replace(/:443$/,"")),a&&i.default.body.removeChild(r),o};n.parseUrl=o;var s=/^[=&;\/]{1}/,c=/([=&;\/]{1})/,d=function(e){var t=e.indexOf("?"),n={hierarchical:decodeURI(e),query:[]};if(-1!==t){n.hierarchical=decodeURI(e.slice(0,t));for(var a=e.slice(t+1).split(c),i=0;i<a.length;i++)n.query.push(a[i].match(s)?a[i]:decodeURIComponent(a[i]))}return n};n.decodeURL=d;var l=function(e){var t="";if(e.query&&e.query.length){t="?";for(var n=0;n<e.query.length;n++)t+=e.query[n].match(s)?e.query[n]:encodeURIComponent(e.query[n])}return encodeURI(e.hierarchical)+t};n.encodeURL=l,n.getAbsoluteURL=function(e){var t=d(e);if(t.hierarchical.match(/^(https?:)?\/\//i))e=l(t);else{var n=i.default.createElement("div");n.innerHTML='<a href="'+l(t)+'">x</a>',e=n.firstChild.href}return e},n.getFileExtension=function(e){if("string"==typeof e){var t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i.exec(e);if(t)return t.pop().toLowerCase()}return""},n.isCrossOrigin=function(e){var t=r.default.location,n=o(e);return(":"===n.protocol?t.protocol:n.protocol)+n.host!==t.protocol+t.host}},{"global/document":168,"global/window":169}],111:[function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){var a=void 0;if("string"==typeof e){if(0===e.indexOf("#")&&(e=e.slice(1)),r.getPlayers()[e])return t&&D.default.warn('Player "'+e+'" is already initialised. Options will not be applied.'),n&&r.getPlayers()[e].ready(n),r.getPlayers()[e];a=I.getEl(e)}else a=e;if(!a||!a.nodeName)throw new TypeError("The element or ID supplied is not valid. (videojs)");return a.player||p.default.players[a.playerId]||new p.default(a,t,n)}n.__esModule=!0;var o=i(e("global/window")),s=i(e("global/document")),c=a(e("./setup")),d=a(e("./utils/stylesheet.js")),l=i(e("./component")),u=i(e("./event-target")),f=a(e("./utils/events.js")),p=i(e("./player")),m=i(e("./plugins.js")),_=i(e("../../src/js/utils/merge-options.js")),h=a(e("./utils/fn.js")),b=i(e("./tracks/text-track.js")),g=i(e("./tracks/audio-track.js")),v=i(e("./tracks/video-track.js")),y=e("./utils/time-ranges.js"),S=i(e("./utils/format-time.js")),D=i(e("./utils/log.js")),I=a(e("./utils/dom.js")),x=a(e("./utils/browser.js")),C=a(e("./utils/url.js")),O=i(e("./extend.js")),w=i(e("lodash-compat/object/merge")),E=i(e("xhr")),A=i(e("./tech/tech.js")),L=(i(e("./tech/html5.js")),e("./tech/flash.js"));if(i(L),"undefined"==typeof HTMLVideoElement&&(s.default.createElement("video"),s.default.createElement("audio"),s.default.createElement("track")),!0!==o.default.VIDEOJS_NO_DYNAMIC_STYLE){var k=I.$(".vjs-styles-defaults");if(!k){k=d.createStyleElement("vjs-styles-defaults");var M=I.$("head");M.insertBefore(k,M.firstChild),d.setTextContent(k,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}c.autoSetupTimeout(1,r),r.VERSION="2.1.8.0",r.options=p.default.prototype.options_,r.getPlayers=function(){return p.default.players},r.players=p.default.players,r.getComponent=l.default.getComponent,r.registerComponent=function(e,t){A.default.isTech(t)&&D.default.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),l.default.registerComponent.call(l.default,e,t)},r.getTech=A.default.getTech,r.registerTech=A.default.registerTech,r.browser=x,r.TOUCH_ENABLED=x.TOUCH_ENABLED,r.extend=O.default,r.mergeOptions=_.default,r.bind=h.bind,r.plugin=m.default,r.addLanguage=function(e,t){var n;return e=(""+e).toLowerCase(),p.default.prototype.options_.languagesMutated=!0,w.default(r.options.languages,(n={},n[e]=t,n))[e]},r.log=D.default,r.createTimeRange=r.createTimeRanges=y.createTimeRanges,r.formatTime=S.default,r.parseUrl=C.parseUrl,r.isCrossOrigin=C.isCrossOrigin,r.EventTarget=u.default,r.on=f.on,r.one=f.one,r.off=f.off,r.trigger=f.trigger,r.xhr=E.default,r.TextTrack=b.default,r.AudioTrack=g.default,r.VideoTrack=v.default,r.isEl=I.isEl,r.isTextNode=I.isTextNode,r.createEl=I.createEl,r.hasClass=I.hasElClass,r.addClass=I.addElClass,r.removeClass=I.removeElClass,r.toggleClass=I.toggleElClass,r.setAttributes=I.setElAttributes,r.getAttributes=I.getElAttributes,r.emptyEl=I.emptyEl,r.appendContent=I.appendContent,r.insertContent=I.insertContent,"object"==typeof n&&"object"==typeof t&&(t.exports=r),n.default=r,t.exports=n.default},{"../../src/js/utils/merge-options.js":105,"./component":16,"./event-target":54,"./extend.js":55,"./player":63,"./plugins.js":64,"./setup":68,"./tech/flash.js":71,"./tech/html5.js":72,"./tech/tech.js":75,"./tracks/audio-track.js":78,"./tracks/text-track.js":86,"./tracks/video-track.js":91,"./utils/browser.js":93,"./utils/dom.js":96,"./utils/events.js":97,"./utils/fn.js":98,"./utils/format-time.js":100,"./utils/log.js":104,"./utils/stylesheet.js":106,"./utils/time-ranges.js":107,"./utils/url.js":110,"global/document":168,"global/window":169,"lodash-compat/object/merge":151,xhr:174}],112:[function(){},{}],113:[function(e,t,i){function r(e,t){this._id=e,this._clearFn=t}var o=e("process/browser.js").nextTick,s=Function.prototype.apply,c=Array.prototype.slice,d={},l=0;i.setTimeout=function(){return new r(s.call(setTimeout,window,arguments),clearTimeout)},i.setInterval=function(){return new r(s.call(setInterval,window,arguments),clearInterval)},i.clearTimeout=i.clearInterval=function(e){e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},i.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},i.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},i._unrefActive=i.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},i.setImmediate="function"==typeof n?n:function(e){var t=l++,n=!(arguments.length<2)&&c.call(arguments,1);return d[t]=!0,o(function(){d[t]&&(n?e.apply(null,n):e.call(null),i.clearImmediate(t))}),t},i.clearImmediate="function"==typeof a?a:function(e){delete d[e]}},{"process/browser.js":114}],114:[function(e,t){function n(e){if(s===setTimeout)return setTimeout(e,0);try{return s(e,0)}catch(t){try{return s.call(null,e,0)}catch(t){return s.call(this,e,0)}}}function a(){f&&l&&(f=!1,l.length?u=l.concat(u):p=-1,u.length&&i())}function i(){if(!f){var e=n(a);f=!0;for(var t=u.length;t;){for(l=u,u=[];++p<t;)l&&l[p].run();p=-1,t=u.length}l=null,f=!1,function(e){if(c===clearTimeout)return clearTimeout(e);try{c(e)}catch(t){try{return c.call(null,e)}catch(t){return c.call(this,e)}}}(e)}}function r(e,t){this.fun=e,this.array=t}function o(){}var s,c,d=t.exports={};!function(){try{s=setTimeout}catch(e){s=function(){throw new Error("setTimeout is not defined")}}try{c=clearTimeout}catch(e){c=function(){throw new Error("clearTimeout is not defined")}}}();var l,u=[],f=!1,p=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)t[a-1]=arguments[a];u.push(new r(e,t)),1!==u.length||f||n(i)},r.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=o,d.addListener=o,d.once=o,d.off=o,d.removeListener=o,d.removeAllListeners=o,d.emit=o,d.binding=function(){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],115:[function(e,t){var n=e("../internal/getNative")(Date,"now")||function(){return(new Date).getTime()};t.exports=n},{"../internal/getNative":131}],116:[function(e,t){var n=e("../lang/isObject"),a=e("../date/now"),i=Math.max;t.exports=function(e,t,r){function o(t,n){n&&clearTimeout(n),u=_=h=void 0,t&&(b=a(),f=e.apply(m,l),_||u||(l=m=void 0))}function s(){var e=t-(a()-p);0>=e||e>t?o(h,u):_=setTimeout(s,e)}function c(){o(v,_)}function d(){if(l=arguments,p=a(),m=this,h=v&&(_||!y),!1===g)var n=y&&!_;else{u||y||(b=p);var i=g-(p-b),r=0>=i||i>g;r?(u&&(u=clearTimeout(u)),b=p,f=e.apply(m,l)):u||(u=setTimeout(c,i))}return r&&_?_=clearTimeout(_):_||t===g||(_=setTimeout(s,t)),n&&(r=!0,f=e.apply(m,l)),!r||_||u||(l=m=void 0),f}var l,u,f,p,m,_,h,b=0,g=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");if(t=0>t?0:+t||0,!0===r){var y=!0;v=!1}else n(r)&&(y=!!r.leading,g="maxWait"in r&&i(+r.maxWait||0,t),v="trailing"in r?!!r.trailing:v);return d.cancel=function(){_&&clearTimeout(_),u&&clearTimeout(u),b=0,u=_=h=void 0},d}},{"../date/now":115,"../lang/isObject":144}],117:[function(e,t){var n=Math.max;t.exports=function(e,t){if("function"!=typeof e)throw new TypeError("Expected a function");return t=n(void 0===t?e.length-1:+t||0,0),function(){for(var a=arguments,i=-1,r=n(a.length-t,0),o=Array(r);++i<r;)o[i]=a[t+i];switch(t){case 0:return e.call(this,o);case 1:return e.call(this,a[0],o);case 2:return e.call(this,a[0],a[1],o)}var s=Array(t+1);for(i=-1;++i<t;)s[i]=a[i];return s[t]=o,e.apply(this,s)}}},{}],118:[function(e,t){var n=e("./debounce"),a=e("../lang/isObject");t.exports=function(e,t,i){var r=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return!1===i?r=!1:a(i)&&(r="leading"in i?!!i.leading:r,o="trailing"in i?!!i.trailing:o),n(e,t,{leading:r,maxWait:+t,trailing:o})}},{"../lang/isObject":144,"./debounce":116}],119:[function(e,t){t.exports=function(e,t){var n=-1,a=e.length;for(t||(t=Array(a));++n<a;)t[n]=e[n];return t}},{}],120:[function(e,t){t.exports=function(e,t){for(var n=-1,a=e.length;++n<a&&!1!==t(e[n],n,e););return e}},{}],121:[function(e,t){t.exports=function(e,t,n){n||(n={});for(var a=-1,i=t.length;++a<i;){var r=t[a];n[r]=e[r]}return n}},{}],122:[function(e,t){var n=e("./createBaseFor")();t.exports=n},{"./createBaseFor":129}],123:[function(e,t){var n=e("./baseFor"),a=e("../object/keysIn");t.exports=function(e,t){return n(e,t,a)}},{"../object/keysIn":150,"./baseFor":122}],124:[function(e,t){var n=e("./arrayEach"),a=e("./baseMergeDeep"),i=e("../lang/isArray"),r=e("./isArrayLike"),o=e("../lang/isObject"),s=e("./isObjectLike"),c=e("../lang/isTypedArray"),d=e("../object/keys");t.exports=function e(t,l,u,f,p){if(!o(t))return t;var m=r(l)&&(i(l)||c(l)),_=m?void 0:d(l);return n(_||l,function(n,i){if(_&&(n=l[i=n]),s(n))f||(f=[]),p||(p=[]),a(t,l,i,e,u,f,p);else{var r=t[i],o=u?u(r,n,i,t,l):void 0,c=void 0===o;c&&(o=n),void 0===o&&(!m||i in t)||!c&&(o==o?o===r:r!=r)||(t[i]=o)}}),t}},{"../lang/isArray":141,"../lang/isObject":144,"../lang/isTypedArray":147,"../object/keys":149,"./arrayEach":120,"./baseMergeDeep":125,"./isArrayLike":132,"./isObjectLike":137}],125:[function(e,t){var n=e("./arrayCopy"),a=e("../lang/isArguments"),i=e("../lang/isArray"),r=e("./isArrayLike"),o=e("../lang/isPlainObject"),s=e("../lang/isTypedArray"),c=e("../lang/toPlainObject");t.exports=function(e,t,d,l,u,f,p){for(var m=f.length,_=t[d];m--;)if(f[m]==_)return void(e[d]=p[m]);var h=e[d],b=u?u(h,_,d,e,t):void 0,g=void 0===b;g&&(b=_,r(_)&&(i(_)||s(_))?b=i(h)?h:r(h)?n(h):[]:o(_)||a(_)?b=a(h)?c(h):o(h)?h:{}:g=!1),f.push(_),p.push(b),g?e[d]=l(b,_,u,f,p):(b==b?b!==h:h==h)&&(e[d]=b)}},{"../lang/isArguments":140,"../lang/isArray":141,"../lang/isPlainObject":145,"../lang/isTypedArray":147,"../lang/toPlainObject":148,"./arrayCopy":119,"./isArrayLike":132}],126:[function(e,t){var n=e("./toObject");t.exports=function(e){return function(t){return null==t?void 0:n(t)[e]}}},{"./toObject":139}],127:[function(e,t){var n=e("../utility/identity");t.exports=function(e,t,a){if("function"!=typeof e)return n;if(void 0===t)return e;switch(a){case 1:return function(n){return e.call(t,n)};case 3:return function(n,a,i){return e.call(t,n,a,i)};case 4:return function(n,a,i,r){return e.call(t,n,a,i,r)};case 5:return function(n,a,i,r,o){return e.call(t,n,a,i,r,o)}}return function(){return e.apply(t,arguments)}}},{"../utility/identity":153}],128:[function(e,t){var n=e("./bindCallback"),a=e("./isIterateeCall"),i=e("../function/restParam");t.exports=function(e){return i(function(t,i){var r=-1,o=null==t?0:i.length,s=o>2?i[o-2]:void 0,c=o>2?i[2]:void 0,d=o>1?i[o-1]:void 0;for("function"==typeof s?(s=n(s,d,5),o-=2):o-=(s="function"==typeof d?d:void 0)?1:0,c&&a(i[0],i[1],c)&&(s=3>o?void 0:s,o=1);++r<o;){var l=i[r];l&&e(t,l,s)}return t})}},{"../function/restParam":117,"./bindCallback":127,"./isIterateeCall":135}],129:[function(e,t){var n=e("./toObject");t.exports=function(e){return function(t,a,i){for(var r=n(t),o=i(t),s=o.length,c=e?s:-1;e?c--:++c<s;){var d=o[c];if(!1===a(r[d],d,r))break}return t}}},{"./toObject":139}],130:[function(e,t){var n=e("./baseProperty")("length");t.exports=n},{"./baseProperty":126}],131:[function(e,t){var n=e("../lang/isNative");t.exports=function(e,t){var a=null==e?void 0:e[t];return n(a)?a:void 0}},{"../lang/isNative":143}],132:[function(e,t){var n=e("./getLength"),a=e("./isLength");t.exports=function(e){return null!=e&&a(n(e))}},{"./getLength":130,"./isLength":136}],133:[function(e,t){var n=function(){try{Object({toString:0}+"")}catch(e){return function(){return!1}}return function(e){return"function"!=typeof e.toString&&"string"==typeof(e+"")}}();t.exports=n},{}],134:[function(e,t){var n=/^\d+$/;t.exports=function(e,t){return t=null==t?9007199254740991:t,(e="number"==typeof e||n.test(e)?+e:-1)>-1&&e%1==0&&t>e}},{}],135:[function(e,t){var n=e("./isArrayLike"),a=e("./isIndex"),i=e("../lang/isObject");t.exports=function(e,t,r){if(!i(r))return!1;var o=typeof t;if("number"==o?n(r)&&a(t,r.length):"string"==o&&t in r){var s=r[t];return e==e?e===s:s!=s}return!1}},{"../lang/isObject":144,"./isArrayLike":132,"./isIndex":134}],136:[function(e,t){t.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&9007199254740991>=e}},{}],137:[function(e,t){t.exports=function(e){return!!e&&"object"==typeof e}},{}],138:[function(e,t){var n=e("../lang/isArguments"),a=e("../lang/isArray"),i=e("./isIndex"),r=e("./isLength"),o=e("../lang/isString"),s=e("../object/keysIn"),c=Object.prototype.hasOwnProperty;t.exports=function(e){for(var t=s(e),d=t.length,l=d&&e.length,u=!!l&&r(l)&&(a(e)||n(e)||o(e)),f=-1,p=[];++f<d;){var m=t[f];(u&&i(m,l)||c.call(e,m))&&p.push(m)}return p}},{"../lang/isArguments":140,"../lang/isArray":141,"../lang/isString":146,"../object/keysIn":150,"./isIndex":134,"./isLength":136}],139:[function(e,t){var n=e("../lang/isObject"),a=e("../lang/isString"),i=e("../support");t.exports=function(e){if(i.unindexedChars&&a(e)){for(var t=-1,r=e.length,o=Object(e);++t<r;)o[t]=e.charAt(t);return o}return n(e)?e:Object(e)}},{"../lang/isObject":144,"../lang/isString":146,"../support":152}],140:[function(e,t){var n=e("../internal/isArrayLike"),a=e("../internal/isObjectLike"),i=Object.prototype,r=i.hasOwnProperty,o=i.propertyIsEnumerable;t.exports=function(e){return a(e)&&n(e)&&r.call(e,"callee")&&!o.call(e,"callee")}},{"../internal/isArrayLike":132,"../internal/isObjectLike":137}],141:[function(e,t){var n=e("../internal/getNative"),a=e("../internal/isLength"),i=e("../internal/isObjectLike"),r=Object.prototype.toString,o=n(Array,"isArray")||function(e){return i(e)&&a(e.length)&&"[object Array]"==r.call(e)};t.exports=o},{"../internal/getNative":131,"../internal/isLength":136,"../internal/isObjectLike":137}],142:[function(e,t){var n=e("./isObject"),a=Object.prototype.toString;t.exports=function(e){return n(e)&&"[object Function]"==a.call(e)}},{"./isObject":144}],143:[function(e,t){var n=e("./isFunction"),a=e("../internal/isHostObject"),i=e("../internal/isObjectLike"),r=/^\[object .+?Constructor\]$/,o=Object.prototype,s=Function.prototype.toString,c=o.hasOwnProperty,d=RegExp("^"+s.call(c).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(e){return null!=e&&(n(e)?d.test(s.call(e)):i(e)&&(a(e)?d:r).test(e))}},{"../internal/isHostObject":133,"../internal/isObjectLike":137,"./isFunction":142}],144:[function(e,t){t.exports=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}},{}],145:[function(e,t){var n=e("../internal/baseForIn"),a=e("./isArguments"),i=e("../internal/isHostObject"),r=e("../internal/isObjectLike"),o=e("../support"),s=Object.prototype,c=s.hasOwnProperty,d=s.toString;t.exports=function(e){var t,s;return!(!r(e)||"[object Object]"!=d.call(e)||i(e)||a(e)||!(c.call(e,"constructor")||(t=e.constructor,"function"!=typeof t||t instanceof t)))&&(o.ownLast?(n(e,function(e,t,n){return s=c.call(n,t),!1}),!1!==s):(n(e,function(e,t){s=t}),void 0===s||c.call(e,s)))}},{"../internal/baseForIn":123,"../internal/isHostObject":133,"../internal/isObjectLike":137,"../support":152,"./isArguments":140}],146:[function(e,t){var n=e("../internal/isObjectLike"),a=Object.prototype.toString;t.exports=function(e){return"string"==typeof e||n(e)&&"[object String]"==a.call(e)}},{"../internal/isObjectLike":137}],147:[function(e,t){var n=e("../internal/isLength"),a=e("../internal/isObjectLike"),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1;var r=Object.prototype.toString;t.exports=function(e){return a(e)&&n(e.length)&&!!i[r.call(e)]}},{"../internal/isLength":136,"../internal/isObjectLike":137}],148:[function(e,t){var n=e("../internal/baseCopy"),a=e("../object/keysIn");t.exports=function(e){return n(e,a(e))}},{"../internal/baseCopy":121,"../object/keysIn":150}],149:[function(e,t){var n=e("../internal/getNative"),a=e("../internal/isArrayLike"),i=e("../lang/isObject"),r=e("../internal/shimKeys"),o=e("../support"),s=n(Object,"keys"),c=s?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||("function"==typeof e?o.enumPrototypes:a(e))?r(e):i(e)?s(e):[]}:r;t.exports=c},{"../internal/getNative":131,"../internal/isArrayLike":132,"../internal/shimKeys":138,"../lang/isObject":144,"../support":152}],150:[function(e,t){var n=e("../internal/arrayEach"),a=e("../lang/isArguments"),i=e("../lang/isArray"),r=e("../lang/isFunction"),o=e("../internal/isIndex"),s=e("../internal/isLength"),c=e("../lang/isObject"),d=e("../lang/isString"),l=e("../support"),u="[object Error]",f="[object Object]",p="[object String]",m=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],_=Error.prototype,h=Object.prototype,b=String.prototype,g=h.hasOwnProperty,v=h.toString,y={};y["[object Array]"]=y["[object Date]"]=y["[object Number]"]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},y["[object Boolean]"]=y[p]={constructor:!0,toString:!0,valueOf:!0},y[u]=y["[object Function]"]=y["[object RegExp]"]={constructor:!0,toString:!0},y[f]={constructor:!0},n(m,function(e){for(var t in y)if(g.call(y,t)){var n=y[t];n[e]=g.call(n,e)}}),t.exports=function(e){if(null==e)return[];c(e)||(e=Object(e));var t=e.length;t=t&&s(t)&&(i(e)||a(e)||d(e))&&t||0;for(var n=e.constructor,S=-1,D=r(n)&&n.prototype||h,I=D===e,x=Array(t),C=t>0,O=l.enumErrorProps&&(e===_||e instanceof Error),w=l.enumPrototypes&&r(e);++S<t;)x[S]=S+"";for(var E in e)w&&"prototype"==E||O&&("message"==E||"name"==E)||C&&o(E,t)||"constructor"==E&&(I||!g.call(e,E))||x.push(E);if(l.nonEnumShadows&&e!==h){var A=e===b?p:e===_?u:v.call(e),L=y[A]||y[f];for(A==f&&(D=h),t=m.length;t--;){var k=L[E=m[t]];I&&k||(k?!g.call(e,E):e[E]===D[E])||x.push(E)}}return x}},{"../internal/arrayEach":120,"../internal/isIndex":134,"../internal/isLength":136,"../lang/isArguments":140,"../lang/isArray":141,"../lang/isFunction":142,"../lang/isObject":144,"../lang/isString":146,"../support":152}],151:[function(e,t){var n=e("../internal/baseMerge"),a=e("../internal/createAssigner")(n);t.exports=a},{"../internal/baseMerge":124,"../internal/createAssigner":128}],152:[function(e,t){var n=Array.prototype,a=Error.prototype,i=Object.prototype.propertyIsEnumerable,r=n.splice,o={};!function(e){var t=function(){this.x=1},n={0:1,length:1},s=[];for(var c in t.prototype={valueOf:1,y:1},new t)s.push(c);o.enumErrorProps=i.call(a,"message")||i.call(a,"name"),o.enumPrototypes=i.call(t,"prototype"),o.nonEnumShadows=!/valueOf/.test(s),o.ownLast="x"!=s[0],o.spliceObjects=(r.call(n,0,1),!n[0]),o.unindexedChars="x"[0]+Object("x")[0]!="xx"}(),t.exports=o},{}],153:[function(e,t){t.exports=function(e){return e}},{}],154:[function(e,t){"use strict";var n=e("object-keys"),a=e("foreach"),i="function"==typeof Symbol&&"symbol"==typeof Symbol(),r=Object.prototype.toString,o=Object.defineProperty&&function(){var e={};try{for(var t in Object.defineProperty(e,"x",{enumerable:!1,value:e}),e)return!1;return e.x===e}catch(e){return!1}}(),s=function(e,t,n,a){(!(t in e)||function(e){return"function"==typeof e&&"[object Function]"===r.call(e)}(a)&&a())&&(o?Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n,writable:!0}):e[t]=n)},c=function(e,t){var r=arguments.length>2?arguments[2]:{},o=n(t);i&&(o=o.concat(Object.getOwnPropertySymbols(t))),a(o,function(n){s(e,n,t[n],r[n])})};c.supportsDescriptors=!!o,t.exports=c},{foreach:155,"object-keys":158}],155:[function(e,t){var n=Object.prototype.hasOwnProperty,a=Object.prototype.toString;t.exports=function(e,t,i){if("[object Function]"!==a.call(t))throw new TypeError("iterator must be a function");var r=e.length;if(r===+r)for(var o=0;r>o;o++)t.call(i,e[o],o,e);else for(var s in e)n.call(e,s)&&t.call(i,e[s],s,e)}},{}],156:[function(e,t){var n="Function.prototype.bind called on incompatible ",a=Array.prototype.slice,i=Object.prototype.toString,r="[object Function]";t.exports=function(e){var t=this;if("function"!=typeof t||i.call(t)!==r)throw new TypeError(n+t);for(var o,s=a.call(arguments,1),c=function(){if(this instanceof o){var n=t.apply(this,s.concat(a.call(arguments)));return Object(n)===n?n:this}return t.apply(e,s.concat(a.call(arguments)))},d=Math.max(0,t.length-s.length),l=[],u=0;d>u;u++)l.push("$"+u);if(o=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(c),t.prototype){var f=function(){};f.prototype=t.prototype,o.prototype=new f,f.prototype=null}return o}},{}],157:[function(e,t){var n=e("./implementation");t.exports=Function.prototype.bind||n},{"./implementation":156}],158:[function(e,t){"use strict";var n=Object.prototype.hasOwnProperty,a=Object.prototype.toString,i=Array.prototype.slice,r=e("./isArguments"),o=Object.prototype.propertyIsEnumerable,s=!o.call({toString:null},"toString"),c=o.call(function(){},"prototype"),d=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],l=function(e){var t=e.constructor;return t&&t.prototype===e},u={$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},f=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!u["$"+e]&&n.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{l(window[e])}catch(e){return!0}}catch(e){return!0}return!1}(),p=function(e){if("undefined"==typeof window||!f)return l(e);try{return l(e)}catch(e){return!1}},m=function(e){var t=null!==e&&"object"==typeof e,i="[object Function]"===a.call(e),o=r(e),l=t&&"[object String]"===a.call(e),u=[];if(!t&&!i&&!o)throw new TypeError("Object.keys called on a non-object");var f=c&&i;if(l&&e.length>0&&!n.call(e,0))for(var m=0;m<e.length;++m)u.push(String(m));if(o&&e.length>0)for(var _=0;_<e.length;++_)u.push(String(_));else for(var h in e)f&&"prototype"===h||!n.call(e,h)||u.push(String(h));if(s)for(var b=p(e),g=0;g<d.length;++g)b&&"constructor"===d[g]||!n.call(e,d[g])||u.push(d[g]);return u};m.shim=function(){if(Object.keys){var e=function(){return 2===(Object.keys(arguments)||"").length}(1,2);if(!e){var t=Object.keys;Object.keys=function(e){return t(r(e)?i.call(e):e)}}}else Object.keys=m;return Object.keys||m},t.exports=m},{"./isArguments":159}],159:[function(e,t){"use strict";var n=Object.prototype.toString;t.exports=function(e){var t=n.call(e),a="[object Arguments]"===t;return a||(a="[object Array]"!==t&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===n.call(e.callee)),a}},{}],160:[function(e,t){"use strict";var n=e("object-keys");t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test");if("string"==typeof t)return!1;for(t in e[t]=42,e)return!1;if(0!==n(e).length)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var a=Object.getOwnPropertySymbols(e);if(1!==a.length||a[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},{"object-keys":158}],161:[function(e,t){"use strict";var n=e("object-keys"),a=e("function-bind"),i=function(e){return null!=e},r=e("./hasSymbols")(),o=Object,s=a.call(Function.call,Array.prototype.push),c=a.call(Function.call,Object.prototype.propertyIsEnumerable);t.exports=function(e){if(!i(e))throw new TypeError("target must be an object");var t,a,d,l,u,f,p,m=o(e);for(t=1;t<arguments.length;++t){if(a=o(arguments[t]),l=n(a),r&&Object.getOwnPropertySymbols)for(u=Object.getOwnPropertySymbols(a),d=0;d<u.length;++d)p=u[d],c(a,p)&&s(l,p);for(d=0;d<l.length;++d)f=a[p=l[d]],c(a,p)&&(m[p]=f)}return m}},{"./hasSymbols":160,"function-bind":157,"object-keys":158}],162:[function(e,t){"use strict";var n=e("define-properties"),a=e("./implementation");n(a,{implementation:a,getPolyfill:e("./polyfill"),shim:e("./shim")}),t.exports=a},{"./implementation":161,"./polyfill":163,"./shim":164,"define-properties":154}],163:[function(e,t){"use strict";var n=e("./implementation");t.exports=function(){return Object.assign?function(){if(!Object.assign)return!1;for(var e="abcdefghijklmnopqrst",t=e.split(""),n={},a=0;a<t.length;++a)n[t[a]]=t[a];var i=Object.assign({},n),r="";for(var o in i)r+=o;return e!==r}()||function(){if(!Object.assign||!Object.preventExtensions)return!1;var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return"y"===e[1]}}()?n:Object.assign:n}},{"./implementation":161}],164:[function(e,t){"use strict";var n=e("define-properties"),a=e("./polyfill");t.exports=function(){var e=a();return n(Object,{assign:e},{assign:function(){return Object.assign!==e}}),e}},{"./polyfill":163,"define-properties":154}],165:[function(e,t){t.exports=function(e,t){var n,a=null;try{n=JSON.parse(e,t)}catch(e){a=e}return[a,n]}},{}],166:[function(e,t){function n(e){return e.replace(/\n\r?\s*/g,"")}t.exports=function(e){for(var t="",a=0;a<arguments.length;a++)t+=n(e[a])+(arguments[a+1]||"");return t}},{}],167:[function(e,t){function n(e,t,n){for(var a=0,i=e.length;i>a;a++)s.call(e,a)&&t.call(n,e[a],a,e)}function a(e,t,n){for(var a=0,i=e.length;i>a;a++)t.call(n,e.charAt(a),a,e)}function i(e,t,n){for(var a in e)s.call(e,a)&&t.call(n,e[a],a,e)}var r=e("is-function");t.exports=function(e,t,s){if(!r(t))throw new TypeError("iterator must be a function");arguments.length<3&&(s=this),"[object Array]"===o.call(e)?n(e,t,s):"string"==typeof e?a(e,t,s):i(e,t,s)};var o=Object.prototype.toString,s=Object.prototype.hasOwnProperty},{"is-function":170}],168:[function(e,n){(function(t){var a=void 0!==t?t:"undefined"!=typeof window?window:{},i=e("min-document");if("undefined"!=typeof document)n.exports=document;else{var r=a["__GLOBAL_DOCUMENT_CACHE@4"];r||(r=a["__GLOBAL_DOCUMENT_CACHE@4"]=i),n.exports=r}}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"min-document":112}],169:[function(e,n){(function(e){n.exports="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{}}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],170:[function(e,t){t.exports=function(e){var t=n.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)};var n=Object.prototype.toString},{}],171:[function(e,t){function n(e){var t=!1;return function(){return t?void 0:(t=!0,e.apply(this,arguments))}}t.exports=n,n.proto=n(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return n(this)},configurable:!0})})},{}],172:[function(e,t){var n=e("trim"),a=e("for-each");t.exports=function(e){if(!e)return{};var t={};return a(n(e).split("\n"),function(e){var a=e.indexOf(":"),i=n(e.slice(0,a)).toLowerCase(),r=n(e.slice(a+1));void 0===t[i]?t[i]=r:function(e){return"[object Array]"===Object.prototype.toString.call(e)}(t[i])?t[i].push(r):t[i]=[t[i],r]}),t}},{"for-each":167,trim:173}],173:[function(e,t,n){n=t.exports=function(e){return e.replace(/^\s*|\s*$/g,"")},n.left=function(e){return e.replace(/^\s*/,"")},n.right=function(e){return e.replace(/\s*$/,"")}},{}],174:[function(e,t){"use strict";function n(e,t,n){var a=e;return s(t)?(n=t,"string"==typeof e&&(a={uri:e})):a=d(t,{uri:e}),a.callback=n,a}function a(e,t,a){return i(t=n(e,t,a))}function i(e){function t(){var e=void 0;if(d.response?e=d.response:"text"!==d.responseType&&d.responseType||(e=d.responseText||d.responseXML),g)try{e=JSON.parse(e)}catch(e){}return e}function n(e){clearTimeout(f),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,r(e,s)}function i(){if(!u){var n;clearTimeout(f),n=e.useXDR&&void 0===d.status?200:1223===d.status?204:d.status;var a=s,i=null;0!==n?(a={body:t(),statusCode:n,method:m,headers:{},url:p,rawRequest:d},d.getAllResponseHeaders&&(a.headers=c(d.getAllResponseHeaders()))):i=new Error("Internal XMLHttpRequest Error"),r(i,a,a.body)}}var r=e.callback;if(void 0===r)throw new Error("callback argument missing");r=o(r);var s={body:void 0,headers:{},statusCode:0,method:m,url:p,rawRequest:d},d=e.xhr||null;d||(d=e.cors||e.useXDR?new a.XDomainRequest:new a.XMLHttpRequest);var l,u,f,p=d.url=e.uri||e.url,m=d.method=e.method||"GET",_=e.body||e.data||null,h=d.headers=e.headers||{},b=!!e.sync,g=!1;if("json"in e&&(g=!0,h.accept||h.Accept||(h.Accept="application/json"),"GET"!==m&&"HEAD"!==m&&(h["content-type"]||h["Content-Type"]||(h["Content-Type"]="application/json"),_=JSON.stringify(e.json))),d.onreadystatechange=function(){4===d.readyState&&i()},d.onload=i,d.onerror=n,d.onprogress=function(){},d.ontimeout=n,d.open(m,p,!b,e.username,e.password),b||(d.withCredentials=!!e.withCredentials),!b&&e.timeout>0&&(f=setTimeout(function(){u=!0,d.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",n(e)},e.timeout)),d.setRequestHeader)for(l in h)h.hasOwnProperty(l)&&d.setRequestHeader(l,h[l]);else if(e.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(d.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(d),d.send(_),d}var r=e("global/window"),o=e("once"),s=e("is-function"),c=e("parse-headers"),d=e("xtend");t.exports=a,a.XMLHttpRequest=r.XMLHttpRequest||function(){},a.XDomainRequest="withCredentials"in new a.XMLHttpRequest?a.XMLHttpRequest:r.XDomainRequest,function(e,t){for(var n=0;n<e.length;n++)t(e[n])}(["get","put","post","patch","head","delete"],function(e){a["delete"===e?"del":e]=function(t,a,r){return(a=n(t,a,r)).method=e.toUpperCase(),i(a)}})},{"global/window":169,"is-function":170,once:171,"parse-headers":172,xtend:175}],175:[function(e,t){t.exports=function(){for(var e={},t=0;t<arguments.length;t++){var a=arguments[t];for(var i in a)n.call(a,i)&&(e[i]=a[i])}return e};var n=Object.prototype.hasOwnProperty},{}]},{},[1]),amp.utils=amp.utils||{},amp.utils.getBitrateByUnit=function(e){var t=e+"bps";return e>=1e6?t=(e=amp.utils.roundToOneDecimal(e/1e6))+"Mbps":e>=1e3&&(t=(e=amp.utils.roundToOneDecimal(e/1e3))+"Kbps"),t},amp.utils.getSizeByUnit=function(e){var t=e;return e>=1048576?t=(e=amp.utils.roundToOneDecimal(e/1048576))+"MB":e>=1024&&(t=(e=amp.utils.roundToOneDecimal(e/1024))+"KB"),t},amp.utils.roundToOneDecimal=function(e){return+(Math.round(e+"e+1")+"e-1")},function(e){"use strict";e.plugin("responsive",function(t){function n(e){return"number"==typeof e?e:"string"==typeof e&&!isNaN(parseInt(e,10))&&parseInt(e,10)}function a(e){e.playerContainer().style.fontSize=e.playerContainer().offsetWidth+"px"}function i(){var e=this.getCurrentTextTrack();e&&this.textTrackDisplay.updateForTrack(e)}function r(){for(var e=this.playerContainer().offsetWidth,t=[],n=0;n<u.length;n++){var i=u[n],r=l[i].from,o=l[i].to;void 0!==r&&void 0!==o?e>=r&&o>=e&&t.push(i):(void 0!==r&&e>=r||void 0!==o&&o>=e)&&t.push(i)}t.length>0&&(t=t.join(" "),s!==t&&(this.removeElClass(this.playerContainer(),s),this.addElClass(this.playerContainer(),t),s=t)),a(this)}function o(){for(var e=c.el().offsetHeight-c.controlBar.el().offsetHeight-20,t=0;t<d.length;t++)d[t].style.maxHeight=e+"px"}var s,c=this,d=[],l=function(e){for(var t={},a=Object.keys(e),i=0;i<a.length;i++){var r=a[i],o=e[r],s=n(o);if(!1!==s)t[r]={from:s,to:s};else if(o.from||o.to){var c=n(o.from),d=n(o.to);(!1!==c||!1!==d)&&(t[r]={}),!1!==c&&(t[r].from=c),!1!==d&&(t[r].to=d)}}return t}(e.mergeOptions(t.sizeClasses,{"amp-size-es":{from:189,to:229},"amp-size-s":{from:230,to:399},"amp-size-m":{from:400,to:799},"amp-size-l":{from:800}})),u=Object.keys(l);a(c),c.addThrottledWindowResizeListener(e.bind(c,r),200),c.one(e.eventName.loadstart,function(){e.TOUCH_ENABLED&&c.addClass("amp-touch-enabled")}),c.ready(e.bind(c,function(){this.addThrottledWindowResizeListener(e.bind(this,i),200),r.call(this);var t=this;this.addThrottledWindowResizeListener(o,200),c.on("fullscreenchange",function(){r.call(t)}),this.on(e.internalEventName.menuadded,function(){d=this.controlBar.el().querySelectorAll(".vjs-menu-content"),o()})}))})}(window.amp),function(e){"use strict";var t=e.getComponent("CaptionSettingsMenuItem"),n=t.prototype.onClick,a=e.getComponent("TextTrackSettings"),i=a.prototype.saveSettings;e.plugin("closedCaption",function(r){var o=this,s=r&&r.menuTitle?r.menuTitle:"Closed Captioning";o.addEventListener(e.eventName.loadedmetadata,function(){o.controlBar.captionsButton.el().className+=" amp-closedcaption-control",o.controlBar.captionsButton.buttonText=s;var t=new(e.getComponent("Component"))(o,{el:e.createEl("li",{className:"amp-menu-header",innerHTML:this.htmlEncode(this.localize(s)),tabindex:-1})});o.controlBar.captionsButton.menu.prependItem(t)}),t.prototype.onClick=function(){n.apply(this),this.player().addClass("amp-showing-texttrack-settings")},a.prototype.saveSettings=function(){i.apply(this),this.player().removeClass("amp-showing-texttrack-settings")},o.on("dispose",function(){t.prototype.onClick=n,a.prototype.saveSettings=i})})}(window.amp),function(e){"use strict";e.plugin("contentTitle",function(t){function n(e,t,n){var a="amp-logo";if(i&&null!==n.currentClip()&&n.currentClip().isAd){var r="",o=n.currentClip().clickThrough||"",s=parseInt(n.duration()-n.currentTime());s>=0&&n.currentTime()>0&&(r=u.Misc.formatString(n.localize("AD_TIMING_INFO"),s),o.length>0&&(r=n.htmlEncode(r)+' | <a onclick=" return true" class="aboutLink">'+n.htmlEncode(o)+"</a>"),t=r),a="amp-logo-ad"}else t=n.htmlEncode(t);var c=null;t&&(c='<div class="description">'+t+"</div>");var d=(e?['<div class="logo-title-row">','<div class="title"><h4>'+n.htmlEncode(e)+"</h4></div>",'<div class="'+a+'"></div>',"</div>"]:['<div class="logo-title-row">','<div class="title"></div>','<div class="'+a+'"></div>',"</div>"]).join("");return null!=c&&(d+=c),d}var a=this,i=a.options_.isAdPlayer||!1,r=e.bind(a,function(){var t=n(this.title_||this.options_.title,this.options_.description,this);if(void 0!==a.contentTitleElement){a.contentTitleElement.innerHTML=t;var r=!a.options().logo||!!a.options().logo.enabled,o=i?"amp-logo-ad":"amp-logo";if(r&&a.el().getElementsByClassName(o).length>0){var s=new e.Logo(a);a.el().getElementsByClassName(o)[0].appendChild(s.el()),a.on("dispose",function(){s.dispose()})}}});a.ready(function(){var r,o=n(t.title,t.description,a);r=i?e.createEl("div",{className:"amp-content-title-ad",innerHTML:o}):e.createEl("div",{className:"amp-content-title",innerHTML:o}),a.contentTitleElement=a.el().appendChild(r),i&&(a.contentTitleElement.onclick=function(){a.trigger("tech-click")})}),a.on("firstplay",r),a.on("presentationUpdate",r),i&&a.on("timeupdate",r),a.on("dispose",function(){a.contentTitleElement&&(a.contentTitleElement.parentElement&&a.contentTitleElement.parentElement.removeChild(a.contentTitleElement),a.contentTitleElement=null)})})}(window.amp),function(e){"use strict";e.plugin("controlBarIcons",function(t){function n(e){for(var t=0;t<d.length;t++)if(e===d[t].name())return d[t];return null}function a(t,a){var r=a.replace("amp-controlbaricons-","");r="controlBarIcons"+(r[0].toUpperCase()+r.slice(1));for(var o=new(e.getComponent("Component"))(i,{name:r,el:e.createEl("div",{className:a})}),s=0;s<t.length;s++){var c=n(t[s]);c&&(o.addChild(c),i.controlBar.removeChild(c))}i.controlBar.addChild(o)}var i=this,r=t&&t.leftIcons?t.leftIcons:[],o=t&&t.middleIcons?t.middleIcons:[],s=t&&t.rightIcons?t.rightIcons:[],c=!!t&&!!t.removeOtherIcons,d=[];i.ready(function(){if(d=i.controlBar.children().slice(),c)for(var e=0;e<d.length;e++)i.controlBar.removeChild(d[e]);a(r,"amp-controlbaricons-left"),a(o,"amp-controlbaricons-middle"),a(s,"amp-controlbaricons-right")}),i.on("dispose",function(){setTimeout(function(){for(var e=0;e<d.length;e++)d[e]&&d[e].dispose&&(d[e].dispose(),d[e]=null)},0)})})}(window.amp),function(e){"use strict";e.plugin("live",function(t){function n(){r(),v.currentTime(v.duration()),E=!1}function a(){v.isLive()?((A="LowLatency"===v.currentHeuristicProfile()&&"AzureHtml5JS"===v.currentTechName())&&(O=0,E=!1,x=C,v.addEventListener(amp.internalEventName.currentTimeChanging,d)),v.addEventListener(e.eventName.seeked,l),v.addEventListener(e.eventName.seeking,l),v.addEventListener(e.eventName.timeupdate,c),b(),m()):(v.removeEventListener(e.eventName.seeked,l),v.removeEventListener(e.eventName.seeking,l),v.removeEventListener(e.eventName.timeupdate,c),h(),g()),A||(x=I,v.removeEventListener(amp.internalEventName.currentTimeChanging,d))}function i(){"Html5"==v.currentTechName()&&v.isLive()&&(b(),m())}function r(){v.canControlPlaybackRate()&&v.playbackRate()>1&&o()}function o(){v.playbackRate(1),L=!0,k=1,P=!1,T=!1,U=!1,v.one(e.eventName.timeupdate,l)}function s(){v.canControlPlaybackRate()&&k!==v.playbackRate()&&(L=!1,E=!0)}function c(){v.isLive()?f()?(h(),_(),A&&setTimeout(function(){!v.paused()&&!E&&Date.now()-O>w&&(u.Logger.warning(u.Logger.Area.plugin,"amplive plugin: player drifted from live edge. Attempting to move to live edge.."),O=0,n())},50),!L&&p()&&v.canControlPlaybackRate()&&v.playbackRate()<1&&o()):(A&&0==O&&(O=Date.now()),L||r()):(v.removeEventListener(e.eventName.seeked,l),v.removeEventListener(e.eventName.seeking,l),v.removeEventListener(e.eventName.timeupdate,c),h(),g())}function d(e,t){t.time<v.duration()&&(E=!0,O=0)}function l(){v.isLive()&&(f()?(h(),_()):(m(),P||(P=!0,T=!1,U=!1,v.trigger(e.internalEventName.playingAtLiveDVREdge))))}function f(){var e=v.currentPlayerSettingValue("livePlaybackOffsetInWallClockSec");return v.currentTime()<v.duration()-x-e}function p(){return v.currentTime()<M}function m(){v.addClass(D)}function _(){p()?U||(P=!1,T=!1,U=!0,v.trigger(e.internalEventName.playingAtStartDVREdge)):T||(P=!1,T=!0,U=!1,v.trigger(e.internalEventName.playingInDVR))}function h(){v.removeClass(D)}function b(){v.controlBar.liveDisplay.addClass(S),v.controlBar.liveDisplay.show()}function g(){v.controlBar.liveDisplay.removeClass(S),v.controlBar.liveDisplay.hide()}var v=this,y=t&&t.controlText?t.controlText:"LIVE",S="amp-live-control",D="amp-live-on",I=5,x=I,C=2,O=0,w=3e4,E=!1,A=!1,L=!1,k=1,M=5,P=!1,T=!1,U=!1,F=e.getComponent("Component");e.LiveEdgeProgressBar=e.extend(F,{init:function(e,t){F.call(this,e,t)}}),e.LiveEdgeProgressBar.prototype.createEl=function(){return e.createEl("div",{className:"amp-live-edge-progress",tabIndex:0})},e.registerComponent("LiveEdgeProgressBar",e.LiveEdgeProgressBar);var H=function(){f()&&n()};v.ready(function(){v.addEventListener(e.eventName.ratechange,s),v.addEventListener(e.eventName.loadedmetadata,a),v.addEventListener(e.eventName.durationchange,i),v.controlBar.liveDisplay.off(v,"durationchange",v.controlBar.liveDisplay.updateShowing);var t=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),n=v.currentTechName().toUpperCase();(!t||"HTML5FAIRPLAYHLS"!==n&&"HTML5"!==n)&&v.controlBar.liveDisplay.setClickHandler(H);var r=e.createEl("div",{className:"amp-livetimeindicator",innerHTML:this.htmlEncode(this.localize(y))});v.controlBar.currentTimeDisplay.el().appendChild(r)})})}(window.amp),function(e){"use strict";e.plugin("logo",function(t){var n=t.enabled,a=t.opacity,i=t.targetUrl,r="amp-logo",o=e.getComponent("Component");e.Logo=e.extend(o,{init:function(e,t){o.call(this,e,t)}}),e.Logo.prototype.createEl=function(){var t,n="/skins/amp-default/assets/icons/amslogo.svg",r=e.getComponent("Player"),o=window.document.body.className.includes("high-contrast-enabled");if(i){var s,c=e.decodeURL(i);s=c.hierarchical.match(/^((ftp:\/\/)|(javascript:))/i)?"https://microsoft.com":c.hierarchical.match(/^(https?:)?\/\//i)?e.encodeURL(c):e.createEl("div",{innerHTML:'<a href="'+e.encodeURL(c)+'"></a>'}).firstChild.href,t=(amp.browser.IS_FIREFOX||amp.browser.IS_IE11||amp.browser.IS_EDGE)&&o?e.createEl("span",{innerHTML:'<img src="'+r.getScriptRootURL()+n+'"><a target="_blank" href="'+s+'"></a>'}):e.createEl("span",{innerHTML:'<a target="_blank" href="'+s+'"></a>'})}else t=(amp.browser.IS_FIREFOX||amp.browser.IS_IE11||amp.browser.IS_EDGE)&&o?e.createEl("div",{innerHTML:'<img src="'+r.getScriptRootURL()+n+'">'}):e.createEl("div");return t.style.opacity=a,this.container=t,t},e.registerComponent("Logo",e.Logo),this.ready(function(){var t=this;if(n&&t.el().getElementsByClassName(r).length>0){var a=new e.Logo(t);t.el().getElementsByClassName(r)[0].appendChild(a.el()),t.on("dispose",function(){a.dispose()})}})})}(window.amp),function(e){"use strict";e.plugin("quality",function(t){function n(e,t){if(0==t)a=4;else{var n=e.items[t].options_.label.replace("p",""),a=4;a=n>720?4:720>=n&&n>480?3:480>=n&&n>360?2:1}var i=e.el().className.match(/quality-\d/);e.el().className=e.el().className.replace(i,"quality-"+a)}function a(){this.refresh(),function(t){var n=t.currentVideoStreamList();if(n&&n.streams)for(var a=0;a<n.streams.length;a++)n.streams[a].addEventListener(amp.streamEventName.trackselected,e.bind(t,i))}(this.player_)}function i(){var e=this.controlBar.qualityButton,t=this.currentVideoStreamList();if(t){for(var a=t.selectedIndex,i=t.streams[a].tracks,o=-1,s=0,d=0;d<i.length;d++)i[d].selectable&&(o=d,s++);var l;(l=s>1?0:i.length-o)!==c&&(c<e.items.length&&e.items[c].selected(!1),c=l,e.items[c].selected(!0),n(e,c));var f=u.Misc.formatString(r.localize("Quality setting updated to {0}"),e.items[l].options_.label);!function(e,t){var n=document.getElementById("quality-settings-screen-reader");if(n)n.setAttribute("aria-label",t);else{(n=document.createElement("div")).setAttribute("id","quality-settings-screen-reader"),n.setAttribute("role","alert"),n.setAttribute("style","width: 1px; height: 1px; margin: -1px; position: absolute;  border: 0; padding: 0px; overflow: hidden; clip: rect(0 0 0 0); clip-path: polygon(0px 0px, 0px 0px, 0px 0px); -webkit-clip-path: polygon(0px 0px, 0px 0px, 0px 0px); white-space: nowrap, opacity: 0; font-size: 0;"),n.setAttribute("aria-label",t);var a=e.firstChild;a?e.insertBefore(n,a):e.appendChild(n)}}(r.playerElement(),f)}}var r=this,o=t&&t.menuTitle?t.menuTitle:"Quality",s=r.localize("Audio Only"),c=t&&t.selectedItem?t.selectedItem:0,d=t&&t.autoMenuItemLabel?t.autoMenuItemLabel:"Auto",l=!1,f=!!t&&!!t.audioOnlyMode,p=e.getComponent("MenuItem");e.QualityMenuItem=e.extend(p,{init:function(e,t){var n={label:t.text,value:t.value,selected:t.selected,selectable:t.selectable};p.call(this,e,n),this.addClass("amp-menu-item")}}),e.QualityMenuItem.prototype.handleClick=function(){this.options_.label===s?function(e){var t=e.player_.controlBar.qualityButton;c===t.items.indexOf(e)||l||(e.player_.trigger("videoStreamDisabled"),c=0,e.player_.disableVideo())}(this):l?function(e){e.player_.trigger("videoStreamEnabled");var t=e.player_.controlBar.qualityButton.items.indexOf(e);c=t,e.player_.enableVideo()}(this):function(e){var t=e.player_.controlBar.qualityButton,a=c,i=t.items.indexOf(e);if(a!==i){t.items[a].selected(!1),e.selected(!0),c=i,n(t,i);var r=e.player_.currentVideoStreamList(),o=r.selectedIndex,s=r.streams[o].tracks;r.streams[o].selectTrackByIndex(0==c?-1:s.length-c)}}(this)},e.registerComponent("QualityMenuItem",e.QualityMenuItem);var m=e.getComponent("MenuButton");e.QualityButton=e.extend(m,{init:function(t,n){if((n=n||{}).name="qualityButton",m.call(this,t,n),t.addEventListener("loadedmetadataInternal",e.bind(this,a)),null!=this.items&&this.items.length>0){var i=new(e.getComponent("Component"))(t,{el:e.createEl("li",{className:"amp-menu-header",innerHTML:this.htmlEncode(this.localize(o)),tabindex:-1})});this.menu.prependItem(i),this.el().className+=" quality-"+(4-c)}else this.hide()}}),e.QualityButton.prototype.buttonText=o,e.QualityButton.prototype.createItems=function(){for(var t=function(e){var t=e.currentVideoStreamList();if(t&&0!==t.streams.length){var n,a=t.selectedIndex;t.streams[a]&&(n=t.streams[a].tracks);var i=[];if(n&&n.length&&n.length>1){i[0]={text:d,selectable:!0};for(var r=1;r<=n.length;r++)i[r]={text:n[n.length-r].height+"p",selectable:n[n.length-r].selectable}}else n&&1===n.length&&(i[0]={text:n[0].height+"p",selectable:n[0].selectable});if(l=!1,e.canPlayAudioOnlyMode()&&f){if(e.currentAudioStreamList().streams[0],i.push({text:s,selectable:!0}),c>=0&&c<i.length&&(i[c].selected=!0),1===i.length){l=!0;var o=t.streams[0].tracks;for(r=0;r<o.length;r++)i.unshift({text:o[r].height+"p",selectable:!1});i.length>2&&i.unshift({text:d,selectable:!1})}}else c>=0&&c<i.length&&(i[c].selected=!0);return i}}(this.player_)||[],n=[],a=0;a<t.length;a++){var i=new e.QualityMenuItem(this.player_,t[a]);n.push(i)}if(c>0&&!l){var r=this.player_.currentVideoStreamList(),o=r.selectedIndex;r.streams[o].selectTrackByIndex(n.length-c-2)}return n},e.QualityButton.prototype.buildCSSClass=function(){return"amp-quality-control "+m.prototype.buildCSSClass.call(this)},e.registerComponent("QualityButton",e.QualityButton),r.ready(function(){var t=new e.QualityButton(r,{selectedItemIndex:c});r.controlBar.qualityButton=r.controlBar.addChild(t),r.controlBar.qualityButton.el_.setAttribute("aria-label","Video Quality Menu"),r.controlBar.qualityButton.el_.setAttribute("title",this.localize("Video Quality")),r.controlBar.qualityButton.el_.setAttribute("role","region")}),e.QualityButton.prototype.refresh=function(){if(this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=this.createMenu(),this.addChild(this.menu),null!=this.items&&this.items.length>0){var t=new(e.getComponent("Component"))(r,{el:e.createEl("li",{className:"amp-menu-header",innerHTML:this.htmlEncode(this.localize(o)),tabindex:-1})});this.menu.prependItem(t),null==this.el().className.match(/quality-\d/)&&(this.el().className+=" quality-"+(4-c)),this.show()}else this.hide()}})}(window.amp),function(e){"use strict";window.amp.plugin("outline",function(e){function t(e){e.clientX&&0!==e.clientX&&e.clientY&&0!==e.clientY&&o.removeClass(u)}function n(e){e.classList.add(f),e.removeEventListener("click",t),e.addEventListener("click",t),o.on("dispose",function(){e.removeEventListener("click",t)})}function a(){for(var e=o.el().querySelectorAll(c),t=0;t<e.length;t++)n(e[t]);if(s){var a=o.controlBar.el().querySelectorAll(l);for(t=0;t<a.length;t++)n(a[t])}!function(){var e=o.el().querySelector(d);null!==e&&(e.classList.add(f),e.removeEventListener("mousedown",i),e.addEventListener("mousedown",i),o.on("dispose",function(){var e=o.el().querySelector(d);e&&e.removeEventListener("mousedown",i)}))}()}function i(){t(),o.controls()&&(o.paused()?o.play():o.pause())}function r(){o.addClass(u),p&&(p=!1,a())}var o=this,s=!!e&&!!e.displayOnMenuItems,c=".vjs-control",d=".vjs-fullscreen-outline",l=".vjs-menu-item",u="outline-enabled",f="outline-enabled-control",p=!0;o.ready(function(){o.addClass(u),a(),o.controlBar.on("keydown",r)}),o.on("sourceset",function(){p=!0})})}(),function(e){"use strict";e.plugin("ampVolumeMenuButton",function(t){var n=this,a=NaN,i=t.hideVolumeBarOnInActivity;void 0===i&&(i=!0);var r=e.getComponent("MuteToggle");e.AmpVolumeMenuButton=e.extend(r,{init:function(e,t){(t=t||{}).name="ampVolumeMenuButton",r.call(this,e,t),this.buttonTouched=!1}}),e.AmpVolumeMenuButton.prototype.clearOtherMenus=function(){this.volumeControl.buttonPressed_&&this.volumeControl.unpressButton(),r.prototype.clearOtherMenus.call(this)},e.AmpVolumeMenuButton.prototype.setVolumeControl=function(e){this.volumeControl=e},e.AmpVolumeMenuButton.prototype.handleClick=function(){this.clearOtherMenus(),this.buttonTouched=!this.buttonTouched,this.buttonTouched&&this.volumeControl.trigger("mouseover"),r.prototype.handleClick.call(this)};var o=e.getComponent("TooltipClickable");e.VolumeControl=e.extend(o,{init:function(t,n){(n=n||{}).name="volumeControl",n.el=e.createEl("div",{className:"vjs-volume-control"}),o.call(this,t,n),this.el_.setAttribute("title",this.localize("volume level")),this.on(t,"loadedmetadata",function(){var e=!1;!1===t.tech_.featuresVolumeControl?e=!0:"HTML5FAIRPLAYHLS"===t.currentTechName().toUpperCase()||"HTML5"===t.currentTechName().toUpperCase()&&("video/mp4"===t.currentType()||"audio/mp3"===t.currentType())||"FlashSS"==t.techName_||t.hasAudioStream()||(e=!0),e?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")}),this.createChildElements(),this.setUpEventHandlers()}}),e.VolumeControl.prototype.setUpEventHandlers=function(){var e=this;this.on("mouseover",function(){e.handleMouseOver()}),this.on("mouseleave",function(){e.handleMouseLeave()}),this.on(n,this.volumeBar.playerEvent,function(){e.updateVolumeHandle()})},e.VolumeControl.prototype.createChildElements=function(){this.createVolumeMenuButton(),this.createVolumeBar()},e.VolumeControl.prototype.createVolumeMenuButton=function(){var a=new e.AmpVolumeMenuButton(n,t);this.ampVolumeMenuButton=this.addChild(a),a.setVolumeControl(this)},e.VolumeControl.prototype.unpressButton=function(){this.popUp.unlockShowing(),this.el_.setAttribute("aria-expanded","false"),this.buttonPressed_=!1},e.VolumeControl.prototype.pressButton=function(){this.ampVolumeMenuButton.clearOtherMenus(),this.popUp.lockShowing(),this.el_.setAttribute("aria-expanded","true"),this.buttonPressed_=!0},e.VolumeControl.prototype.handleMouseLeave=function(){this.unpressButton()},e.VolumeControl.prototype.handleMouseOver=function(){this.pressButton()},e.VolumeControl.prototype.handleFocusOnVolumeBar=function(){this.pressButton()},e.VolumeControl.prototype.createVolumeBar=function(){var a=new(e.getComponent("Popup"))(n,{contentElType:"div"}),i=new(e.getComponent("VolumeBar"))(n,t||{}),r=this.createVolumeSliderHandle();i.el_.appendChild(r),i.on("focus",function(){n.controlBar.volumeControl.handleFocusOnVolumeBar()}),this.volumeBar=a.addChild(i),this.popUp=this.addChild(a),this.volumeHandle=r},e.VolumeControl.prototype.updateVolumeHandle=function(){var e,n=this.volumeBar;n.bar&&n.bar.el_&&(t&&!1===t.vertical?(this.volumeHandle.style.left=n.bar.el_.style.width,e=this.volumeHandle.style.left):(this.volumeHandle.style.top=n.bar.el_.style.height,e=this.volumeHandle.style.top),this.volumeHandle.innerHTML='<span class="vjs-control-text" aria-live="polite">'+e+"</span>")},e.VolumeControl.prototype.createVolumeSliderHandle=function(){return e.getComponent("Component").prototype.createEl.call(this,"div",{className:"vjs-volume-handle vjs-control"})},e.registerComponent("AmpVolumeMenuButton",e.AmpVolumeMenuButton),e.registerComponent("VolumeControl",e.VolumeControl),n.ready(function(){var t=new e.VolumeControl(n,{});n.controlBar.volumeControl=n.controlBar.addChild(t);var r=n.controlBar.volumeControl,o=function(){isNaN(a)||(clearTimeout(a),a=NaN)};i&&(n.on("userinactive",function(){r.popUp&&r.volumeBar.el_===document.activeElement&&(o(),a=setTimeout(function(){r.volumeBar.el_!==document.activeElement||n.userActive()||r.ampVolumeMenuButton.el().focus()},1e3)),r.el_.setAttribute("aria-expanded","false")}),n.on("useractive",o)),r.updateVolumeHandle(),this.one(n,"timeupdate",function(){r.volumeBar.update(),r.updateVolumeHandle()})})})}(window.amp),function(e){"use strict";e.plugin("playbackSpeed",function(t){function n(){a(function(){return!0})}function a(e){for(_=[],y=0;y<m.length;y++)m[y].name&&m[y].value>=.5&&m[y].value<=4&&e(m[y].value)&&_.push({selected:!1,name:m[y].name,value:m[y].value})}function i(){(function(){for(var e=0;e<m.length;e++)if(1===m[e].value)return;m.push({selected:!1,name:p.htmlEncode(p.localize("1.0x")),value:1})})(),m.sort(function(e,t){return t.value-e.value}),n()}function r(e){var t=(e.controlBar.playbackSpeedButton.currentSpeedIndex||0===e.controlBar.playbackSpeedButton.currentSpeedIndex)&&_.length>e.controlBar.playbackSpeedButton.currentSpeedIndex?_[e.controlBar.playbackSpeedButton.currentSpeedIndex].value:1;e.controlBar.playbackSpeedButton.removeClass(b),e.controlBar.playbackSpeedButton.removeClass(g),e.controlBar.playbackSpeedButton.removeClass(v),e.controlBar.playbackSpeedButton.addClass(t>1?g:1>t?v:b)}function o(e,t,n,a){var i=n||e.player_,o=i.controlBar.playbackSpeedButton,c=i.controlBar.playbackSpeedButton.currentSpeedIndex,d=s(t||e.options().value);null===d||!a&&c===d||(function(e){for(var t=0;t<e.items.length;t++)e.items[t].selected(!1)}(o),o.items[d].selected(!0),function(e,t){_[t].value}(0,d),function(e,t){t.canControlPlaybackRate()&&t.playbackRate(e)}(_[d].value,i),i.controlBar.playbackSpeedButton.currentSpeedIndex=d,r(i))}function s(e){for(var t=0;t<_.length;t++)if(Math.abs(_[t].value-e)<.001)return t;return null}var c=e.getComponent("Component"),d=e.getComponent("MenuItem"),l=e.getComponent("MenuButton");if(t&&t.enabled){var f,p=this,m=t.speedLevels?t.speedLevels.slice(0):[{name:"2.0x",value:2},{name:"1.0x",value:1},{name:"0.5x",value:.5}].slice(0),_=[],h="Playback Speed",b="amp-playbackspeed-control-normal",g="amp-playbackspeed-control-fast",v="amp-playbackspeed-control-slow",y=0;i();var S=t.initialSpeed?t.initialSpeed:1;null==(f=s(S))&&u.Logger.error(u.Logger.Area.plugin,"PlaybackSpeed plugin: cannot identify speed index for initial speed."),e.PlaybackSpeedMenuItem=e.extend(d,{init:function(e,t){var n={label:t.name,value:t.value,selected:t.selected,selectable:!0};d.call(this,e,n),this.addClass("amp-menu-item"),this.on("click",this.handleClick),this.value=t.value}}),e.PlaybackSpeedMenuItem.prototype.handleClick=function(){o(this)},e.registerComponent("PlaybackSpeedMenuItem",e.PlaybackSpeedMenuItem),e.PlaybackSpeedButton=e.extend(l,{init:function(t,n){(n=n||{}).name="playbackSpeedButton",l.call(this,t,n),t.addEventListener(e.eventName.loadedmetadata,e.bind(this,e.PlaybackSpeedButton.prototype.refresh));var a=new c(t,{el:e.createEl("li",{className:"amp-menu-header",innerHTML:this.htmlEncode(this.localize(h)),tabindex:-1})});this.menu.prependItem(a),t.canControlPlaybackRate()?(this.addDVRPlaybackEventCallbacks(),this.show()):this.hide()}}),e.PlaybackSpeedButton.prototype.addDVRPlaybackEventCallbacks=function(){var t=this;p.addEventListener(e.internalEventName.playingAtLiveDVREdge,function(){t.handleLiveEdgePlayback()}),p.addEventListener(e.internalEventName.playingAtStartDVREdge,function(){t.handleStartEdgePlayback()}),p.addEventListener(e.internalEventName.playingInDVR,function(){t.handlePlayingInDVR()})},e.PlaybackSpeedButton.prototype.buttonText=h,e.PlaybackSpeedButton.prototype.createItems=function(){for(var t=[],n=0;n<_.length;n++){var a=new e.PlaybackSpeedMenuItem(this.player_,_[n]);t.push(a)}return t},e.PlaybackSpeedButton.prototype.buildCSSClass=function(){return b+" "+l.prototype.buildCSSClass.call(this).trim()},e.PlaybackSpeedButton.prototype.refresh=function(){this.player_.canControlPlaybackRate()?this.show():this.hide()},e.PlaybackSpeedButton.prototype.setInitialValues=function(){this.player_.controlBar.playbackSpeedButton.currentSpeedIndex=f,this.player_.controlBar.playbackSpeedButton.el_.setAttribute("aria-label","Playback Speed"),this.player_.controlBar.playbackSpeedButton.el_.setAttribute("title",this.localize("Playback Speed")),this.player_.controlBar.playbackSpeedButton.el_.setAttribute("role","region"),r(this.player_)},e.PlaybackSpeedButton.prototype.handleLiveEdgePlayback=function(){a(function(e){return 1>=e}),this.updateMenuItemsAndUi()},e.PlaybackSpeedButton.prototype.handleStartEdgePlayback=function(){a(function(e){return e>=1}),this.updateMenuItemsAndUi()},e.PlaybackSpeedButton.prototype.handlePlayingInDVR=function(){n(),this.updateMenuItemsAndUi()},e.PlaybackSpeedButton.prototype.updateMenuItemsAndUi=function(){this.update(),this.selectMenuItemWithValue(this.player_.playbackRate())},e.PlaybackSpeedButton.prototype.selectMenuItemWithValue=function(e){for(var t=0;t<this.items.length;t++)this.items[t].selected(this.items[t].value===e)},e.registerComponent("PlaybackSpeedButton",e.PlaybackSpeedButton),p.on("sourceset",function(){p.controlBar.playbackSpeedButton&&(i(),p.controlBar.playbackSpeedButton.updateMenuItemsAndUi())}),p.ready(function(){var t=new e.PlaybackSpeedButton(p);p.controlBar.playbackSpeedButton=p.controlBar.addChild(t),p.controlBar.playbackSpeedButton.setInitialValues(),p.addEventListener(amp.eventName.ratechange,function(){p.canControlPlaybackRate()&&o(void 0,p.playbackRate(),p)}),null!==f&&p.addEventListener(amp.eventName.loadeddata,function(){p.playbackRate(S)}),o(void 0,p.playbackRate(),p,!0)})}})}(window.amp),function(e){"use strict";window.videojs_hotkeys={version:"0.2.16"},e.plugin("hotKeys",function(t){var n=this,a=n.el(),i=document,r=e.mergeOptions||e.util.mergeOptions,o=(t=r({volumeStep:.1,seekStep:5,enableMute:!0,enableVolumeScroll:!0,enableFullscreen:!0,enableNumbers:!0,enableJogStyle:!1,alwaysCaptureHotkeys:!1,enableModifiersForNumbers:!0,enableSeek:!0,enablePlayPause:!0,playPauseKey:function(e){return 32===e.which||179===e.which},rewindKey:function(e){return 37===e.which||177===e.which},forwardKey:function(e){return 39===e.which||176===e.which},volumeUpKey:function(e){return 38===e.which},volumeDownKey:function(e){return 40===e.which},muteKey:function(e){return 77===e.which},fullscreenKey:function(e){return 70===e.which},customKeys:{}},t||{})).volumeStep,s=t.seekStep,c=t.enableMute,d=t.enableVolumeScroll,l=t.enableFullscreen,u=t.enableNumbers,f=t.enableJogStyle,p=t.alwaysCaptureHotkeys,m=t.enableModifiersForNumbers,_=t.enableSeek,h=t.enablePlayPause;a.hasAttribute("tabIndex")||a.setAttribute("tabIndex","1"),(p||!n.autoplay())&&n.one("play",function(){a.focus()}),n.on("userinactive",function(){var e=function(){clearTimeout(t)},t=setTimeout(function(){n.off("useractive",e),i.activeElement&&i.activeElement.parentElement==a.querySelector(".vjs-control-bar")&&a.focus()},10);n.one("useractive",e)}),n.on("play",function(){var e=a.querySelector(".iframeblocker");e&&""===e.style.display&&(e.style.display="block",e.style.bottom="39px")});var b=function(e){if(n.controls()){var t=e.relatedTarget||e.toElement||i.activeElement;if((p||t==a||t==a.querySelector(".vjs-tech")||t==a.querySelector(".iframeblocker")||t==a.querySelector(".vjs-control-bar"))&&d){e=window.event||e;var r=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail));e.preventDefault?e.preventDefault():e.returnValue=!1,1==r?n.volume(n.volume()+o):-1==r&&n.volume(n.volume()-o)}}};return n.on("keydown",function(e){var r,d=e.which,b=e.preventDefault;if(n.controls()){var g=i.activeElement;if(p||g==a||g==a.querySelector(".vjs-tech")||g==a.querySelector(".vjs-control-bar")||g==a.querySelector(".iframeblocker"))switch(function(e,n){return t.playPauseKey(e,n)?1:t.rewindKey(e,n)?2:t.forwardKey(e,n)?3:t.volumeUpKey(e,n)?4:t.volumeDownKey(e,n)?5:t.muteKey(e,n)?6:t.fullscreenKey(e,n)?7:void 0}(e,n)){case 1:h&&(b(),p&&e.stopPropagation(),n.paused()?n.play():n.pause());break;case 2:_&&(b(),r=n.currentTime()-s,n.currentTime()<=s&&(r=0),n.currentTime(r));break;case 3:_&&(b(),n.currentTime(n.currentTime()+s));break;case 5:b(),f?(r=n.currentTime()-1,n.currentTime()<=1&&(r=0),n.currentTime(r)):n.volume(n.volume()-o);break;case 4:b(),f?n.currentTime(n.currentTime()+1):n.volume(n.volume()+o);break;case 6:c&&n.muted(!n.muted());break;case 7:l&&(n.isFullscreen()?n.exitFullscreen():n.requestFullscreen());break;default:if((d>47&&59>d||d>95&&106>d)&&(m||!(e.metaKey||e.ctrlKey||e.altKey))&&u){var v=48;d>95&&(v=96);var y=d-v;b(),n.currentTime(n.duration()*y*.1)}for(var S in t.customKeys){var D=t.customKeys[S];D&&D.key&&D.handler&&D.key(e)&&(b(),D.handler(n,t))}}}}),n.on("dblclick",function(e){if(n.controls()){var t=e.relatedTarget||e.toElement||i.activeElement;(t==a||t==a.querySelector(".vjs-tech")||t==a.querySelector(".iframeblocker"))&&l&&(n.isFullscreen()?n.exitFullscreen():n.requestFullscreen())}}),n.on("mousewheel",b),n.on("DOMMouseScroll",b),this})}(window.videojs),amp.AmpInlinePlugins=amp.extend(amp.getComponent("Component"),{init:function(e,t){"use strict";var n={hotKeys:{}};Object.getOwnPropertyNames(n).forEach(function(a){if(e[a]){var i=n[a];t&&t.playerOptions&&t.playerOptions[a]&&(i=t.playerOptions[a]),e[a](i)}})}}),amp.registerComponent("AmpInlinePlugins",amp.AmpInlinePlugins),amp.getComponent("Player").prototype.options_.children.push("AmpInlinePlugins"),function(e){!function(e){var t=[amp.errorCode.networkErrTimeout,amp.errorCode.networkErrError],n="video/mp4",a=function(){function e(e,n,a,i){var r=this;this.sourceOrder=[],this.sourceMap={},this.fallbackErrors=n||t,this.fallbackServiceErrorCodes=a||[],this.isFallbackErrorCodePartialMatchingEnabled=i||!1,e.forEach(function(e){r.pushSource(e)})}return e.prototype.getNextSources=function(e){var t=this,n=[],a=[];return this.sourceOrder.forEach(function(i){var r,o=t.cloneSourceObject(t.sourceMap[i]);e&&e===i&&t.sourceMap[i]&&t.sourceMap[i].src.shift(),(r=t.sourceMap[i].src[0])?(o.src=r,n.push(o)):a.push(i)}),a.forEach(function(e){t.removeMIMEType(e)}),n},e.prototype.getNextAdaptiveStreamingSource=function(){var e=this,t=[];return this.sourceOrder.forEach(function(a){var i,r=e.cloneSourceObject(e.sourceMap[a]);(i=e.sourceMap[a].src[0])&&a!==n&&(r.src=i,t.push(r))}),t},e.prototype.shouldFallback=function(e,t,a){var i=this.normalizeErrorCode(e);if((i>=amp.errorCode.srcErrStart&&i<=amp.errorCode.srcErrUnsupportedPresentation||i>=amp.errorCode.srcPlayerMismatchStart&&i<=amp.errorCode.srcPlayerMismatchEnd)&&(this.removeMIMEType(a),0!==this.sourceOrder.length))return!0;if(0===this.sourceOrder.length)return!1;if(i>=amp.errorCode.networkErrHttpInternalServerFailure&&i<amp.errorCode.networkErrHttpResponseEnd)return!0;if(this.isFallbackErrorCodePartialMatchingEnabled)var r=this.fallbackServiceErrorCodes.filter(function(e){return e&&t.indexOf(e)>=0}).length>0;else r=this.fallbackServiceErrorCodes.indexOf(t)>=0;return!!(a!==n&&r||i!==amp.errorCode.networkErrHttpUserAuthRequired&&i!==amp.errorCode.networkErrHttpUserForbidden)&&i>=amp.errorCode.networkErrHttpBadUrlFormat&&i<amp.errorCode.networkErrHttpInternalServerFailure||i>=amp.errorCode.encryptErrStart&&i<=amp.errorCode.encryptErrEnd||i===amp.errorCode.errUnknown||0===i||this.fallbackErrors.indexOf(i)>=0||r},e.prototype.cloneSourceObject=function(e){return amp.mergeOptions(e)},e.prototype.pushSource=function(e){var t=this.cloneSourceObject(e);t.disableUrlRewriter=!0,this.sourceOrder.push(t.type),Array.isArray(t.src)||(t.src=[t.src]),this.sourceMap[t.type]=t},e.prototype.removeMIMEType=function(e){var t=this.sourceOrder.indexOf(e);this.sourceOrder.splice(t,1),delete this.sourceMap[e]},e.prototype.normalizeErrorCode=function(e){return e?parseInt(e.toString(16).slice(-6),16):0},e}();e.FallbackSrcHandler=a}(e.FallbackSupport||(e.FallbackSupport={})),e.FallbackSupport}(u||(u={})),function(e){!function(e){"use strict";e.forgeScript='(function(){function n(n){function i(n){var r,u;if(this.data="",this.read=0,typeof n=="string")this.data=n;else if(t.isArrayBuffer(n)||t.isArrayBufferView(n)){r=new Uint8Array(n);try{this.data=String.fromCharCode.apply(null,r)}catch(f){for(u=0;u<r.length;++u)this.putByte(r[u])}}else(n instanceof i||typeof n=="object"&&typeof n.data=="string"&&typeof n.read=="number")&&(this.data=n.data,this.read=n.read);this._constructedStringLength=0}var t=n.util=n.util||{},r;t.isArray=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};t.isArrayBuffer=function(n){return typeof ArrayBuffer!="undefined"&&n instanceof ArrayBuffer};t.isArrayBufferView=function(n){return n&&t.isArrayBuffer(n.buffer)&&n.byteLength!==undefined};t.ByteBuffer=i;t.ByteStringBuffer=i;r=4096;t.ByteStringBuffer.prototype._optimizeConstructedString=function(n){this._constructedStringLength+=n;this._constructedStringLength>r&&(this.data.substr(0,1),this._constructedStringLength=0)};t.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};t.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};t.ByteStringBuffer.prototype.putByte=function(n){return this.putBytes(String.fromCharCode(n))};t.ByteStringBuffer.prototype.fillWithByte=function(n,t){n=String.fromCharCode(n);for(var i=this.data;t>0;)t&1&&(i+=n),t>>>=1,t>0&&(n+=n);return this.data=i,this._optimizeConstructedString(t),this};t.ByteStringBuffer.prototype.putBytes=function(n){return this.data+=n,this._optimizeConstructedString(n.length),this};t.ByteStringBuffer.prototype.putString=function(n){return this.putBytes(t.encodeUtf8(n))};t.ByteStringBuffer.prototype.putInt16=function(n){return this.putBytes(String.fromCharCode(n>>8&255)+String.fromCharCode(n&255))};t.ByteStringBuffer.prototype.putInt24=function(n){return this.putBytes(String.fromCharCode(n>>16&255)+String.fromCharCode(n>>8&255)+String.fromCharCode(n&255))};t.ByteStringBuffer.prototype.putInt32=function(n){return this.putBytes(String.fromCharCode(n>>24&255)+String.fromCharCode(n>>16&255)+String.fromCharCode(n>>8&255)+String.fromCharCode(n&255))};t.ByteStringBuffer.prototype.putInt16Le=function(n){return this.putBytes(String.fromCharCode(n&255)+String.fromCharCode(n>>8&255))};t.ByteStringBuffer.prototype.putInt24Le=function(n){return this.putBytes(String.fromCharCode(n&255)+String.fromCharCode(n>>8&255)+String.fromCharCode(n>>16&255))};t.ByteStringBuffer.prototype.putInt32Le=function(n){return this.putBytes(String.fromCharCode(n&255)+String.fromCharCode(n>>8&255)+String.fromCharCode(n>>16&255)+String.fromCharCode(n>>24&255))};t.ByteStringBuffer.prototype.putInt=function(n,t){var i="";do t-=8,i+=String.fromCharCode(n>>t&255);while(t>0);return this.putBytes(i)};t.ByteStringBuffer.prototype.putSignedInt=function(n,t){return n<0&&(n+=2<<t-1),this.putInt(n,t)};t.ByteStringBuffer.prototype.putBuffer=function(n){return this.putBytes(n.getBytes())};t.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};t.ByteStringBuffer.prototype.getInt16=function(){var n=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,n};t.ByteStringBuffer.prototype.getInt24=function(){var n=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,n};t.ByteStringBuffer.prototype.getInt32=function(){var n=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,n};t.ByteStringBuffer.prototype.getInt16Le=function(){var n=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,n};t.ByteStringBuffer.prototype.getInt24Le=function(){var n=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,n};t.ByteStringBuffer.prototype.getInt32Le=function(){var n=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,n};t.ByteStringBuffer.prototype.getInt=function(n){var t=0;do t=(t<<8)+this.data.charCodeAt(this.read++),n-=8;while(n>0);return t};t.ByteStringBuffer.prototype.getSignedInt=function(n){var t=this.getInt(n),i=2<<n-2;return t>=i&&(t-=i<<1),t};t.ByteStringBuffer.prototype.getBytes=function(n){var t;return n?(n=Math.min(this.length(),n),t=this.data.slice(this.read,this.read+n),this.read+=n):n===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};t.ByteStringBuffer.prototype.bytes=function(n){return typeof n=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+n)};t.ByteStringBuffer.prototype.at=function(n){return this.data.charCodeAt(this.read+n)};t.ByteStringBuffer.prototype.setAt=function(n,t){return this.data=this.data.substr(0,this.read+n)+String.fromCharCode(t)+this.data.substr(this.read+n+1),this};t.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};t.ByteStringBuffer.prototype.copy=function(){var n=t.createBuffer(this.data);return n.read=this.read,n};t.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};t.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};t.ByteStringBuffer.prototype.truncate=function(n){var t=Math.max(0,this.length()-n);return this.data=this.data.substr(this.read,t),this.read=0,this};t.ByteStringBuffer.prototype.toHex=function(){for(var i,n="",t=this.read;t<this.data.length;++t)i=this.data.charCodeAt(t),i<16&&(n+="0"),n+=i.toString(16);return n};t.ByteStringBuffer.prototype.toString=function(){return t.decodeUtf8(this.bytes())};t.createBuffer=function(n,i){return i=i||"raw",n!==undefined&&i==="utf8"&&(n=t.encodeUtf8(n)),new t.ByteBuffer(n)};t.encodeUtf8=function(n){return unescape(encodeURIComponent(n))};t.decodeUtf8=function(n){return decodeURIComponent(escape(n))}}return typeof forge=="undefined"&&(forge={}),n(forge)})(),function(){function n(n){n.cipher=n.cipher||{};n.cipher.algorithms=n.cipher.algorithms||{};n.cipher.createDecipher=function(t,i){var r=t;if(typeof r=="string"&&(r=n.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new n.cipher.BlockCipher({algorithm:r,key:i,decrypt:!0})};n.cipher.registerAlgorithm=function(t,i){t=t.toUpperCase();n.cipher.algorithms[t]=i};n.cipher.getAlgorithm=function(t){return(t=t.toUpperCase(),t in n.cipher.algorithms)?n.cipher.algorithms[t]:null};var t=n.cipher.BlockCipher=function(n){this.algorithm=n.algorithm;this.mode=this.algorithm.mode;this.blockSize=this.mode.blockSize;this._finish=!1;this._input=null;this.output=null;this._op=n.decrypt?this.mode.decrypt:this.mode.encrypt;this._decrypt=n.decrypt;this.algorithm.initialize(n)};t.prototype.start=function(t){var i,r;t=t||{};i={};for(r in t)i[r]=t[r];i.decrypt=this._decrypt;this._finish=!1;this._input=n.util.createBuffer();this.output=t.output||n.util.createBuffer();this.mode.start(i)};t.prototype.update=function(n){for(n&&this._input.putBuffer(n);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};t.prototype.finish=function(n){n&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(t){return n(this.blockSize,t,!1)},this.mode.unpad=function(t){return n(this.blockSize,t,!0)});var t={};return(t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t))?!1:(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))?!1:this.mode.afterFinish&&!this.mode.afterFinish(this.output,t)?!1:!0}}return typeof forge=="undefined"&&(forge={}),n(forge)}(),function(){function n(n){function i(t){var r,i;if(typeof t=="string"&&(t=n.util.createBuffer(t)),n.util.isArray(t)&&t.length>4)for(r=t,t=n.util.createBuffer(),i=0;i<r.length;++i)t.putByte(r[i]);return n.util.isArray(t)||(t=[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()]),t}n.cipher=n.cipher||{};var t=n.cipher.modes=n.cipher.modes||{};t.cbc=function(n){n=n||{};this.name="CBC";this.cipher=n.cipher;this.blockSize=n.blockSize||16;this._ints=this.blockSize/4;this._inBlock=new Array(this._ints);this._outBlock=new Array(this._ints)};t.cbc.prototype.start=function(n){if(n.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in n)this._iv=i(n.iv),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.");};t.cbc.prototype.encrypt=function(n,t,i){var r;if(n.length()<this.blockSize&&!(i&&n.length()>0))return!0;for(r=0;r<this._ints;++r)this._inBlock[r]=this._prev[r]^n.getInt32();for(this.cipher.encrypt(this._inBlock,this._outBlock),r=0;r<this._ints;++r)t.putInt32(this._outBlock[r]);this._prev=this._outBlock};t.cbc.prototype.decrypt=function(n,t,i){var r;if(n.length()<this.blockSize&&!(i&&n.length()>0))return!0;for(r=0;r<this._ints;++r)this._inBlock[r]=n.getInt32();for(this.cipher.decrypt(this._inBlock,this._outBlock),r=0;r<this._ints;++r)t.putInt32(this._prev[r]^this._outBlock[r]);this._prev=this._inBlock.slice(0)};t.cbc.prototype.pad=function(n){var t=n.length()===this.blockSize?this.blockSize:this.blockSize-n.length();return n.fillWithByte(t,t),!0};t.cbc.prototype.unpad=function(n,t){if(t.overflow>0)return!1;var r=n.length(),i=n.at(r-1);return i>this.blockSize<<2?!1:(n.truncate(i),!0)}}return typeof forge=="undefined"&&(forge={}),n(forge)}(),function(){function n(n){function l(t,i){var r=function(){return new n.aes.Algorithm(t,i)};n.cipher.registerAlgorithm(t,r)}function h(){var u,o,c,l,w,a,h,b,v,y,n,p;for(f=!0,s=[0,1,2,4,8,16,32,64,128,27,54],u=new Array(256),n=0;n<128;++n)u[n]=n<<1,u[n+128]=n+128<<1^283;for(t=new Array(256),e=new Array(256),r=new Array(4),i=new Array(4),n=0;n<4;++n)r[n]=new Array(256),i[n]=new Array(256);for(o=0,c=0,n=0;n<256;++n){for(h=c^c<<1^c<<2^c<<3^c<<4,h=h>>8^h&255^99,t[o]=h,e[h]=o,b=u[h],l=u[o],w=u[l],a=u[w],v=b<<24^h<<16^h<<8^h^b,y=(l^w^a)<<24^(o^a)<<16^(o^w^a)<<8^o^l^a,p=0;p<4;++p)r[p][o]=v,i[p][h]=y,v=v<<24|v>>>8,y=y<<24|y>>>8;o===0?o=c=1:(o=l^u[u[u[l^a]]],c^=u[u[c]])}}function c(n,r){for(var h,y,e=n.slice(0),o,p=1,c=e.length,w=c+6+1,a=u*w,f=c;f<a;++f)o=e[f-1],f%c==0?(o=t[o>>>16&255]<<24^t[o>>>8&255]<<16^t[o&255]<<8^t[o>>>24]^s[p]<<24,p++):c>6&&f%c==4&&(o=t[o>>>24]<<24^t[o>>>16&255]<<16^t[o>>>8&255]<<8^t[o&255]),e[f]=e[f-c]^o;if(r){var v,b=i[0],k=i[1],d=i[2],g=i[3],l=e.slice(0);for(a=e.length,f=0,h=a-u;f<a;f+=u,h-=u)if(f===0||f===a-u)l[f]=e[h],l[f+1]=e[h+3],l[f+2]=e[h+2],l[f+3]=e[h+1];else for(y=0;y<u;++y)v=e[h+y],l[f+(3&-y)]=b[t[v>>>24]]^k[t[v>>>16&255]]^d[t[v>>>8&255]]^g[t[v&255]];e=l}return e}function o(n,u,f,o){var tt=n.length/4-1,y,p,w,b,s,h,c,l,a,d,g,nt,v,k;for(o?(y=i[0],p=i[1],w=i[2],b=i[3],s=e):(y=r[0],p=r[1],w=r[2],b=r[3],s=t),h=u[0]^n[0],c=u[o?3:1]^n[1],l=u[2]^n[2],a=u[o?1:3]^n[3],v=3,k=1;k<tt;++k)d=y[h>>>24]^p[c>>>16&255]^w[l>>>8&255]^b[a&255]^n[++v],g=y[c>>>24]^p[l>>>16&255]^w[a>>>8&255]^b[h&255]^n[++v],nt=y[l>>>24]^p[a>>>16&255]^w[h>>>8&255]^b[c&255]^n[++v],a=y[a>>>24]^p[h>>>16&255]^w[c>>>8&255]^b[l&255]^n[++v],h=d,c=g,l=nt;f[0]=s[h>>>24]<<24^s[c>>>16&255]<<16^s[l>>>8&255]<<8^s[a&255]^n[++v];f[o?3:1]=s[c>>>24]<<24^s[l>>>16&255]<<16^s[a>>>8&255]<<8^s[h&255]^n[++v];f[2]=s[l>>>24]<<24^s[a>>>16&255]<<16^s[h>>>8&255]<<8^s[c&255]^n[++v];f[o?1:3]=s[a>>>24]<<24^s[h>>>16&255]<<16^s[c>>>8&255]<<8^s[l&255]^n[++v]}n.aes=n.aes||{};n.aes.Algorithm=function(n,t){f||h();var i=this;i.name=n;i.mode=new t({blockSize:16,cipher:{encrypt:function(n,t){return o(i._w,n,t,!1)},decrypt:function(n,t){return o(i._w,n,t,!0)}}});i._init=!1};n.aes.Algorithm.prototype.initialize=function(t){var i,f,u,r,e,o;if(!this._init){if(i=t.key,typeof i=="string"&&(i.length===16||i.length===24||i.length===32))i=n.util.createBuffer(i);else if(n.util.isArray(i)&&(i.length===16||i.length===24||i.length===32))for(f=i,i=n.util.createBuffer(),r=0;r<f.length;++r)i.putByte(f[r]);if(!n.util.isArray(i)&&(f=i,i=[],u=f.length(),u===16||u===24||u===32))for(u=u>>>2,r=0;r<u;++r)i.push(f.getInt32());if(!n.util.isArray(i)||!(i.length===4||i.length===6||i.length===8))throw new Error("Invalid key parameter.");e=this.mode.name;o=["CFB","OFB","CTR","GCM"].indexOf(e)!==-1;this._w=c(i,t.decrypt&&!o);this._init=!0}};n.aes._expandKey=function(n,t){return f||h(),c(n,t)};n.aes._updateBlock=o;l("AES-CBC",n.cipher.modes.cbc);var f=!1,u=4,t,e,s,r,i}return typeof forge=="undefined"&&(forge={}),n(forge)}(),function(){function n(n){for(var i=new Uint8Array(n.length),t=0;t<i.byteLength;t++)i[t]=n.charCodeAt(t);return i}onmessage=function(t){if(t.data.keyStr&&t.data.ivStr&&t.data.encrypted){var i=forge.cipher.createDecipher("AES-CBC",t.data.keyStr);i.start({iv:t.data.ivStr});i.update(new forge.util.ByteBuffer(t.data.encrypted));i.finish();postMessage({decrypted:n(i.output.bytes())})}}}();'}(e.Forge||(e.Forge={})),e.Forge}(f||(f={})),function(e){!function(t){"use strict";if(t.decrypt,t.decrypt=function(t,n,a){var i=forge.cipher.createDecipher("AES-CBC",n.keyStr);i.start({iv:n.ivStr}),i.update(new forge.util.ByteBuffer(a)),i.finish();var r=e.Common.stringToUint8Array(i.output.bytes());return t.apply(null,[r]),!0},window.Worker&&Blob&&window.URL&&window.URL.createObjectURL){var n=null;try{var a=new Blob(["'use strict';var forge;"+t.forgeScript],{type:"text/javascript"}),i=new Worker(window.URL.createObjectURL(a));t.decrypt=function(e,t,a){return null===n&&(n=e,i.postMessage({keyStr:t.keyStr,ivStr:t.ivStr,encrypted:a}),!0)},i.onmessage=function(e){e.data.decrypted&&(n.apply(null,[e.data.decrypted]),n=null)}}catch(t){e.Log.verbose(7,"AzureHtml5JS.Forge: Forge worker setup failed: "+t)}}else e.Log.verbose(7,"AzureHtml5JS.Forge: cannot start worker for Forge")}(e.Forge||(e.Forge={})),e.Forge}(f||(f={})),function e(t,n,a){function i(o,s){if(!n[o]){if(!t[o]){if(r)return r(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[o]={exports:{}};t[o][0].call(d.exports,function(e){return i(t[o][1][e]||e)},d,d.exports,e,t,n,a)}return n[o].exports}for(var r=!1,o=0;o<a.length;o++)i(a[o]);return i}({1:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){var a=e.length;if(a>0)if(t>=e[a-1][0])e.push([t,n]);else{for(var i=-1,r=a-1;r>=0&&!(t>e[r][0]);r--)i=r;i>=0&&e.splice(i,0,[t,n])}else e.push([t,n])}n.__esModule=!0;var r=a(e("./lib/cea608-parser.js")),o=a(e("./models/ccData.js")),s={extractCea608Data:function(e,t,n){var a,s,c,d,l=t.fetch("moof"),u=t.fetch("tfdt"),f=t.fetchAll("trun"),p=void 0,m=new DataView(e),_=new o.default,h=0;if(!f.length)return null;a=f[0],s=l._offset+a.data_offset,c=a.sample_count,p=s,d=u?u.baseMediaDecodeTime:10*n;for(var b=0;c>b;b++){for(var g=a.samples[b],v=d+h+g.sample_composition_time_offset,y=r.default.findCea608Nalus(m,p,g.sample_size),S=0;S<y.length;S++)for(var D=r.default.extractCea608DataFromRange(m,y[S]),I=0;2>I;I++)D[I].length>0&&i(_.fields[I],v,D[I]);h+=g.sample_duration,p+=g.sample_size}return _.startTime=d,_.endTime=d+h,_}};n.default=s,t.exports=n.default},{"./lib/cea608-parser.js":4,"./models/ccData.js":8}],2:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=a(e("global/window")),r=a(e("./lib/iso_boxer.js")),o=a(e("./cea608DataExtractor.js")),s=a(e("./textTrackManager.js")),c=a(e("./cueParser.js")),d=e("../ampDefs.js"),l=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.player=t,this.isInitialized=!1,this.isEventSetupCompleted=!1,this.onDownloadCompleted=this.onDownloadCompleted.bind(this),this.onDownloadDecrypted=this.onDownloadDecrypted.bind(this),this.onSeeking=this.onSeeking.bind(this),this.onLoadedMetadata=this.onLoadedMetadata.bind(this),this.onLoadedMetadata()}return e.prototype.init=function(){this.parsedSequenceNumbers=[],this.cueParser=new c.default(this.player.ampJsLoader),this.textTrackManager=new s.default(this.player),this.setupEventListener()},e.prototype.setupEventListener=function(){this.player.addEventListener(d.eventName.loadedmetadata,this.onLoadedMetadata),this.player.addEventListener(d.eventName.seeking,this.onSeeking)},e.prototype.onSeeking=function(){this.cueParser.reset()},e.prototype.onLoadedMetadata=function(){this.videoBufferData=this.player.videoBufferData(),this.videoBufferData&&!this.isEventSetupCompleted&&(this.videoBufferData.addEventListener(d.bufferDataEventName.downloadcompleted,this.onDownloadCompleted),this.videoBufferData.addEventListener(d.bufferDataEventName.downloaddecrypted,this.onDownloadDecrypted),this.isEventSetupCompleted=!0)},e.prototype.onDownloadDecrypted=function(){var e="flashSS"===this.player.currentTechName()?this.videoBufferData.downloadDecrypted.mediaDownload:this.videoBufferData.downloadDecrypted;this.processMediaDownload(e)},e.prototype.onDownloadCompleted=function(){this.processMediaDownload(this.videoBufferData.downloadCompleted.mediaDownload)},e.prototype.processMediaDownload=function(e){var t=e.data;if(t){this.cueParser.presentationTimeOffsetInSec||(this.cueParser.presentationTimeOffsetInSec=e.presentationTimeOffsetInSec);var n=r.default.parseBuffer(t),a=n.fetch("mfhd"),i=a?a.sequence_number:null;if(-1===this.parsedSequenceNumbers.indexOf(i)){var s=o.default.extractCea608Data(t,n,e.mediaTime);s&&s.fields&&s.fields[0].length&&(this.isInitialized||(this.isInitialized=!0,this.initializeTextTrack(),this.cueParser.initialize(this.player,this.textTrackManager.getAllTracks()),this.player.trigger(d.eventName.embeddedcaptionsfound)),this.cueParser.addCcDataToFieldParsers(s,n,e.timeScale),this.parsedSequenceNumbers.push(i))}}},e.prototype.initializeTextTrack=function(){this.player.textTrackSettings.setValues({justification:"center"});var e=this.player.options().cea708CaptionsSettings,t={label:e.label||"CEA708",lang:e.srclang,channel:"CC1"};this.textTrackManager.addTextTrack(t.label,t.lang,t.channel)},e.prototype.dispose=function(){this.player.removeEventListener(d.eventName.loadedmetadata,this.onLoadedMetadata),this.player.removeEventListener(d.eventName.seeking,this.onSeeking),this.videoBufferData&&(this.videoBufferData.removeEventListener(d.bufferDataEventName.downloadcompleted,this.onDownloadCompleted),this.videoBufferData.removeEventListener(d.bufferDataEventName.downloaddecrypted,this.onDownloadDecrypted)),this.textTrackManager&&(this.textTrackManager.removePreviousEmbeddedTextTracks(),this.textTrackManager=null),this.cueParser=null,this.isInitialized=!1},e}();i.default.Cea608Module=l,n.default=l,t.exports=n.default},{"../ampDefs.js":10,"./cea608DataExtractor.js":1,"./cueParser.js":3,"./lib/iso_boxer.js":6,"./textTrackManager.js":9,"global/window":35}],3:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=a(e("stream")),r=a(e("global/window")),o=a(e("./lib/cea608-parser.js")),s=a(e("./lib/cea608-towebvtt.js")),c=a(e("./models/captionsBuffer.js")),d=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.videoTimeScale=0,this.embeddedCea608FieldParsers=[],this.presentationTimeOffsetInSec=0,this.ampJsLoader=t}return e.prototype.reset=function(){this.embeddedCea608FieldParsers.forEach(function(e){return e.reset()})},e.prototype.initializeCueParser=function(){this.cueParser||(this.cueParser=new r.default.WebVTT.Parser(r.default,r.default.vttjs,r.default.WebVTT.StringDecoder()),this.cueParser.onparsingerror=function(e){return u.Logger.error(u.Logger.Area.cea608Module,"CEA608 module: an error happened: "+e)})},e.prototype.loadWebVTT=function(e){var t=this;"function"==typeof r.default.WebVTT?(this.initializeCueParser(),e()):this.ampJsLoader.load("vtt",function(){t.initializeCueParser(),e()})},e.prototype.addCcDataToFieldParsers=function(e,t,n){var a=this;this.loadWebVTT(function(){if(e){a.videoTimeScale=a.videoTimeScale||a.calculateVideoTimeScale(t,n);for(var i=0;i<a.embeddedCea608FieldParsers.length;i++){var r=e.fields[i],o=a.embeddedCea608FieldParsers[i];if(o){for(var s=0;s<r.length;s++)o.addData(r[s][0]/a.videoTimeScale,r[s][1]);e.endTime&&o.cueSplitAtTime(e.endTime/a.videoTimeScale)}}}})},e.prototype.calculateVideoTimeScale=function(e,t){var n=e.fetch("mdhd");return n?n.timescale:t||1e7},e.prototype.initialize=function(e,t){var n=this;this.loadWebVTT(function(){for(var e=function(e){var a=n.mapChannelToField(t[e].channel);if(!a)return"continue";var r=new c.default,d=new i.default;d.writable=!0,d.write=function(e){return r.append(e)};var l={newCue:n.createCueHandler(t[e],new s.default(d),r)};n.embeddedCea608FieldParsers[e]=new o.default.Cea608Parser(a,l,null)},a=0;a<t.length;a++)e(a)})},e.prototype.mapChannelToField=function(e){switch(e.toLowerCase()){case"cc1":return 1;case"cc3":return 2}return u.Logger.error(u.Logger.Area.cea608Module,"Channel '"+e+"' is not supported. Supported channels are CC1 and CC3."),null},e.prototype.createCueHandler=function(e,t,n){var a=this;return function(i,r,o){if((0===i||i)&&r&&o){t.newCue(i+a.presentationTimeOffsetInSec,r+a.presentationTimeOffsetInSec,o);var s=n.extract();a.cueParser.oncue=function(t){if(t.startTime!==t.endTime){var n=!0;e.cues.cues_.forEach(function(e){e.text===t.text&&e.startTime===t.startTime&&(n=!1)}),n&&e.addCue(t)}},a.cueParser.parse(s),a.cueParser.flush()}}},e}();n.default=d,t.exports=n.default},{"./lib/cea608-parser.js":4,"./lib/cea608-towebvtt.js":5,"./models/captionsBuffer.js":7,"global/window":35,stream:33}],4:[function(e,t,n){"use strict";!function(e){var t={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},n=function(e){var n=e;return t.hasOwnProperty(e)&&(n=t[e]),String.fromCharCode(n)},a=15,i=32,r={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},o={17:2,18:4,21:6,22:8,23:10,19:13,20:15},s={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},c={25:2,26:4,29:6,30:8,31:10,27:13,28:15},d=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],l={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e){this.verboseFilter[e],this.verboseLevel}},u=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t},f=function(e,t,n,a,i){this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=a||"black",this.flash=i||!1};f.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var a=t[n];e.hasOwnProperty(a)&&(this[a]=e[a])}},isDefault:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},equals:function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},copy:function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var p=function(e,t,n,a,i,r){this.uchar=e||" ",this.penState=new f(t,n,a,i,r)};p.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(e,t){this.uchar=e,this.penState.copy(t)},setPenState:function(e){this.penState.copy(e)},equals:function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},copy:function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},isEmpty:function(){return" "===this.uchar&&this.penState.isDefault()}};var m=function(){this.chars=[];for(var e=0;i>e;e++)this.chars.push(new p);this.pos=0,this.currPenState=new f};m.prototype={equals:function(e){for(var t=!0,n=0;i>n;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},copy:function(e){for(var t=0;i>t;t++)this.chars[t].copy(e.chars[t])},isEmpty:function(){for(var e=!0,t=0;i>t;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},setCursor:function(e){this.pos!==e&&(this.pos=e),this.pos<0?(l.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>i&&(l.log("ERROR","Too large cursor position "+this.pos),this.pos=i)},moveCursor:function(e){var t=this.pos+e;if(e>1)for(var n=this.pos+1;t+1>n&&i>n;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(e){e>=144&&this.backSpace();var t=n(e);return this.pos>=i?void l.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),void(this.pos<31?this.moveCursor(1):l.log("WARNING: cursor at end of chars. Cannot advance cursor.")))},clearFromPos:function(e){var t;for(t=e;i>t;t++)this.chars[t].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var e=[],t=!0,n=0;i>n;n++){var a=this.chars[n].uchar;" "!==a&&(t=!1),e.push(a)}return t?"":e.join("")},setPenStyles:function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}};var _=function(){this.rows=[];for(var e=0;a>e;e++)this.rows.push(new m);this.currRow=14,this.nrRollUpRows=null,this.reset()};_.prototype={reset:function(){for(var e=0;a>e;e++)this.rows[e].clear();this.currRow=14},equals:function(e){for(var t=!0,n=0;a>n;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},copy:function(e){for(var t=0;a>t;t++)this.rows[t].copy(e.rows[t])},isEmpty:function(){for(var e=!0,t=0;a>t;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(e){this.rows[this.currRow].insertChar(e)},setPen:function(e){this.rows[this.currRow].setPenStyles(e)},moveCursor:function(e){this.rows[this.currRow].moveCursor(e)},setCursor:function(e){l.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},setPAC:function(e){l.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.currRow=t;var n=this.rows[this.currRow];if(null!==e.indent){var a=e.indent,i=Math.max(a-1,0);n.setCursor(e.indent),e.color=n.chars[i].penState.foreground}var r={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(r)},setBkgData:function(e){l.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},setRollUpRows:function(e){this.nrRollUpRows=e},rollUp:function(){if(null!==this.nrRollUpRows){l.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),l.log("INFO","Rolling up")}else l.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(e){e=e||!1;for(var t=[],n="",i=-1,r=0;a>r;r++){var o=this.rows[r].getTextString();o&&(i=r+1,t.push(e?"Row "+i+': "'+o+'"':o.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n},getTextAndFormat:function(){return this.rows}};var h=function(e,t){this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new _,this.nonDisplayedMemory=new _,this.lastOutputScreen=new _,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};h.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(e){this.outputFilter=e},setPAC:function(e){this.writeScreen.setPAC(e)},setBkgData:function(e){this.writeScreen.setBkgData(e)},setMode:function(e){e!==this.mode&&(this.mode=e,l.log("INFO","MODE="+e),"MODE_POP-ON"==this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},insertChars:function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";l.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),("MODE_PAINT-ON"===this.mode||"MODE_ROLL-UP"===this.mode)&&(l.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){l.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){l.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){l.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(e){l.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},cc_FON:function(){l.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){l.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){l.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){l.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){l.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){l.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){l.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(l.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,l.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(e){l.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},cc_MIDROW:function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var n=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][n]}l.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},outputDataUpdate:function(){var e=l.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}};var b=function(e,t,n){this.field=e||1,this.outputs=[t,n],this.channels=[new h(1,t),new h(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}};b.prototype={getHandler:function(e){return this.channels[e].getHandler()},setHandler:function(e,t){this.channels[e].setHandler(t)},addData:function(e,t){var n,a,i,r=!1;this.lastTime=e,l.setTime(e);for(var o=0;o<t.length;o+=2)a=127&t[o],i=127&t[o+1],0!==a||0!==i?(l.log("DATA","["+u([t[o],t[o+1]])+"] -> ("+u([a,i])+")"),(n=this.parseCmd(a,i))||(n=this.parseMidrow(a,i)),n||(n=this.parsePAC(a,i)),n||(n=this.parseBackgroundAttributes(a,i)),!n&&(r=this.parseChars(a,i))&&(this.currChNr&&this.currChNr>=0?this.channels[this.currChNr-1].insertChars(r):l.log("WARNING","No channel found yet. TEXT-MODE?")),n?this.dataCounters.cmd+=2:r?this.dataCounters.char+=2:(this.dataCounters.other+=2,l.log("WARNING","Couldn't parse cleaned data "+u([a,i])+" orig: "+u([t[o],t[o+1]])))):this.dataCounters.padding+=2},parseCmd:function(e,t){var n;if(!((20===e||28===e)&&t>=32&&47>=t||(23===e||31===e)&&t>=33&&35>=t))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,l.log("DEBUG","Repeated command ("+u([e,t])+") is dropped"),!0;n=20===e||23===e?1:2;var a=this.channels[n-1];return 20===e||28===e?32===t?a.cc_RCL():33===t?a.cc_BS():34===t?a.cc_AOF():35===t?a.cc_AON():36===t?a.cc_DER():37===t?a.cc_RU(2):38===t?a.cc_RU(3):39===t?a.cc_RU(4):40===t?a.cc_FON():41===t?a.cc_RDC():42===t?a.cc_TR():43===t?a.cc_RTD():44===t?a.cc_EDM():45===t?a.cc_CR():46===t?a.cc_ENM():47===t&&a.cc_EOC():a.cc_TO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},parseMidrow:function(e,t){var n=null;return(17===e||25===e)&&t>=32&&47>=t&&((n=17===e?1:2)!==this.currChNr?(l.log("ERROR","Mismatch channel in midrow parsing"),!1):(this.channels[n-1].cc_MIDROW(t),l.log("DEBUG","MIDROW ("+u([e,t])+")"),!0))},parsePAC:function(e,t){var n,a;if(!((e>=17&&23>=e||e>=25&&31>=e)&&t>=64&&127>=t||(16===e||24===e)&&t>=64&&95>=t))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;n=23>=e?1:2,a=t>=64&&95>=t?1===n?r[e]:s[e]:1===n?o[e]:c[e];var i=this.interpretPAC(a,t);return this.channels[n-1].setPAC(i),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},interpretPAC:function(e,t){var n,a={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,a.underline=1==(1&n),13>=n?a.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:15>=n?(a.italics=!0,a.color="white"):a.indent=4*Math.floor((n-16)/2),a},parseChars:function(e,t){var a,i=null,r=null,o=null;if(e>=25?(i=2,o=e-8):(i=1,o=e),o>=17&&19>=o?(a=17===o?t+80:18===o?t+112:t+144,l.log("INFO","Special char '"+n(a)+"' in channel "+i),r=[a]):e>=32&&127>=e&&(r=0===t?[e]:[e,t]),r){var s=u(r);l.log("DEBUG","Char codes =  "+s.join(",")),this.lastCmdA=null,this.lastCmdB=null}return r},parseBackgroundAttributes:function(e,t){var n,a,i;return!!((16===e||24===e)&&t>=32&&47>=t||(23===e||31===e)&&t>=45&&47>=t)&&(n={},16===e||24===e?(a=Math.floor((t-32)/2),n.background=d[a],t%2==1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0)),i=24>e?1:2,this.channels[i-1].setBkgData(n),this.lastCmdA=null,this.lastCmdB=null,!0)},reset:function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)}},e.logger=l,e.PenState=f,e.CaptionScreen=_,e.Cea608Parser=b,e.findCea608Nalus=function(e,t,n){for(var a=0,i=t,r=[],o=function(e,t,n,a){if(4!==e||8>t)return null;var i=n.getUint8(a),r=n.getUint16(a+1),o=n.getUint32(a+3),s=n.getUint8(a+7);return 181==i&&49==r&&1195456820==o&&3==s};t+n>i;){if(a=e.getUint32(i),6==(31&e.getUint8(i+4)))for(var s=i+5,c=-1;i+4+a-1>s;){c=0;for(var d=255;255===d;)c+=d=e.getUint8(s),s++;var l=0;for(d=255;255===d;)l+=d=e.getUint8(s),s++;o(c,l,e,s)&&r.push([s,l]),s+=l}i+=a+4}return r},e.extractCea608DataFromRange=function(e,t){var n=t[0],a=[[],[]];n+=8;var i=31&e.getUint8(n);n+=2;for(var r=0;i>r;r++){var o=e.getUint8(n),s=4&o,c=3&o;n++;var d=e.getUint8(n);n++;var l=e.getUint8(n);n++,s&&(127&d)+(127&l)!=0&&(0===c?(a[0].push(d),a[0].push(l)):1===c&&(a[1].push(d),a[1].push(l)))}return a}}(void 0===n?(void 0).cea608parser={}:n)},{}],5:[function(e,t,n){"use strict";n.__esModule=!0;var a=e("./cea608-parser.js"),i=function(e,t,n){this.stream=e,this.channelNr=1|t,this.combineConsecutiveRows=!0|n,this.initWritten=!1};i.prototype={newCue:function(e,t,n){this.initWritten||this.writeInit();var a=this.formatTime(e),i=this.formatTime(t);this.writeCue(a,i,n)},writeToStream:function(e){this.stream&&this.stream.write(e)},formatTime:function(e){var t,n,a,i=Math.floor(e),r=e-i,o=function(e){var t=e.toString();return 1===t.length?"0"+t:t};return i-=3600*(t=Math.floor(i/3600)),i-=60*(n=Math.floor(i/60)),a=Math.floor(1e3*r),o(t)+":"+o(n)+":"+o(i)+"."+function(e){for(var t=e.toString(),n=3-t.length;n>0;)t="0"+t,n--;return t}(a)},writeInit:function(e,t){this.writeToStream("WEBVTT\nStyling=CEA608\nKind=Caption\nChannel=CC"+this.channelNr+"\n"),t&&(this.lastScreen.copy(t),this.lastTime=e),this.initWritten=!0},writeCue:function(e,t,n){for(var a=-2,i=0;i<n.rows.length;i++){var r=n.rows[i];if(!r.isEmpty()){if(!this.combineConsecutiveRows||i!==a+1){var o=i+1;this.writeToStream("\n"+e+" --\x3e "+t+" line:"+o+"\n")}this.outputTextRow(r),this.writeToStream("\n"),a=i}}},outputTextRow:function(e){for(var t=new a.PenState,n=null,i=null,r=0;r<e.chars.length;r++){var o=!1;if(((n=(i=e.chars[r]).penState).foreground!==t.foreground||n.background!==t.background||n.flash!==t.flash)&&(("white"!==t.foreground||"black"!==t.background||t.flash)&&this.writeToStream("</c>"),o=!0),n.underline!==t.underline&&t.underline&&this.writeToStream("</u>"),n.italics!==t.italics&&t.italics&&this.writeToStream("</i>"),n.italics!==t.italics&&(n.italics&&this.writeToStream("<i>"),t.italics=n.italics),n.underline!==t.underline&&n.underline&&this.writeToStream("<u>"),o&&("white"!==n.foreground||"black"!==n.background||n.flash)){var s=[],c=n.background;if("transparent"===n.background)s.push("transparent");else{var d=c.split("_");2===d.length&&"semi"===d[1]&&s.push("semi-transparent"),"black"!==c&&s.push("bg_"+d[0])}"white"!==n.foreground&&s.push(n.foreground),n.flash&&s.push("blink");var l=s.join(".");this.writeToStream("<c."+l+">")}this.writeToStream(i.uchar),t.copy(n)}("white"!==n.foreground||"black"!==n.background)&&this.writeToStream("</c>"),n.underline&&this.writeToStream("</u>"),n.italics&&this.writeToStream("</i>")},close:function(){this.stream&&(this.stream.end(),this.stream=null)}},n.default=i,t.exports=n.default},{"./cea608-parser.js":4}],6:[function(e,t,n){"use strict";var a={parseBuffer:function(e){return new i(e).parse()},addBoxParser:function(e,t){"string"==typeof e&&"function"==typeof t&&(r.prototype._boxParsers[e]=t)},Utils:{}};a.Utils.dataViewToString=function(e,t){var n=t||"utf-8";if("undefined"!=typeof TextDecoder)return new TextDecoder(n).decode(e);var a=[],i=0;if("utf-8"===n)for(;i<e.byteLength;){var r=e.getUint8(i++);128>r||(224>r?(r=(31&r)<<6,r|=63&e.getUint8(i++)):240>r?(r=(15&r)<<12,r|=(63&e.getUint8(i++))<<6,r|=63&e.getUint8(i++)):(r=(7&r)<<18,r|=(63&e.getUint8(i++))<<12,r|=(63&e.getUint8(i++))<<6,r|=63&e.getUint8(i++))),a.push(String.fromCharCode(r))}else for(;i<e.byteLength;)a.push(String.fromCharCode(e.getUint8(i++)));return a.join("")},void 0!==n&&(n.parseBuffer=a.parseBuffer,n.addBoxParser=a.addBoxParser,n.Utils=a.Utils),a.Cursor=function(e){this.offset=void 0===e?0:e};var i=function(e){this._raw=new DataView(e),this._cursor=new a.Cursor,this.boxes=[]};i.prototype.fetch=function(e){var t=this.fetchAll(e,!0);return t.length?t[0]:null},i.prototype.fetchAll=function(e,t){var n=[];return i._sweep.call(this,e,n,t),n},i.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var e=r.parse(this);if(void 0===e.type)break;this.boxes.push(e)}return this},i._sweep=function(e,t,n){for(var a in this.type&&this.type==e&&t.push(this),this.boxes){if(t.length&&n)return;i._sweep.call(this.boxes[a],e,t,n)}};var r=function(){this._cursor=new a.Cursor};r.parse=function(e){var t=new r;return t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,t._parseBox(),e._cursor.offset=t._raw.byteOffset+t._raw.byteLength,t},r.prototype._readInt=function(e){var t=null;switch(e){case 8:t=this._raw.getInt8(this._cursor.offset-this._raw.byteOffset);break;case 16:t=this._raw.getInt16(this._cursor.offset-this._raw.byteOffset);break;case 32:t=this._raw.getInt32(this._cursor.offset-this._raw.byteOffset);break;case 64:var n=this._raw.getInt32(this._cursor.offset-this._raw.byteOffset),a=this._raw.getInt32(this._cursor.offset-this._raw.byteOffset+4);t=n*Math.pow(2,32)+a}return this._cursor.offset+=e>>3,t},r.prototype._readUint=function(e){var t,n,a=null;switch(e){case 8:a=this._raw.getUint8(this._cursor.offset-this._raw.byteOffset);break;case 16:a=this._raw.getUint16(this._cursor.offset-this._raw.byteOffset);break;case 24:a=((t=this._raw.getUint16(this._cursor.offset-this._raw.byteOffset))<<8)+(n=this._raw.getUint8(this._cursor.offset-this._raw.byteOffset+2));break;case 32:a=this._raw.getUint32(this._cursor.offset-this._raw.byteOffset);break;case 64:t=this._raw.getUint32(this._cursor.offset-this._raw.byteOffset),n=this._raw.getUint32(this._cursor.offset-this._raw.byteOffset+4),a=t*Math.pow(2,32)+n}return this._cursor.offset+=e>>3,a},r.prototype._readString=function(e){for(var t="",n=0;e>n;n++){var a=this._readUint(8);t+=String.fromCharCode(a)}return t},r.prototype._readTerminatedString=function(){for(var e="";this._cursor.offset-this._offset<this._raw.byteLength;){var t=this._readUint(8);if(0===t)break;e+=String.fromCharCode(t)}return e},r.prototype._readTemplate=function(e){return this._readUint(e/2)+this._readUint(e/2)/Math.pow(2,e/2)},r.prototype._readData=function(e){var t=e>0?e:this._raw.byteLength-(this._cursor.offset-this._offset),n=new DataView(this._raw.buffer,this._cursor.offset,t);return this._cursor.offset+=t,n},r.prototype._parseBox=function(){if(this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this.size=this._readUint(32),this.type=this._readString(4),1==this.size&&(this.largesize=this._readUint(64)),"uuid"==this.type&&(this.usertype=this._readString(16)),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset,this._raw.byteLength-this._cursor.offset);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(-1!==this._boxContainers.indexOf(this.type)?this._parseContainerBox():this._boxParsers[this.type]&&this._boxParsers[this.type].call(this))}},r.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},r.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(r.parse(this))},r.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc"],r.prototype._boxParsers={},r.prototype._boxParsers.avc1=function(){this.reserved1=[this._readUint(8),this._readUint(8),this._readUint(8),this._readUint(8),this._readUint(8),this._readUint(8)],this.data_reference_index=this._readUint(16),this.pre_defined1=this._readUint(16),this.reserved2=this._readUint(16),this.pre_defined2=[this._readUint(32),this._readUint(32),this._readUint(32)],this.width=this._readUint(16),this.height=this._readUint(16),this.horizresolution=this._readTemplate(32),this.vertresolution=this._readTemplate(32),this.reserved3=this._readUint(32),this.frame_count=this._readUint(16);var e=this._readUint(8);this.compressorname=this._readString(e);for(var t=0;31-e>t;t++)this._readUint(8);this.depth=this._readUint(16),this.pre_defined3=this._readInt(16),this.config=this._readData()},r.prototype._boxParsers.dref=function(){this._parseFullBox(),this.entry_count=this._readUint(32),this.entries=[];for(var e=0;e<this.entry_count;e++)this.entries.push(r.parse(this))},r.prototype._boxParsers.elst=function(){this._parseFullBox(),this.entry_count=this._readUint(32),this.entries=[];for(var e=1;e<=this.entry_count;e++){var t={};1==this.version?(t.segment_duration=this._readUint(64),t.media_time=this._readInt(64)):(t.segment_duration=this._readUint(32),t.media_time=this._readInt(32)),t.media_rate_integer=this._readInt(16),t.media_rate_fraction=this._readInt(16),this.entries.push(t)}},r.prototype._boxParsers.emsg=function(){this._parseFullBox(),this.scheme_id_uri=this._readTerminatedString(),this.value=this._readTerminatedString(),this.timescale=this._readUint(32),this.presentation_time_delta=this._readUint(32),this.event_duration=this._readUint(32),this.id=this._readUint(32),this.message_data=new DataView(this._raw.buffer,this._cursor.offset,this._raw.byteLength-(this._cursor.offset-this._offset))},r.prototype._boxParsers.free=r.prototype._boxParsers.skip=function(){this.data=new DataView(this._raw.buffer,this._cursor.offset,this._raw.byteLength-(this._cursor.offset-this._offset))},r.prototype._boxParsers.ftyp=r.prototype._boxParsers.styp=function(){for(this.major_brand=this._readString(4),this.minor_version=this._readUint(32),this.compatible_brands=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.compatible_brands.push(this._readString(4))},r.prototype._boxParsers.hdlr=function(){this._parseFullBox(),this.pre_defined=this._readUint(32),this.handler_type=this._readString(4),this.reserved=[this._readUint(32),this._readUint(32),this._readUint(32)],this.name=this._readTerminatedString()},r.prototype._boxParsers.mdat=function(){this.data=this._readData()},r.prototype._boxParsers.mdhd=function(){this._parseFullBox(),1==this.version?(this.creation_time=this._readUint(64),this.modification_time=this._readUint(64),this.timescale=this._readUint(32),this.duration=this._readUint(64)):(this.creation_time=this._readUint(32),this.modification_time=this._readUint(32),this.timescale=this._readUint(32),this.duration=this._readUint(32));var e=this._readUint(16);this.pad=e>>15,this.language=String.fromCharCode(96+(e>>10&31),96+(e>>5&31),96+(31&e)),this.pre_defined=this._readUint(16)},r.prototype._boxParsers.mehd=function(){this._parseFullBox(),this.fragment_duration=this._readUint(1==this.version?64:32)},r.prototype._boxParsers.mfhd=function(){this._parseFullBox(),this.sequence_number=this._readUint(32)},r.prototype._boxParsers.mfro=function(){this._parseFullBox(),this.mfra_size=this._readUint(32)},r.prototype._boxParsers.mp4a=function(){this.reserved1=[this._readUint(8),this._readUint(8),this._readUint(8),this._readUint(8),this._readUint(8),this._readUint(8)],this.data_reference_index=this._readUint(16),this.reserved2=[this._readUint(32),this._readUint(32)],this.channelcount=this._readUint(16),this.samplesize=this._readUint(16),this.pre_defined=this._readUint(16),this.reserved3=this._readUint(16),this.samplerate=this._readTemplate(32),this.esds=this._readData()},r.prototype._boxParsers.mvhd=function(){var e;for(this._parseFullBox(),1==this.version?(this.creation_time=this._readUint(64),this.modification_time=this._readUint(64),this.timescale=this._readUint(32),this.duration=this._readUint(64)):(this.creation_time=this._readUint(32),this.modification_time=this._readUint(32),this.timescale=this._readUint(32),this.duration=this._readUint(32)),this.rate=this._readTemplate(32),this.volume=this._readTemplate(16),this.reserved1=this._readUint(16),this.reserved2=[this._readUint(32),this._readUint(32)],this.matrix=[],e=0;9>e;e++)this.matrix.push(this._readTemplate(32));for(this.pre_defined=[],e=0;6>e;e++)this.pre_defined.push(this._readUint(32));this.next_track_ID=this._readUint(32)},r.prototype._boxParsers.payl=function(){var e=new DataView(this._raw.buffer,this._cursor.offset,this._raw.byteLength-(this._cursor.offset-this._offset));this.cue_text=a.Utils.dataViewToString(e)},r.prototype._boxParsers.sidx=function(){this._parseFullBox(),this.reference_ID=this._readUint(32),this.timescale=this._readUint(32),0===this.version?(this.earliest_presentation_time=this._readUint(32),this.first_offset=this._readUint(32)):(this.earliest_presentation_time=this._readUint(64),this.first_offset=this._readUint(64)),this.reserved=this._readUint(16),this.reference_count=this._readUint(16),this.references=[];for(var e=0;e<this.reference_count;e++){var t={},n=this._readUint(32);t.reference_type=n>>31&1,t.referenced_size=2147483647&n,t.subsegment_duration=this._readUint(32);var a=this._readUint(32);t.starts_with_SAP=a>>31&1,t.SAP_type=a>>28&7,t.SAP_delta_time=268435455&a,this.references.push(t)}},r.prototype._boxParsers.smhd=function(){this._parseFullBox(),this.balance=this._readTemplate(16),this.reserved=this._readUint(16)},r.prototype._boxParsers.ssix=function(){this._parseFullBox(),this.subsegment_count=this._readUint(32),this.subsegments=[];for(var e=0;e<this.subsegment_count;e++){var t={};t.ranges_count=this._readUint(32),t.ranges=[];for(var n=0;n<t.ranges_count;n++){var a={};a.level=this._readUint(8),a.range_size=this._readUint(24),t.ranges.push(a)}this.subsegments.push(t)}},r.prototype._boxParsers.stsd=function(){this._parseFullBox(),this.entry_count=this._readUint(32),this.entries=[];for(var e=0;e<this.entry_count;e++)this.entries.push(r.parse(this))},r.prototype._boxParsers.subs=function(){this._parseFullBox(),this.entry_count=this._readUint(32),this.entries=[];for(var e=0;e<this.entry_count;e++){var t={};t.sample_delta=this._readUint(32),t.subsample_count=this._readUint(16),t.subsamples=[];for(var n=0;n<t.subsample_count;n++){var a={};a.subsample_size=this._readUint(1&this.version?32:16),a.subsample_priority=this._readUint(8),a.discardable=this._readUint(8),a.codec_specific_parameters=this._readUint(32),t.subsamples.push(a)}this.entries.push(t)}},r.prototype._boxParsers.tfdt=function(){this._parseFullBox(),this.baseMediaDecodeTime=this._readUint(1==this.version?64:32)},r.prototype._boxParsers.tfhd=function(){this._parseFullBox(),this.track_ID=this._readUint(32),1&this.flags&&(this.base_data_offset=this._readUint(64)),2&this.flags&&(this.sample_description_offset=this._readUint(32)),8&this.flags&&(this.default_sample_duration=this._readUint(32)),16&this.flags&&(this.default_sample_size=this._readUint(32)),32&this.flags&&(this.default_sample_flags=this._readUint(32))},r.prototype._boxParsers.tfra=function(){this._parseFullBox(),this.track_ID=this._readUint(32),this._packed=this._readUint(32),this.reserved=this._packed>>>6,this.length_size_of_traf_num=(this._packed&&0xffff00000000)>>>4,this.length_size_of_trun_num=(this._packed&&4294901760)>>>2,this.length_size_of_sample_num=this._packed&&255,this.number_of_entry=this._readUint(32),this.entries=[];for(var e=0;e<this.number_of_entry;e++){var t={};1==this.version?(t.time=this._readUint(64),t.moof_offset=this._readUint(64)):(t.time=this._readUint(32),t.moof_offset=this._readUint(32)),t.traf_number=this._readUint(8*(this.length_size_of_traf_num+1)),t.trun_number=this._readUint(8*(this.length_size_of_trun_num+1)),t.sample_number=this._readUint(8*(this.length_size_of_sample_num+1)),this.entries.push(t)}},r.prototype._boxParsers.tkhd=function(){this._parseFullBox(),1==this.version?(this.creation_time=this._readUint(64),this.modification_time=this._readUint(64),this.track_ID=this._readUint(32),this.reserved1=this._readUint(32),this.duration=this._readUint(64)):(this.creation_time=this._readUint(32),this.modification_time=this._readUint(32),this.track_ID=this._readUint(32),this.reserved1=this._readUint(32),this.duration=this._readUint(32)),this.reserved2=[this._readUint(32),this._readUint(32)],this.layer=this._readUint(16),this.alternate_group=this._readUint(16),this.volume=this._readTemplate(16),this.reserved3=this._readUint(16),this.matrix=[];for(var e=0;9>e;e++)this.matrix.push(this._readTemplate(32));this.width=this._readTemplate(32),this.height=this._readTemplate(32)},r.prototype._boxParsers.trex=function(){this._parseFullBox(),this.track_ID=this._readUint(32),this.default_sample_description_index=this._readUint(32),this.default_sample_duration=this._readUint(32),this.default_sample_size=this._readUint(32),this.default_sample_flags=this._readUint(32)},r.prototype._boxParsers.trun=function(){this._parseFullBox(),this.sample_count=this._readUint(32),1&this.flags&&(this.data_offset=this._readInt(32)),4&this.flags&&(this.first_sample_flags=this._readUint(32)),this.samples=[];for(var e=0;e<this.sample_count;e++){var t={};256&this.flags&&(t.sample_duration=this._readUint(32)),512&this.flags&&(t.sample_size=this._readUint(32)),1024&this.flags&&(t.sample_flags=this._readUint(32)),2048&this.flags&&(t.sample_composition_time_offset=this._readInt(32)),this.samples.push(t)}},r.prototype._boxParsers["url "]=r.prototype._boxParsers["urn "]=function(){this._parseFullBox(),"urn "===this.type&&(this.name=this._readTerminatedString()),this.location=this._readTerminatedString()},r.prototype._boxParsers.vlab=function(){var e=new DataView(this._raw.buffer,this._cursor.offset,this._raw.byteLength-(this._cursor.offset-this._offset));this.source_label=a.Utils.dataViewToString(e)},r.prototype._boxParsers.vmhd=function(){this._parseFullBox(),this.graphicsmode=this._readUint(16),this.opcolor=[this._readUint(16),this._readUint(16),this._readUint(16)]},r.prototype._boxParsers.vttC=function(){var e=new DataView(this._raw.buffer,this._cursor.offset,this._raw.byteLength-(this._cursor.offset-this._offset));this.config=a.Utils.dataViewToString(e)},r.prototype._boxParsers.vtte=function(){}},{}],7:[function(e,t,n){"use strict";n.__esModule=!0,function(){var e=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._captions=""}return e.prototype.get=function(){return this._captions},e.prototype.append=function(e){this._captions+=e},e.prototype.clear=function(){this._captions=""},e.prototype.extract=function(){var e=this.get().slice();return this.clear(),e},e}();n.default=e}(),t.exports=n.default},{}],8:[function(e,t,n){"use strict";n.__esModule=!0,n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.startTime=null,this.endTime=null,this.fields=[[],[]]},t.exports=n.default},{}],9:[function(e,t,n){"use strict";n.__esModule=!0;var a=function(e){return e&&e.__esModule?e:{default:e}}(e("../video.js/src/js/tracks/track-enums.js")),i=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.cea608TextTracks=[],this.player=t}return e.prototype.getAllTracks=function(){return this.cea608TextTracks},e.prototype.getTrackById=function(e){for(var t=this.player.textTracks(),n=0;n<t.length;n++)if(t[n].id===e)return t[n];return null},e.prototype.addTextTrack=function(e,t,n){var i=this.player.addTextTrack(a.default.TextTrackKind.captions,e,t);return i.channel=n,this.cea608TextTracks.push(i),i},e.prototype.removePreviousEmbeddedTextTracks=function(){if(this.cea608TextTracks.length){var e=this;this.cea608TextTracks.forEach(function(t){var n=e.getTrackById(t.id);n&&e.player.removeRemoteTextTrack(n)}),this.cea608TextTracks=[]}},e}();n.default=i,t.exports=n.default},{"../video.js/src/js/tracks/track-enums.js":11}],10:[function(e,t,n){"use strict";n.__esModule=!0,n.protectionType={AES:"AES"},n.CorsConfig={Anonymous:"Anonymous",UseCredentials:"UseCredentials"},n.StreamingFormatMimeType={Smooth:"application/vnd.ms-sstr+xml",Dash:"application/dash+xml",HLS:"application/vnd.apple.mpegurl"},n.eventName={canplaythrough:"canplaythrough",durationchange:"durationchange",ended:"ended",error:"error",fullscreenchange:"fullscreenchange",loadstart:"loadstart",loadedmetadata:"loadedmetadata",loadeddata:"loadeddata",pause:"pause",play:"play",playing:"playing",seeked:"seeked",seeking:"seeking",timeupdate:"timeupdate",volumechange:"volumechange",waiting:"waiting",downloadbitratechanged:"downloadbitratechanged",playbackbitratechanged:"playbackbitratechanged",sourceset:"sourceset",ratechange:"ratechange",disposing:"disposing",emsgAvailable:"emsgAvailable",start:"start",firstquartile:"firstquartile",midpoint:"midpoint",thirdquartile:"thirdquartile",complete:"complete",mute:"mute",unmute:"unmute",rewind:"rewind",resume:"resume",fullscreen:"fullscreen",exitfullscreen:"exitfullscreen",click:"tech-click",livestartupretry:"livestartupretry",embeddedcaptionsfound:"embeddedcaptionsfound",decryptorInitialized:"decryptorInitialized",unsupportedTracksRemoved:"unsupportedTracksRemoved",attemptingSrcFallback:"attemptingSrcFallback",srcSelected:"srcSelected",onDownloadRequestStarted:"onDownloadRequestStarted",onDownloadRequestEnded:"onDownloadRequestEnded",enhancedTrackReady:"enhancedTrackReady",prefetchedManifestPromiseResolved:"prefetchedManifestPromiseResolved"},n.internalEventName={menuadded:"menuadded",currentTimeChanging:"currentTimeChanging",playingAtLiveDVREdge:"playingAtLiveDVREdge",playingAtStartDVREdge:"playingAtStartDVREdge",playingInDVR:"playingInDVR"},n.streamEventName={trackselected:"trackselected"},n.streamListEventName={streamselected:"streamselected",streamindexinvalid:"streamindexinvalid",streamselectnotsupported:"streamselectnotsupported"};var a={abortedErrStart:1048576,abortedErrUnknown:1048576,abortedErrNotImplemented:1048577,abortedErrHttpMixedContentBlocked:1048578,abortedErrEnd:2097151,networkErrStart:2097152,networkErrUnknown:2097152,networkErrHttpResponseBegin:2097552,networkErrHttpBadUrlFormat:2097552,networkErrHttpUserAuthRequired:2097553,networkErrHttpUserForbidden:2097555,networkErrHttpUrlNotFound:2097556,networkErrHttpNotAllowed:2097557,networkErrResourceConflict:2097561,networkErrHttpGone:2097562,networkErrHttpPreconditionFailed:2097564,networkErrHttpInternalServerFailure:2097652,networkErrHttpBadGateway:2097654,networkErrHttpServiceUnavailable:2097655,networkErrHttpGatewayTimeout:2097656,networkErrHttpResponseEnd:2097751,networkErrTimeout:2097752,networkErrError:2097753,networkErrAbort:2097754,networkErrNoInternet:2097755,networkErrBadRequestUpdate:2097756,networkErrEnd:3145727,decodeErrStart:3145728,decodeErrUnknown:3145728,decodeErrEnd:4194303,srcErrStart:4194304,srcErrUnknown:4194304,srcErrParsePresentation:4194305,srcErrParseSegment:4194306,srcErrUnsupportedPresentation:4194307,srcErrInvalidSegment:4194308,srcErrLiveNoSegments:4194309,srcErrEnd:5242879,encryptErrStart:5242880,encryptErrUnknown:5242880,encryptErrDecrypterNotFound:5242881,encryptErrDecrypterInit:5242882,encryptErrDecrypterNotSupported:5242883,encryptErrKeyAcquire:5242884,encryptErrDecryption:5242885,encryptErrLicenseAcquire:5242886,encryptErrEnd:6291455,srcPlayerMismatchStart:6291456,srcPlayerMismatchUnknown:6291456,srcPlayerMismatchFlashNotInstalled:6291457,srcPlayerMismatchEnd:7340031,errUnknown:16711680};n.errorCode=a;var i={400:a.networkErrHttpBadUrlFormat,401:a.networkErrHttpUserAuthRequired,403:a.networkErrHttpUserForbidden,404:a.networkErrHttpUrlNotFound,405:a.networkErrHttpNotAllowed,410:a.networkErrHttpGone,412:a.networkErrHttpPreconditionFailed,500:a.networkErrHttpInternalServerFailure,502:a.networkErrHttpBadGateway,503:a.networkErrHttpServiceUnavailable,504:a.networkErrHttpGatewayTimeout};n.httpErrorCode=i,n.bufferDataEventName={downloadrequested:"downloadrequested",downloadcompleted:"downloadcompleted",downloaddecrypted:"downloaddecrypted",downloadfailed:"downloadfailed"},n.downloadableMediaType={video:"video",videoWithCC:"videoWithCC",audio:"audio",transcript:"transcript"}},{}],11:[function(e,t,n){"use strict";n.__esModule=!0,n.default={VideoTrackKind:{alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},AudioTrackKind:{alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},TextTrackKind:{subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},TextTrackMode:{disabled:"disabled",hidden:"hidden",showing:"showing"}},t.exports=n.default},{}],12:[function(e,t,n){!function(e){"use strict";function t(e){var t=e.charCodeAt(0);return t===a||t===c?62:t===i||t===d?63:r>t?-1:r+10>t?t-r+26+26:s+26>t?t-s:o+26>t?t-o+26:void 0}var n="undefined"!=typeof Uint8Array?Uint8Array:Array,a="+".charCodeAt(0),i="/".charCodeAt(0),r="0".charCodeAt(0),o="a".charCodeAt(0),s="A".charCodeAt(0),c="-".charCodeAt(0),d="_".charCodeAt(0);e.toByteArray=function(e){function a(e){d[u++]=e}var i,r,o,s,c,d;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var l=e.length;c="="===e.charAt(l-2)?2:"="===e.charAt(l-1)?1:0,d=new n(3*e.length/4-c),o=c>0?e.length-4:e.length;var u=0;for(i=0,r=0;o>i;i+=4,r+=3)a((16711680&(s=t(e.charAt(i))<<18|t(e.charAt(i+1))<<12|t(e.charAt(i+2))<<6|t(e.charAt(i+3))))>>16),a((65280&s)>>8),a(255&s);return 2===c?a(255&(s=t(e.charAt(i))<<2|t(e.charAt(i+1))>>4)):1===c&&(a((s=t(e.charAt(i))<<10|t(e.charAt(i+1))<<4|t(e.charAt(i+2))>>2)>>8&255),a(255&s)),d},e.fromByteArray=function(e){function t(e){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e)}function n(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var a,i,r,o=e.length%3,s="";for(a=0,r=e.length-o;r>a;a+=3)s+=n(i=(e[a]<<16)+(e[a+1]<<8)+e[a+2]);switch(o){case 1:s+=t((i=e[e.length-1])>>2),s+=t(i<<4&63),s+="==";break;case 2:s+=t((i=(e[e.length-2]<<8)+e[e.length-1])>>10),s+=t(i>>4&63),s+=t(i<<2&63),s+="="}return s}}(void 0===n?this.base64js={}:n)},{}],13:[function(){},{}],14:[function(e,n,a){(function(t){"use strict";function n(){return i.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(e){return this instanceof i?(i.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof e?r(this,e):"string"==typeof e?o(this,e,arguments.length>1?arguments[1]:"utf8"):s(this,e)):arguments.length>1?new i(e,arguments[1]):new i(e)}function r(e,t){if(e=d(e,0>t?0:0|l(t)),!i.TYPED_ARRAY_SUPPORT)for(var n=0;t>n;n++)e[n]=0;return e}function o(e,t,n){return("string"!=typeof n||""===n)&&(n="utf8"),(e=d(e,0|u(t,n))).write(t,n),e}function s(e,t){if(i.isBuffer(t))return function(e,t){var n=0|l(t.length);return e=d(e,n),t.copy(e,0,0,n),e}(e,t);if(R(t))return function(e,t){var n=0|l(t.length);e=d(e,n);for(var a=0;n>a;a+=1)e[a]=255&t[a];return e}(e,t);if(null==t)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(t.buffer instanceof ArrayBuffer)return c(e,t);if(t instanceof ArrayBuffer)return function(e,t){return i.TYPED_ARRAY_SUPPORT?(t.byteLength,e=i._augment(new Uint8Array(t))):e=c(e,new Uint8Array(t)),e}(e,t)}return t.length?function(e,t){var n=0|l(t.length);e=d(e,n);for(var a=0;n>a;a+=1)e[a]=255&t[a];return e}(e,t):function(e,t){var n,a=0;"Buffer"===t.type&&R(t.data)&&(a=0|l((n=t.data).length)),e=d(e,a);for(var i=0;a>i;i+=1)e[i]=255&n[i];return e}(e,t)}function c(e,t){var n=0|l(t.length);e=d(e,n);for(var a=0;n>a;a+=1)e[a]=255&t[a];return e}function d(e,t){return i.TYPED_ARRAY_SUPPORT?(e=i._augment(new Uint8Array(t))).__proto__=i.prototype:(e.length=t,e._isBuffer=!0),0!==t&&t<=i.poolSize>>>1&&(e.parent=N),e}function l(e){if(e>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|e}function u(e,t){"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var a=!1;;)switch(t){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":return P(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return T(e).length;default:if(a)return P(e).length;t=(""+t).toLowerCase(),a=!0}}function f(e,t,n){var a=!1;if(e||(e="utf8"),0>(t|=0)&&(t=0),(n=void 0===n||n===1/0?this.length:0|n)>this.length&&(n=this.length),t>=n)return"";for(;;)switch(e){case"hex":return I(this,t,n);case"utf8":case"utf-8":return y(this,t,n);case"ascii":return S(this,t,n);case"binary":return D(this,t,n);case"base64":return v(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,t,n);default:if(a)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),a=!0}}function p(e,t,n,a){n=Number(n)||0;var i=e.length-n;a?(a=Number(a))>i&&(a=i):a=i;var r=t.length;if(r%2!=0)throw new Error("Invalid hex string");a>r/2&&(a=r/2);for(var o=0;a>o;o++){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))throw new Error("Invalid hex string");e[n+o]=s}return o}function m(e,t,n,a){return U(P(t,e.length-n),e,n,a)}function _(e,t,n,a){return U(function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}(t),e,n,a)}function h(e,t,n,a){return _(e,t,n,a)}function b(e,t,n,a){return U(T(t),e,n,a)}function g(e,t,n,a){return U(function(e,t){for(var n,a,i,r=[],o=0;o<e.length&&!((t-=2)<0);o++)a=(n=e.charCodeAt(o))>>8,i=n%256,r.push(i),r.push(a);return r}(t,e.length-n),e,n,a)}function v(e,t,n){return F.fromByteArray(0===t&&n===e.length?e:e.slice(t,n))}function y(e,t,n){n=Math.min(e.length,n);for(var a=[],i=t;n>i;){var r,o,s,c,d=e[i],l=null,u=d>239?4:d>223?3:d>191?2:1;if(n>=i+u)switch(u){case 1:128>d&&(l=d);break;case 2:128==(192&(r=e[i+1]))&&(c=(31&d)<<6|63&r)>127&&(l=c);break;case 3:r=e[i+1],o=e[i+2],128==(192&r)&&128==(192&o)&&(c=(15&d)<<12|(63&r)<<6|63&o)>2047&&(55296>c||c>57343)&&(l=c);break;case 4:r=e[i+1],o=e[i+2],s=e[i+3],128==(192&r)&&128==(192&o)&&128==(192&s)&&(c=(15&d)<<18|(63&r)<<12|(63&o)<<6|63&s)>65535&&1114112>c&&(l=c)}null===l?(l=65533,u=1):l>65535&&(l-=65536,a.push(l>>>10&1023|55296),l=56320|1023&l),a.push(l),i+=u}return function(e){var t=e.length;if(B>=t)return String.fromCharCode.apply(String,e);for(var n="",a=0;t>a;)n+=String.fromCharCode.apply(String,e.slice(a,a+=B));return n}(a)}function S(e,t,n){var a="";n=Math.min(e.length,n);for(var i=t;n>i;i++)a+=String.fromCharCode(127&e[i]);return a}function D(e,t,n){var a="";n=Math.min(e.length,n);for(var i=t;n>i;i++)a+=String.fromCharCode(e[i]);return a}function I(e,t,n){var a=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>a)&&(n=a);for(var i="",r=t;n>r;r++)i+=M(e[r]);return i}function x(e,t,n){for(var a=e.slice(t,n),i="",r=0;r<a.length;r+=2)i+=String.fromCharCode(a[r]+256*a[r+1]);return i}function C(e,t,n){if(e%1!=0||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,n,a,r,o){if(!i.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(t>r||o>t)throw new RangeError("value is out of bounds");if(n+a>e.length)throw new RangeError("index out of range")}function w(e,t,n,a){0>t&&(t=65535+t+1);for(var i=0,r=Math.min(e.length-n,2);r>i;i++)e[n+i]=(t&255<<8*(a?i:1-i))>>>8*(a?i:1-i)}function E(e,t,n,a){0>t&&(t=4294967295+t+1);for(var i=0,r=Math.min(e.length-n,4);r>i;i++)e[n+i]=t>>>8*(a?i:3-i)&255}function A(e,t,n,a,i,r){if(t>i||r>t)throw new RangeError("value is out of bounds");if(n+a>e.length)throw new RangeError("index out of range");if(0>n)throw new RangeError("index out of range")}function L(e,t,n,a,i){return i||A(e,t,n,4,34028234663852886e22,-34028234663852886e22),H.write(e,t,n,a,23,4),n+4}function k(e,t,n,a,i){return i||A(e,t,n,8,17976931348623157e292,-17976931348623157e292),H.write(e,t,n,a,52,8),n+8}function M(e){return 16>e?"0"+e.toString(16):e.toString(16)}function P(e,t){t=t||1/0;for(var n,a=e.length,i=null,r=[],o=0;a>o;o++){if((n=e.charCodeAt(o))>55295&&57344>n){if(!i){if(n>56319){(t-=3)>-1&&r.push(239,191,189);continue}if(o+1===a){(t-=3)>-1&&r.push(239,191,189);continue}i=n;continue}if(56320>n){(t-=3)>-1&&r.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&r.push(239,191,189);if(i=null,128>n){if((t-=1)<0)break;r.push(n)}else if(2048>n){if((t-=2)<0)break;r.push(n>>6|192,63&n|128)}else if(65536>n){if((t-=3)<0)break;r.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(1114112>n))throw new Error("Invalid code point");if((t-=4)<0)break;r.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return r}function T(e){return F.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(V,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function U(e,t,n,a){for(var i=0;a>i&&!(i+n>=t.length||i>=e.length);i++)t[i+n]=e[i];return i}var F=e("base64-js"),H=e("ieee754"),R=e("isarray");a.Buffer=i,a.SlowBuffer=function e(t,n){if(!(this instanceof e))return new e(t,n);var a=new i(t,n);return delete a.parent,a},a.INSPECT_MAX_BYTES=50,i.poolSize=8192;var N={};i.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){function e(){}try{var t=new Uint8Array(1);return t.foo=function(){return 42},t.constructor=e,42===t.foo()&&t.constructor===e&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}(),i.TYPED_ARRAY_SUPPORT?(i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array):(i.prototype.length=void 0,i.prototype.parent=void 0),i.isBuffer=function(e){return!(null==e||!e._isBuffer)},i.compare=function(e,t){if(!i.isBuffer(e)||!i.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,a=t.length,r=0,o=Math.min(n,a);o>r&&e[r]===t[r];)++r;return r!==o&&(n=e[r],a=t[r]),a>n?-1:n>a?1:0},i.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(e,t){if(!R(e))throw new TypeError("list argument must be an Array of Buffers.");if(0===e.length)return new i(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;n++)t+=e[n].length;var a=new i(t),r=0;for(n=0;n<e.length;n++){var o=e[n];o.copy(a,r),r+=o.length}return a},i.byteLength=u,i.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?y(this,0,e):f.apply(this,arguments)},i.prototype.equals=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===i.compare(this,e)},i.prototype.inspect=function(){var e="",t=a.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},i.prototype.compare=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?0:i.compare(this,e)},i.prototype.indexOf=function(e,t){function n(e,t,n){for(var a=-1,i=0;n+i<e.length;i++)if(e[n+i]===t[-1===a?0:i-a]){if(-1===a&&(a=i),i-a+1===t.length)return n+a}else a=-1;return-1}if(t>2147483647?t=2147483647:-2147483648>t&&(t=-2147483648),t>>=0,0===this.length)return-1;if(t>=this.length)return-1;if(0>t&&(t=Math.max(this.length+t,0)),"string"==typeof e)return 0===e.length?-1:String.prototype.indexOf.call(this,e,t);if(i.isBuffer(e))return n(this,e,t);if("number"==typeof e)return i.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,t):n(this,[e],t);throw new TypeError("val must be string, number or Buffer")},i.prototype.get=function(e){return this.readUInt8(e)},i.prototype.set=function(e,t){return this.writeUInt8(e,t)},i.prototype.write=function(e,t,n,a){if(void 0===t)a="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)a=t,n=this.length,t=0;else if(isFinite(t))t|=0,isFinite(n)?(n|=0,void 0===a&&(a="utf8")):(a=n,n=void 0);else{var i=a;a=t,t=0|n,n=i}var r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(0>n||0>t)||t>this.length)throw new RangeError("attempt to write outside buffer bounds");a||(a="utf8");for(var o=!1;;)switch(a){case"hex":return p(this,e,t,n);case"utf8":case"utf-8":return m(this,e,t,n);case"ascii":return _(this,e,t,n);case"binary":return h(this,e,t,n);case"base64":return b(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return g(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase(),o=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var B=4096;i.prototype.slice=function(e,t){var n,a=this.length;if(0>(e=~~e)?0>(e+=a)&&(e=0):e>a&&(e=a),0>(t=void 0===t?a:~~t)?0>(t+=a)&&(t=0):t>a&&(t=a),e>t&&(t=e),i.TYPED_ARRAY_SUPPORT)n=i._augment(this.subarray(e,t));else{var r=t-e;n=new i(r,void 0);for(var o=0;r>o;o++)n[o]=this[o+e]}return n.length&&(n.parent=this.parent||this),n},i.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||C(e,t,this.length);for(var a=this[e],i=1,r=0;++r<t&&(i*=256);)a+=this[e+r]*i;return a},i.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||C(e,t,this.length);for(var a=this[e+--t],i=1;t>0&&(i*=256);)a+=this[e+--t]*i;return a},i.prototype.readUInt8=function(e,t){return t||C(e,1,this.length),this[e]},i.prototype.readUInt16LE=function(e,t){return t||C(e,2,this.length),this[e]|this[e+1]<<8},i.prototype.readUInt16BE=function(e,t){return t||C(e,2,this.length),this[e]<<8|this[e+1]},i.prototype.readUInt32LE=function(e,t){return t||C(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},i.prototype.readUInt32BE=function(e,t){return t||C(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},i.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||C(e,t,this.length);for(var a=this[e],i=1,r=0;++r<t&&(i*=256);)a+=this[e+r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},i.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||C(e,t,this.length);for(var a=t,i=1,r=this[e+--a];a>0&&(i*=256);)r+=this[e+--a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},i.prototype.readInt8=function(e,t){return t||C(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},i.prototype.readInt16LE=function(e,t){t||C(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt16BE=function(e,t){t||C(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt32LE=function(e,t){return t||C(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},i.prototype.readInt32BE=function(e,t){return t||C(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},i.prototype.readFloatLE=function(e,t){return t||C(e,4,this.length),H.read(this,e,!0,23,4)},i.prototype.readFloatBE=function(e,t){return t||C(e,4,this.length),H.read(this,e,!1,23,4)},i.prototype.readDoubleLE=function(e,t){return t||C(e,8,this.length),H.read(this,e,!0,52,8)},i.prototype.readDoubleBE=function(e,t){return t||C(e,8,this.length),H.read(this,e,!1,52,8)},i.prototype.writeUIntLE=function(e,t,n,a){e=+e,t|=0,n|=0,a||O(this,e,t,n,Math.pow(2,8*n),0);var i=1,r=0;for(this[t]=255&e;++r<n&&(i*=256);)this[t+r]=e/i&255;return t+n},i.prototype.writeUIntBE=function(e,t,n,a){e=+e,t|=0,n|=0,a||O(this,e,t,n,Math.pow(2,8*n),0);var i=n-1,r=1;for(this[t+i]=255&e;--i>=0&&(r*=256);)this[t+i]=e/r&255;return t+n},i.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,1,255,0),i.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},i.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):w(this,e,t,!0),t+2},i.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):w(this,e,t,!1),t+2},i.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):E(this,e,t,!0),t+4},i.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):E(this,e,t,!1),t+4},i.prototype.writeIntLE=function(e,t,n,a){if(e=+e,t|=0,!a){var i=Math.pow(2,8*n-1);O(this,e,t,n,i-1,-i)}var r=0,o=1,s=0>e?1:0;for(this[t]=255&e;++r<n&&(o*=256);)this[t+r]=(e/o>>0)-s&255;return t+n},i.prototype.writeIntBE=function(e,t,n,a){if(e=+e,t|=0,!a){var i=Math.pow(2,8*n-1);O(this,e,t,n,i-1,-i)}var r=n-1,o=1,s=0>e?1:0;for(this[t+r]=255&e;--r>=0&&(o*=256);)this[t+r]=(e/o>>0)-s&255;return t+n},i.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,1,127,-128),i.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[t]=255&e,t+1},i.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):w(this,e,t,!0),t+2},i.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):w(this,e,t,!1),t+2},i.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,2147483647,-2147483648),i.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):E(this,e,t,!0),t+4},i.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):E(this,e,t,!1),t+4},i.prototype.writeFloatLE=function(e,t,n){return L(this,e,t,!0,n)},i.prototype.writeFloatBE=function(e,t,n){return L(this,e,t,!1,n)},i.prototype.writeDoubleLE=function(e,t,n){return k(this,e,t,!0,n)},i.prototype.writeDoubleBE=function(e,t,n){return k(this,e,t,!1,n)},i.prototype.copy=function(e,t,n,a){if(n||(n=0),a||0===a||(a=this.length),t>=e.length&&(t=e.length),t||(t=0),a>0&&n>a&&(a=n),a===n)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("sourceStart out of bounds");if(0>a)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length),e.length-t<a-n&&(a=e.length-t+n);var r,o=a-n;if(this===e&&t>n&&a>t)for(r=o-1;r>=0;r--)e[r+t]=this[r+n];else if(1e3>o||!i.TYPED_ARRAY_SUPPORT)for(r=0;o>r;r++)e[r+t]=this[r+n];else e._set(this.subarray(n,n+o),t);return o},i.prototype.fill=function(e,t,n){if(e||(e=0),t||(t=0),n||(n=this.length),t>n)throw new RangeError("end < start");if(n!==t&&0!==this.length){if(0>t||t>=this.length)throw new RangeError("start out of bounds");if(0>n||n>this.length)throw new RangeError("end out of bounds");var a;if("number"==typeof e)for(a=t;n>a;a++)this[a]=e;else{var i=P(e.toString()),r=i.length;for(a=t;n>a;a++)this[a]=i[a%r]}return this}},i.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(i.TYPED_ARRAY_SUPPORT)return new i(this).buffer;for(var e=new Uint8Array(this.length),t=0,n=e.length;n>t;t+=1)e[t]=this[t];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var j=i.prototype;i._augment=function(e){return e.constructor=i,e._isBuffer=!0,e._set=e.set,e.get=j.get,e.set=j.set,e.write=j.write,e.toString=j.toString,e.toLocaleString=j.toString,e.toJSON=j.toJSON,e.equals=j.equals,e.compare=j.compare,e.indexOf=j.indexOf,e.copy=j.copy,e.slice=j.slice,e.readUIntLE=j.readUIntLE,e.readUIntBE=j.readUIntBE,e.readUInt8=j.readUInt8,e.readUInt16LE=j.readUInt16LE,e.readUInt16BE=j.readUInt16BE,e.readUInt32LE=j.readUInt32LE,e.readUInt32BE=j.readUInt32BE,e.readIntLE=j.readIntLE,e.readIntBE=j.readIntBE,e.readInt8=j.readInt8,e.readInt16LE=j.readInt16LE,e.readInt16BE=j.readInt16BE,e.readInt32LE=j.readInt32LE,e.readInt32BE=j.readInt32BE,e.readFloatLE=j.readFloatLE,e.readFloatBE=j.readFloatBE,e.readDoubleLE=j.readDoubleLE,e.readDoubleBE=j.readDoubleBE,e.writeUInt8=j.writeUInt8,e.writeUIntLE=j.writeUIntLE,e.writeUIntBE=j.writeUIntBE,e.writeUInt16LE=j.writeUInt16LE,e.writeUInt16BE=j.writeUInt16BE,e.writeUInt32LE=j.writeUInt32LE,e.writeUInt32BE=j.writeUInt32BE,e.writeIntLE=j.writeIntLE,e.writeIntBE=j.writeIntBE,e.writeInt8=j.writeInt8,e.writeInt16LE=j.writeInt16LE,e.writeInt16BE=j.writeInt16BE,e.writeInt32LE=j.writeInt32LE,e.writeInt32BE=j.writeInt32BE,e.writeFloatLE=j.writeFloatLE,e.writeFloatBE=j.writeFloatBE,e.writeDoubleLE=j.writeDoubleLE,e.writeDoubleBE=j.writeDoubleBE,e.fill=j.fill,e.inspect=j.inspect,e.toArrayBuffer=j.toArrayBuffer,e};var V=/[^+\/0-9A-Za-z-_]/g}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":12,ieee754:18,isarray:15}],15:[function(e,t){var n={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},{}],16:[function(e,t,n){(function(e){function t(e){return Object.prototype.toString.call(e)}n.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===t(e)},n.isBoolean=function(e){return"boolean"==typeof e},n.isNull=function(e){return null===e},n.isNullOrUndefined=function(e){return null==e},n.isNumber=function(e){return"number"==typeof e},n.isString=function(e){return"string"==typeof e},n.isSymbol=function(e){return"symbol"==typeof e},n.isUndefined=function(e){return void 0===e},n.isRegExp=function(e){return"[object RegExp]"===t(e)},n.isObject=function(e){return"object"==typeof e&&null!==e},n.isDate=function(e){return"[object Date]"===t(e)},n.isError=function(e){return"[object Error]"===t(e)||e instanceof Error},n.isFunction=function(e){return"function"==typeof e},n.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},n.isBuffer=e.isBuffer}).call(this,{isBuffer:e("../../is-buffer/index.js")})},{"../../is-buffer/index.js":20}],17:[function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function a(e){return"function"==typeof e}function i(e){return"object"==typeof e&&null!==e}function r(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,o,s,c,d;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(r(n=this._events[e]))return!1;if(a(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(o=arguments.length,s=new Array(o-1),c=1;o>c;c++)s[c-1]=arguments[c];n.apply(this,s)}else if(i(n)){for(o=arguments.length,s=new Array(o-1),c=1;o>c;c++)s[c-1]=arguments[c];for(o=(d=n.slice()).length,c=0;o>c;c++)d[c].apply(this,s)}return!0},n.prototype.addListener=function(e,t){var o;if(!a(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,a(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(o=r(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.trace),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!a(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,r,o,s;if(!a(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=(n=this._events[e]).length,r=-1,n===t||a(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(n)){for(s=o;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){r=s;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(a(n=this._events[e]))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?a(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.listenerCount=function(e,t){return e._events&&e._events[t]?a(e._events[t])?1:e._events[t].length:0}},{}],18:[function(e,t,n){n.read=function(e,t,n,a,i){var r,o,s=8*i-a-1,c=(1<<s)-1,d=c>>1,l=-7,u=n?i-1:0,f=n?-1:1,p=e[t+u];for(u+=f,r=p&(1<<-l)-1,p>>=-l,l+=s;l>0;r=256*r+e[t+u],u+=f,l-=8);for(o=r&(1<<-l)-1,r>>=-l,l+=a;l>0;o=256*o+e[t+u],u+=f,l-=8);if(0===r)r=1-d;else{if(r===c)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,a),r-=d}return(p?-1:1)*o*Math.pow(2,r-a)},n.write=function(e,t,n,a,i,r){var o,s,c,d=8*r-i-1,l=(1<<d)-1,u=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=a?0:r-1,m=a?1:-1,_=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),(t+=o+u>=1?f/c:f*Math.pow(2,1-u))*c>=2&&(o++,c/=2),o+u>=l?(s=0,o=l):o+u>=1?(s=(t*c-1)*Math.pow(2,i),o+=u):(s=t*Math.pow(2,u-1)*Math.pow(2,i),o=0));i>=8;e[n+p]=255&s,p+=m,s/=256,i-=8);for(o=o<<i|s,d+=i;d>0;e[n+p]=255&o,p+=m,o/=256,d-=8);e[n+p-m]|=128*_}},{}],19:[function(e,t){t.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],20:[function(e,t){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}t.exports=function(e){return null!=e&&(n(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}(e)||!!e._isBuffer)}},{}],21:[function(e,t){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],22:[function(e,t){function n(){if(!o){o=!0;for(var e,t=r.length;t;){e=r,r=[];for(var n=-1;++n<t;)e[n]();t=r.length}o=!1}}function a(){}var i=t.exports={},r=[],o=!1;i.nextTick=function(e){r.push(e),o||setTimeout(n,0)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=a,i.addListener=a,i.once=a,i.off=a,i.removeListener=a,i.removeAllListeners=a,i.emit=a,i.binding=function(){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],23:[function(e,t){t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":24}],24:[function(e,t){(function(n){function a(e){return this instanceof a?(s.call(this,e),c.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),void this.once("end",i)):new a(e)}function i(){this.allowHalfOpen||this._writableState.ended||n.nextTick(this.end.bind(this))}t.exports=a;var r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t},o=e("core-util-is");o.inherits=e("inherits");var s=e("./_stream_readable"),c=e("./_stream_writable");o.inherits(a,s),function(e,t){for(var n=0,a=e.length;a>n;n++)t(e[n])}(r(c.prototype),function(e){a.prototype[e]||(a.prototype[e]=c.prototype[e])})}).call(this,e("_process"))},{"./_stream_readable":26,"./_stream_writable":28,_process:22,"core-util-is":16,inherits:19}],25:[function(e,t){function n(e){return this instanceof n?void a.call(this,e):new n(e)}t.exports=n;var a=e("./_stream_transform"),i=e("core-util-is");i.inherits=e("inherits"),i.inherits(n,a),n.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":27,"core-util-is":16,inherits:19}],26:[function(e,t){(function(n){function a(t,n){var a=e("./_stream_duplex"),i=(t=t||{}).highWaterMark,r=t.objectMode?16:16384;this.highWaterMark=i||0===i?i:r,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!t.objectMode,n instanceof a&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(g||(g=e("string_decoder/").StringDecoder),this.decoder=new g(t.encoding),this.encoding=t.encoding)}function i(t){return e("./_stream_duplex"),this instanceof i?(this._readableState=new a(t,this),this.readable=!0,void h.call(this)):new i(t)}function r(e,t,n,a,i){var r=function(e,t){var n=null;return b.isBuffer(t)||b.isString(t)||b.isNullOrUndefined(t)||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}(t,n);if(r)e.emit("error",r);else if(b.isNullOrUndefined(n))t.reading=!1,t.ended||function(e,t){if(t.decoder&&!t.ended){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,s(e)}(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!i){var o=new Error("stream.push() after EOF");e.emit("error",o)}else t.endEmitted&&i?(o=new Error("stream.unshift() after end event"),e.emit("error",o)):(!t.decoder||i||a||(n=t.decoder.write(n)),i||(t.reading=!1),t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&s(e)),d(e,t));else i||(t.reading=!1);return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(t)}function o(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:isNaN(e)||b.isNull(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:0>=e?0:(e>t.highWaterMark&&(t.highWaterMark=function(e){if(e>=y)e=y;else{e--;for(var t=1;32>t;t<<=1)e|=e>>t;e++}return e}(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function s(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(v("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?n.nextTick(function(){c(e)}):c(e))}function c(e){v("emit readable"),e.emit("readable"),l(e)}function d(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(function(){!function(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(v("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}(e,t)}))}function l(e){var t=e._readableState;if(v("flow",t.flowing),t.flowing)do{var n=e.read()}while(null!==n&&t.flowing)}function u(e,t){var n,a=t.buffer,i=t.length,r=!!t.decoder,o=!!t.objectMode;if(0===a.length)return null;if(0===i)n=null;else if(o)n=a.shift();else if(!e||e>=i)n=r?a.join(""):m.concat(a,i),a.length=0;else if(e<a[0].length)n=(l=a[0]).slice(0,e),a[0]=l.slice(e);else if(e===a[0].length)n=a.shift();else{n=r?"":new m(e);for(var s=0,c=0,d=a.length;d>c&&e>s;c++){var l=a[0],u=Math.min(e-s,l.length);r?n+=l.slice(0,u):l.copy(n,s,0,u),u<l.length?a[0]=l.slice(u):a.shift(),s+=u}}return n}function f(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");t.endEmitted||(t.ended=!0,n.nextTick(function(){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}))}t.exports=i;var p=e("isarray"),m=e("buffer").Buffer;i.ReadableState=a;var _=e("events").EventEmitter;_.listenerCount||(_.listenerCount=function(e,t){return e.listeners(t).length});var h=e("stream"),b=e("core-util-is");b.inherits=e("inherits");var g,v=e("util");v=v&&v.debuglog?v.debuglog("stream"):function(){},b.inherits(i,h),i.prototype.push=function(e,t){var n=this._readableState;return b.isString(e)&&!n.objectMode&&(t=t||n.defaultEncoding)!==n.encoding&&(e=new m(e,t),t=""),r(this,n,e,t,!1)},i.prototype.unshift=function(e){return r(this,this._readableState,e,"",!0)},i.prototype.setEncoding=function(t){return g||(g=e("string_decoder/").StringDecoder),this._readableState.decoder=new g(t),this._readableState.encoding=t,this};var y=8388608;i.prototype.read=function(e){v("read",e);var t=this._readableState,n=e;if((!b.isNumber(e)||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return v("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?f(this):s(this),null;if(0===(e=o(e,t))&&t.ended)return 0===t.length&&f(this),null;var a,i=t.needReadable;return v("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&v("length less than watermark",i=!0),(t.ended||t.reading)&&v("reading or ended",i=!1),i&&(v("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),i&&!t.reading&&(e=o(n,t)),a=e>0?u(e,t):null,b.isNull(a)&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),n!==e&&t.ended&&0===t.length&&f(this),b.isNull(a)||this.emit("data",a),a},i.prototype._read=function(){this.emit("error",new Error("not implemented"))},i.prototype.pipe=function(e,t){function a(e){v("onunpipe"),e===f&&r()}function i(){v("onend"),e.end()}function r(){v("cleanup"),e.removeListener("close",c),e.removeListener("finish",d),e.removeListener("drain",b),e.removeListener("error",s),e.removeListener("unpipe",a),f.removeListener("end",i),f.removeListener("end",r),f.removeListener("data",o),!m.awaitDrain||e._writableState&&!e._writableState.needDrain||b()}function o(t){v("ondata"),!1===e.write(t)&&(v("false write response, pause",f._readableState.awaitDrain),f._readableState.awaitDrain++,f.pause())}function s(t){v("onerror",t),u(),e.removeListener("error",s),0===_.listenerCount(e,"error")&&e.emit("error",t)}function c(){e.removeListener("finish",d),u()}function d(){v("onfinish"),e.removeListener("close",c),u()}function u(){v("unpipe"),f.unpipe(e)}var f=this,m=this._readableState;switch(m.pipesCount){case 0:m.pipes=e;break;case 1:m.pipes=[m.pipes,e];break;default:m.pipes.push(e)}m.pipesCount+=1,v("pipe count=%d opts=%j",m.pipesCount,t);var h=t&&!1===t.end||e===n.stdout||e===n.stderr?r:i;m.endEmitted?n.nextTick(h):f.once("end",h),e.on("unpipe",a);var b=function(e){return function(){var t=e._readableState;v("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&_.listenerCount(e,"data")&&(t.flowing=!0,l(e))}}(f);return e.on("drain",b),f.on("data",o),e._events&&e._events.error?p(e._events.error)?e._events.error.unshift(s):e._events.error=[s,e._events.error]:e.on("error",s),e.once("close",c),e.once("finish",d),e.emit("pipe",f),m.flowing||(v("pipe resume"),f.resume()),e},i.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this)),this;if(!e){var n=t.pipes,a=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;a>i;i++)n[i].emit("unpipe",this);return this}return i=function(e,t){for(var n=0,a=e.length;a>n;n++)if(e[n]===t)return n;return-1}(t.pipes,e),-1===i||(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this)),this},i.prototype.on=function(e,t){var a=h.prototype.on.call(this,e,t);if("data"===e&&!1!==this._readableState.flowing&&this.resume(),"readable"===e&&this.readable){var i=this._readableState;if(!i.readableListening)if(i.readableListening=!0,i.emittedReadable=!1,i.needReadable=!0,i.reading)i.length&&s(this);else{var r=this;n.nextTick(function(){v("readable nexttick read 0"),r.read(0)})}}return a},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){var e=this._readableState;return e.flowing||(v("resume"),e.flowing=!0,e.reading||(v("resume read 0"),this.read(0)),function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(function(){!function(e,t){t.resumeScheduled=!1,e.emit("resume"),l(e),t.flowing&&!t.reading&&e.read(0)}(e,t)}))}(this,e)),this},i.prototype.pause=function(){return v("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(v("pause"),this._readableState.flowing=!1,this.emit("pause")),this},i.prototype.wrap=function(e){var t=this._readableState,n=!1,a=this;for(var i in e.on("end",function(){if(v("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&a.push(e)}a.push(null)}),e.on("data",function(i){v("wrapped data"),t.decoder&&(i=t.decoder.write(i)),i&&(t.objectMode||i.length)&&(a.push(i)||(n=!0,e.pause()))}),e)b.isFunction(e[i])&&b.isUndefined(this[i])&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));return function(e,t){for(var n=0,a=e.length;a>n;n++)t(e[n])}(["error","close","destroy","pause","resume"],function(t){e.on(t,a.emit.bind(a,t))}),a._read=function(t){v("wrapped _read",t),n&&(n=!1,e.resume())},a},i._fromList=u}).call(this,e("_process"))},{"./_stream_duplex":24,_process:22,buffer:14,"core-util-is":16,events:17,inherits:19,isarray:21,stream:33,"string_decoder/":34,util:13}],27:[function(e,t){function n(e,t){this.afterTransform=function(e,n){return function(e,t,n){var a=e._transformState;a.transforming=!1;var i=a.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));a.writechunk=null,a.writecb=null,o.isNullOrUndefined(n)||e.push(n),i&&i(t);var r=e._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&e._read(r.highWaterMark)}(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function a(e){if(!(this instanceof a))return new a(e);r.call(this,e),this._transformState=new n(e,this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){o.isFunction(this._flush)?this._flush(function(e){i(t,e)}):i(t)})}function i(e,t){if(t)return e.emit("error",t);var n=e._writableState,a=e._transformState;if(n.length)throw new Error("calling transform done when ws.length != 0");if(a.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}t.exports=a;var r=e("./_stream_duplex"),o=e("core-util-is");o.inherits=e("inherits"),o.inherits(a,r),a.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},a.prototype._transform=function(){throw new Error("not implemented")},a.prototype._write=function(e,t,n){var a=this._transformState;if(a.writecb=n,a.writechunk=e,a.writeencoding=t,!a.transforming){var i=this._readableState;(a.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},a.prototype._read=function(){var e=this._transformState;o.isNull(e.writechunk)||!e.writecb||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))}},{"./_stream_duplex":24,"core-util-is":16,inherits:19}],28:[function(e,t){(function(n){function a(e,t,n){this.chunk=e,this.encoding=t,this.callback=n}function i(t,n){var a=e("./_stream_duplex"),i=(t=t||{}).highWaterMark,r=t.objectMode?16:16384;this.highWaterMark=i||0===i?i:r,this.objectMode=!!t.objectMode,n instanceof a&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=!1===t.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){l(n,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function r(t){var n=e("./_stream_duplex");return this instanceof r||this instanceof n?(this._writableState=new i(t,this),this.writable=!0,void v.call(this)):new r(t)}function o(e,t,a){var i=new Error("write after end");e.emit("error",i),n.nextTick(function(){a(i)})}function s(e,t,a,i){var r=!0;if(!(g.isBuffer(a)||g.isString(a)||g.isNullOrUndefined(a)||t.objectMode)){var o=new TypeError("Invalid non-string/buffer chunk");e.emit("error",o),n.nextTick(function(){i(o)}),r=!1}return r}function c(e,t,n,i,r){n=function(e,t,n){return!e.objectMode&&!1!==e.decodeStrings&&g.isString(t)&&(t=new b(t,n)),t}(t,n,i),g.isBuffer(n)&&(i="buffer");var o=t.objectMode?1:n.length;t.length+=o;var s=t.length<t.highWaterMark;return s||(t.needDrain=!0),t.writing||t.corked?t.buffer.push(new a(n,i,r)):d(e,t,!1,o,n,i,r),s}function d(e,t,n,a,i,r,o){t.writelen=a,t.writecb=o,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,r,t.onwrite),t.sync=!1}function l(e,t){var a=e._writableState,i=a.sync,r=a.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(a),t)!function(e,t,a,i,r){a?n.nextTick(function(){t.pendingcb--,r(i)}):(t.pendingcb--,r(i)),e._writableState.errorEmitted=!0,e.emit("error",i)}(e,a,i,t,r);else{var o=p(0,a);o||a.corked||a.bufferProcessing||!a.buffer.length||f(e,a),i?n.nextTick(function(){u(e,a,o,r)}):u(e,a,o,r)}}function u(e,t,n,a){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,a(),_(e,t)}function f(e,t){if(t.bufferProcessing=!0,e._writev&&t.buffer.length>1){for(var n=[],a=0;a<t.buffer.length;a++)n.push(t.buffer[a].callback);t.pendingcb++,d(e,t,!0,t.length,t.buffer,"",function(e){for(var a=0;a<n.length;a++)t.pendingcb--,n[a](e)}),t.buffer=[]}else{for(a=0;a<t.buffer.length;a++){var i=t.buffer[a],r=i.chunk,o=i.encoding,s=i.callback,c=t.objectMode?1:r.length;if(d(e,t,!1,c,r,o,s),t.writing){a++;break}}a<t.buffer.length?t.buffer=t.buffer.slice(a):t.buffer.length=0}t.bufferProcessing=!1}function p(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function m(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function _(e,t){var n=p(0,t);return n&&(0===t.pendingcb?(m(e,t),t.finished=!0,e.emit("finish")):m(e,t)),n}function h(e,t,a){t.ending=!0,_(e,t),a&&(t.finished?n.nextTick(a):e.once("finish",a)),t.ended=!0}t.exports=r;var b=e("buffer").Buffer;r.WritableState=i;var g=e("core-util-is");g.inherits=e("inherits");var v=e("stream");g.inherits(r,v),r.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},r.prototype.write=function(e,t,n){var a=this._writableState,i=!1;return g.isFunction(t)&&(n=t,t=null),g.isBuffer(e)?t="buffer":t||(t=a.defaultEncoding),g.isFunction(n)||(n=function(){}),a.ended?o(this,0,n):s(this,a,e,n)&&(a.pendingcb++,i=c(this,a,e,t,n)),i},r.prototype.cork=function(){this._writableState.corked++},r.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.buffer.length||f(this,e))},r.prototype._write=function(e,t,n){n(new Error("not implemented"))},r.prototype._writev=null,r.prototype.end=function(e,t,n){var a=this._writableState;g.isFunction(e)?(n=e,e=null,t=null):g.isFunction(t)&&(n=t,t=null),g.isNullOrUndefined(e)||this.write(e,t),a.corked&&(a.corked=1,this.uncork()),a.ending||a.finished||h(this,a,n)}}).call(this,e("_process"))},{"./_stream_duplex":24,_process:22,buffer:14,"core-util-is":16,inherits:19,stream:33}],29:[function(e,t){t.exports=e("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":25}],30:[function(e,t,n){(function(a){(n=t.exports=e("./lib/_stream_readable.js")).Stream=e("stream"),n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js"),a.browser||"disable"!==a.env.READABLE_STREAM||(t.exports=e("stream"))}).call(this,e("_process"))},{"./lib/_stream_duplex.js":24,"./lib/_stream_passthrough.js":25,"./lib/_stream_readable.js":26,"./lib/_stream_transform.js":27,"./lib/_stream_writable.js":28,_process:22,stream:33}],31:[function(e,t){t.exports=e("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":27}],32:[function(e,t){t.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":28}],33:[function(e,t){function n(){a.call(this)}t.exports=n;var a=e("events").EventEmitter;e("inherits")(n,a),n.Readable=e("readable-stream/readable.js"),n.Writable=e("readable-stream/writable.js"),n.Duplex=e("readable-stream/duplex.js"),n.Transform=e("readable-stream/transform.js"),n.PassThrough=e("readable-stream/passthrough.js"),n.Stream=n,n.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&d.pause&&d.pause()}function i(){d.readable&&d.resume&&d.resume()}function r(){l||(l=!0,e.end())}function o(){l||(l=!0,"function"==typeof e.destroy&&e.destroy())}function s(e){if(c(),0===a.listenerCount(this,"error"))throw e}function c(){d.removeListener("data",n),e.removeListener("drain",i),d.removeListener("end",r),d.removeListener("close",o),d.removeListener("error",s),e.removeListener("error",s),d.removeListener("end",c),d.removeListener("close",c),e.removeListener("close",c)}var d=this;d.on("data",n),e.on("drain",i),e._isStdio||t&&!1===t.end||(d.on("end",r),d.on("close",o));var l=!1;return d.on("error",s),e.on("error",s),d.on("end",c),d.on("close",c),e.on("close",c),e.emit("pipe",d),e}},{events:17,inherits:19,"readable-stream/duplex.js":23,"readable-stream/passthrough.js":29,"readable-stream/readable.js":30,"readable-stream/transform.js":31,"readable-stream/writable.js":32}],34:[function(e,t,n){function a(e){return e.toString(this.encoding)}function i(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function r(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var o=e("buffer").Buffer,s=o.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},c=n.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),function(e){if(e&&!s(e))throw new Error("Unknown encoding: "+e)}(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=i;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=r;break;default:return void(this.write=a)}this.charBuffer=new o(6),this.charReceived=0,this.charLength=0};c.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";if(e=e.slice(n,e.length),!((a=(t=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(t.length-1))>=55296&&56319>=a)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var a,i=e.length;if(this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),i=(t+=e.toString(this.encoding,0,i)).length-1,(a=t.charCodeAt(i))>=55296&&56319>=a){var r=this.surrogateSize;return this.charLength+=r,this.charReceived+=r,this.charBuffer.copy(this.charBuffer,r,0,r),e.copy(this.charBuffer,0,0,r),t.substring(0,i)}return t},c.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(2>=t&&n>>4==14){this.charLength=3;break}if(3>=t&&n>>3==30){this.charLength=4;break}}this.charReceived=t},c.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,a=this.charBuffer,i=this.encoding;t+=a.slice(0,n).toString(i)}return t}},{buffer:14}],35:[function(e,n){(function(e){n.exports="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{}}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[2]),function(){!function(e){var t=e.vttjs={},n=t.VTTCue,a=t.VTTRegion,i=e.VTTCue,r=e.VTTRegion;t.shim=function(){t.VTTCue=n,t.VTTRegion=a},t.restore=function(){t.VTTCue=i,t.VTTRegion=r}}(this),function(e,t){function n(e){return"string"==typeof e&&!!s[e.toLowerCase()]&&e.toLowerCase()}function a(e){return"string"==typeof e&&!!c[e.toLowerCase()]&&e.toLowerCase()}function i(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)e[a]=n[a]}return e}function r(e,t,r){var s=this,c=/MSIE\s8\.0/.test(navigator.userAgent),d={};c?s=document.createElement("custom"):d.enumerable=!0,s.hasBeenReset=!1;var l="",u=!1,f=e,p=t,m=r,_=null,h="",b=!0,g="auto",v="start",y=50,S="middle",D=50,I="middle";return Object.defineProperty(s,"id",i({},d,{get:function(){return l},set:function(e){l=""+e}})),Object.defineProperty(s,"pauseOnExit",i({},d,{get:function(){return u},set:function(e){u=!!e}})),Object.defineProperty(s,"startTime",i({},d,{get:function(){return f},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");f=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",i({},d,{get:function(){return p},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");p=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",i({},d,{get:function(){return m},set:function(e){m=""+e,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",i({},d,{get:function(){return _},set:function(e){_=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",i({},d,{get:function(){return h},set:function(e){var t=n(e);if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");h=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",i({},d,{get:function(){return b},set:function(e){b=!!e,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",i({},d,{get:function(){return g},set:function(e){if("number"!=typeof e&&e!==o)throw new SyntaxError("An invalid number or illegal string was specified.");g=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",i({},d,{get:function(){return v},set:function(e){var t=a(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");v=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",i({},d,{get:function(){return y},set:function(e){if(0>e||e>100)throw new Error("Position must be between 0 and 100.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",i({},d,{get:function(){return S},set:function(e){var t=a(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");S=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",i({},d,{get:function(){return D},set:function(e){if(0>e||e>100)throw new Error("Size must be between 0 and 100.");D=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",i({},d,{get:function(){return I},set:function(e){var t=a(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");I=t,this.hasBeenReset=!0}})),s.displayState=void 0,c?s:void 0}var o="auto",s={"":!0,lr:!0,rl:!0},c={start:!0,middle:!0,end:!0,left:!0,right:!0};r.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},e.VTTCue=e.VTTCue||r,t.VTTCue=r}(this,this.vttjs||{}),function(e,t){function n(e){return"string"==typeof e&&!!r[e.toLowerCase()]&&e.toLowerCase()}function a(e){return"number"==typeof e&&e>=0&&100>=e}function i(){var e=100,t=3,i=0,r=100,o=0,s=100,c="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!a(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return t},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");t=e}},regionAnchorY:{enumerable:!0,get:function(){return r},set:function(e){if(!a(e))throw new Error("RegionAnchorX must be between 0 and 100.");r=e}},regionAnchorX:{enumerable:!0,get:function(){return i},set:function(e){if(!a(e))throw new Error("RegionAnchorY must be between 0 and 100.");i=e}},viewportAnchorY:{enumerable:!0,get:function(){return s},set:function(e){if(!a(e))throw new Error("ViewportAnchorY must be between 0 and 100.");s=e}},viewportAnchorX:{enumerable:!0,get:function(){return o},set:function(e){if(!a(e))throw new Error("ViewportAnchorX must be between 0 and 100.");o=e}},scroll:{enumerable:!0,get:function(){return c},set:function(e){var t=n(e);if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");c=t}}})}var r={"":!0,up:!0};e.VTTRegion=e.VTTRegion||i,t.VTTRegion=i}(this,this.vttjs||{}),function(e){function t(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function n(e){function t(e,t,n,a){return 3600*(0|e)+60*(0|t)+(0|n)+(0|a)/1e3}var n=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}function a(){this.values=f(null)}function i(e,t,n,a){var i=a?e.split(a):[e];for(var r in i)if("string"==typeof i[r]){var o=i[r].split(n);2===o.length&&t(o[0],o[1])}}function r(e,r,o){function s(){var a=n(e);if(null===a)throw new t(t.Errors.BadTimeStamp,"Malformed timestamp: "+d);return e=e.replace(/^[^\sa-zA-Z-]+/,""),a}function c(){e=e.replace(/^\s+/,"")}var d=e;if(c(),r.startTime=s(),c(),"--\x3e"!==e.substr(0,3))throw new t(t.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+d);e=e.substr(3),c(),r.endTime=s(),c(),function(e,t){var n=new a;i(e,function(e,t){switch(e){case"region":for(var a=o.length-1;a>=0;a--)if(o[a].id===t){n.set(e,o[a].region);break}break;case"vertical":n.alt(e,t,["rl","lr"]);break;case"line":var i=t.split(","),r=i[0];n.integer(e,r),n.percent(e,r)&&n.set("snapToLines",!1),n.alt(e,r,["auto"]),2===i.length&&n.alt("lineAlign",i[1],["start","middle","end"]);break;case"position":i=t.split(","),n.percent(e,i[0]),2===i.length&&n.alt("positionAlign",i[1],["start","middle","end"]);break;case"size":n.percent(e,t);break;case"align":n.alt(e,t,["start","middle","end","left","right"])}},/:/,/\s/),t.region=n.get("region",null),t.vertical=n.get("vertical",""),t.line=n.get("line","auto"),t.lineAlign=n.get("lineAlign","start"),t.snapToLines=n.get("snapToLines",!0),t.size=n.get("size",100),t.align=n.get("align","middle"),t.position=n.get("position",{start:0,left:0,middle:50,end:100,right:100},t.align),t.positionAlign=n.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},t.align)}(e,r)}function o(e,t){function a(){if(!t)return null;var e=t.match(/^([^<]*)(<[^>]+>?)?/);return function(e){return t=t.substr(e.length),e}(e[1]?e[1]:e[2])}function i(e){return p[e]}function r(e){for(;g=e.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)e=e.replace(g[0],i);return e}function o(e,t){return!h[t.localName]||h[t.localName]===e.localName}function s(t,n){var a=m[t];if(!a)return null;var i=e.document.createElement(a);i.localName=a;var r=_[t];return r&&n&&(i[r]=n.trim()),i}for(var c,d=e.document.createElement("div"),l=d,u=[];null!==(c=a());)if("<"!==c[0])l.appendChild(e.document.createTextNode(r(c)));else{if("/"===c[1]){u.length&&u[u.length-1]===c.substr(2).replace(">","")&&(u.pop(),l=l.parentNode);continue}var f,b=n(c.substr(1,c.length-2));if(b){f=e.document.createProcessingInstruction("timestamp",b),l.appendChild(f);continue}var g=c.match(/^<([^.\s\/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!g)continue;if(!(f=s(g[1],g[3])))continue;if(!o(l,f))continue;g[2]&&(f.className=g[2].substr(1).replace("."," ")),u.push(g[1]),l.appendChild(f),l=f}return d}function s(){}function c(e,t,n){var a=/MSIE\s8\.0/.test(navigator.userAgent),i="rgba(255, 255, 255, 1)",r="rgba(0, 0, 0, 0.8)";a&&(i="rgb(255, 255, 255)",r="rgb(0, 0, 0)"),s.call(this),this.cue=t,this.cueDiv=o(e,t.text);var c={color:i,backgroundColor:r,position:"relative",left:0,right:0,top:0,bottom:0,display:"inline"};a||(c.writingMode=""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",c.unicodeBidi="plaintext"),this.applyStyles(c,this.cueDiv),this.div=e.document.createElement("div"),c={textAlign:"middle"===t.align?"center":t.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},a||(c.direction=function(e){function t(e,t){for(var n=t.childNodes.length-1;n>=0;n--)e.push(t.childNodes[n])}function n(e){if(!e||!e.length)return null;var a=e.pop(),i=a.textContent||a.innerText;if(i){var r=i.match(/^.*(\n|\r)/);return r?(e.length=0,r[0]):i}return"ruby"===a.tagName?n(e):a.childNodes?(t(e,a),n(e)):void 0}var a,i=[],r="";if(!e||!e.childNodes)return"ltr";for(t(i,e);r=n(i);)for(var o=0;o<r.length;o++){a=r.charCodeAt(o);for(var s=0;s<b.length;s++)if(b[s]===a)return"rtl"}return"ltr"}(this.cueDiv),c.writingMode=""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl".stylesunicodeBidi="plaintext"),this.applyStyles(c),this.div.appendChild(this.cueDiv);var d=0;switch(t.positionAlign){case"start":d=t.position;break;case"middle":d=t.position-t.size/2;break;case"end":d=t.position-t.size}this.applyStyles(""===t.vertical?{left:this.formatStyle(d,"%"),width:this.formatStyle(t.size,"%")}:{top:this.formatStyle(d,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function d(e){var t,n,a,i,r=/MSIE\s8\.0/.test(navigator.userAgent);if(e.div){n=e.div.offsetHeight,a=e.div.offsetWidth,i=e.div.offsetTop;var o=(o=e.div.childNodes)&&(o=o[0])&&o.getClientRects&&o.getClientRects();e=e.div.getBoundingClientRect(),t=o?Math.max(o[0]&&o[0].height||0,e.height/o.length):0}this.left=e.left,this.right=e.right,this.top=e.top||i,this.height=e.height||n,this.bottom=e.bottom||i+(e.height||n),this.width=e.width||a,this.lineHeight=void 0!==t?t:e.lineHeight,r&&!this.lineHeight&&(this.lineHeight=13)}function l(e,t,n,a){var i=new d(t),r=t.cue,o=function(e){if("number"==typeof e.line&&(e.snapToLines||e.line>=0&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,n=t.textTrackList,a=0,i=0;i<n.length&&n[i]!==t;i++)"showing"===n[i].mode&&a++;return-1*++a}(r),s=[];if(r.snapToLines){var c;switch(r.vertical){case"":s=["+y","-y"],c="height";break;case"rl":s=["+x","-x"],c="width";break;case"lr":s=["-x","+x"],c="width"}var l=i.lineHeight,u=l*Math.round(o),f=n[c]+l,p=s[0];Math.abs(u)>f&&(u=0>u?-1:1,u*=Math.ceil(f/l)*l),0>o&&(u+=""===r.vertical?n.height:n.width,s=s.reverse()),i.move(p,u)}else{var m=i.lineHeight/n.height*100;switch(r.lineAlign){case"middle":o-=m/2;break;case"end":o-=m}switch(r.vertical){case"":t.applyStyles({top:t.formatStyle(o,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(o,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(o,"%")})}s=["+y","-x","+x","-y"],i=new d(t)}var _=function(e,t){for(var i,r=new d(e),o=1,s=0;s<t.length;s++){for(;e.overlapsOppositeAxis(n,t[s])||e.within(n)&&e.overlapsAny(a);)e.move(t[s]);if(e.within(n))return e;var c=e.intersectPercentage(n);o>c&&(i=new d(e),o=c),e=new d(r)}return i||r}(i,s);t.move(_.toCSSCompatValues(n))}function u(){}var f=Object.create||function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return e.prototype=t,new e}}();t.prototype=f(Error.prototype),t.prototype.constructor=t,t.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},a.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var a=0;a<n.length;++a)if(t===n[a]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t),t>=0&&100>=t))&&(this.set(e,t),!0)}};var p={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"","&rlm;":"","&nbsp;":""},m={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},_={v:"title",lang:"lang"},h={rt:"ruby"},b=[1470,1472,1475,1478,1488,1489,1490,1491,1492,1493,1494,1495,1496,1497,1498,1499,1500,1501,1502,1503,1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514,1520,1521,1522,1523,1524,1544,1547,1549,1563,1566,1567,1568,1569,1570,1571,1572,1573,1574,1575,1576,1577,1578,1579,1580,1581,1582,1583,1584,1585,1586,1587,1588,1589,1590,1591,1592,1593,1594,1595,1596,1597,1598,1599,1600,1601,1602,1603,1604,1605,1606,1607,1608,1609,1610,1645,1646,1647,1649,1650,1651,1652,1653,1654,1655,1656,1657,1658,1659,1660,1661,1662,1663,1664,1665,1666,1667,1668,1669,1670,1671,1672,1673,1674,1675,1676,1677,1678,1679,1680,1681,1682,1683,1684,1685,1686,1687,1688,1689,1690,1691,1692,1693,1694,1695,1696,1697,1698,1699,1700,1701,1702,1703,1704,1705,1706,1707,1708,1709,1710,1711,1712,1713,1714,1715,1716,1717,1718,1719,1720,1721,1722,1723,1724,1725,1726,1727,1728,1729,1730,1731,1732,1733,1734,1735,1736,1737,1738,1739,1740,1741,1742,1743,1744,1745,1746,1747,1748,1749,1765,1766,1774,1775,1786,1787,1788,1789,1790,1791,1792,1793,1794,1795,1796,1797,1798,1799,1800,1801,1802,1803,1804,1805,1807,1808,1810,1811,1812,1813,1814,1815,1816,1817,1818,1819,1820,1821,1822,1823,1824,1825,1826,1827,1828,1829,1830,1831,1832,1833,1834,1835,1836,1837,1838,1839,1869,1870,1871,1872,1873,1874,1875,1876,1877,1878,1879,1880,1881,1882,1883,1884,1885,1886,1887,1888,1889,1890,1891,1892,1893,1894,1895,1896,1897,1898,1899,1900,1901,1902,1903,1904,1905,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1969,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2e3,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025,2026,2036,2037,2042,2048,2049,2050,2051,2052,2053,2054,2055,2056,2057,2058,2059,2060,2061,2062,2063,2064,2065,2066,2067,2068,2069,2074,2084,2088,2096,2097,2098,2099,2100,2101,2102,2103,2104,2105,2106,2107,2108,2109,2110,2112,2113,2114,2115,2116,2117,2118,2119,2120,2121,2122,2123,2124,2125,2126,2127,2128,2129,2130,2131,2132,2133,2134,2135,2136,2142,2208,2210,2211,2212,2213,2214,2215,2216,2217,2218,2219,2220,8207,64285,64287,64288,64289,64290,64291,64292,64293,64294,64295,64296,64298,64299,64300,64301,64302,64303,64304,64305,64306,64307,64308,64309,64310,64312,64313,64314,64315,64316,64318,64320,64321,64323,64324,64326,64327,64328,64329,64330,64331,64332,64333,64334,64335,64336,64337,64338,64339,64340,64341,64342,64343,64344,64345,64346,64347,64348,64349,64350,64351,64352,64353,64354,64355,64356,64357,64358,64359,64360,64361,64362,64363,64364,64365,64366,64367,64368,64369,64370,64371,64372,64373,64374,64375,64376,64377,64378,64379,64380,64381,64382,64383,64384,64385,64386,64387,64388,64389,64390,64391,64392,64393,64394,64395,64396,64397,64398,64399,64400,64401,64402,64403,64404,64405,64406,64407,64408,64409,64410,64411,64412,64413,64414,64415,64416,64417,64418,64419,64420,64421,64422,64423,64424,64425,64426,64427,64428,64429,64430,64431,64432,64433,64434,64435,64436,64437,64438,64439,64440,64441,64442,64443,64444,64445,64446,64447,64448,64449,64467,64468,64469,64470,64471,64472,64473,64474,64475,64476,64477,64478,64479,64480,64481,64482,64483,64484,64485,64486,64487,64488,64489,64490,64491,64492,64493,64494,64495,64496,64497,64498,64499,64500,64501,64502,64503,64504,64505,64506,64507,64508,64509,64510,64511,64512,64513,64514,64515,64516,64517,64518,64519,64520,64521,64522,64523,64524,64525,64526,64527,64528,64529,64530,64531,64532,64533,64534,64535,64536,64537,64538,64539,64540,64541,64542,64543,64544,64545,64546,64547,64548,64549,64550,64551,64552,64553,64554,64555,64556,64557,64558,64559,64560,64561,64562,64563,64564,64565,64566,64567,64568,64569,64570,64571,64572,64573,64574,64575,64576,64577,64578,64579,64580,64581,64582,64583,64584,64585,64586,64587,64588,64589,64590,64591,64592,64593,64594,64595,64596,64597,64598,64599,64600,64601,64602,64603,64604,64605,64606,64607,64608,64609,64610,64611,64612,64613,64614,64615,64616,64617,64618,64619,64620,64621,64622,64623,64624,64625,64626,64627,64628,64629,64630,64631,64632,64633,64634,64635,64636,64637,64638,64639,64640,64641,64642,64643,64644,64645,64646,64647,64648,64649,64650,64651,64652,64653,64654,64655,64656,64657,64658,64659,64660,64661,64662,64663,64664,64665,64666,64667,64668,64669,64670,64671,64672,64673,64674,64675,64676,64677,64678,64679,64680,64681,64682,64683,64684,64685,64686,64687,64688,64689,64690,64691,64692,64693,64694,64695,64696,64697,64698,64699,64700,64701,64702,64703,64704,64705,64706,64707,64708,64709,64710,64711,64712,64713,64714,64715,64716,64717,64718,64719,64720,64721,64722,64723,64724,64725,64726,64727,64728,64729,64730,64731,64732,64733,64734,64735,64736,64737,64738,64739,64740,64741,64742,64743,64744,64745,64746,64747,64748,64749,64750,64751,64752,64753,64754,64755,64756,64757,64758,64759,64760,64761,64762,64763,64764,64765,64766,64767,64768,64769,64770,64771,64772,64773,64774,64775,64776,64777,64778,64779,64780,64781,64782,64783,64784,64785,64786,64787,64788,64789,64790,64791,64792,64793,64794,64795,64796,64797,64798,64799,64800,64801,64802,64803,64804,64805,64806,64807,64808,64809,64810,64811,64812,64813,64814,64815,64816,64817,64818,64819,64820,64821,64822,64823,64824,64825,64826,64827,64828,64829,64848,64849,64850,64851,64852,64853,64854,64855,64856,64857,64858,64859,64860,64861,64862,64863,64864,64865,64866,64867,64868,64869,64870,64871,64872,64873,64874,64875,64876,64877,64878,64879,64880,64881,64882,64883,64884,64885,64886,64887,64888,64889,64890,64891,64892,64893,64894,64895,64896,64897,64898,64899,64900,64901,64902,64903,64904,64905,64906,64907,64908,64909,64910,64911,64914,64915,64916,64917,64918,64919,64920,64921,64922,64923,64924,64925,64926,64927,64928,64929,64930,64931,64932,64933,64934,64935,64936,64937,64938,64939,64940,64941,64942,64943,64944,64945,64946,64947,64948,64949,64950,64951,64952,64953,64954,64955,64956,64957,64958,64959,64960,64961,64962,64963,64964,64965,64966,64967,65008,65009,65010,65011,65012,65013,65014,65015,65016,65017,65018,65019,65020,65136,65137,65138,65139,65140,65142,65143,65144,65145,65146,65147,65148,65149,65150,65151,65152,65153,65154,65155,65156,65157,65158,65159,65160,65161,65162,65163,65164,65165,65166,65167,65168,65169,65170,65171,65172,65173,65174,65175,65176,65177,65178,65179,65180,65181,65182,65183,65184,65185,65186,65187,65188,65189,65190,65191,65192,65193,65194,65195,65196,65197,65198,65199,65200,65201,65202,65203,65204,65205,65206,65207,65208,65209,65210,65211,65212,65213,65214,65215,65216,65217,65218,65219,65220,65221,65222,65223,65224,65225,65226,65227,65228,65229,65230,65231,65232,65233,65234,65235,65236,65237,65238,65239,65240,65241,65242,65243,65244,65245,65246,65247,65248,65249,65250,65251,65252,65253,65254,65255,65256,65257,65258,65259,65260,65261,65262,65263,65264,65265,65266,65267,65268,65269,65270,65271,65272,65273,65274,65275,65276,67584,67585,67586,67587,67588,67589,67592,67594,67595,67596,67597,67598,67599,67600,67601,67602,67603,67604,67605,67606,67607,67608,67609,67610,67611,67612,67613,67614,67615,67616,67617,67618,67619,67620,67621,67622,67623,67624,67625,67626,67627,67628,67629,67630,67631,67632,67633,67634,67635,67636,67637,67639,67640,67644,67647,67648,67649,67650,67651,67652,67653,67654,67655,67656,67657,67658,67659,67660,67661,67662,67663,67664,67665,67666,67667,67668,67669,67671,67672,67673,67674,67675,67676,67677,67678,67679,67840,67841,67842,67843,67844,67845,67846,67847,67848,67849,67850,67851,67852,67853,67854,67855,67856,67857,67858,67859,67860,67861,67862,67863,67864,67865,67866,67867,67872,67873,67874,67875,67876,67877,67878,67879,67880,67881,67882,67883,67884,67885,67886,67887,67888,67889,67890,67891,67892,67893,67894,67895,67896,67897,67903,67968,67969,67970,67971,67972,67973,67974,67975,67976,67977,67978,67979,67980,67981,67982,67983,67984,67985,67986,67987,67988,67989,67990,67991,67992,67993,67994,67995,67996,67997,67998,67999,68e3,68001,68002,68003,68004,68005,68006,68007,68008,68009,68010,68011,68012,68013,68014,68015,68016,68017,68018,68019,68020,68021,68022,68023,68030,68031,68096,68112,68113,68114,68115,68117,68118,68119,68121,68122,68123,68124,68125,68126,68127,68128,68129,68130,68131,68132,68133,68134,68135,68136,68137,68138,68139,68140,68141,68142,68143,68144,68145,68146,68147,68160,68161,68162,68163,68164,68165,68166,68167,68176,68177,68178,68179,68180,68181,68182,68183,68184,68192,68193,68194,68195,68196,68197,68198,68199,68200,68201,68202,68203,68204,68205,68206,68207,68208,68209,68210,68211,68212,68213,68214,68215,68216,68217,68218,68219,68220,68221,68222,68223,68352,68353,68354,68355,68356,68357,68358,68359,68360,68361,68362,68363,68364,68365,68366,68367,68368,68369,68370,68371,68372,68373,68374,68375,68376,68377,68378,68379,68380,68381,68382,68383,68384,68385,68386,68387,68388,68389,68390,68391,68392,68393,68394,68395,68396,68397,68398,68399,68400,68401,68402,68403,68404,68405,68416,68417,68418,68419,68420,68421,68422,68423,68424,68425,68426,68427,68428,68429,68430,68431,68432,68433,68434,68435,68436,68437,68440,68441,68442,68443,68444,68445,68446,68447,68448,68449,68450,68451,68452,68453,68454,68455,68456,68457,68458,68459,68460,68461,68462,68463,68464,68465,68466,68472,68473,68474,68475,68476,68477,68478,68479,68608,68609,68610,68611,68612,68613,68614,68615,68616,68617,68618,68619,68620,68621,68622,68623,68624,68625,68626,68627,68628,68629,68630,68631,68632,68633,68634,68635,68636,68637,68638,68639,68640,68641,68642,68643,68644,68645,68646,68647,68648,68649,68650,68651,68652,68653,68654,68655,68656,68657,68658,68659,68660,68661,68662,68663,68664,68665,68666,68667,68668,68669,68670,68671,68672,68673,68674,68675,68676,68677,68678,68679,68680,126464,126465,126466,126467,126469,126470,126471,126472,126473,126474,126475,126476,126477,126478,126479,126480,126481,126482,126483,126484,126485,126486,126487,126488,126489,126490,126491,126492,126493,126494,126495,126497,126498,126500,126503,126505,126506,126507,126508,126509,126510,126511,126512,126513,126514,126516,126517,126518,126519,126521,126523,126530,126535,126537,126539,126541,126542,126543,126545,126546,126548,126551,126553,126555,126557,126559,126561,126562,126564,126567,126568,126569,126570,126572,126573,126574,126575,126576,126577,126578,126580,126581,126582,126583,126585,126586,126587,126588,126590,126592,126593,126594,126595,126596,126597,126598,126599,126600,126601,126603,126604,126605,126606,126607,126608,126609,126610,126611,126612,126613,126614,126615,126616,126617,126618,126619,126625,126626,126627,126629,126630,126631,126632,126633,126635,126636,126637,126638,126639,126640,126641,126642,126643,126644,126645,126646,126647,126648,126649,126650,126651,1114109];s.prototype.applyStyles=function(e,t){for(var n in t=t||this.div,e)e.hasOwnProperty(n)&&(t.style[n]=e[n])},s.prototype.formatStyle=function(e,t){return 0===e?0:e+t},c.prototype=f(s.prototype),c.prototype.constructor=c,d.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},d.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},d.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},d.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},d.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},d.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},d.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},d.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,n=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,a=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||a,height:e.height||t,bottom:e.bottom||a+(e.height||t),width:e.width||n}},u.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},u.convertCueToDOMTree=function(e,t){return e&&t?o(e,t):null},u.processCues=function(e,t,n){if(!e||!t||!n)return null;for(;n.firstChild;)n.removeChild(n.firstChild);var a=e.document.createElement("div");if(a.style.position="absolute",a.style.left="0",a.style.right="0",a.style.top="0",a.style.bottom="0",a.style.margin="1.5%",n.appendChild(a),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}(t)){var i=[],r=d.getSimpleBoxPosition(a),o={font:Math.round(.05*r.height*100)/100+"px sans-serif"};!function(){for(var n,s,u=0;u<t.length;u++)s=t[u],n=new c(e,s,o),a.appendChild(n.div),l(0,n,r,i),s.displayState=n.div,i.push(d.getSimpleBoxPosition(n))}()}else for(var s=0;s<t.length;s++)a.appendChild(t[s].displayState)},u.Parser=function(e,t,n){n||(n=t,t={}),t||(t={}),this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]},u.Parser.prototype={reportOrThrowError:function(e){if(!(e instanceof t))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){function n(){for(var e=s.buffer,t=0;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var n=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,s.buffer=e.substr(t),n}function o(e){i(e,function(e,t){"Region"===e&&function(e){var t=new a;if(i(e,function(e,n){switch(e){case"id":t.set(e,n);break;case"width":t.percent(e,n);break;case"lines":t.integer(e,n);break;case"regionanchor":case"viewportanchor":var i=n.split(",");if(2!==i.length)break;var r=new a;if(r.percent("x",i[0]),r.percent("y",i[1]),!r.has("x")||!r.has("y"))break;t.set(e+"X",r.get("x")),t.set(e+"Y",r.get("y"));break;case"scroll":t.alt(e,n,["up"])}},/=/,/\s/),t.has("id")){var n=new(s.vttjs.VTTRegion||s.window.VTTRegion);n.width=t.get("width",100),n.lines=t.get("lines",3),n.regionAnchorX=t.get("regionanchorX",0),n.regionAnchorY=t.get("regionanchorY",100),n.viewportAnchorX=t.get("viewportanchorX",0),n.viewportAnchorY=t.get("viewportanchorY",100),n.scroll=t.get("scroll",""),s.onregion&&s.onregion(n),s.regionList.push({id:t.get("id"),region:n})}}(t)},/:/)}var s=this;e&&(s.buffer+=s.decoder.decode(e,{stream:!0}));try{var c;if("INITIAL"===s.state){if(!/\r\n|\n/.test(s.buffer))return this;var d=(c=n()).match(/^WEBVTT([ \t].*)?$/);if(!d||!d[0])throw new t(t.Errors.BadSignature);s.state="HEADER"}for(var l=!1;s.buffer;){if(!/\r\n|\n/.test(s.buffer))return this;switch(l?l=!1:c=n(),s.state){case"HEADER":/:/.test(c)?o(c):c||(s.state="ID");continue;case"NOTE":c||(s.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(c)){s.state="NOTE";break}if(!c)continue;if(s.cue=new(s.vttjs.VTTCue||s.window.VTTCue)(0,0,""),s.state="CUE",-1===c.indexOf("--\x3e")){s.cue.id=c;continue}case"CUE":try{r(c,s.cue,s.regionList)}catch(e){s.reportOrThrowError(e),s.cue=null,s.state="BADCUE";continue}s.state="CUETEXT";continue;case"CUETEXT":var u=-1!==c.indexOf("--\x3e");if(!c||u&&(l=!0)){s.oncue&&s.oncue(s.cue),s.cue=null,s.state="ID";continue}s.cue.text&&(s.cue.text+="\n"),s.cue.text+=c;continue;case"BADCUE":c||(s.state="ID");continue}}}catch(e){s.reportOrThrowError(e),"CUETEXT"===s.state&&s.cue&&s.oncue&&s.oncue(s.cue),s.cue=null,s.state="INITIAL"===s.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new t(t.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this}},e.WebVTT=u}(this,this.vttjs)}.bind(window||this)()}).call(this,n(21),n(11),n(23).setImmediate,n(23).clearImmediate)},3405:function(e,t,n){var a=n(2101);e.exports={amp:a}}}]);